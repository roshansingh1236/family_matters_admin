(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();function l1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var np={exports:{}},Vc={};var Yv;function o1(){if(Yv)return Vc;Yv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:n,type:s,key:d,ref:l!==void 0?l:null,props:c}}return Vc.Fragment=e,Vc.jsx=t,Vc.jsxs=t,Vc}var Qv;function c1(){return Qv||(Qv=1,np.exports=o1()),np.exports}var i=c1(),rp={exports:{}},ze={};var Xv;function u1(){if(Xv)return ze;Xv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function k(V){return V===null||typeof V!="object"?null:(V=w&&V[w]||V["@@iterator"],typeof V=="function"?V:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,I={};function z(V,W,ie){this.props=V,this.context=W,this.refs=I,this.updater=ie||D}z.prototype.isReactComponent={},z.prototype.setState=function(V,W){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,W,"setState")},z.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function A(){}A.prototype=z.prototype;function q(V,W,ie){this.props=V,this.context=W,this.refs=I,this.updater=ie||D}var K=q.prototype=new A;K.constructor=q,U(K,z.prototype),K.isPureReactComponent=!0;var F=Array.isArray;function ne(){}var O={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function j(V,W,ie){var we=ie.ref;return{$$typeof:n,type:V,key:W,ref:we!==void 0?we:null,props:ie}}function C(V,W){return j(V.type,W,V.props)}function T(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function S(V){var W={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ie){return W[ie]})}var M=/\/+/g;function me(V,W){return typeof V=="object"&&V!==null&&V.key!=null?S(""+V.key):W.toString(36)}function Te(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ne,ne):(V.status="pending",V.then(function(W){V.status==="pending"&&(V.status="fulfilled",V.value=W)},function(W){V.status==="pending"&&(V.status="rejected",V.reason=W)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function X(V,W,ie,we,G){var he=typeof V;(he==="undefined"||he==="boolean")&&(V=null);var xe=!1;if(V===null)xe=!0;else switch(he){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(V.$$typeof){case n:case e:xe=!0;break;case x:return xe=V._init,X(xe(V._payload),W,ie,we,G)}}if(xe)return G=G(V),xe=we===""?"."+me(V,0):we,F(G)?(ie="",xe!=null&&(ie=xe.replace(M,"$&/")+"/"),X(G,W,ie,"",function(rt){return rt})):G!=null&&(T(G)&&(G=C(G,ie+(G.key==null||V&&V.key===G.key?"":(""+G.key).replace(M,"$&/")+"/")+xe)),W.push(G)),1;xe=0;var Ee=we===""?".":we+":";if(F(V))for(var Be=0;Be<V.length;Be++)we=V[Be],he=Ee+me(we,Be),xe+=X(we,W,ie,he,G);else if(Be=k(V),typeof Be=="function")for(V=Be.call(V),Be=0;!(we=V.next()).done;)we=we.value,he=Ee+me(we,Be++),xe+=X(we,W,ie,he,G);else if(he==="object"){if(typeof V.then=="function")return X(Te(V),W,ie,we,G);throw W=String(V),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return xe}function H(V,W,ie){if(V==null)return V;var we=[],G=0;return X(V,we,"","",function(he){return W.call(ie,he,G++)}),we}function ue(V){if(V._status===-1){var W=V._result;W=W(),W.then(function(ie){(V._status===0||V._status===-1)&&(V._status=1,V._result=ie)},function(ie){(V._status===0||V._status===-1)&&(V._status=2,V._result=ie)}),V._status===-1&&(V._status=0,V._result=W)}if(V._status===1)return V._result.default;throw V._result}var ge=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},ee={map:H,forEach:function(V,W,ie){H(V,function(){W.apply(this,arguments)},ie)},count:function(V){var W=0;return H(V,function(){W++}),W},toArray:function(V){return H(V,function(W){return W})||[]},only:function(V){if(!T(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return ze.Activity=v,ze.Children=ee,ze.Component=z,ze.Fragment=t,ze.Profiler=l,ze.PureComponent=q,ze.StrictMode=s,ze.Suspense=g,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,ze.__COMPILER_RUNTIME={__proto__:null,c:function(V){return O.H.useMemoCache(V)}},ze.cache=function(V){return function(){return V.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(V,W,ie){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var we=U({},V.props),G=V.key;if(W!=null)for(he in W.key!==void 0&&(G=""+W.key),W)!L.call(W,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&W.ref===void 0||(we[he]=W[he]);var he=arguments.length-2;if(he===1)we.children=ie;else if(1<he){for(var xe=Array(he),Ee=0;Ee<he;Ee++)xe[Ee]=arguments[Ee+2];we.children=xe}return j(V.type,G,we)},ze.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},ze.createElement=function(V,W,ie){var we,G={},he=null;if(W!=null)for(we in W.key!==void 0&&(he=""+W.key),W)L.call(W,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(G[we]=W[we]);var xe=arguments.length-2;if(xe===1)G.children=ie;else if(1<xe){for(var Ee=Array(xe),Be=0;Be<xe;Be++)Ee[Be]=arguments[Be+2];G.children=Ee}if(V&&V.defaultProps)for(we in xe=V.defaultProps,xe)G[we]===void 0&&(G[we]=xe[we]);return j(V,he,G)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(V){return{$$typeof:f,render:V}},ze.isValidElement=T,ze.lazy=function(V){return{$$typeof:x,_payload:{_status:-1,_result:V},_init:ue}},ze.memo=function(V,W){return{$$typeof:p,type:V,compare:W===void 0?null:W}},ze.startTransition=function(V){var W=O.T,ie={};O.T=ie;try{var we=V(),G=O.S;G!==null&&G(ie,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(ne,ge)}catch(he){ge(he)}finally{W!==null&&ie.types!==null&&(W.types=ie.types),O.T=W}},ze.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},ze.use=function(V){return O.H.use(V)},ze.useActionState=function(V,W,ie){return O.H.useActionState(V,W,ie)},ze.useCallback=function(V,W){return O.H.useCallback(V,W)},ze.useContext=function(V){return O.H.useContext(V)},ze.useDebugValue=function(){},ze.useDeferredValue=function(V,W){return O.H.useDeferredValue(V,W)},ze.useEffect=function(V,W){return O.H.useEffect(V,W)},ze.useEffectEvent=function(V){return O.H.useEffectEvent(V)},ze.useId=function(){return O.H.useId()},ze.useImperativeHandle=function(V,W,ie){return O.H.useImperativeHandle(V,W,ie)},ze.useInsertionEffect=function(V,W){return O.H.useInsertionEffect(V,W)},ze.useLayoutEffect=function(V,W){return O.H.useLayoutEffect(V,W)},ze.useMemo=function(V,W){return O.H.useMemo(V,W)},ze.useOptimistic=function(V,W){return O.H.useOptimistic(V,W)},ze.useReducer=function(V,W,ie){return O.H.useReducer(V,W,ie)},ze.useRef=function(V){return O.H.useRef(V)},ze.useState=function(V){return O.H.useState(V)},ze.useSyncExternalStore=function(V,W,ie){return O.H.useSyncExternalStore(V,W,ie)},ze.useTransition=function(){return O.H.useTransition()},ze.version="19.2.0",ze}var Wv;function m0(){return Wv||(Wv=1,rp.exports=u1()),rp.exports}var E=m0();const Hh=l1(E),Le=n=>typeof n=="string",zc=()=>{let n,e;const t=new Promise((s,l)=>{n=s,e=l});return t.resolve=n,t.reject=e,t},Jv=n=>n==null?"":""+n,d1=(n,e,t)=>{n.forEach(s=>{e[s]&&(t[s]=e[s])})},h1=/###/g,Zv=n=>n&&n.indexOf("###")>-1?n.replace(h1,"."):n,ew=n=>!n||Le(n),tu=(n,e,t)=>{const s=Le(e)?e.split("."):e;let l=0;for(;l<s.length-1;){if(ew(n))return{};const c=Zv(s[l]);!n[c]&&t&&(n[c]=new t),Object.prototype.hasOwnProperty.call(n,c)?n=n[c]:n={},++l}return ew(n)?{}:{obj:n,k:Zv(s[l])}},tw=(n,e,t)=>{const{obj:s,k:l}=tu(n,e,Object);if(s!==void 0||e.length===1){s[l]=t;return}let c=e[e.length-1],d=e.slice(0,e.length-1),f=tu(n,d,Object);for(;f.obj===void 0&&d.length;)c=`${d[d.length-1]}.${c}`,d=d.slice(0,d.length-1),f=tu(n,d,Object),f?.obj&&typeof f.obj[`${f.k}.${c}`]<"u"&&(f.obj=void 0);f.obj[`${f.k}.${c}`]=t},f1=(n,e,t,s)=>{const{obj:l,k:c}=tu(n,e,Object);l[c]=l[c]||[],l[c].push(t)},$h=(n,e)=>{const{obj:t,k:s}=tu(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,s))return t[s]},m1=(n,e,t)=>{const s=$h(n,t);return s!==void 0?s:$h(e,t)},ON=(n,e,t)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in n?Le(n[s])||n[s]instanceof String||Le(e[s])||e[s]instanceof String?t&&(n[s]=e[s]):ON(n[s],e[s],t):n[s]=e[s]);return n},no=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var g1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const p1=n=>Le(n)?n.replace(/[&<>"'\/]/g,e=>g1[e]):n;class y1{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const x1=[" ",",","?","!",";"],b1=new y1(20),v1=(n,e,t)=>{e=e||"",t=t||"";const s=x1.filter(d=>e.indexOf(d)<0&&t.indexOf(d)<0);if(s.length===0)return!0;const l=b1.getRegExp(`(${s.map(d=>d==="?"?"\\?":d).join("|")})`);let c=!l.test(n);if(!c){const d=n.indexOf(t);d>0&&!l.test(n.substring(0,d))&&(c=!0)}return c},Op=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const s=e.split(t);let l=n;for(let c=0;c<s.length;){if(!l||typeof l!="object")return;let d,f="";for(let g=c;g<s.length;++g)if(g!==c&&(f+=t),f+=s[g],d=l[f],d!==void 0){if(["string","number","boolean"].indexOf(typeof d)>-1&&g<s.length-1)continue;c+=g-c+1;break}l=d}return l},fu=n=>n?.replace("_","-"),w1={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};let _1=class Mp{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||w1,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,l){return l&&!this.debug?null:(Le(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Mp(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Mp(this.logger,e)}};var ns=new _1;class xf{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const l=this.observers[s].get(t)||0;this.observers[s].set(t,l+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([l,c])=>{for(let d=0;d<c;d++)l(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([l,c])=>{for(let d=0;d<c;d++)l.apply(l,[e,...t])})}}class nw extends xf{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s,l={}){const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,d=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure;let f;e.indexOf(".")>-1?f=e.split("."):(f=[e,t],s&&(Array.isArray(s)?f.push(...s):Le(s)&&c?f.push(...s.split(c)):f.push(s)));const g=$h(this.data,f);return!g&&!t&&!s&&e.indexOf(".")>-1&&(e=f[0],t=f[1],s=f.slice(2).join(".")),g||!d||!Le(s)?g:Op(this.data?.[e]?.[t],s,c)}addResource(e,t,s,l,c={silent:!1}){const d=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator;let f=[e,t];s&&(f=f.concat(d?s.split(d):s)),e.indexOf(".")>-1&&(f=e.split("."),l=t,t=f[1]),this.addNamespaces(t),tw(this.data,f,l),c.silent||this.emit("added",e,t,s,l)}addResources(e,t,s,l={silent:!1}){for(const c in s)(Le(s[c])||Array.isArray(s[c]))&&this.addResource(e,t,c,s[c],{silent:!0});l.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,l,c,d={silent:!1,skipCopy:!1}){let f=[e,t];e.indexOf(".")>-1&&(f=e.split("."),l=s,s=t,t=f[1]),this.addNamespaces(t);let g=$h(this.data,f)||{};d.skipCopy||(s=JSON.parse(JSON.stringify(s))),l?ON(g,s,c):g={...g,...s},tw(this.data,f,g),d.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(l=>t[l]&&Object.keys(t[l]).length>0)}toJSON(){return this.data}}var MN={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,s,l){return n.forEach(c=>{e=this.processors[c]?.process(e,t,s,l)??e}),e}};const PN=Symbol("i18next/PATH_KEY");function N1(){const n=[],e=Object.create(null);let t;return e.get=(s,l)=>(t?.revoke?.(),l===PN?n:(n.push(l),t=Proxy.revocable(s,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Pp(n,e){const{[PN]:t}=n(N1());return t.join(e?.keySeparator??".")}const rw={},sp=n=>!Le(n)&&typeof n!="boolean"&&typeof n!="number";class Gh extends xf{constructor(e,t={}){super(),d1(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ns.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const s={...t};if(e==null)return!1;const l=this.resolve(e,s);if(l?.res===void 0)return!1;const c=sp(l.res);return!(s.returnObjects===!1&&c)}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const l=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let c=t.ns||this.options.defaultNS||[];const d=s&&e.indexOf(s)>-1,f=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!v1(e,s,l);if(d&&!f){const g=e.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:e,namespaces:Le(c)?[c]:c};const p=e.split(s);(s!==l||s===l&&this.options.ns.indexOf(p[0])>-1)&&(c=p.shift()),e=p.join(l)}return{key:e,namespaces:Le(c)?[c]:c}}translate(e,t,s){let l=typeof t=="object"?{...t}:t;if(typeof l!="object"&&this.options.overloadTranslationOptionHandler&&(l=this.options.overloadTranslationOptionHandler(arguments)),typeof l=="object"&&(l={...l}),l||(l={}),e==null)return"";typeof e=="function"&&(e=Pp(e,{...this.options,...l})),Array.isArray(e)||(e=[String(e)]);const c=l.returnDetails!==void 0?l.returnDetails:this.options.returnDetails,d=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,{key:f,namespaces:g}=this.extractFromKey(e[e.length-1],l),p=g[g.length-1];let x=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;x===void 0&&(x=":");const v=l.lng||this.language,w=l.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v?.toLowerCase()==="cimode")return w?c?{res:`${p}${x}${f}`,usedKey:f,exactUsedKey:f,usedLng:v,usedNS:p,usedParams:this.getUsedParamsDetails(l)}:`${p}${x}${f}`:c?{res:f,usedKey:f,exactUsedKey:f,usedLng:v,usedNS:p,usedParams:this.getUsedParamsDetails(l)}:f;const k=this.resolve(e,l);let D=k?.res;const U=k?.usedKey||f,I=k?.exactUsedKey||f,z=["[object Number]","[object Function]","[object RegExp]"],A=l.joinArrays!==void 0?l.joinArrays:this.options.joinArrays,q=!this.i18nFormat||this.i18nFormat.handleAsObject,K=l.count!==void 0&&!Le(l.count),F=Gh.hasDefaultValue(l),ne=K?this.pluralResolver.getSuffix(v,l.count,l):"",O=l.ordinal&&K?this.pluralResolver.getSuffix(v,l.count,{ordinal:!1}):"",L=K&&!l.ordinal&&l.count===0,j=L&&l[`defaultValue${this.options.pluralSeparator}zero`]||l[`defaultValue${ne}`]||l[`defaultValue${O}`]||l.defaultValue;let C=D;q&&!D&&F&&(C=j);const T=sp(C),S=Object.prototype.toString.apply(C);if(q&&C&&T&&z.indexOf(S)<0&&!(Le(A)&&Array.isArray(C))){if(!l.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const M=this.options.returnedObjectHandler?this.options.returnedObjectHandler(U,C,{...l,ns:g}):`key '${f} (${this.language})' returned an object instead of string.`;return c?(k.res=M,k.usedParams=this.getUsedParamsDetails(l),k):M}if(d){const M=Array.isArray(C),me=M?[]:{},Te=M?I:U;for(const X in C)if(Object.prototype.hasOwnProperty.call(C,X)){const H=`${Te}${d}${X}`;F&&!D?me[X]=this.translate(H,{...l,defaultValue:sp(j)?j[X]:void 0,joinArrays:!1,ns:g}):me[X]=this.translate(H,{...l,joinArrays:!1,ns:g}),me[X]===H&&(me[X]=C[X])}D=me}}else if(q&&Le(A)&&Array.isArray(D))D=D.join(A),D&&(D=this.extendTranslation(D,e,l,s));else{let M=!1,me=!1;!this.isValidLookup(D)&&F&&(M=!0,D=j),this.isValidLookup(D)||(me=!0,D=f);const X=(l.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&me?void 0:D,H=F&&j!==D&&this.options.updateMissing;if(me||M||H){if(this.logger.log(H?"updateKey":"missingKey",v,p,f,H?j:D),d){const V=this.resolve(f,{...l,keySeparator:!1});V&&V.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ue=[];const ge=this.languageUtils.getFallbackCodes(this.options.fallbackLng,l.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ge&&ge[0])for(let V=0;V<ge.length;V++)ue.push(ge[V]);else this.options.saveMissingTo==="all"?ue=this.languageUtils.toResolveHierarchy(l.lng||this.language):ue.push(l.lng||this.language);const ee=(V,W,ie)=>{const we=F&&ie!==D?ie:X;this.options.missingKeyHandler?this.options.missingKeyHandler(V,p,W,we,H,l):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(V,p,W,we,H,l),this.emit("missingKey",V,p,W,D)};this.options.saveMissing&&(this.options.saveMissingPlurals&&K?ue.forEach(V=>{const W=this.pluralResolver.getSuffixes(V,l);L&&l[`defaultValue${this.options.pluralSeparator}zero`]&&W.indexOf(`${this.options.pluralSeparator}zero`)<0&&W.push(`${this.options.pluralSeparator}zero`),W.forEach(ie=>{ee([V],f+ie,l[`defaultValue${ie}`]||j)})}):ee(ue,f,j))}D=this.extendTranslation(D,e,l,k,s),me&&D===f&&this.options.appendNamespaceToMissingKey&&(D=`${p}${x}${f}`),(me||M)&&this.options.parseMissingKeyHandler&&(D=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${p}${x}${f}`:f,M?D:void 0,l))}return c?(k.res=D,k.usedParams=this.getUsedParamsDetails(l),k):D}extendTranslation(e,t,s,l,c){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const g=Le(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let p;if(g){const v=e.match(this.interpolator.nestingRegexp);p=v&&v.length}let x=s.replace&&!Le(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(x={...this.options.interpolation.defaultVariables,...x}),e=this.interpolator.interpolate(e,x,s.lng||this.language||l.usedLng,s),g){const v=e.match(this.interpolator.nestingRegexp),w=v&&v.length;p<w&&(s.nest=!1)}!s.lng&&l&&l.res&&(s.lng=this.language||l.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...v)=>c?.[0]===v[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${t[0]}`),null):this.translate(...v,t),s)),s.interpolation&&this.interpolator.reset()}const d=s.postProcess||this.options.postProcess,f=Le(d)?[d]:d;return e!=null&&f?.length&&s.applyPostProcessor!==!1&&(e=MN.handle(f,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...l,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,t={}){let s,l,c,d,f;return Le(e)&&(e=[e]),e.forEach(g=>{if(this.isValidLookup(s))return;const p=this.extractFromKey(g,t),x=p.key;l=x;let v=p.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const w=t.count!==void 0&&!Le(t.count),k=w&&!t.ordinal&&t.count===0,D=t.context!==void 0&&(Le(t.context)||typeof t.context=="number")&&t.context!=="",U=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);v.forEach(I=>{this.isValidLookup(s)||(f=I,!rw[`${U[0]}-${I}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(f)&&(rw[`${U[0]}-${I}`]=!0,this.logger.warn(`key "${l}" for languages "${U.join(", ")}" won't get resolved as namespace "${f}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),U.forEach(z=>{if(this.isValidLookup(s))return;d=z;const A=[x];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(A,x,z,I,t);else{let K;w&&(K=this.pluralResolver.getSuffix(z,t.count,t));const F=`${this.options.pluralSeparator}zero`,ne=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(w&&(t.ordinal&&K.indexOf(ne)===0&&A.push(x+K.replace(ne,this.options.pluralSeparator)),A.push(x+K),k&&A.push(x+F)),D){const O=`${x}${this.options.contextSeparator||"_"}${t.context}`;A.push(O),w&&(t.ordinal&&K.indexOf(ne)===0&&A.push(O+K.replace(ne,this.options.pluralSeparator)),A.push(O+K),k&&A.push(O+F))}}let q;for(;q=A.pop();)this.isValidLookup(s)||(c=q,s=this.getResource(z,I,q,t))}))})}),{res:s,usedKey:l,exactUsedKey:c,usedLng:d,usedNS:f}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s,l={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,s,l):this.resourceStore.getResource(e,t,s,l)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!Le(e.replace);let l=s?e.replace:e;if(s&&typeof e.count<"u"&&(l.count=e.count),this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),!s){l={...l};for(const c of t)delete l[c]}return l}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}class sw{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ns.create("languageUtils")}getScriptPartFromCode(e){if(e=fu(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=fu(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Le(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const l=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(l))&&(t=l)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const l=this.getScriptPartFromCode(s);if(this.isSupportedCode(l))return t=l;const c=this.getLanguagePartFromCode(s);if(this.isSupportedCode(c))return t=c;t=this.options.supportedLngs.find(d=>{if(d===c)return d;if(!(d.indexOf("-")<0&&c.indexOf("-")<0)&&(d.indexOf("-")>0&&c.indexOf("-")<0&&d.substring(0,d.indexOf("-"))===c||d.indexOf(c)===0&&c.length>1))return d})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Le(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),l=[],c=d=>{d&&(this.isSupportedCode(d)?l.push(d):this.logger.warn(`rejecting language code not found in supportedLngs: ${d}`))};return Le(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&c(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&c(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&c(this.getLanguagePartFromCode(e))):Le(e)&&c(this.formatLanguageCode(e)),s.forEach(d=>{l.indexOf(d)<0&&c(this.formatLanguageCode(d))}),l}}const aw={zero:0,one:1,two:2,few:3,many:4,other:5},iw={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class j1{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=ns.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const s=fu(e==="dev"?"en":e),l=t.ordinal?"ordinal":"cardinal",c=JSON.stringify({cleanedCode:s,type:l});if(c in this.pluralRulesCache)return this.pluralRulesCache[c];let d;try{d=new Intl.PluralRules(s,{type:l})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),iw;if(!e.match(/-|_/))return iw;const g=this.languageUtils.getLanguagePartFromCode(e);d=this.getRule(g,t)}return this.pluralRulesCache[c]=d,d}needsPlural(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,s={}){return this.getSuffixes(e,s).map(l=>`${t}${l}`)}getSuffixes(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((l,c)=>aw[l]-aw[c]).map(l=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${l}`):[]}getSuffix(e,t,s={}){const l=this.getRule(e,s);return l?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${l.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,s))}}const lw=(n,e,t,s=".",l=!0)=>{let c=m1(n,e,t);return!c&&l&&Le(t)&&(c=Op(n,t,s),c===void 0&&(c=Op(e,t,s))),c},ap=n=>n.replace(/\$/g,"$$$$");class E1{constructor(e={}){this.logger=ns.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:l,prefix:c,prefixEscaped:d,suffix:f,suffixEscaped:g,formatSeparator:p,unescapeSuffix:x,unescapePrefix:v,nestingPrefix:w,nestingPrefixEscaped:k,nestingSuffix:D,nestingSuffixEscaped:U,nestingOptionsSeparator:I,maxReplaces:z,alwaysFormat:A}=e.interpolation;this.escape=t!==void 0?t:p1,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=l!==void 0?l:!1,this.prefix=c?no(c):d||"{{",this.suffix=f?no(f):g||"}}",this.formatSeparator=p||",",this.unescapePrefix=x?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":x||"",this.nestingPrefix=w?no(w):k||no("$t("),this.nestingSuffix=D?no(D):U||no(")"),this.nestingOptionsSeparator=I||",",this.maxReplaces=z||1e3,this.alwaysFormat=A!==void 0?A:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>t?.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,s,l){let c,d,f;const g=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},p=k=>{if(k.indexOf(this.formatSeparator)<0){const z=lw(t,g,k,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(z,void 0,s,{...l,...t,interpolationkey:k}):z}const D=k.split(this.formatSeparator),U=D.shift().trim(),I=D.join(this.formatSeparator).trim();return this.format(lw(t,g,U,this.options.keySeparator,this.options.ignoreJSONStructure),I,s,{...l,...t,interpolationkey:U})};this.resetRegExp();const x=l?.missingInterpolationHandler||this.options.missingInterpolationHandler,v=l?.interpolation?.skipOnVariables!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:k=>ap(k)},{regex:this.regexp,safeValue:k=>this.escapeValue?ap(this.escape(k)):ap(k)}].forEach(k=>{for(f=0;c=k.regex.exec(e);){const D=c[1].trim();if(d=p(D),d===void 0)if(typeof x=="function"){const I=x(e,c,l);d=Le(I)?I:""}else if(l&&Object.prototype.hasOwnProperty.call(l,D))d="";else if(v){d=c[0];continue}else this.logger.warn(`missed to pass in variable ${D} for interpolating ${e}`),d="";else!Le(d)&&!this.useRawValueToEscape&&(d=Jv(d));const U=k.safeValue(d);if(e=e.replace(c[0],U),v?(k.regex.lastIndex+=d.length,k.regex.lastIndex-=c[0].length):k.regex.lastIndex=0,f++,f>=this.maxReplaces)break}}),e}nest(e,t,s={}){let l,c,d;const f=(g,p)=>{const x=this.nestingOptionsSeparator;if(g.indexOf(x)<0)return g;const v=g.split(new RegExp(`${x}[ ]*{`));let w=`{${v[1]}`;g=v[0],w=this.interpolate(w,d);const k=w.match(/'/g),D=w.match(/"/g);((k?.length??0)%2===0&&!D||D.length%2!==0)&&(w=w.replace(/'/g,'"'));try{d=JSON.parse(w),p&&(d={...p,...d})}catch(U){return this.logger.warn(`failed parsing options string in nesting for key ${g}`,U),`${g}${x}${w}`}return d.defaultValue&&d.defaultValue.indexOf(this.prefix)>-1&&delete d.defaultValue,g};for(;l=this.nestingRegexp.exec(e);){let g=[];d={...s},d=d.replace&&!Le(d.replace)?d.replace:d,d.applyPostProcessor=!1,delete d.defaultValue;const p=/{.*}/.test(l[1])?l[1].lastIndexOf("}")+1:l[1].indexOf(this.formatSeparator);if(p!==-1&&(g=l[1].slice(p).split(this.formatSeparator).map(x=>x.trim()).filter(Boolean),l[1]=l[1].slice(0,p)),c=t(f.call(this,l[1].trim(),d),d),c&&l[0]===e&&!Le(c))return c;Le(c)||(c=Jv(c)),c||(this.logger.warn(`missed to resolve ${l[1]} for nesting ${e}`),c=""),g.length&&(c=g.reduce((x,v)=>this.format(x,v,s.lng,{...s,interpolationkey:l[1].trim()}),c.trim())),e=e.replace(l[0],c),this.regexp.lastIndex=0}return e}}const k1=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const s=n.split("(");e=s[0].toLowerCase().trim();const l=s[1].substring(0,s[1].length-1);e==="currency"&&l.indexOf(":")<0?t.currency||(t.currency=l.trim()):e==="relativetime"&&l.indexOf(":")<0?t.range||(t.range=l.trim()):l.split(";").forEach(d=>{if(d){const[f,...g]=d.split(":"),p=g.join(":").trim().replace(/^'+|'+$/g,""),x=f.trim();t[x]||(t[x]=p),p==="false"&&(t[x]=!1),p==="true"&&(t[x]=!0),isNaN(p)||(t[x]=parseInt(p,10))}})}return{formatName:e,formatOptions:t}},ow=n=>{const e={};return(t,s,l)=>{let c=l;l&&l.interpolationkey&&l.formatParams&&l.formatParams[l.interpolationkey]&&l[l.interpolationkey]&&(c={...c,[l.interpolationkey]:void 0});const d=s+JSON.stringify(c);let f=e[d];return f||(f=n(fu(s),l),e[d]=f),f(t)}},S1=n=>(e,t,s)=>n(fu(t),s)(e);class T1{constructor(e={}){this.logger=ns.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const s=t.cacheInBuiltFormats?ow:S1;this.formats={number:s((l,c)=>{const d=new Intl.NumberFormat(l,{...c});return f=>d.format(f)}),currency:s((l,c)=>{const d=new Intl.NumberFormat(l,{...c,style:"currency"});return f=>d.format(f)}),datetime:s((l,c)=>{const d=new Intl.DateTimeFormat(l,{...c});return f=>d.format(f)}),relativetime:s((l,c)=>{const d=new Intl.RelativeTimeFormat(l,{...c});return f=>d.format(f,c.range||"day")}),list:s((l,c)=>{const d=new Intl.ListFormat(l,{...c});return f=>d.format(f)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=ow(t)}format(e,t,s,l={}){const c=t.split(this.formatSeparator);if(c.length>1&&c[0].indexOf("(")>1&&c[0].indexOf(")")<0&&c.find(f=>f.indexOf(")")>-1)){const f=c.findIndex(g=>g.indexOf(")")>-1);c[0]=[c[0],...c.splice(1,f)].join(this.formatSeparator)}return c.reduce((f,g)=>{const{formatName:p,formatOptions:x}=k1(g);if(this.formats[p]){let v=f;try{const w=l?.formatParams?.[l.interpolationkey]||{},k=w.locale||w.lng||l.locale||l.lng||s;v=this.formats[p](f,k,{...x,...l,...w})}catch(w){this.logger.warn(w)}return v}else this.logger.warn(`there was no format function for ${p}`);return f},e)}}const A1=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class C1 extends xf{constructor(e,t,s,l={}){super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=l,this.logger=ns.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=l.maxParallelReads||10,this.readingCalls=0,this.maxRetries=l.maxRetries>=0?l.maxRetries:5,this.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,l.backend,l)}queueLoad(e,t,s,l){const c={},d={},f={},g={};return e.forEach(p=>{let x=!0;t.forEach(v=>{const w=`${p}|${v}`;!s.reload&&this.store.hasResourceBundle(p,v)?this.state[w]=2:this.state[w]<0||(this.state[w]===1?d[w]===void 0&&(d[w]=!0):(this.state[w]=1,x=!1,d[w]===void 0&&(d[w]=!0),c[w]===void 0&&(c[w]=!0),g[v]===void 0&&(g[v]=!0)))}),x||(f[p]=!0)}),(Object.keys(c).length||Object.keys(d).length)&&this.queue.push({pending:d,pendingCount:Object.keys(d).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(c),pending:Object.keys(d),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(g)}}loaded(e,t,s){const l=e.split("|"),c=l[0],d=l[1];t&&this.emit("failedLoading",c,d,t),!t&&s&&this.store.addResourceBundle(c,d,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const f={};this.queue.forEach(g=>{f1(g.loaded,[c],d),A1(g,e),t&&g.errors.push(t),g.pendingCount===0&&!g.done&&(Object.keys(g.loaded).forEach(p=>{f[p]||(f[p]={});const x=g.loaded[p];x.length&&x.forEach(v=>{f[p][v]===void 0&&(f[p][v]=!0)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",f),this.queue=this.queue.filter(g=>!g.done)}read(e,t,s,l=0,c=this.retryTimeout,d){if(!e.length)return d(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:l,wait:c,callback:d});return}this.readingCalls++;const f=(p,x)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(p&&x&&l<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,l+1,c*2,d)},c);return}d(p,x)},g=this.backend[s].bind(this.backend);if(g.length===2){try{const p=g(e,t);p&&typeof p.then=="function"?p.then(x=>f(null,x)).catch(f):f(null,p)}catch(p){f(p)}return}return g(e,t,f)}prepareLoading(e,t,s={},l){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();Le(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Le(t)&&(t=[t]);const c=this.queueLoad(e,t,s,l);if(!c.toLoad.length)return c.pending.length||l(),null;c.toLoad.forEach(d=>{this.loadOne(d)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e,t=""){const s=e.split("|"),l=s[0],c=s[1];this.read(l,c,"read",void 0,void 0,(d,f)=>{d&&this.logger.warn(`${t}loading namespace ${c} for language ${l} failed`,d),!d&&f&&this.logger.log(`${t}loaded namespace ${c} for language ${l}`,f),this.loaded(e,d,f)})}saveMissing(e,t,s,l,c,d={},f=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const g={...d,isUpdate:c},p=this.backend.create.bind(this.backend);if(p.length<6)try{let x;p.length===5?x=p(e,t,s,l,g):x=p(e,t,s,l),x&&typeof x.then=="function"?x.then(v=>f(null,v)).catch(f):f(null,x)}catch(x){f(x)}else p(e,t,s,l,f,g)}!e||!e[0]||this.store.addResource(e[0],t,s,l)}}}const cw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Le(n[1])&&(e.defaultValue=n[1]),Le(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),uw=n=>(Le(n.ns)&&(n.ns=[n.ns]),Le(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Le(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),wh=()=>{},R1=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class nu extends xf{constructor(e={},t){if(super(),this.options=uw(e),this.services={},this.logger=ns,this.modules={external:[]},R1(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Le(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=cw();this.options={...s,...this.options,...uw(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const l=p=>p?typeof p=="function"?new p:p:null;if(!this.options.isClone){this.modules.logger?ns.init(l(this.modules.logger),this.options):ns.init(null,this.options);let p;this.modules.formatter?p=this.modules.formatter:p=T1;const x=new sw(this.options);this.store=new nw(this.options.resources,this.options);const v=this.services;v.logger=ns,v.resourceStore=this.store,v.languageUtils=x,v.pluralResolver=new j1(x,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),p&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(v.formatter=l(p),v.formatter.init&&v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new E1(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new C1(l(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",(k,...D)=>{this.emit(k,...D)}),this.modules.languageDetector&&(v.languageDetector=l(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=l(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new Gh(this.services,this.options),this.translator.on("*",(k,...D)=>{this.emit(k,...D)}),this.modules.external.forEach(k=>{k.init&&k.init(this)})}if(this.format=this.options.interpolation.format,t||(t=wh),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(p=>{this[p]=(...x)=>this.store[p](...x)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(p=>{this[p]=(...x)=>(this.store[p](...x),this)});const f=zc(),g=()=>{const p=(x,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),f.resolve(v),t(x,v)};if(this.languages&&!this.isInitialized)return p(null,this.t.bind(this));this.changeLanguage(this.options.lng,p)};return this.options.resources||!this.options.initAsync?g():setTimeout(g,0),f}loadResources(e,t=wh){let s=t;const l=Le(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(l?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const c=[],d=f=>{if(!f||f==="cimode")return;this.services.languageUtils.toResolveHierarchy(f).forEach(p=>{p!=="cimode"&&c.indexOf(p)<0&&c.push(p)})};l?d(l):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(g=>d(g)),this.options.preload?.forEach?.(f=>d(f)),this.services.backendConnector.load(c,this.options.ns,f=>{!f&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(f)})}else s(null)}reloadResources(e,t,s){const l=zc();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=wh),this.services.backendConnector.reload(e,t,c=>{l.resolve(),s(c)}),l}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&MN.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const s=zc();this.emit("languageChanging",e);const l=f=>{this.language=f,this.languages=this.services.languageUtils.toResolveHierarchy(f),this.resolvedLanguage=void 0,this.setResolvedLanguage(f)},c=(f,g)=>{g?this.isLanguageChangingTo===e&&(l(g),this.translator.changeLanguage(g),this.isLanguageChangingTo=void 0,this.emit("languageChanged",g),this.logger.log("languageChanged",g)):this.isLanguageChangingTo=void 0,s.resolve((...p)=>this.t(...p)),t&&t(f,(...p)=>this.t(...p))},d=f=>{!e&&!f&&this.services.languageDetector&&(f=[]);const g=Le(f)?f:f&&f[0],p=this.store.hasLanguageSomeTranslations(g)?g:this.services.languageUtils.getBestMatchFromCodes(Le(f)?[f]:f);p&&(this.language||l(p),this.translator.language||this.translator.changeLanguage(p),this.services.languageDetector?.cacheUserLanguage?.(p)),this.loadResources(p,x=>{c(x,p)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(e),s}getFixedT(e,t,s){const l=(c,d,...f)=>{let g;typeof d!="object"?g=this.options.overloadTranslationOptionHandler([c,d].concat(f)):g={...d},g.lng=g.lng||l.lng,g.lngs=g.lngs||l.lngs,g.ns=g.ns||l.ns,g.keyPrefix!==""&&(g.keyPrefix=g.keyPrefix||s||l.keyPrefix);const p=this.options.keySeparator||".";let x;return g.keyPrefix&&Array.isArray(c)?x=c.map(v=>(typeof v=="function"&&(v=Pp(v,{...this.options,...d})),`${g.keyPrefix}${p}${v}`)):(typeof c=="function"&&(c=Pp(c,{...this.options,...d})),x=g.keyPrefix?`${g.keyPrefix}${p}${c}`:c),this.t(x,g)};return Le(e)?l.lng=e:l.lngs=e,l.ns=t,l.keyPrefix=s,l}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,c=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const d=(f,g)=>{const p=this.services.backendConnector.state[`${f}|${g}`];return p===-1||p===0||p===2};if(t.precheck){const f=t.precheck(this,d);if(f!==void 0)return f}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||d(s,e)&&(!l||d(c,e)))}loadNamespaces(e,t){const s=zc();return this.options.ns?(Le(e)&&(e=[e]),e.forEach(l=>{this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}),this.loadResources(l=>{s.resolve(),t&&t(l)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=zc();Le(e)&&(e=[e]);const l=this.options.preload||[],c=e.filter(d=>l.indexOf(d)<0&&this.services.languageUtils.isSupportedCode(d));return c.length?(this.options.preload=l.concat(c),this.loadResources(d=>{s.resolve(),t&&t(d)}),s):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const l=new Intl.Locale(e);if(l&&l.getTextInfo){const c=l.getTextInfo();if(c&&c.direction)return c.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new sw(cw());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const s=new nu(e,t);return s.createInstance=nu.createInstance,s}cloneInstance(e={},t=wh){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const l={...this.options,...e,isClone:!0},c=new nu(l);if((e.debug!==void 0||e.prefix!==void 0)&&(c.logger=c.logger.clone(e)),["store","services","language"].forEach(f=>{c[f]=this[f]}),c.services={...this.services},c.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},s){const f=Object.keys(this.store.data).reduce((g,p)=>(g[p]={...this.store.data[p]},g[p]=Object.keys(g[p]).reduce((x,v)=>(x[v]={...g[p][v]},x),g[p]),g),{});c.store=new nw(f,l),c.services.resourceStore=c.store}return c.translator=new Gh(c.services,l),c.translator.on("*",(f,...g)=>{c.emit(f,...g)}),c.init(l,t),c.translator.options=l,c.translator.backendConnector.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Pn=nu.createInstance();Pn.createInstance;Pn.dir;Pn.init;Pn.loadResources;Pn.reloadResources;Pn.use;Pn.changeLanguage;Pn.getFixedT;Pn.t;Pn.exists;Pn.setDefaultNamespace;Pn.hasLoadedNamespace;Pn.loadNamespaces;Pn.loadLanguages;const I1=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,D1={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},O1=n=>D1[n],M1=n=>n.replace(I1,O1);let dw={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:M1};const P1=(n={})=>{dw={...dw,...n}},L1={type:"3rdParty",init(n){P1(n.options.react)}},{slice:U1,forEach:V1}=[];function z1(n){return V1.call(U1.call(arguments,1),e=>{if(e)for(const t in e)n[t]===void 0&&(n[t]=e[t])}),n}function F1(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(n))}const hw=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,B1=function(n,e){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},l=encodeURIComponent(e);let c=`${n}=${l}`;if(s.maxAge>0){const d=s.maxAge-0;if(Number.isNaN(d))throw new Error("maxAge should be a Number");c+=`; Max-Age=${Math.floor(d)}`}if(s.domain){if(!hw.test(s.domain))throw new TypeError("option domain is invalid");c+=`; Domain=${s.domain}`}if(s.path){if(!hw.test(s.path))throw new TypeError("option path is invalid");c+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");c+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(c+="; HttpOnly"),s.secure&&(c+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(c+="; Partitioned"),c},fw={create(n,e,t,s){let l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(l.expires=new Date,l.expires.setTime(l.expires.getTime()+t*60*1e3)),s&&(l.domain=s),document.cookie=B1(n,e,l)},read(n){const e=`${n}=`,t=document.cookie.split(";");for(let s=0;s<t.length;s++){let l=t[s];for(;l.charAt(0)===" ";)l=l.substring(1,l.length);if(l.indexOf(e)===0)return l.substring(e.length,l.length)}return null},remove(n,e){this.create(n,"",-1,e)}};var q1={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return fw.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:t,cookieMinutes:s,cookieDomain:l,cookieOptions:c}=e;t&&typeof document<"u"&&fw.create(t,n,s,l,c)}},H1={name:"querystring",lookup(n){let{lookupQuerystring:e}=n,t;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const c=s.substring(1).split("&");for(let d=0;d<c.length;d++){const f=c[d].indexOf("=");f>0&&c[d].substring(0,f)===e&&(t=c[d].substring(f+1))}}return t}},$1={name:"hash",lookup(n){let{lookupHash:e,lookupFromHashIndex:t}=n,s;if(typeof window<"u"){const{hash:l}=window.location;if(l&&l.length>2){const c=l.substring(1);if(e){const d=c.split("&");for(let f=0;f<d.length;f++){const g=d[f].indexOf("=");g>0&&d[f].substring(0,g)===e&&(s=d[f].substring(g+1))}}if(s)return s;if(!s&&t>-1){const d=l.match(/\/([a-zA-Z-]*)/g);return Array.isArray(d)?d[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return s}};let ro=null;const mw=()=>{if(ro!==null)return ro;try{if(ro=typeof window<"u"&&window.localStorage!==null,!ro)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{ro=!1}return ro};var G1={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&mw())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:t}=e;t&&mw()&&window.localStorage.setItem(t,n)}};let so=null;const gw=()=>{if(so!==null)return so;try{if(so=typeof window<"u"&&window.sessionStorage!==null,!so)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{so=!1}return so};var K1={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&gw())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:t}=e;t&&gw()&&window.sessionStorage.setItem(t,n)}},Y1={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:s,language:l}=navigator;if(t)for(let c=0;c<t.length;c++)e.push(t[c]);s&&e.push(s),l&&e.push(l)}return e.length>0?e:void 0}},Q1={name:"htmlTag",lookup(n){let{htmlTag:e}=n,t;const s=e||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(t=s.getAttribute("lang")),t}},X1={name:"path",lookup(n){let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},W1={name:"subdomain",lookup(n){let{lookupFromSubdomainIndex:e}=n;const t=typeof e=="number"?e+1:1,s=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[t]}};let LN=!1;try{document.cookie,LN=!0}catch{}const UN=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];LN||UN.splice(1,1);const J1=()=>({order:UN,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class VN{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=z1(t,this.options||{},J1()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=l=>l.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(q1),this.addDetector(H1),this.addDetector(G1),this.addDetector(K1),this.addDetector(Y1),this.addDetector(Q1),this.addDetector(X1),this.addDetector(W1),this.addDetector($1)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(s=>{if(this.detectors[s]){let l=this.detectors[s].lookup(this.options);l&&typeof l=="string"&&(l=[l]),l&&(t=t.concat(l))}}),t=t.filter(s=>s!=null&&!F1(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(e,this.options)}))}}VN.type="languageDetector";const pw=Object.assign({}),Yc={};Object.keys(pw).forEach(n=>{const e=n.match(/\.\/([^/]+)\/([^/]+)\.ts$/);if(e){const[,t]=e,s=pw[n];Yc[t]||(Yc[t]={translation:{}}),s.default&&(Yc[t].translation={...Yc[t].translation,...s.default})}});Pn.use(VN).use(L1).init({lng:"en",fallbackLng:"en",debug:!1,resources:Yc,interpolation:{escapeValue:!1}});var ip={exports:{}},Fc={},lp={exports:{}},op={};var yw;function Z1(){return yw||(yw=1,(function(n){function e(X,H){var ue=X.length;X.push(H);e:for(;0<ue;){var ge=ue-1>>>1,ee=X[ge];if(0<l(ee,H))X[ge]=H,X[ue]=ee,ue=ge;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var H=X[0],ue=X.pop();if(ue!==H){X[0]=ue;e:for(var ge=0,ee=X.length,V=ee>>>1;ge<V;){var W=2*(ge+1)-1,ie=X[W],we=W+1,G=X[we];if(0>l(ie,ue))we<ee&&0>l(G,ie)?(X[ge]=G,X[we]=ue,ge=we):(X[ge]=ie,X[W]=ue,ge=W);else if(we<ee&&0>l(G,ue))X[ge]=G,X[we]=ue,ge=we;else break e}}return H}function l(X,H){var ue=X.sortIndex-H.sortIndex;return ue!==0?ue:X.id-H.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();n.unstable_now=function(){return d.now()-f}}var g=[],p=[],x=1,v=null,w=3,k=!1,D=!1,U=!1,I=!1,z=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function K(X){for(var H=t(p);H!==null;){if(H.callback===null)s(p);else if(H.startTime<=X)s(p),H.sortIndex=H.expirationTime,e(g,H);else break;H=t(p)}}function F(X){if(U=!1,K(X),!D)if(t(g)!==null)D=!0,ne||(ne=!0,S());else{var H=t(p);H!==null&&Te(F,H.startTime-X)}}var ne=!1,O=-1,L=5,j=-1;function C(){return I?!0:!(n.unstable_now()-j<L)}function T(){if(I=!1,ne){var X=n.unstable_now();j=X;var H=!0;try{e:{D=!1,U&&(U=!1,A(O),O=-1),k=!0;var ue=w;try{t:{for(K(X),v=t(g);v!==null&&!(v.expirationTime>X&&C());){var ge=v.callback;if(typeof ge=="function"){v.callback=null,w=v.priorityLevel;var ee=ge(v.expirationTime<=X);if(X=n.unstable_now(),typeof ee=="function"){v.callback=ee,K(X),H=!0;break t}v===t(g)&&s(g),K(X)}else s(g);v=t(g)}if(v!==null)H=!0;else{var V=t(p);V!==null&&Te(F,V.startTime-X),H=!1}}break e}finally{v=null,w=ue,k=!1}H=void 0}}finally{H?S():ne=!1}}}var S;if(typeof q=="function")S=function(){q(T)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,me=M.port2;M.port1.onmessage=T,S=function(){me.postMessage(null)}}else S=function(){z(T,0)};function Te(X,H){O=z(function(){X(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(X){switch(w){case 1:case 2:case 3:var H=3;break;default:H=w}var ue=w;w=H;try{return X()}finally{w=ue}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(X,H){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ue=w;w=X;try{return H()}finally{w=ue}},n.unstable_scheduleCallback=function(X,H,ue){var ge=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ge+ue:ge):ue=ge,X){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ue+ee,X={id:x++,callback:H,priorityLevel:X,startTime:ue,expirationTime:ee,sortIndex:-1},ue>ge?(X.sortIndex=ue,e(p,X),t(g)===null&&X===t(p)&&(U?(A(O),O=-1):U=!0,Te(F,ue-ge))):(X.sortIndex=ee,e(g,X),D||k||(D=!0,ne||(ne=!0,S()))),X},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(X){var H=w;return function(){var ue=w;w=H;try{return X.apply(this,arguments)}finally{w=ue}}}})(op)),op}var xw;function eA(){return xw||(xw=1,lp.exports=Z1()),lp.exports}var cp={exports:{}},_n={};var bw;function tA(){if(bw)return _n;bw=1;var n=m0();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,p,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:g,containerInfo:p,implementation:x}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,_n.createPortal=function(g,p){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(g,p,null,x)},_n.flushSync=function(g){var p=d.T,x=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=p,s.p=x,s.d.f()}},_n.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},_n.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},_n.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var x=p.as,v=f(x,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;x==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:k}):x==="script"&&s.d.X(g,{crossOrigin:v,integrity:w,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},_n.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var x=f(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},_n.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var x=p.as,v=f(x,p.crossOrigin);s.d.L(g,x,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},_n.preloadModule=function(g,p){if(typeof g=="string")if(p){var x=f(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},_n.requestFormReset=function(g){s.d.r(g)},_n.unstable_batchedUpdates=function(g,p){return g(p)},_n.useFormState=function(g,p,x){return d.H.useFormState(g,p,x)},_n.useFormStatus=function(){return d.H.useHostTransitionStatus()},_n.version="19.2.0",_n}var vw;function nA(){if(vw)return cp.exports;vw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),cp.exports=tA(),cp.exports}var ww;function rA(){if(ww)return Fc;ww=1;var n=eA(),e=m0(),t=nA();function s(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function c(r){var a=r,o=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(o=a.return),r=a.return;while(r)}return a.tag===3?o:null}function d(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function f(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function g(r){if(c(r)!==r)throw Error(s(188))}function p(r){var a=r.alternate;if(!a){if(a=c(r),a===null)throw Error(s(188));return a!==r?null:r}for(var o=r,u=a;;){var m=o.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===o)return g(m),r;if(y===u)return g(m),a;y=y.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=y;else{for(var _=!1,R=m.child;R;){if(R===o){_=!0,o=m,u=y;break}if(R===u){_=!0,u=m,o=y;break}R=R.sibling}if(!_){for(R=y.child;R;){if(R===o){_=!0,o=y,u=m;break}if(R===u){_=!0,u=y,o=m;break}R=R.sibling}if(!_)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:a}function x(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=x(r),a!==null)return a;r=r.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),q=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function S(r){return r===null||typeof r!="object"?null:(r=T&&r[T]||r["@@iterator"],typeof r=="function"?r:null)}var M=Symbol.for("react.client.reference");function me(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===M?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case U:return"Fragment";case z:return"Profiler";case I:return"StrictMode";case F:return"Suspense";case ne:return"SuspenseList";case j:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case D:return"Portal";case q:return r.displayName||"Context";case A:return(r._context.displayName||"Context")+".Consumer";case K:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case O:return a=r.displayName||null,a!==null?a:me(r.type)||"Memo";case L:a=r._payload,r=r._init;try{return me(r(a))}catch{}}return null}var Te=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},ge=[],ee=-1;function V(r){return{current:r}}function W(r){0>ee||(r.current=ge[ee],ge[ee]=null,ee--)}function ie(r,a){ee++,ge[ee]=r.current,r.current=a}var we=V(null),G=V(null),he=V(null),xe=V(null);function Ee(r,a){switch(ie(he,a),ie(G,r),ie(we,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?yv(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=yv(a),r=xv(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}W(we),ie(we,r)}function Be(){W(we),W(G),W(he)}function rt(r){r.memoizedState!==null&&ie(xe,r);var a=we.current,o=xv(a,r.type);a!==o&&(ie(G,r),ie(we,o))}function bt(r){G.current===r&&(W(we),W(G)),xe.current===r&&(W(xe),Mc._currentValue=ue)}var pe,Ue;function Ae(r){if(pe===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);pe=a&&a[1]||"",Ue=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+r+Ue}var yt=!1;function Yt(r,a){if(!r||yt)return"";yt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(re){var te=re}Reflect.construct(r,[],ce)}else{try{ce.call()}catch(re){te=re}r.call(ce.prototype)}}else{try{throw Error()}catch(re){te=re}(ce=r())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(re){if(re&&te&&typeof re.stack=="string")return[re.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),_=y[0],R=y[1];if(_&&R){var B=_.split(`
`),Z=R.split(`
`);for(m=u=0;u<B.length&&!B[u].includes("DetermineComponentFrameRoot");)u++;for(;m<Z.length&&!Z[m].includes("DetermineComponentFrameRoot");)m++;if(u===B.length||m===Z.length)for(u=B.length-1,m=Z.length-1;1<=u&&0<=m&&B[u]!==Z[m];)m--;for(;1<=u&&0<=m;u--,m--)if(B[u]!==Z[m]){if(u!==1||m!==1)do if(u--,m--,0>m||B[u]!==Z[m]){var ae=`
`+B[u].replace(" at new "," at ");return r.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",r.displayName)),ae}while(1<=u&&0<=m);break}}}finally{yt=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Ae(o):""}function fs(r,a){switch(r.tag){case 26:case 27:case 5:return Ae(r.type);case 16:return Ae("Lazy");case 13:return r.child!==a&&a!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return Yt(r.type,!1);case 11:return Yt(r.type.render,!1);case 1:return Yt(r.type,!0);case 31:return Ae("Activity");default:return""}}function na(r){try{var a="",o=null;do a+=fs(r,o),o=r,r=r.return;while(r);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ra=Object.prototype.hasOwnProperty,Ln=n.unstable_scheduleCallback,hr=n.unstable_cancelCallback,Lo=n.unstable_shouldYield,Uo=n.unstable_requestPaint,dn=n.unstable_now,Yu=n.unstable_getCurrentPriorityLevel,Qt=n.unstable_ImmediatePriority,tn=n.unstable_UserBlockingPriority,ms=n.unstable_NormalPriority,Qu=n.unstable_LowPriority,Vo=n.unstable_IdlePriority,tm=n.log,vi=n.unstable_setDisableYieldValue,sa=null,vn=null;function fr(r){if(typeof tm=="function"&&vi(r),vn&&typeof vn.setStrictMode=="function")try{vn.setStrictMode(sa,r)}catch{}}var Sn=Math.clz32?Math.clz32:Xu,nm=Math.log,zo=Math.LN2;function Xu(r){return r>>>=0,r===0?32:31-(nm(r)/zo|0)|0}var wi=256,qr=262144,aa=4194304;function Ar(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function mr(r,a,o){var u=r.pendingLanes;if(u===0)return 0;var m=0,y=r.suspendedLanes,_=r.pingedLanes;r=r.warmLanes;var R=u&134217727;return R!==0?(u=R&~y,u!==0?m=Ar(u):(_&=R,_!==0?m=Ar(_):o||(o=R&~r,o!==0&&(m=Ar(o))))):(R=u&~y,R!==0?m=Ar(R):_!==0?m=Ar(_):o||(o=u&~r,o!==0&&(m=Ar(o)))),m===0?0:a!==0&&a!==m&&(a&y)===0&&(y=m&-m,o=a&-a,y>=o||y===32&&(o&4194048)!==0)?a:m}function ia(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function yl(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fo(){var r=aa;return aa<<=1,(aa&62914560)===0&&(aa=4194304),r}function gs(r){for(var a=[],o=0;31>o;o++)a.push(r);return a}function la(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function hn(r,a,o,u,m,y){var _=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var R=r.entanglements,B=r.expirationTimes,Z=r.hiddenUpdates;for(o=_&~o;0<o;){var ae=31-Sn(o),ce=1<<ae;R[ae]=0,B[ae]=-1;var te=Z[ae];if(te!==null)for(Z[ae]=null,ae=0;ae<te.length;ae++){var re=te[ae];re!==null&&(re.lane&=-536870913)}o&=~ce}u!==0&&Bo(r,u,0),y!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=y&~(_&~a))}function Bo(r,a,o){r.pendingLanes|=a,r.suspendedLanes&=~a;var u=31-Sn(a);r.entangledLanes|=a,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function oa(r,a){var o=r.entangledLanes|=a;for(r=r.entanglements;o;){var u=31-Sn(o),m=1<<u;m&a|r[u]&a&&(r[u]|=a),o&=~m}}function ca(r,a){var o=a&-a;return o=(o&42)!==0?1:qo(o),(o&(r.suspendedLanes|a))!==0?0:o}function qo(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ho(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ps(){var r=H.p;return r!==0?r:(r=window.event,r===void 0?32:Fv(r.type))}function Wu(r,a){var o=H.p;try{return H.p=r,a()}finally{H.p=o}}var Hr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Hr,fn="__reactProps$"+Hr,$r="__reactContainer$"+Hr,ua="__reactEvents$"+Hr,Gr="__reactListeners$"+Hr,Ju="__reactHandles$"+Hr,$o="__reactResources$"+Hr,ys="__reactMarker$"+Hr;function _i(r){delete r[Ct],delete r[fn],delete r[ua],delete r[Gr],delete r[Ju]}function xs(r){var a=r[Ct];if(a)return a;for(var o=r.parentNode;o;){if(a=o[$r]||o[Ct]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(r=Ev(r);r!==null;){if(o=r[Ct])return o;r=Ev(r)}return a}r=o,o=r.parentNode}return null}function bs(r){if(r=r[Ct]||r[$r]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Ni(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(s(33))}function Cr(r){var a=r[$o];return a||(a=r[$o]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ot(r){r[ys]=!0}var xl=new Set,da={};function Tn(r,a){Kr(r,a),Kr(r+"Capture",a)}function Kr(r,a){for(da[r]=a,r=0;r<a.length;r++)xl.add(a[r])}var rm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Go={},Ko={};function Zu(r){return ra.call(Ko,r)?!0:ra.call(Go,r)?!1:rm.test(r)?Ko[r]=!0:(Go[r]=!0,!1)}function ha(r,a,o){if(Zu(a))if(o===null)r.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+o)}}function fa(r,a,o){if(o===null)r.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+o)}}function gr(r,a,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(a,o,""+u)}}function An(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ed(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function sm(r,a,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return m.call(this)},set:function(_){o=""+_,y.call(this,_)}}),Object.defineProperty(r,a,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function bl(r){if(!r._valueTracker){var a=ed(r)?"checked":"value";r._valueTracker=sm(r,a,""+r[a])}}function Yo(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return r&&(u=ed(r)?r.checked?"true":"false":r.value),r=u,r!==o?(a.setValue(r),!0):!1}function vl(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var vs=/[\n"\\]/g;function Rt(r){return r.replace(vs,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ma(r,a,o,u,m,y,_,R){r.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.type=_:r.removeAttribute("type"),a!=null?_==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+An(a)):r.value!==""+An(a)&&(r.value=""+An(a)):_!=="submit"&&_!=="reset"||r.removeAttribute("value"),a!=null?wl(r,_,An(a)):o!=null?wl(r,_,An(o)):u!=null&&r.removeAttribute("value"),m==null&&y!=null&&(r.defaultChecked=!!y),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+An(R):r.removeAttribute("name")}function ji(r,a,o,u,m,y,_,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),a!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){bl(r);return}o=o!=null?""+An(o):"",a=a!=null?""+An(a):o,R||a===r.value||(r.value=a),r.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=R?r.checked:!!u,r.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.name=_),bl(r)}function wl(r,a,o){a==="number"&&vl(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function st(r,a,o,u){if(r=r.options,a){a={};for(var m=0;m<o.length;m++)a["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=a.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&u&&(r[o].defaultSelected=!0)}else{for(o=""+An(o),a=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}a!==null||r[m].disabled||(a=r[m])}a!==null&&(a.selected=!0)}}function Ei(r,a,o){if(a!=null&&(a=""+An(a),a!==r.value&&(r.value=a),o==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=o!=null?""+An(o):""}function ga(r,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(s(92));if(Te(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=An(a),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),bl(r)}function pr(r,a){if(a){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=a;return}}r.textContent=a}var am=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qo(r,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":u?r.setProperty(a,o):typeof o!="number"||o===0||am.has(a)?a==="float"?r.cssFloat=o:r[a]=(""+o).trim():r[a]=o+"px"}function td(r,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&o[m]!==u&&Qo(r,m,u)}else for(var y in a)a.hasOwnProperty(y)&&Qo(r,y,a[y])}function Xo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var im=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yr(r){return lm.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function nn(){}var _l=null;function Nl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ws=null,Wn=null;function nd(r){var a=bs(r);if(a&&(r=a.stateNode)){var o=r[fn]||null;e:switch(r=a.stateNode,a.type){case"input":if(ma(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Rt(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==r&&u.form===r.form){var m=u[fn]||null;if(!m)throw Error(s(90));ma(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===r.form&&Yo(u)}break e;case"textarea":Ei(r,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&st(r,!!o.multiple,a,!1)}}}var Wo=!1;function rd(r,a,o){if(Wo)return r(a,o);Wo=!0;try{var u=r(a);return u}finally{if(Wo=!1,(ws!==null||Wn!==null)&&(Zd(),ws&&(a=ws,r=Wn,Wn=ws=null,nd(a),r)))for(a=0;a<r.length;a++)nd(r[a])}}function Un(r,a){var o=r.stateNode;if(o===null)return null;var u=o[fn]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=!1;if(Rr)try{var Qr={};Object.defineProperty(Qr,"passive",{get:function(){Jo=!0}}),window.addEventListener("test",Qr,Qr),window.removeEventListener("test",Qr,Qr)}catch{Jo=!1}var Jn=null,jl=null,Xr=null;function pa(){if(Xr)return Xr;var r,a=jl,o=a.length,u,m="value"in Jn?Jn.value:Jn.textContent,y=m.length;for(r=0;r<o&&a[r]===m[r];r++);var _=o-r;for(u=1;u<=_&&a[o-u]===m[y-u];u++);return Xr=m.slice(r,1<u?1-u:void 0)}function ki(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function ya(){return!0}function wt(){return!1}function wn(r){function a(o,u,m,y,_){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(o=r[R],this[R]=o?o(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ya:wt,this.isPropagationStopped=wt,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ya)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ya)},persist:function(){},isPersistent:ya}),a}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=wn(_s),xa=v({},_s,{view:0,detail:0}),sd=wn(xa),ba,El,Cn,Ti=v({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Cn&&(Cn&&r.type==="mousemove"?(ba=r.screenX-Cn.screenX,El=r.screenY-Cn.screenY):El=ba=0,Cn=r),ba)},movementY:function(r){return"movementY"in r?r.movementY:El}}),ad=wn(Ti),Ai=v({},Ti,{dataTransfer:0}),id=wn(Ai),Zo=v({},xa,{relatedTarget:0}),va=wn(Zo),ld=v({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),kl=wn(ld),om=v({},_s,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),od=wn(om),Ci=v({},_s,{data:0}),ec=wn(Ci),cd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ud(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=nc[r])?!!a[r]:!1}function wa(){return ud}var dd=v({},xa,{key:function(r){if(r.key){var a=cd[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=ki(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?tc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wa,charCode:function(r){return r.type==="keypress"?ki(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ki(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),hd=wn(dd),Ns=v({},Ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rc=wn(Ns),fd=v({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wa}),md=wn(fd),gd=v({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sl=wn(gd),Rn=v({},Ti,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),pd=wn(Rn),yd=v({},_s,{newState:0,oldState:0}),_a=wn(yd),h=[9,13,27,32],b=Rr&&"CompositionEvent"in window,N=null;Rr&&"documentMode"in document&&(N=document.documentMode);var P=Rr&&"TextEvent"in window&&!N,Q=Rr&&(!b||N&&8<N&&11>=N),se=" ",ye=!1;function ot(r,a){switch(r){case"keyup":return h.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zt(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var $e=!1;function rn(r,a){switch(r){case"compositionend":return zt(a);case"keypress":return a.which!==32?null:(ye=!0,se);case"textInput":return r=a.data,r===se&&ye?null:r;default:return null}}function sn(r,a){if($e)return r==="compositionend"||!b&&ot(r,a)?(r=pa(),Xr=jl=Jn=null,$e=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Q&&a.locale!=="ko"?null:a.data;default:return null}}var Na={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Na[r.type]:a==="textarea"}function Ri(r,a,o,u){ws?Wn?Wn.push(u):Wn=[u]:ws=u,a=ih(a,"onChange"),0<a.length&&(o=new Si("onChange","change",null,o,u),r.push({event:o,listeners:a}))}var js=null,sc=null;function OS(r){dv(r,0)}function xd(r){var a=Ni(r);if(Yo(a))return r}function Cy(r,a){if(r==="change")return a}var Ry=!1;if(Rr){var cm;if(Rr){var um="oninput"in document;if(!um){var Iy=document.createElement("div");Iy.setAttribute("oninput","return;"),um=typeof Iy.oninput=="function"}cm=um}else cm=!1;Ry=cm&&(!document.documentMode||9<document.documentMode)}function Dy(){js&&(js.detachEvent("onpropertychange",Oy),sc=js=null)}function Oy(r){if(r.propertyName==="value"&&xd(sc)){var a=[];Ri(a,sc,r,Nl(r)),rd(OS,a)}}function MS(r,a,o){r==="focusin"?(Dy(),js=a,sc=o,js.attachEvent("onpropertychange",Oy)):r==="focusout"&&Dy()}function PS(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return xd(sc)}function LS(r,a){if(r==="click")return xd(a)}function US(r,a){if(r==="input"||r==="change")return xd(a)}function VS(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Zn=typeof Object.is=="function"?Object.is:VS;function ac(r,a){if(Zn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var o=Object.keys(r),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!ra.call(a,m)||!Zn(r[m],a[m]))return!1}return!0}function My(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Py(r,a){var o=My(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=a&&u>=a)return{node:o,offset:a-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=My(o)}}function Ly(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Ly(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Uy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=vl(r.document);a instanceof r.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)r=a.contentWindow;else break;a=vl(r.document)}return a}function dm(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var zS=Rr&&"documentMode"in document&&11>=document.documentMode,Tl=null,hm=null,ic=null,fm=!1;function Vy(r,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;fm||Tl==null||Tl!==vl(u)||(u=Tl,"selectionStart"in u&&dm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ic&&ac(ic,u)||(ic=u,u=ih(hm,"onSelect"),0<u.length&&(a=new Si("onSelect","select",null,a,o),r.push({event:a,listeners:u}),a.target=Tl)))}function Ii(r,a){var o={};return o[r.toLowerCase()]=a.toLowerCase(),o["Webkit"+r]="webkit"+a,o["Moz"+r]="moz"+a,o}var Al={animationend:Ii("Animation","AnimationEnd"),animationiteration:Ii("Animation","AnimationIteration"),animationstart:Ii("Animation","AnimationStart"),transitionrun:Ii("Transition","TransitionRun"),transitionstart:Ii("Transition","TransitionStart"),transitioncancel:Ii("Transition","TransitionCancel"),transitionend:Ii("Transition","TransitionEnd")},mm={},zy={};Rr&&(zy=document.createElement("div").style,"AnimationEvent"in window||(delete Al.animationend.animation,delete Al.animationiteration.animation,delete Al.animationstart.animation),"TransitionEvent"in window||delete Al.transitionend.transition);function Di(r){if(mm[r])return mm[r];if(!Al[r])return r;var a=Al[r],o;for(o in a)if(a.hasOwnProperty(o)&&o in zy)return mm[r]=a[o];return r}var Fy=Di("animationend"),By=Di("animationiteration"),qy=Di("animationstart"),FS=Di("transitionrun"),BS=Di("transitionstart"),qS=Di("transitioncancel"),Hy=Di("transitionend"),$y=new Map,gm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gm.push("scrollEnd");function Ir(r,a){$y.set(r,a),Tn(a,[r])}var bd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},yr=[],Cl=0,pm=0;function vd(){for(var r=Cl,a=pm=Cl=0;a<r;){var o=yr[a];yr[a++]=null;var u=yr[a];yr[a++]=null;var m=yr[a];yr[a++]=null;var y=yr[a];if(yr[a++]=null,u!==null&&m!==null){var _=u.pending;_===null?m.next=m:(m.next=_.next,_.next=m),u.pending=m}y!==0&&Gy(o,m,y)}}function wd(r,a,o,u){yr[Cl++]=r,yr[Cl++]=a,yr[Cl++]=o,yr[Cl++]=u,pm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function ym(r,a,o,u){return wd(r,a,o,u),_d(r)}function Oi(r,a){return wd(r,null,null,a),_d(r)}function Gy(r,a,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var m=!1,y=r.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(m=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,m&&a!==null&&(m=31-Sn(o),r=y.hiddenUpdates,u=r[m],u===null?r[m]=[a]:u.push(a),a.lane=o|536870912),y):null}function _d(r){if(50<Tc)throw Tc=0,kg=null,Error(s(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Rl={};function HS(r,a,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(r,a,o,u){return new HS(r,a,o,u)}function xm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Es(r,a){var o=r.alternate;return o===null?(o=er(r.tag,a,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=a,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,a=r.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Ky(r,a){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,a=o.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Nd(r,a,o,u,m,y){var _=0;if(u=r,typeof r=="function")xm(r)&&(_=1);else if(typeof r=="string")_=QT(r,o,we.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case j:return r=er(31,o,a,m),r.elementType=j,r.lanes=y,r;case U:return Mi(o.children,m,y,a);case I:_=8,m|=24;break;case z:return r=er(12,o,a,m|2),r.elementType=z,r.lanes=y,r;case F:return r=er(13,o,a,m),r.elementType=F,r.lanes=y,r;case ne:return r=er(19,o,a,m),r.elementType=ne,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case q:_=10;break e;case A:_=9;break e;case K:_=11;break e;case O:_=14;break e;case L:_=16,u=null;break e}_=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return a=er(_,o,a,m),a.elementType=r,a.type=u,a.lanes=y,a}function Mi(r,a,o,u){return r=er(7,r,u,a),r.lanes=o,r}function bm(r,a,o){return r=er(6,r,null,a),r.lanes=o,r}function Yy(r){var a=er(18,null,null,0);return a.stateNode=r,a}function vm(r,a,o){return a=er(4,r.children!==null?r.children:[],r.key,a),a.lanes=o,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Qy=new WeakMap;function xr(r,a){if(typeof r=="object"&&r!==null){var o=Qy.get(r);return o!==void 0?o:(a={value:r,source:a,stack:na(a)},Qy.set(r,a),a)}return{value:r,source:a,stack:na(a)}}var Il=[],Dl=0,jd=null,lc=0,br=[],vr=0,ja=null,Wr=1,Jr="";function ks(r,a){Il[Dl++]=lc,Il[Dl++]=jd,jd=r,lc=a}function Xy(r,a,o){br[vr++]=Wr,br[vr++]=Jr,br[vr++]=ja,ja=r;var u=Wr;r=Jr;var m=32-Sn(u)-1;u&=~(1<<m),o+=1;var y=32-Sn(a)+m;if(30<y){var _=m-m%5;y=(u&(1<<_)-1).toString(32),u>>=_,m-=_,Wr=1<<32-Sn(a)+m|o<<m|u,Jr=y+r}else Wr=1<<y|o<<m|u,Jr=r}function wm(r){r.return!==null&&(ks(r,1),Xy(r,1,0))}function _m(r){for(;r===jd;)jd=Il[--Dl],Il[Dl]=null,lc=Il[--Dl],Il[Dl]=null;for(;r===ja;)ja=br[--vr],br[vr]=null,Jr=br[--vr],br[vr]=null,Wr=br[--vr],br[vr]=null}function Wy(r,a){br[vr++]=Wr,br[vr++]=Jr,br[vr++]=ja,Wr=a.id,Jr=a.overflow,ja=r}var mn=null,_t=null,et=!1,Ea=null,wr=!1,Nm=Error(s(519));function ka(r){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oc(xr(a,r)),Nm}function Jy(r){var a=r.stateNode,o=r.type,u=r.memoizedProps;switch(a[Ct]=r,a[fn]=u,o){case"dialog":Ke("cancel",a),Ke("close",a);break;case"iframe":case"object":case"embed":Ke("load",a);break;case"video":case"audio":for(o=0;o<Cc.length;o++)Ke(Cc[o],a);break;case"source":Ke("error",a);break;case"img":case"image":case"link":Ke("error",a),Ke("load",a);break;case"details":Ke("toggle",a);break;case"input":Ke("invalid",a),ji(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ke("invalid",a);break;case"textarea":Ke("invalid",a),ga(a,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||gv(a.textContent,o)?(u.popover!=null&&(Ke("beforetoggle",a),Ke("toggle",a)),u.onScroll!=null&&Ke("scroll",a),u.onScrollEnd!=null&&Ke("scrollend",a),u.onClick!=null&&(a.onclick=nn),a=!0):a=!1,a||ka(r,!0)}function Zy(r){for(mn=r.return;mn;)switch(mn.tag){case 5:case 31:case 13:wr=!1;return;case 27:case 3:wr=!0;return;default:mn=mn.return}}function Ol(r){if(r!==mn)return!1;if(!et)return Zy(r),et=!0,!1;var a=r.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Fg(r.type,r.memoizedProps)),o=!o),o&&_t&&ka(r),Zy(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));_t=jv(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));_t=jv(r)}else a===27?(a=_t,za(r.type)?(r=Gg,Gg=null,_t=r):_t=a):_t=mn?Nr(r.stateNode.nextSibling):null;return!0}function Pi(){_t=mn=null,et=!1}function jm(){var r=Ea;return r!==null&&(qn===null?qn=r:qn.push.apply(qn,r),Ea=null),r}function oc(r){Ea===null?Ea=[r]:Ea.push(r)}var Em=V(null),Li=null,Ss=null;function Sa(r,a,o){ie(Em,a._currentValue),a._currentValue=o}function Ts(r){r._currentValue=Em.current,W(Em)}function km(r,a,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),r===o)break;r=r.return}}function Sm(r,a,o,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var y=m.dependencies;if(y!==null){var _=m.child;y=y.firstContext;e:for(;y!==null;){var R=y;y=m;for(var B=0;B<a.length;B++)if(R.context===a[B]){y.lanes|=o,R=y.alternate,R!==null&&(R.lanes|=o),km(y.return,o,r),u||(_=null);break e}y=R.next}}else if(m.tag===18){if(_=m.return,_===null)throw Error(s(341));_.lanes|=o,y=_.alternate,y!==null&&(y.lanes|=o),km(_,o,r),_=null}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===r){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}}function Ml(r,a,o,u){r=null;for(var m=a,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var _=m.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var R=m.type;Zn(m.pendingProps.value,_.value)||(r!==null?r.push(R):r=[R])}}else if(m===xe.current){if(_=m.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Mc):r=[Mc])}m=m.return}r!==null&&Sm(a,r,o,u),a.flags|=262144}function Ed(r){for(r=r.firstContext;r!==null;){if(!Zn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ui(r){Li=r,Ss=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function gn(r){return ex(Li,r)}function kd(r,a){return Li===null&&Ui(r),ex(r,a)}function ex(r,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Ss===null){if(r===null)throw Error(s(308));Ss=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Ss=Ss.next=a;return o}var $S=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){a.aborted=!0,r.forEach(function(o){return o()})}},GS=n.unstable_scheduleCallback,KS=n.unstable_NormalPriority,Ft={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tm(){return{controller:new $S,data:new Map,refCount:0}}function cc(r){r.refCount--,r.refCount===0&&GS(KS,function(){r.controller.abort()})}var uc=null,Am=0,Pl=0,Ll=null;function YS(r,a){if(uc===null){var o=uc=[];Am=0,Pl=Ig(),Ll={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Am++,a.then(tx,tx),a}function tx(){if(--Am===0&&uc!==null){Ll!==null&&(Ll.status="fulfilled");var r=uc;uc=null,Pl=0,Ll=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function QS(r,a){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return r.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<o.length;m++)(0,o[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var nx=X.S;X.S=function(r,a){Vb=dn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&YS(r,a),nx!==null&&nx(r,a)};var Vi=V(null);function Cm(){var r=Vi.current;return r!==null?r:xt.pooledCache}function Sd(r,a){a===null?ie(Vi,Vi.current):ie(Vi,a.pool)}function rx(){var r=Cm();return r===null?null:{parent:Ft._currentValue,pool:r}}var Ul=Error(s(460)),Rm=Error(s(474)),Td=Error(s(542)),Ad={then:function(){}};function sx(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ax(r,a,o){switch(o=r[o],o===void 0?r.push(a):o!==a&&(a.then(nn,nn),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,lx(r),r;default:if(typeof a.status=="string")a.then(nn,nn);else{if(r=xt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=a,r.status="pending",r.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,lx(r),r}throw Fi=a,Ul}}function zi(r){try{var a=r._init;return a(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Fi=o,Ul):o}}var Fi=null;function ix(){if(Fi===null)throw Error(s(459));var r=Fi;return Fi=null,r}function lx(r){if(r===Ul||r===Td)throw Error(s(483))}var Vl=null,dc=0;function Cd(r){var a=dc;return dc+=1,Vl===null&&(Vl=[]),ax(Vl,r,a)}function hc(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Rd(r,a){throw a.$$typeof===w?Error(s(525)):(r=Object.prototype.toString.call(a),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function ox(r){function a(Y,$){if(r){var J=Y.deletions;J===null?(Y.deletions=[$],Y.flags|=16):J.push($)}}function o(Y,$){if(!r)return null;for(;$!==null;)a(Y,$),$=$.sibling;return null}function u(Y){for(var $=new Map;Y!==null;)Y.key!==null?$.set(Y.key,Y):$.set(Y.index,Y),Y=Y.sibling;return $}function m(Y,$){return Y=Es(Y,$),Y.index=0,Y.sibling=null,Y}function y(Y,$,J){return Y.index=J,r?(J=Y.alternate,J!==null?(J=J.index,J<$?(Y.flags|=67108866,$):J):(Y.flags|=67108866,$)):(Y.flags|=1048576,$)}function _(Y){return r&&Y.alternate===null&&(Y.flags|=67108866),Y}function R(Y,$,J,le){return $===null||$.tag!==6?($=bm(J,Y.mode,le),$.return=Y,$):($=m($,J),$.return=Y,$)}function B(Y,$,J,le){var Re=J.type;return Re===U?ae(Y,$,J.props.children,le,J.key):$!==null&&($.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===L&&zi(Re)===$.type)?($=m($,J.props),hc($,J),$.return=Y,$):($=Nd(J.type,J.key,J.props,null,Y.mode,le),hc($,J),$.return=Y,$)}function Z(Y,$,J,le){return $===null||$.tag!==4||$.stateNode.containerInfo!==J.containerInfo||$.stateNode.implementation!==J.implementation?($=vm(J,Y.mode,le),$.return=Y,$):($=m($,J.children||[]),$.return=Y,$)}function ae(Y,$,J,le,Re){return $===null||$.tag!==7?($=Mi(J,Y.mode,le,Re),$.return=Y,$):($=m($,J),$.return=Y,$)}function ce(Y,$,J){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=bm(""+$,Y.mode,J),$.return=Y,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case k:return J=Nd($.type,$.key,$.props,null,Y.mode,J),hc(J,$),J.return=Y,J;case D:return $=vm($,Y.mode,J),$.return=Y,$;case L:return $=zi($),ce(Y,$,J)}if(Te($)||S($))return $=Mi($,Y.mode,J,null),$.return=Y,$;if(typeof $.then=="function")return ce(Y,Cd($),J);if($.$$typeof===q)return ce(Y,kd(Y,$),J);Rd(Y,$)}return null}function te(Y,$,J,le){var Re=$!==null?$.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Re!==null?null:R(Y,$,""+J,le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case k:return J.key===Re?B(Y,$,J,le):null;case D:return J.key===Re?Z(Y,$,J,le):null;case L:return J=zi(J),te(Y,$,J,le)}if(Te(J)||S(J))return Re!==null?null:ae(Y,$,J,le,null);if(typeof J.then=="function")return te(Y,$,Cd(J),le);if(J.$$typeof===q)return te(Y,$,kd(Y,J),le);Rd(Y,J)}return null}function re(Y,$,J,le,Re){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Y=Y.get(J)||null,R($,Y,""+le,Re);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case k:return Y=Y.get(le.key===null?J:le.key)||null,B($,Y,le,Re);case D:return Y=Y.get(le.key===null?J:le.key)||null,Z($,Y,le,Re);case L:return le=zi(le),re(Y,$,J,le,Re)}if(Te(le)||S(le))return Y=Y.get(J)||null,ae($,Y,le,Re,null);if(typeof le.then=="function")return re(Y,$,J,Cd(le),Re);if(le.$$typeof===q)return re(Y,$,J,kd($,le),Re);Rd($,le)}return null}function ke(Y,$,J,le){for(var Re=null,at=null,Se=$,He=$=0,Qe=null;Se!==null&&He<J.length;He++){Se.index>He?(Qe=Se,Se=null):Qe=Se.sibling;var it=te(Y,Se,J[He],le);if(it===null){Se===null&&(Se=Qe);break}r&&Se&&it.alternate===null&&a(Y,Se),$=y(it,$,He),at===null?Re=it:at.sibling=it,at=it,Se=Qe}if(He===J.length)return o(Y,Se),et&&ks(Y,He),Re;if(Se===null){for(;He<J.length;He++)Se=ce(Y,J[He],le),Se!==null&&($=y(Se,$,He),at===null?Re=Se:at.sibling=Se,at=Se);return et&&ks(Y,He),Re}for(Se=u(Se);He<J.length;He++)Qe=re(Se,Y,He,J[He],le),Qe!==null&&(r&&Qe.alternate!==null&&Se.delete(Qe.key===null?He:Qe.key),$=y(Qe,$,He),at===null?Re=Qe:at.sibling=Qe,at=Qe);return r&&Se.forEach(function($a){return a(Y,$a)}),et&&ks(Y,He),Re}function Oe(Y,$,J,le){if(J==null)throw Error(s(151));for(var Re=null,at=null,Se=$,He=$=0,Qe=null,it=J.next();Se!==null&&!it.done;He++,it=J.next()){Se.index>He?(Qe=Se,Se=null):Qe=Se.sibling;var $a=te(Y,Se,it.value,le);if($a===null){Se===null&&(Se=Qe);break}r&&Se&&$a.alternate===null&&a(Y,Se),$=y($a,$,He),at===null?Re=$a:at.sibling=$a,at=$a,Se=Qe}if(it.done)return o(Y,Se),et&&ks(Y,He),Re;if(Se===null){for(;!it.done;He++,it=J.next())it=ce(Y,it.value,le),it!==null&&($=y(it,$,He),at===null?Re=it:at.sibling=it,at=it);return et&&ks(Y,He),Re}for(Se=u(Se);!it.done;He++,it=J.next())it=re(Se,Y,He,it.value,le),it!==null&&(r&&it.alternate!==null&&Se.delete(it.key===null?He:it.key),$=y(it,$,He),at===null?Re=it:at.sibling=it,at=it);return r&&Se.forEach(function(i1){return a(Y,i1)}),et&&ks(Y,He),Re}function pt(Y,$,J,le){if(typeof J=="object"&&J!==null&&J.type===U&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case k:e:{for(var Re=J.key;$!==null;){if($.key===Re){if(Re=J.type,Re===U){if($.tag===7){o(Y,$.sibling),le=m($,J.props.children),le.return=Y,Y=le;break e}}else if($.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===L&&zi(Re)===$.type){o(Y,$.sibling),le=m($,J.props),hc(le,J),le.return=Y,Y=le;break e}o(Y,$);break}else a(Y,$);$=$.sibling}J.type===U?(le=Mi(J.props.children,Y.mode,le,J.key),le.return=Y,Y=le):(le=Nd(J.type,J.key,J.props,null,Y.mode,le),hc(le,J),le.return=Y,Y=le)}return _(Y);case D:e:{for(Re=J.key;$!==null;){if($.key===Re)if($.tag===4&&$.stateNode.containerInfo===J.containerInfo&&$.stateNode.implementation===J.implementation){o(Y,$.sibling),le=m($,J.children||[]),le.return=Y,Y=le;break e}else{o(Y,$);break}else a(Y,$);$=$.sibling}le=vm(J,Y.mode,le),le.return=Y,Y=le}return _(Y);case L:return J=zi(J),pt(Y,$,J,le)}if(Te(J))return ke(Y,$,J,le);if(S(J)){if(Re=S(J),typeof Re!="function")throw Error(s(150));return J=Re.call(J),Oe(Y,$,J,le)}if(typeof J.then=="function")return pt(Y,$,Cd(J),le);if(J.$$typeof===q)return pt(Y,$,kd(Y,J),le);Rd(Y,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,$!==null&&$.tag===6?(o(Y,$.sibling),le=m($,J),le.return=Y,Y=le):(o(Y,$),le=bm(J,Y.mode,le),le.return=Y,Y=le),_(Y)):o(Y,$)}return function(Y,$,J,le){try{dc=0;var Re=pt(Y,$,J,le);return Vl=null,Re}catch(Se){if(Se===Ul||Se===Td)throw Se;var at=er(29,Se,null,Y.mode);return at.lanes=le,at.return=Y,at}finally{}}}var Bi=ox(!0),cx=ox(!1),Ta=!1;function Im(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dm(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Aa(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ca(r,a,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(lt&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=_d(r),Gy(r,null,o),a}return wd(r,u,a,o),_d(r)}function fc(r,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=r.pendingLanes,o|=u,a.lanes=o,oa(r,o)}}function Om(r,a){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?m=y=_:y=y.next=_,o=o.next}while(o!==null);y===null?m=y=a:y=y.next=a}else m=y=a;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=a:r.next=a,o.lastBaseUpdate=a}var Mm=!1;function mc(){if(Mm){var r=Ll;if(r!==null)throw r}}function gc(r,a,o,u){Mm=!1;var m=r.updateQueue;Ta=!1;var y=m.firstBaseUpdate,_=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var B=R,Z=B.next;B.next=null,_===null?y=Z:_.next=Z,_=B;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,R=ae.lastBaseUpdate,R!==_&&(R===null?ae.firstBaseUpdate=Z:R.next=Z,ae.lastBaseUpdate=B))}if(y!==null){var ce=m.baseState;_=0,ae=Z=B=null,R=y;do{var te=R.lane&-536870913,re=te!==R.lane;if(re?(Ye&te)===te:(u&te)===te){te!==0&&te===Pl&&(Mm=!0),ae!==null&&(ae=ae.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ke=r,Oe=R;te=a;var pt=o;switch(Oe.tag){case 1:if(ke=Oe.payload,typeof ke=="function"){ce=ke.call(pt,ce,te);break e}ce=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Oe.payload,te=typeof ke=="function"?ke.call(pt,ce,te):ke,te==null)break e;ce=v({},ce,te);break e;case 2:Ta=!0}}te=R.callback,te!==null&&(r.flags|=64,re&&(r.flags|=8192),re=m.callbacks,re===null?m.callbacks=[te]:re.push(te))}else re={lane:te,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ae===null?(Z=ae=re,B=ce):ae=ae.next=re,_|=te;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;re=R,R=re.next,re.next=null,m.lastBaseUpdate=re,m.shared.pending=null}}while(!0);ae===null&&(B=ce),m.baseState=B,m.firstBaseUpdate=Z,m.lastBaseUpdate=ae,y===null&&(m.shared.lanes=0),Ma|=_,r.lanes=_,r.memoizedState=ce}}function ux(r,a){if(typeof r!="function")throw Error(s(191,r));r.call(a)}function dx(r,a){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)ux(o[r],a)}var zl=V(null),Id=V(0);function hx(r,a){r=Ls,ie(Id,r),ie(zl,a),Ls=r|a.baseLanes}function Pm(){ie(Id,Ls),ie(zl,zl.current)}function Lm(){Ls=Id.current,W(zl),W(Id)}var tr=V(null),_r=null;function Ra(r){var a=r.alternate;ie(Mt,Mt.current&1),ie(tr,r),_r===null&&(a===null||zl.current!==null||a.memoizedState!==null)&&(_r=r)}function Um(r){ie(Mt,Mt.current),ie(tr,r),_r===null&&(_r=r)}function fx(r){r.tag===22?(ie(Mt,Mt.current),ie(tr,r),_r===null&&(_r=r)):Ia()}function Ia(){ie(Mt,Mt.current),ie(tr,tr.current)}function nr(r){W(tr),_r===r&&(_r=null),W(Mt)}var Mt=V(0);function Dd(r){for(var a=r;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Hg(o)||$g(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var As=0,qe=null,mt=null,Bt=null,Od=!1,Fl=!1,qi=!1,Md=0,pc=0,Bl=null,XS=0;function It(){throw Error(s(321))}function Vm(r,a){if(a===null)return!1;for(var o=0;o<a.length&&o<r.length;o++)if(!Zn(r[o],a[o]))return!1;return!0}function zm(r,a,o,u,m,y){return As=y,qe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,X.H=r===null||r.memoizedState===null?Xx:tg,qi=!1,y=o(u,m),qi=!1,Fl&&(y=gx(a,o,u,m)),mx(r),y}function mx(r){X.H=bc;var a=mt!==null&&mt.next!==null;if(As=0,Bt=mt=qe=null,Od=!1,pc=0,Bl=null,a)throw Error(s(300));r===null||qt||(r=r.dependencies,r!==null&&Ed(r)&&(qt=!0))}function gx(r,a,o,u){qe=r;var m=0;do{if(Fl&&(Bl=null),pc=0,Fl=!1,25<=m)throw Error(s(301));if(m+=1,Bt=mt=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}X.H=Wx,y=a(o,u)}while(Fl);return y}function WS(){var r=X.H,a=r.useState()[0];return a=typeof a.then=="function"?yc(a):a,r=r.useState()[0],(mt!==null?mt.memoizedState:null)!==r&&(qe.flags|=1024),a}function Fm(){var r=Md!==0;return Md=0,r}function Bm(r,a,o){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~o}function qm(r){if(Od){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Od=!1}As=0,Bt=mt=qe=null,Fl=!1,pc=Md=0,Bl=null}function In(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?qe.memoizedState=Bt=r:Bt=Bt.next=r,Bt}function Pt(){if(mt===null){var r=qe.alternate;r=r!==null?r.memoizedState:null}else r=mt.next;var a=Bt===null?qe.memoizedState:Bt.next;if(a!==null)Bt=a,mt=r;else{if(r===null)throw qe.alternate===null?Error(s(467)):Error(s(310));mt=r,r={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Bt===null?qe.memoizedState=Bt=r:Bt=Bt.next=r}return Bt}function Pd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yc(r){var a=pc;return pc+=1,Bl===null&&(Bl=[]),r=ax(Bl,r,a),a=qe,(Bt===null?a.memoizedState:Bt.next)===null&&(a=a.alternate,X.H=a===null||a.memoizedState===null?Xx:tg),r}function Ld(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return yc(r);if(r.$$typeof===q)return gn(r)}throw Error(s(438,String(r)))}function Hm(r){var a=null,o=qe.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=Pd(),qe.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(r),u=0;u<r;u++)o[u]=C;return a.index++,o}function Cs(r,a){return typeof a=="function"?a(r):a}function Ud(r){var a=Pt();return $m(a,mt,r)}function $m(r,a,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=r.baseQueue,y=u.pending;if(y!==null){if(m!==null){var _=m.next;m.next=y.next,y.next=_}a.baseQueue=m=y,u.pending=null}if(y=r.baseState,m===null)r.memoizedState=y;else{a=m.next;var R=_=null,B=null,Z=a,ae=!1;do{var ce=Z.lane&-536870913;if(ce!==Z.lane?(Ye&ce)===ce:(As&ce)===ce){var te=Z.revertLane;if(te===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ce===Pl&&(ae=!0);else if((As&te)===te){Z=Z.next,te===Pl&&(ae=!0);continue}else ce={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},B===null?(R=B=ce,_=y):B=B.next=ce,qe.lanes|=te,Ma|=te;ce=Z.action,qi&&o(y,ce),y=Z.hasEagerState?Z.eagerState:o(y,ce)}else te={lane:ce,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},B===null?(R=B=te,_=y):B=B.next=te,qe.lanes|=ce,Ma|=ce;Z=Z.next}while(Z!==null&&Z!==a);if(B===null?_=y:B.next=R,!Zn(y,r.memoizedState)&&(qt=!0,ae&&(o=Ll,o!==null)))throw o;r.memoizedState=y,r.baseState=_,r.baseQueue=B,u.lastRenderedState=y}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Gm(r){var a=Pt(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,m=o.pending,y=a.memoizedState;if(m!==null){o.pending=null;var _=m=m.next;do y=r(y,_.action),_=_.next;while(_!==m);Zn(y,a.memoizedState)||(qt=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),o.lastRenderedState=y}return[y,u]}function px(r,a,o){var u=qe,m=Pt(),y=et;if(y){if(o===void 0)throw Error(s(407));o=o()}else o=a();var _=!Zn((mt||m).memoizedState,o);if(_&&(m.memoizedState=o,qt=!0),m=m.queue,Qm(bx.bind(null,u,m,r),[r]),m.getSnapshot!==a||_||Bt!==null&&Bt.memoizedState.tag&1){if(u.flags|=2048,ql(9,{destroy:void 0},xx.bind(null,u,m,o,a),null),xt===null)throw Error(s(349));y||(As&127)!==0||yx(u,a,o)}return o}function yx(r,a,o){r.flags|=16384,r={getSnapshot:a,value:o},a=qe.updateQueue,a===null?(a=Pd(),qe.updateQueue=a,a.stores=[r]):(o=a.stores,o===null?a.stores=[r]:o.push(r))}function xx(r,a,o,u){a.value=o,a.getSnapshot=u,vx(a)&&wx(r)}function bx(r,a,o){return o(function(){vx(a)&&wx(r)})}function vx(r){var a=r.getSnapshot;r=r.value;try{var o=a();return!Zn(r,o)}catch{return!0}}function wx(r){var a=Oi(r,2);a!==null&&Hn(a,r,2)}function Km(r){var a=In();if(typeof r=="function"){var o=r;if(r=o(),qi){fr(!0);try{o()}finally{fr(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:r},a}function _x(r,a,o,u){return r.baseState=o,$m(r,mt,typeof u=="function"?u:Cs)}function JS(r,a,o,u,m){if(Fd(r))throw Error(s(485));if(r=a.action,r!==null){var y={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};X.T!==null?o(!0):y.isTransition=!1,u(y),o=a.pending,o===null?(y.next=a.pending=y,Nx(a,y)):(y.next=o.next,a.pending=o.next=y)}}function Nx(r,a){var o=a.action,u=a.payload,m=r.state;if(a.isTransition){var y=X.T,_={};X.T=_;try{var R=o(m,u),B=X.S;B!==null&&B(_,R),jx(r,a,R)}catch(Z){Ym(r,a,Z)}finally{y!==null&&_.types!==null&&(y.types=_.types),X.T=y}}else try{y=o(m,u),jx(r,a,y)}catch(Z){Ym(r,a,Z)}}function jx(r,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Ex(r,a,u)},function(u){return Ym(r,a,u)}):Ex(r,a,o)}function Ex(r,a,o){a.status="fulfilled",a.value=o,kx(a),r.state=o,a=r.pending,a!==null&&(o=a.next,o===a?r.pending=null:(o=o.next,a.next=o,Nx(r,o)))}function Ym(r,a,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,kx(a),a=a.next;while(a!==u)}r.action=null}function kx(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function Sx(r,a){return a}function Tx(r,a){if(et){var o=xt.formState;if(o!==null){e:{var u=qe;if(et){if(_t){t:{for(var m=_t,y=wr;m.nodeType!==8;){if(!y){m=null;break t}if(m=Nr(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){_t=Nr(m.nextSibling),u=m.data==="F!";break e}}ka(u)}u=!1}u&&(a=o[0])}}return o=In(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sx,lastRenderedState:a},o.queue=u,o=Kx.bind(null,qe,u),u.dispatch=o,u=Km(!1),y=eg.bind(null,qe,!1,u.queue),u=In(),m={state:a,dispatch:null,action:r,pending:null},u.queue=m,o=JS.bind(null,qe,m,y,o),m.dispatch=o,u.memoizedState=r,[a,o,!1]}function Ax(r){var a=Pt();return Cx(a,mt,r)}function Cx(r,a,o){if(a=$m(r,a,Sx)[0],r=Ud(Cs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=yc(a)}catch(_){throw _===Ul?Td:_}else u=a;a=Pt();var m=a.queue,y=m.dispatch;return o!==a.memoizedState&&(qe.flags|=2048,ql(9,{destroy:void 0},ZS.bind(null,m,o),null)),[u,y,r]}function ZS(r,a){r.action=a}function Rx(r){var a=Pt(),o=mt;if(o!==null)return Cx(a,o,r);Pt(),a=a.memoizedState,o=Pt();var u=o.queue.dispatch;return o.memoizedState=r,[a,u,!1]}function ql(r,a,o,u){return r={tag:r,create:o,deps:u,inst:a,next:null},a=qe.updateQueue,a===null&&(a=Pd(),qe.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,a.lastEffect=r),r}function Ix(){return Pt().memoizedState}function Vd(r,a,o,u){var m=In();qe.flags|=r,m.memoizedState=ql(1|a,{destroy:void 0},o,u===void 0?null:u)}function zd(r,a,o,u){var m=Pt();u=u===void 0?null:u;var y=m.memoizedState.inst;mt!==null&&u!==null&&Vm(u,mt.memoizedState.deps)?m.memoizedState=ql(a,y,o,u):(qe.flags|=r,m.memoizedState=ql(1|a,y,o,u))}function Dx(r,a){Vd(8390656,8,r,a)}function Qm(r,a){zd(2048,8,r,a)}function eT(r){qe.flags|=4;var a=qe.updateQueue;if(a===null)a=Pd(),qe.updateQueue=a,a.events=[r];else{var o=a.events;o===null?a.events=[r]:o.push(r)}}function Ox(r){var a=Pt().memoizedState;return eT({ref:a,nextImpl:r}),function(){if((lt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Mx(r,a){return zd(4,2,r,a)}function Px(r,a){return zd(4,4,r,a)}function Lx(r,a){if(typeof a=="function"){r=r();var o=a(r);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function Ux(r,a,o){o=o!=null?o.concat([r]):null,zd(4,4,Lx.bind(null,a,r),o)}function Xm(){}function Vx(r,a){var o=Pt();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&Vm(a,u[1])?u[0]:(o.memoizedState=[r,a],r)}function zx(r,a){var o=Pt();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&Vm(a,u[1]))return u[0];if(u=r(),qi){fr(!0);try{r()}finally{fr(!1)}}return o.memoizedState=[u,a],u}function Wm(r,a,o){return o===void 0||(As&1073741824)!==0&&(Ye&261930)===0?r.memoizedState=a:(r.memoizedState=o,r=Fb(),qe.lanes|=r,Ma|=r,o)}function Fx(r,a,o,u){return Zn(o,a)?o:zl.current!==null?(r=Wm(r,o,u),Zn(r,a)||(qt=!0),r):(As&42)===0||(As&1073741824)!==0&&(Ye&261930)===0?(qt=!0,r.memoizedState=o):(r=Fb(),qe.lanes|=r,Ma|=r,a)}function Bx(r,a,o,u,m){var y=H.p;H.p=y!==0&&8>y?y:8;var _=X.T,R={};X.T=R,eg(r,!1,a,o);try{var B=m(),Z=X.S;if(Z!==null&&Z(R,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ae=QS(B,u);xc(r,a,ae,ar(r))}else xc(r,a,u,ar(r))}catch(ce){xc(r,a,{then:function(){},status:"rejected",reason:ce},ar())}finally{H.p=y,_!==null&&R.types!==null&&(_.types=R.types),X.T=_}}function tT(){}function Jm(r,a,o,u){if(r.tag!==5)throw Error(s(476));var m=qx(r).queue;Bx(r,m,a,ue,o===null?tT:function(){return Hx(r),o(u)})}function qx(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:ue},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:o},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function Hx(r){var a=qx(r);a.next===null&&(a=r.alternate.memoizedState),xc(r,a.next.queue,{},ar())}function Zm(){return gn(Mc)}function $x(){return Pt().memoizedState}function Gx(){return Pt().memoizedState}function nT(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var o=ar();r=Aa(o);var u=Ca(a,r,o);u!==null&&(Hn(u,a,o),fc(u,a,o)),a={cache:Tm()},r.payload=a;return}a=a.return}}function rT(r,a,o){var u=ar();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Fd(r)?Yx(a,o):(o=ym(r,a,o,u),o!==null&&(Hn(o,r,u),Qx(o,a,u)))}function Kx(r,a,o){var u=ar();xc(r,a,o,u)}function xc(r,a,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Fd(r))Yx(a,m);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var _=a.lastRenderedState,R=y(_,o);if(m.hasEagerState=!0,m.eagerState=R,Zn(R,_))return wd(r,a,m,0),xt===null&&vd(),!1}catch{}finally{}if(o=ym(r,a,m,u),o!==null)return Hn(o,r,u),Qx(o,a,u),!0}return!1}function eg(r,a,o,u){if(u={lane:2,revertLane:Ig(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Fd(r)){if(a)throw Error(s(479))}else a=ym(r,o,u,2),a!==null&&Hn(a,r,2)}function Fd(r){var a=r.alternate;return r===qe||a!==null&&a===qe}function Yx(r,a){Fl=Od=!0;var o=r.pending;o===null?a.next=a:(a.next=o.next,o.next=a),r.pending=a}function Qx(r,a,o){if((o&4194048)!==0){var u=a.lanes;u&=r.pendingLanes,o|=u,a.lanes=o,oa(r,o)}}var bc={readContext:gn,use:Ld,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};bc.useEffectEvent=It;var Xx={readContext:gn,use:Ld,useCallback:function(r,a){return In().memoizedState=[r,a===void 0?null:a],r},useContext:gn,useEffect:Dx,useImperativeHandle:function(r,a,o){o=o!=null?o.concat([r]):null,Vd(4194308,4,Lx.bind(null,a,r),o)},useLayoutEffect:function(r,a){return Vd(4194308,4,r,a)},useInsertionEffect:function(r,a){Vd(4,2,r,a)},useMemo:function(r,a){var o=In();a=a===void 0?null:a;var u=r();if(qi){fr(!0);try{r()}finally{fr(!1)}}return o.memoizedState=[u,a],u},useReducer:function(r,a,o){var u=In();if(o!==void 0){var m=o(a);if(qi){fr(!0);try{o(a)}finally{fr(!1)}}}else m=a;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=rT.bind(null,qe,r),[u.memoizedState,r]},useRef:function(r){var a=In();return r={current:r},a.memoizedState=r},useState:function(r){r=Km(r);var a=r.queue,o=Kx.bind(null,qe,a);return a.dispatch=o,[r.memoizedState,o]},useDebugValue:Xm,useDeferredValue:function(r,a){var o=In();return Wm(o,r,a)},useTransition:function(){var r=Km(!1);return r=Bx.bind(null,qe,r.queue,!0,!1),In().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,o){var u=qe,m=In();if(et){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),xt===null)throw Error(s(349));(Ye&127)!==0||yx(u,a,o)}m.memoizedState=o;var y={value:o,getSnapshot:a};return m.queue=y,Dx(bx.bind(null,u,y,r),[r]),u.flags|=2048,ql(9,{destroy:void 0},xx.bind(null,u,y,o,a),null),o},useId:function(){var r=In(),a=xt.identifierPrefix;if(et){var o=Jr,u=Wr;o=(u&~(1<<32-Sn(u)-1)).toString(32)+o,a="_"+a+"R_"+o,o=Md++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=XS++,a="_"+a+"r_"+o.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:Zm,useFormState:Tx,useActionState:Tx,useOptimistic:function(r){var a=In();a.memoizedState=a.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=eg.bind(null,qe,!0,o),o.dispatch=a,[r,a]},useMemoCache:Hm,useCacheRefresh:function(){return In().memoizedState=nT.bind(null,qe)},useEffectEvent:function(r){var a=In(),o={impl:r};return a.memoizedState=o,function(){if((lt&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},tg={readContext:gn,use:Ld,useCallback:Vx,useContext:gn,useEffect:Qm,useImperativeHandle:Ux,useInsertionEffect:Mx,useLayoutEffect:Px,useMemo:zx,useReducer:Ud,useRef:Ix,useState:function(){return Ud(Cs)},useDebugValue:Xm,useDeferredValue:function(r,a){var o=Pt();return Fx(o,mt.memoizedState,r,a)},useTransition:function(){var r=Ud(Cs)[0],a=Pt().memoizedState;return[typeof r=="boolean"?r:yc(r),a]},useSyncExternalStore:px,useId:$x,useHostTransitionStatus:Zm,useFormState:Ax,useActionState:Ax,useOptimistic:function(r,a){var o=Pt();return _x(o,mt,r,a)},useMemoCache:Hm,useCacheRefresh:Gx};tg.useEffectEvent=Ox;var Wx={readContext:gn,use:Ld,useCallback:Vx,useContext:gn,useEffect:Qm,useImperativeHandle:Ux,useInsertionEffect:Mx,useLayoutEffect:Px,useMemo:zx,useReducer:Gm,useRef:Ix,useState:function(){return Gm(Cs)},useDebugValue:Xm,useDeferredValue:function(r,a){var o=Pt();return mt===null?Wm(o,r,a):Fx(o,mt.memoizedState,r,a)},useTransition:function(){var r=Gm(Cs)[0],a=Pt().memoizedState;return[typeof r=="boolean"?r:yc(r),a]},useSyncExternalStore:px,useId:$x,useHostTransitionStatus:Zm,useFormState:Rx,useActionState:Rx,useOptimistic:function(r,a){var o=Pt();return mt!==null?_x(o,mt,r,a):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Hm,useCacheRefresh:Gx};Wx.useEffectEvent=Ox;function ng(r,a,o,u){a=r.memoizedState,o=o(u,a),o=o==null?a:v({},a,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var rg={enqueueSetState:function(r,a,o){r=r._reactInternals;var u=ar(),m=Aa(u);m.payload=a,o!=null&&(m.callback=o),a=Ca(r,m,u),a!==null&&(Hn(a,r,u),fc(a,r,u))},enqueueReplaceState:function(r,a,o){r=r._reactInternals;var u=ar(),m=Aa(u);m.tag=1,m.payload=a,o!=null&&(m.callback=o),a=Ca(r,m,u),a!==null&&(Hn(a,r,u),fc(a,r,u))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var o=ar(),u=Aa(o);u.tag=2,a!=null&&(u.callback=a),a=Ca(r,u,o),a!==null&&(Hn(a,r,o),fc(a,r,o))}};function Jx(r,a,o,u,m,y,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,_):a.prototype&&a.prototype.isPureReactComponent?!ac(o,u)||!ac(m,y):!0}function Zx(r,a,o,u){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==r&&rg.enqueueReplaceState(a,a.state,null)}function Hi(r,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(r=r.defaultProps){o===a&&(o=v({},o));for(var m in r)o[m]===void 0&&(o[m]=r[m])}return o}function eb(r){bd(r)}function tb(r){console.error(r)}function nb(r){bd(r)}function Bd(r,a){try{var o=r.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function rb(r,a,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function sg(r,a,o){return o=Aa(o),o.tag=3,o.payload={element:null},o.callback=function(){Bd(r,a)},o}function sb(r){return r=Aa(r),r.tag=3,r}function ab(r,a,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;r.payload=function(){return m(y)},r.callback=function(){rb(a,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){rb(a,o,u),typeof m!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function sT(r,a,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&Ml(a,o,m,!0),o=tr.current,o!==null){switch(o.tag){case 31:case 13:return _r===null?eh():o.alternate===null&&Dt===0&&(Dt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Ad?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),Ag(r,u,m)),!1;case 22:return o.flags|=65536,u===Ad?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),Ag(r,u,m)),!1}throw Error(s(435,o.tag))}return Ag(r,u,m),eh(),!1}if(et)return a=tr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==Nm&&(r=Error(s(422),{cause:u}),oc(xr(r,o)))):(u!==Nm&&(a=Error(s(423),{cause:u}),oc(xr(a,o))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=xr(u,o),m=sg(r.stateNode,u,m),Om(r,m),Dt!==4&&(Dt=2)),!1;var y=Error(s(520),{cause:u});if(y=xr(y,o),Sc===null?Sc=[y]:Sc.push(y),Dt!==4&&(Dt=2),a===null)return!0;u=xr(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,r=m&-m,o.lanes|=r,r=sg(o.stateNode,u,r),Om(o,r),!1;case 1:if(a=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Pa===null||!Pa.has(y))))return o.flags|=65536,m&=-m,o.lanes|=m,m=sb(m),ab(m,r,o,u),Om(o,m),!1}o=o.return}while(o!==null);return!1}var ag=Error(s(461)),qt=!1;function pn(r,a,o,u){a.child=r===null?cx(a,null,o,u):Bi(a,r.child,o,u)}function ib(r,a,o,u,m){o=o.render;var y=a.ref;if("ref"in u){var _={};for(var R in u)R!=="ref"&&(_[R]=u[R])}else _=u;return Ui(a),u=zm(r,a,o,_,y,m),R=Fm(),r!==null&&!qt?(Bm(r,a,m),Rs(r,a,m)):(et&&R&&wm(a),a.flags|=1,pn(r,a,u,m),a.child)}function lb(r,a,o,u,m){if(r===null){var y=o.type;return typeof y=="function"&&!xm(y)&&y.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=y,ob(r,a,y,u,m)):(r=Nd(o.type,null,u,a,a.mode,m),r.ref=a.ref,r.return=a,a.child=r)}if(y=r.child,!fg(r,m)){var _=y.memoizedProps;if(o=o.compare,o=o!==null?o:ac,o(_,u)&&r.ref===a.ref)return Rs(r,a,m)}return a.flags|=1,r=Es(y,u),r.ref=a.ref,r.return=a,a.child=r}function ob(r,a,o,u,m){if(r!==null){var y=r.memoizedProps;if(ac(y,u)&&r.ref===a.ref)if(qt=!1,a.pendingProps=u=y,fg(r,m))(r.flags&131072)!==0&&(qt=!0);else return a.lanes=r.lanes,Rs(r,a,m)}return ig(r,a,o,u,m)}function cb(r,a,o,u){var m=u.children,y=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,r!==null){for(u=a.child=r.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,a.child=null;return ub(r,a,y,o,u)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Sd(a,y!==null?y.cachePool:null),y!==null?hx(a,y):Pm(),fx(a);else return u=a.lanes=536870912,ub(r,a,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(Sd(a,y.cachePool),hx(a,y),Ia(),a.memoizedState=null):(r!==null&&Sd(a,null),Pm(),Ia());return pn(r,a,m,o),a.child}function vc(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function ub(r,a,o,u,m){var y=Cm();return y=y===null?null:{parent:Ft._currentValue,pool:y},a.memoizedState={baseLanes:o,cachePool:y},r!==null&&Sd(a,null),Pm(),fx(a),r!==null&&Ml(r,a,u,!0),a.childLanes=m,null}function qd(r,a){return a=$d({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function db(r,a,o){return Bi(a,r.child,null,o),r=qd(a,a.pendingProps),r.flags|=2,nr(a),a.memoizedState=null,r}function aT(r,a,o){var u=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(et){if(u.mode==="hidden")return r=qd(a,u),a.lanes=536870912,vc(null,r);if(Um(a),(r=_t)?(r=Nv(r,wr),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:ja!==null?{id:Wr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},o=Yy(r),o.return=a,a.child=o,mn=a,_t=null)):r=null,r===null)throw ka(a);return a.lanes=536870912,null}return qd(a,u)}var y=r.memoizedState;if(y!==null){var _=y.dehydrated;if(Um(a),m)if(a.flags&256)a.flags&=-257,a=db(r,a,o);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(s(558));else if(qt||Ml(r,a,o,!1),m=(o&r.childLanes)!==0,qt||m){if(u=xt,u!==null&&(_=ca(u,o),_!==0&&_!==y.retryLane))throw y.retryLane=_,Oi(r,_),Hn(u,r,_),ag;eh(),a=db(r,a,o)}else r=y.treeContext,_t=Nr(_.nextSibling),mn=a,et=!0,Ea=null,wr=!1,r!==null&&Wy(a,r),a=qd(a,u),a.flags|=4096;return a}return r=Es(r.child,{mode:u.mode,children:u.children}),r.ref=a.ref,a.child=r,r.return=a,r}function Hd(r,a){var o=a.ref;if(o===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(a.flags|=4194816)}}function ig(r,a,o,u,m){return Ui(a),o=zm(r,a,o,u,void 0,m),u=Fm(),r!==null&&!qt?(Bm(r,a,m),Rs(r,a,m)):(et&&u&&wm(a),a.flags|=1,pn(r,a,o,m),a.child)}function hb(r,a,o,u,m,y){return Ui(a),a.updateQueue=null,o=gx(a,u,o,m),mx(r),u=Fm(),r!==null&&!qt?(Bm(r,a,y),Rs(r,a,y)):(et&&u&&wm(a),a.flags|=1,pn(r,a,o,y),a.child)}function fb(r,a,o,u,m){if(Ui(a),a.stateNode===null){var y=Rl,_=o.contextType;typeof _=="object"&&_!==null&&(y=gn(_)),y=new o(u,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=rg,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=u,y.state=a.memoizedState,y.refs={},Im(a),_=o.contextType,y.context=typeof _=="object"&&_!==null?gn(_):Rl,y.state=a.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(ng(a,o,_,u),y.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&rg.enqueueReplaceState(y,y.state,null),gc(a,u,y,m),mc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(r===null){y=a.stateNode;var R=a.memoizedProps,B=Hi(o,R);y.props=B;var Z=y.context,ae=o.contextType;_=Rl,typeof ae=="object"&&ae!==null&&(_=gn(ae));var ce=o.getDerivedStateFromProps;ae=typeof ce=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,ae||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||Z!==_)&&Zx(a,y,u,_),Ta=!1;var te=a.memoizedState;y.state=te,gc(a,u,y,m),mc(),Z=a.memoizedState,R||te!==Z||Ta?(typeof ce=="function"&&(ng(a,o,ce,u),Z=a.memoizedState),(B=Ta||Jx(a,o,B,u,te,Z,_))?(ae||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=Z),y.props=u,y.state=Z,y.context=_,u=B):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{y=a.stateNode,Dm(r,a),_=a.memoizedProps,ae=Hi(o,_),y.props=ae,ce=a.pendingProps,te=y.context,Z=o.contextType,B=Rl,typeof Z=="object"&&Z!==null&&(B=gn(Z)),R=o.getDerivedStateFromProps,(Z=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==ce||te!==B)&&Zx(a,y,u,B),Ta=!1,te=a.memoizedState,y.state=te,gc(a,u,y,m),mc();var re=a.memoizedState;_!==ce||te!==re||Ta||r!==null&&r.dependencies!==null&&Ed(r.dependencies)?(typeof R=="function"&&(ng(a,o,R,u),re=a.memoizedState),(ae=Ta||Jx(a,o,ae,u,te,re,B)||r!==null&&r.dependencies!==null&&Ed(r.dependencies))?(Z||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,re,B),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,re,B)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===r.memoizedProps&&te===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&te===r.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=re),y.props=u,y.state=re,y.context=B,u=ae):(typeof y.componentDidUpdate!="function"||_===r.memoizedProps&&te===r.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&te===r.memoizedState||(a.flags|=1024),u=!1)}return y=u,Hd(r,a),u=(a.flags&128)!==0,y||u?(y=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,r!==null&&u?(a.child=Bi(a,r.child,null,m),a.child=Bi(a,null,o,m)):pn(r,a,o,m),a.memoizedState=y.state,r=a.child):r=Rs(r,a,m),r}function mb(r,a,o,u){return Pi(),a.flags|=256,pn(r,a,o,u),a.child}var lg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function og(r){return{baseLanes:r,cachePool:rx()}}function cg(r,a,o){return r=r!==null?r.childLanes&~o:0,a&&(r|=sr),r}function gb(r,a,o){var u=a.pendingProps,m=!1,y=(a.flags&128)!==0,_;if((_=y)||(_=r!==null&&r.memoizedState===null?!1:(Mt.current&2)!==0),_&&(m=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,r===null){if(et){if(m?Ra(a):Ia(),(r=_t)?(r=Nv(r,wr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:ja!==null?{id:Wr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},o=Yy(r),o.return=a,a.child=o,mn=a,_t=null)):r=null,r===null)throw ka(a);return $g(r)?a.lanes=32:a.lanes=536870912,null}var R=u.children;return u=u.fallback,m?(Ia(),m=a.mode,R=$d({mode:"hidden",children:R},m),u=Mi(u,m,o,null),R.return=a,u.return=a,R.sibling=u,a.child=R,u=a.child,u.memoizedState=og(o),u.childLanes=cg(r,_,o),a.memoizedState=lg,vc(null,u)):(Ra(a),ug(a,R))}var B=r.memoizedState;if(B!==null&&(R=B.dehydrated,R!==null)){if(y)a.flags&256?(Ra(a),a.flags&=-257,a=dg(r,a,o)):a.memoizedState!==null?(Ia(),a.child=r.child,a.flags|=128,a=null):(Ia(),R=u.fallback,m=a.mode,u=$d({mode:"visible",children:u.children},m),R=Mi(R,m,o,null),R.flags|=2,u.return=a,R.return=a,u.sibling=R,a.child=u,Bi(a,r.child,null,o),u=a.child,u.memoizedState=og(o),u.childLanes=cg(r,_,o),a.memoizedState=lg,a=vc(null,u));else if(Ra(a),$g(R)){if(_=R.nextSibling&&R.nextSibling.dataset,_)var Z=_.dgst;_=Z,u=Error(s(419)),u.stack="",u.digest=_,oc({value:u,source:null,stack:null}),a=dg(r,a,o)}else if(qt||Ml(r,a,o,!1),_=(o&r.childLanes)!==0,qt||_){if(_=xt,_!==null&&(u=ca(_,o),u!==0&&u!==B.retryLane))throw B.retryLane=u,Oi(r,u),Hn(_,r,u),ag;Hg(R)||eh(),a=dg(r,a,o)}else Hg(R)?(a.flags|=192,a.child=r.child,a=null):(r=B.treeContext,_t=Nr(R.nextSibling),mn=a,et=!0,Ea=null,wr=!1,r!==null&&Wy(a,r),a=ug(a,u.children),a.flags|=4096);return a}return m?(Ia(),R=u.fallback,m=a.mode,B=r.child,Z=B.sibling,u=Es(B,{mode:"hidden",children:u.children}),u.subtreeFlags=B.subtreeFlags&65011712,Z!==null?R=Es(Z,R):(R=Mi(R,m,o,null),R.flags|=2),R.return=a,u.return=a,u.sibling=R,a.child=u,vc(null,u),u=a.child,R=r.child.memoizedState,R===null?R=og(o):(m=R.cachePool,m!==null?(B=Ft._currentValue,m=m.parent!==B?{parent:B,pool:B}:m):m=rx(),R={baseLanes:R.baseLanes|o,cachePool:m}),u.memoizedState=R,u.childLanes=cg(r,_,o),a.memoizedState=lg,vc(r.child,u)):(Ra(a),o=r.child,r=o.sibling,o=Es(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,r!==null&&(_=a.deletions,_===null?(a.deletions=[r],a.flags|=16):_.push(r)),a.child=o,a.memoizedState=null,o)}function ug(r,a){return a=$d({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function $d(r,a){return r=er(22,r,null,a),r.lanes=0,r}function dg(r,a,o){return Bi(a,r.child,null,o),r=ug(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function pb(r,a,o){r.lanes|=a;var u=r.alternate;u!==null&&(u.lanes|=a),km(r.return,a,o)}function hg(r,a,o,u,m,y){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:y}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=m,_.treeForkCount=y)}function yb(r,a,o){var u=a.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var _=Mt.current,R=(_&2)!==0;if(R?(_=_&1|2,a.flags|=128):_&=1,ie(Mt,_),pn(r,a,u,o),u=et?lc:0,!R&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&pb(r,o,a);else if(r.tag===19)pb(r,o,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(o=a.child,m=null;o!==null;)r=o.alternate,r!==null&&Dd(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=a.child,a.child=null):(m=o.sibling,o.sibling=null),hg(a,!1,m,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=a.child,a.child=null;m!==null;){if(r=m.alternate,r!==null&&Dd(r)===null){a.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}hg(a,!0,o,null,y,u);break;case"together":hg(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Rs(r,a,o){if(r!==null&&(a.dependencies=r.dependencies),Ma|=a.lanes,(o&a.childLanes)===0)if(r!==null){if(Ml(r,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(s(153));if(a.child!==null){for(r=a.child,o=Es(r,r.pendingProps),a.child=o,o.return=a;r.sibling!==null;)r=r.sibling,o=o.sibling=Es(r,r.pendingProps),o.return=a;o.sibling=null}return a.child}function fg(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Ed(r)))}function iT(r,a,o){switch(a.tag){case 3:Ee(a,a.stateNode.containerInfo),Sa(a,Ft,r.memoizedState.cache),Pi();break;case 27:case 5:rt(a);break;case 4:Ee(a,a.stateNode.containerInfo);break;case 10:Sa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Um(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Ra(a),a.flags|=128,null):(o&a.child.childLanes)!==0?gb(r,a,o):(Ra(a),r=Rs(r,a,o),r!==null?r.sibling:null);Ra(a);break;case 19:var m=(r.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(Ml(r,a,o,!1),u=(o&a.childLanes)!==0),m){if(u)return yb(r,a,o);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ie(Mt,Mt.current),u)break;return null;case 22:return a.lanes=0,cb(r,a,o,a.pendingProps);case 24:Sa(a,Ft,r.memoizedState.cache)}return Rs(r,a,o)}function xb(r,a,o){if(r!==null)if(r.memoizedProps!==a.pendingProps)qt=!0;else{if(!fg(r,o)&&(a.flags&128)===0)return qt=!1,iT(r,a,o);qt=(r.flags&131072)!==0}else qt=!1,et&&(a.flags&1048576)!==0&&Xy(a,lc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(r=zi(a.elementType),a.type=r,typeof r=="function")xm(r)?(u=Hi(r,u),a.tag=1,a=fb(null,a,r,u,o)):(a.tag=0,a=ig(null,a,r,u,o));else{if(r!=null){var m=r.$$typeof;if(m===K){a.tag=11,a=ib(null,a,r,u,o);break e}else if(m===O){a.tag=14,a=lb(null,a,r,u,o);break e}}throw a=me(r)||r,Error(s(306,a,""))}}return a;case 0:return ig(r,a,a.type,a.pendingProps,o);case 1:return u=a.type,m=Hi(u,a.pendingProps),fb(r,a,u,m,o);case 3:e:{if(Ee(a,a.stateNode.containerInfo),r===null)throw Error(s(387));u=a.pendingProps;var y=a.memoizedState;m=y.element,Dm(r,a),gc(a,u,null,o);var _=a.memoizedState;if(u=_.cache,Sa(a,Ft,u),u!==y.cache&&Sm(a,[Ft],o,!0),mc(),u=_.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=mb(r,a,u,o);break e}else if(u!==m){m=xr(Error(s(424)),a),oc(m),a=mb(r,a,u,o);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(_t=Nr(r.firstChild),mn=a,et=!0,Ea=null,wr=!0,o=cx(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Pi(),u===m){a=Rs(r,a,o);break e}pn(r,a,u,o)}a=a.child}return a;case 26:return Hd(r,a),r===null?(o=Av(a.type,null,a.pendingProps,null))?a.memoizedState=o:et||(o=a.type,r=a.pendingProps,u=lh(he.current).createElement(o),u[Ct]=a,u[fn]=r,yn(u,o,r),Ot(u),a.stateNode=u):a.memoizedState=Av(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return rt(a),r===null&&et&&(u=a.stateNode=kv(a.type,a.pendingProps,he.current),mn=a,wr=!0,m=_t,za(a.type)?(Gg=m,_t=Nr(u.firstChild)):_t=m),pn(r,a,a.pendingProps.children,o),Hd(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&et&&((m=u=_t)&&(u=PT(u,a.type,a.pendingProps,wr),u!==null?(a.stateNode=u,mn=a,_t=Nr(u.firstChild),wr=!1,m=!0):m=!1),m||ka(a)),rt(a),m=a.type,y=a.pendingProps,_=r!==null?r.memoizedProps:null,u=y.children,Fg(m,y)?u=null:_!==null&&Fg(m,_)&&(a.flags|=32),a.memoizedState!==null&&(m=zm(r,a,WS,null,null,o),Mc._currentValue=m),Hd(r,a),pn(r,a,u,o),a.child;case 6:return r===null&&et&&((r=o=_t)&&(o=LT(o,a.pendingProps,wr),o!==null?(a.stateNode=o,mn=a,_t=null,r=!0):r=!1),r||ka(a)),null;case 13:return gb(r,a,o);case 4:return Ee(a,a.stateNode.containerInfo),u=a.pendingProps,r===null?a.child=Bi(a,null,u,o):pn(r,a,u,o),a.child;case 11:return ib(r,a,a.type,a.pendingProps,o);case 7:return pn(r,a,a.pendingProps,o),a.child;case 8:return pn(r,a,a.pendingProps.children,o),a.child;case 12:return pn(r,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,Sa(a,a.type,u.value),pn(r,a,u.children,o),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,Ui(a),m=gn(m),u=u(m),a.flags|=1,pn(r,a,u,o),a.child;case 14:return lb(r,a,a.type,a.pendingProps,o);case 15:return ob(r,a,a.type,a.pendingProps,o);case 19:return yb(r,a,o);case 31:return aT(r,a,o);case 22:return cb(r,a,o,a.pendingProps);case 24:return Ui(a),u=gn(Ft),r===null?(m=Cm(),m===null&&(m=xt,y=Tm(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=o),m=y),a.memoizedState={parent:u,cache:m},Im(a),Sa(a,Ft,m)):((r.lanes&o)!==0&&(Dm(r,a),gc(a,null,null,o),mc()),m=r.memoizedState,y=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Sa(a,Ft,u)):(u=y.cache,Sa(a,Ft,u),u!==m.cache&&Sm(a,[Ft],o,!0))),pn(r,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Is(r){r.flags|=4}function mg(r,a,o,u,m){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if($b())r.flags|=8192;else throw Fi=Ad,Rm}else r.flags&=-16777217}function bb(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ov(a))if($b())r.flags|=8192;else throw Fi=Ad,Rm}function Gd(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Fo():536870912,r.lanes|=a,Kl|=a)}function wc(r,a){if(!et)switch(r.tailMode){case"hidden":a=r.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Nt(r){var a=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(a)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=o,a}function lT(r,a,o){var u=a.pendingProps;switch(_m(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(a),null;case 1:return Nt(a),null;case 3:return o=a.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ts(Ft),Be(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Ol(a)?Is(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,jm())),Nt(a),null;case 26:var m=a.type,y=a.memoizedState;return r===null?(Is(a),y!==null?(Nt(a),bb(a,y)):(Nt(a),mg(a,m,null,u,o))):y?y!==r.memoizedState?(Is(a),Nt(a),bb(a,y)):(Nt(a),a.flags&=-16777217):(r=r.memoizedProps,r!==u&&Is(a),Nt(a),mg(a,m,r,u,o)),null;case 27:if(bt(a),o=he.current,m=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&Is(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Nt(a),null}r=we.current,Ol(a)?Jy(a):(r=kv(m,u,o),a.stateNode=r,Is(a))}return Nt(a),null;case 5:if(bt(a),m=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==u&&Is(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Nt(a),null}if(y=we.current,Ol(a))Jy(a);else{var _=lh(he.current);switch(y){case 1:y=_.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=_.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=_.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?_.createElement(m,{is:u.is}):_.createElement(m)}}y[Ct]=a,y[fn]=u;e:for(_=a.child;_!==null;){if(_.tag===5||_.tag===6)y.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===a)break e;for(;_.sibling===null;){if(_.return===null||_.return===a)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}a.stateNode=y;e:switch(yn(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Is(a)}}return Nt(a),mg(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,o),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==u&&Is(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(s(166));if(r=he.current,Ol(a)){if(r=a.stateNode,o=a.memoizedProps,u=null,m=mn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[Ct]=a,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||gv(r.nodeValue,o)),r||ka(a,!0)}else r=lh(r).createTextNode(u),r[Ct]=a,a.stateNode=r}return Nt(a),null;case 31:if(o=a.memoizedState,r===null||r.memoizedState!==null){if(u=Ol(a),o!==null){if(r===null){if(!u)throw Error(s(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[Ct]=a}else Pi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Nt(a),r=!1}else o=jm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return a.flags&256?(nr(a),a):(nr(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Nt(a),null;case 13:if(u=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Ol(a),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(s(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Ct]=a}else Pi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Nt(a),m=!1}else m=jm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(nr(a),a):(nr(a),null)}return nr(a),(a.flags&128)!==0?(a.lanes=o,a):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),o!==r&&o&&(a.child.flags|=8192),Gd(a,a.updateQueue),Nt(a),null);case 4:return Be(),r===null&&Pg(a.stateNode.containerInfo),Nt(a),null;case 10:return Ts(a.type),Nt(a),null;case 19:if(W(Mt),u=a.memoizedState,u===null)return Nt(a),null;if(m=(a.flags&128)!==0,y=u.rendering,y===null)if(m)wc(u,!1);else{if(Dt!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(y=Dd(r),y!==null){for(a.flags|=128,wc(u,!1),r=y.updateQueue,a.updateQueue=r,Gd(a,r),a.subtreeFlags=0,r=o,o=a.child;o!==null;)Ky(o,r),o=o.sibling;return ie(Mt,Mt.current&1|2),et&&ks(a,u.treeForkCount),a.child}r=r.sibling}u.tail!==null&&dn()>Wd&&(a.flags|=128,m=!0,wc(u,!1),a.lanes=4194304)}else{if(!m)if(r=Dd(y),r!==null){if(a.flags|=128,m=!0,r=r.updateQueue,a.updateQueue=r,Gd(a,r),wc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!et)return Nt(a),null}else 2*dn()-u.renderingStartTime>Wd&&o!==536870912&&(a.flags|=128,m=!0,wc(u,!1),a.lanes=4194304);u.isBackwards?(y.sibling=a.child,a.child=y):(r=u.last,r!==null?r.sibling=y:a.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=dn(),r.sibling=null,o=Mt.current,ie(Mt,m?o&1|2:o&1),et&&ks(a,u.treeForkCount),r):(Nt(a),null);case 22:case 23:return nr(a),Lm(),u=a.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(Nt(a),a.subtreeFlags&6&&(a.flags|=8192)):Nt(a),o=a.updateQueue,o!==null&&Gd(a,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),r!==null&&W(Vi),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Ts(Ft),Nt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function oT(r,a){switch(_m(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Ts(Ft),Be(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return bt(a),null;case 31:if(a.memoizedState!==null){if(nr(a),a.alternate===null)throw Error(s(340));Pi()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(nr(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Pi()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return W(Mt),null;case 4:return Be(),null;case 10:return Ts(a.type),null;case 22:case 23:return nr(a),Lm(),r!==null&&W(Vi),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Ts(Ft),null;case 25:return null;default:return null}}function vb(r,a){switch(_m(a),a.tag){case 3:Ts(Ft),Be();break;case 26:case 27:case 5:bt(a);break;case 4:Be();break;case 31:a.memoizedState!==null&&nr(a);break;case 13:nr(a);break;case 19:W(Mt);break;case 10:Ts(a.type);break;case 22:case 23:nr(a),Lm(),r!==null&&W(Vi);break;case 24:Ts(Ft)}}function _c(r,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&r)===r){u=void 0;var y=o.create,_=o.inst;u=y(),_.destroy=u}o=o.next}while(o!==m)}}catch(R){ht(a,a.return,R)}}function Da(r,a,o){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&r)===r){var _=u.inst,R=_.destroy;if(R!==void 0){_.destroy=void 0,m=a;var B=o,Z=R;try{Z()}catch(ae){ht(m,B,ae)}}}u=u.next}while(u!==y)}}catch(ae){ht(a,a.return,ae)}}function wb(r){var a=r.updateQueue;if(a!==null){var o=r.stateNode;try{dx(a,o)}catch(u){ht(r,r.return,u)}}}function _b(r,a,o){o.props=Hi(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){ht(r,a,u)}}function Nc(r,a){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(m){ht(r,a,m)}}function Zr(r,a){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){ht(r,a,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){ht(r,a,m)}else o.current=null}function Nb(r){var a=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){ht(r,r.return,m)}}function gg(r,a,o){try{var u=r.stateNode;CT(u,r.type,o,a),u[fn]=a}catch(m){ht(r,r.return,m)}}function jb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&za(r.type)||r.tag===4}function pg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||jb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&za(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function yg(r,a,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(r),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=nn));else if(u!==4&&(u===27&&za(r.type)&&(o=r.stateNode,a=null),r=r.child,r!==null))for(yg(r,a,o),r=r.sibling;r!==null;)yg(r,a,o),r=r.sibling}function Kd(r,a,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,a?o.insertBefore(r,a):o.appendChild(r);else if(u!==4&&(u===27&&za(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Kd(r,a,o),r=r.sibling;r!==null;)Kd(r,a,o),r=r.sibling}function Eb(r){var a=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);yn(a,u,o),a[Ct]=r,a[fn]=o}catch(y){ht(r,r.return,y)}}var Ds=!1,Ht=!1,xg=!1,kb=typeof WeakSet=="function"?WeakSet:Set,an=null;function cT(r,a){if(r=r.containerInfo,Vg=mh,r=Uy(r),dm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var _=0,R=-1,B=-1,Z=0,ae=0,ce=r,te=null;t:for(;;){for(var re;ce!==o||m!==0&&ce.nodeType!==3||(R=_+m),ce!==y||u!==0&&ce.nodeType!==3||(B=_+u),ce.nodeType===3&&(_+=ce.nodeValue.length),(re=ce.firstChild)!==null;)te=ce,ce=re;for(;;){if(ce===r)break t;if(te===o&&++Z===m&&(R=_),te===y&&++ae===u&&(B=_),(re=ce.nextSibling)!==null)break;ce=te,te=ce.parentNode}ce=re}o=R===-1||B===-1?null:{start:R,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(zg={focusedElem:r,selectionRange:o},mh=!1,an=a;an!==null;)if(a=an,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,an=r;else for(;an!==null;){switch(a=an,y=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)m=r[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,o=a,m=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var ke=Hi(o.type,m);r=u.getSnapshotBeforeUpdate(ke,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(Oe){ht(o,o.return,Oe)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,o=r.nodeType,o===9)qg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":qg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=a.sibling,r!==null){r.return=a.return,an=r;break}an=a.return}}function Sb(r,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ms(r,o),u&4&&_c(5,o);break;case 1:if(Ms(r,o),u&4)if(r=o.stateNode,a===null)try{r.componentDidMount()}catch(_){ht(o,o.return,_)}else{var m=Hi(o.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(m,a,r.__reactInternalSnapshotBeforeUpdate)}catch(_){ht(o,o.return,_)}}u&64&&wb(o),u&512&&Nc(o,o.return);break;case 3:if(Ms(r,o),u&64&&(r=o.updateQueue,r!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{dx(r,a)}catch(_){ht(o,o.return,_)}}break;case 27:a===null&&u&4&&Eb(o);case 26:case 5:Ms(r,o),a===null&&u&4&&Nb(o),u&512&&Nc(o,o.return);break;case 12:Ms(r,o);break;case 31:Ms(r,o),u&4&&Cb(r,o);break;case 13:Ms(r,o),u&4&&Rb(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=xT.bind(null,o),UT(r,o))));break;case 22:if(u=o.memoizedState!==null||Ds,!u){a=a!==null&&a.memoizedState!==null||Ht,m=Ds;var y=Ht;Ds=u,(Ht=a)&&!y?Ps(r,o,(o.subtreeFlags&8772)!==0):Ms(r,o),Ds=m,Ht=y}break;case 30:break;default:Ms(r,o)}}function Tb(r){var a=r.alternate;a!==null&&(r.alternate=null,Tb(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&_i(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Et=null,zn=!1;function Os(r,a,o){for(o=o.child;o!==null;)Ab(r,a,o),o=o.sibling}function Ab(r,a,o){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(sa,o)}catch{}switch(o.tag){case 26:Ht||Zr(o,a),Os(r,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ht||Zr(o,a);var u=Et,m=zn;za(o.type)&&(Et=o.stateNode,zn=!1),Os(r,a,o),Ic(o.stateNode),Et=u,zn=m;break;case 5:Ht||Zr(o,a);case 6:if(u=Et,m=zn,Et=null,Os(r,a,o),Et=u,zn=m,Et!==null)if(zn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(o.stateNode)}catch(y){ht(o,a,y)}else try{Et.removeChild(o.stateNode)}catch(y){ht(o,a,y)}break;case 18:Et!==null&&(zn?(r=Et,wv(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),to(r)):wv(Et,o.stateNode));break;case 4:u=Et,m=zn,Et=o.stateNode.containerInfo,zn=!0,Os(r,a,o),Et=u,zn=m;break;case 0:case 11:case 14:case 15:Da(2,o,a),Ht||Da(4,o,a),Os(r,a,o);break;case 1:Ht||(Zr(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&_b(o,a,u)),Os(r,a,o);break;case 21:Os(r,a,o);break;case 22:Ht=(u=Ht)||o.memoizedState!==null,Os(r,a,o),Ht=u;break;default:Os(r,a,o)}}function Cb(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{to(r)}catch(o){ht(a,a.return,o)}}}function Rb(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{to(r)}catch(o){ht(a,a.return,o)}}function uT(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new kb),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new kb),a;default:throw Error(s(435,r.tag))}}function Yd(r,a){var o=uT(r);a.forEach(function(u){if(!o.has(u)){o.add(u);var m=bT.bind(null,r,u);u.then(m,m)}})}function Fn(r,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],y=r,_=a,R=_;e:for(;R!==null;){switch(R.tag){case 27:if(za(R.type)){Et=R.stateNode,zn=!1;break e}break;case 5:Et=R.stateNode,zn=!1;break e;case 3:case 4:Et=R.stateNode.containerInfo,zn=!0;break e}R=R.return}if(Et===null)throw Error(s(160));Ab(y,_,m),Et=null,zn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Ib(a,r),a=a.sibling}var Dr=null;function Ib(r,a){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Fn(a,r),Bn(r),u&4&&(Da(3,r,r.return),_c(3,r),Da(5,r,r.return));break;case 1:Fn(a,r),Bn(r),u&512&&(Ht||o===null||Zr(o,o.return)),u&64&&Ds&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Dr;if(Fn(a,r),Bn(r),u&512&&(Ht||o===null||Zr(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[ys]||y[Ct]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),yn(y,u,o),y[Ct]=r,Ot(y),u=y;break e;case"link":var _=Iv("link","href",m).get(u+(o.href||""));if(_){for(var R=0;R<_.length;R++)if(y=_[R],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(R,1);break t}}y=m.createElement(u),yn(y,u,o),m.head.appendChild(y);break;case"meta":if(_=Iv("meta","content",m).get(u+(o.content||""))){for(R=0;R<_.length;R++)if(y=_[R],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(R,1);break t}}y=m.createElement(u),yn(y,u,o),m.head.appendChild(y);break;default:throw Error(s(468,u))}y[Ct]=r,Ot(y),u=y}r.stateNode=u}else Dv(m,r.type,r.stateNode);else r.stateNode=Rv(m,u,r.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?Dv(m,r.type,r.stateNode):Rv(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&gg(r,r.memoizedProps,o.memoizedProps)}break;case 27:Fn(a,r),Bn(r),u&512&&(Ht||o===null||Zr(o,o.return)),o!==null&&u&4&&gg(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Fn(a,r),Bn(r),u&512&&(Ht||o===null||Zr(o,o.return)),r.flags&32){m=r.stateNode;try{pr(m,"")}catch(ke){ht(r,r.return,ke)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,gg(r,m,o!==null?o.memoizedProps:m)),u&1024&&(xg=!0);break;case 6:if(Fn(a,r),Bn(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(ke){ht(r,r.return,ke)}}break;case 3:if(uh=null,m=Dr,Dr=oh(a.containerInfo),Fn(a,r),Dr=m,Bn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{to(a.containerInfo)}catch(ke){ht(r,r.return,ke)}xg&&(xg=!1,Db(r));break;case 4:u=Dr,Dr=oh(r.stateNode.containerInfo),Fn(a,r),Bn(r),Dr=u;break;case 12:Fn(a,r),Bn(r);break;case 31:Fn(a,r),Bn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Yd(r,u)));break;case 13:Fn(a,r),Bn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Xd=dn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Yd(r,u)));break;case 22:m=r.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,Z=Ds,ae=Ht;if(Ds=Z||m,Ht=ae||B,Fn(a,r),Ht=ae,Ds=Z,Bn(r),u&8192)e:for(a=r.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(o===null||B||Ds||Ht||$i(r)),o=null,a=r;;){if(a.tag===5||a.tag===26){if(o===null){B=o=a;try{if(y=B.stateNode,m)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{R=B.stateNode;var ce=B.memoizedProps.style,te=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;R.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ke){ht(B,B.return,ke)}}}else if(a.tag===6){if(o===null){B=a;try{B.stateNode.nodeValue=m?"":B.memoizedProps}catch(ke){ht(B,B.return,ke)}}}else if(a.tag===18){if(o===null){B=a;try{var re=B.stateNode;m?_v(re,!0):_v(B.stateNode,!1)}catch(ke){ht(B,B.return,ke)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Yd(r,o))));break;case 19:Fn(a,r),Bn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Yd(r,u)));break;case 30:break;case 21:break;default:Fn(a,r),Bn(r)}}function Bn(r){var a=r.flags;if(a&2){try{for(var o,u=r.return;u!==null;){if(jb(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,y=pg(r);Kd(r,y,m);break;case 5:var _=o.stateNode;o.flags&32&&(pr(_,""),o.flags&=-33);var R=pg(r);Kd(r,R,_);break;case 3:case 4:var B=o.stateNode.containerInfo,Z=pg(r);yg(r,Z,B);break;default:throw Error(s(161))}}catch(ae){ht(r,r.return,ae)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function Db(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;Db(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Ms(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Sb(r,a.alternate,a),a=a.sibling}function $i(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:Da(4,a,a.return),$i(a);break;case 1:Zr(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&_b(a,a.return,o),$i(a);break;case 27:Ic(a.stateNode);case 26:case 5:Zr(a,a.return),$i(a);break;case 22:a.memoizedState===null&&$i(a);break;case 30:$i(a);break;default:$i(a)}r=r.sibling}}function Ps(r,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=r,y=a,_=y.flags;switch(y.tag){case 0:case 11:case 15:Ps(m,y,o),_c(4,y);break;case 1:if(Ps(m,y,o),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Z){ht(u,u.return,Z)}if(u=y,m=u.updateQueue,m!==null){var R=u.stateNode;try{var B=m.shared.hiddenCallbacks;if(B!==null)for(m.shared.hiddenCallbacks=null,m=0;m<B.length;m++)ux(B[m],R)}catch(Z){ht(u,u.return,Z)}}o&&_&64&&wb(y),Nc(y,y.return);break;case 27:Eb(y);case 26:case 5:Ps(m,y,o),o&&u===null&&_&4&&Nb(y),Nc(y,y.return);break;case 12:Ps(m,y,o);break;case 31:Ps(m,y,o),o&&_&4&&Cb(m,y);break;case 13:Ps(m,y,o),o&&_&4&&Rb(m,y);break;case 22:y.memoizedState===null&&Ps(m,y,o),Nc(y,y.return);break;case 30:break;default:Ps(m,y,o)}a=a.sibling}}function bg(r,a){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&cc(o))}function vg(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&cc(r))}function Or(r,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ob(r,a,o,u),a=a.sibling}function Ob(r,a,o,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Or(r,a,o,u),m&2048&&_c(9,a);break;case 1:Or(r,a,o,u);break;case 3:Or(r,a,o,u),m&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&cc(r)));break;case 12:if(m&2048){Or(r,a,o,u),r=a.stateNode;try{var y=a.memoizedProps,_=y.id,R=y.onPostCommit;typeof R=="function"&&R(_,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){ht(a,a.return,B)}}else Or(r,a,o,u);break;case 31:Or(r,a,o,u);break;case 13:Or(r,a,o,u);break;case 23:break;case 22:y=a.stateNode,_=a.alternate,a.memoizedState!==null?y._visibility&2?Or(r,a,o,u):jc(r,a):y._visibility&2?Or(r,a,o,u):(y._visibility|=2,Hl(r,a,o,u,(a.subtreeFlags&10256)!==0||!1)),m&2048&&bg(_,a);break;case 24:Or(r,a,o,u),m&2048&&vg(a.alternate,a);break;default:Or(r,a,o,u)}}function Hl(r,a,o,u,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=r,_=a,R=o,B=u,Z=_.flags;switch(_.tag){case 0:case 11:case 15:Hl(y,_,R,B,m),_c(8,_);break;case 23:break;case 22:var ae=_.stateNode;_.memoizedState!==null?ae._visibility&2?Hl(y,_,R,B,m):jc(y,_):(ae._visibility|=2,Hl(y,_,R,B,m)),m&&Z&2048&&bg(_.alternate,_);break;case 24:Hl(y,_,R,B,m),m&&Z&2048&&vg(_.alternate,_);break;default:Hl(y,_,R,B,m)}a=a.sibling}}function jc(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=r,u=a,m=u.flags;switch(u.tag){case 22:jc(o,u),m&2048&&bg(u.alternate,u);break;case 24:jc(o,u),m&2048&&vg(u.alternate,u);break;default:jc(o,u)}a=a.sibling}}var Ec=8192;function $l(r,a,o){if(r.subtreeFlags&Ec)for(r=r.child;r!==null;)Mb(r,a,o),r=r.sibling}function Mb(r,a,o){switch(r.tag){case 26:$l(r,a,o),r.flags&Ec&&r.memoizedState!==null&&XT(o,Dr,r.memoizedState,r.memoizedProps);break;case 5:$l(r,a,o);break;case 3:case 4:var u=Dr;Dr=oh(r.stateNode.containerInfo),$l(r,a,o),Dr=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Ec,Ec=16777216,$l(r,a,o),Ec=u):$l(r,a,o));break;default:$l(r,a,o)}}function Pb(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function kc(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];an=u,Ub(u,r)}Pb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Lb(r),r=r.sibling}function Lb(r){switch(r.tag){case 0:case 11:case 15:kc(r),r.flags&2048&&Da(9,r,r.return);break;case 3:kc(r);break;case 12:kc(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,Qd(r)):kc(r);break;default:kc(r)}}function Qd(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];an=u,Ub(u,r)}Pb(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:Da(8,a,a.return),Qd(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,Qd(a));break;default:Qd(a)}r=r.sibling}}function Ub(r,a){for(;an!==null;){var o=an;switch(o.tag){case 0:case 11:case 15:Da(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:cc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,an=u;else e:for(o=r;an!==null;){u=an;var m=u.sibling,y=u.return;if(Tb(u),u===o){an=null;break e}if(m!==null){m.return=y,an=m;break e}an=y}}}var dT={getCacheForType:function(r){var a=gn(Ft),o=a.data.get(r);return o===void 0&&(o=r(),a.data.set(r,o)),o},cacheSignal:function(){return gn(Ft).controller.signal}},hT=typeof WeakMap=="function"?WeakMap:Map,lt=0,xt=null,Ge=null,Ye=0,dt=0,rr=null,Oa=!1,Gl=!1,wg=!1,Ls=0,Dt=0,Ma=0,Gi=0,_g=0,sr=0,Kl=0,Sc=null,qn=null,Ng=!1,Xd=0,Vb=0,Wd=1/0,Jd=null,Pa=null,Xt=0,La=null,Yl=null,Us=0,jg=0,Eg=null,zb=null,Tc=0,kg=null;function ar(){return(lt&2)!==0&&Ye!==0?Ye&-Ye:X.T!==null?Ig():ps()}function Fb(){if(sr===0)if((Ye&536870912)===0||et){var r=qr;qr<<=1,(qr&3932160)===0&&(qr=262144),sr=r}else sr=536870912;return r=tr.current,r!==null&&(r.flags|=32),sr}function Hn(r,a,o){(r===xt&&(dt===2||dt===9)||r.cancelPendingCommit!==null)&&(Ql(r,0),Ua(r,Ye,sr,!1)),la(r,o),((lt&2)===0||r!==xt)&&(r===xt&&((lt&2)===0&&(Gi|=o),Dt===4&&Ua(r,Ye,sr,!1)),es(r))}function Bb(r,a,o){if((lt&6)!==0)throw Error(s(327));var u=!o&&(a&127)===0&&(a&r.expiredLanes)===0||ia(r,a),m=u?gT(r,a):Tg(r,a,!0),y=u;do{if(m===0){Gl&&!u&&Ua(r,a,0,!1);break}else{if(o=r.current.alternate,y&&!fT(o)){m=Tg(r,a,!1),y=!1;continue}if(m===2){if(y=a,r.errorRecoveryDisabledLanes&y)var _=0;else _=r.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;e:{var R=r;m=Sc;var B=R.current.memoizedState.isDehydrated;if(B&&(Ql(R,_).flags|=256),_=Tg(R,_,!1),_!==2){if(wg&&!B){R.errorRecoveryDisabledLanes|=y,Gi|=y,m=4;break e}y=qn,qn=m,y!==null&&(qn===null?qn=y:qn.push.apply(qn,y))}m=_}if(y=!1,m!==2)continue}}if(m===1){Ql(r,0),Ua(r,a,0,!0);break}e:{switch(u=r,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Ua(u,a,sr,!Oa);break e;case 2:qn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(m=Xd+300-dn(),10<m)){if(Ua(u,a,sr,!Oa),mr(u,0,!0)!==0)break e;Us=a,u.timeoutHandle=bv(qb.bind(null,u,o,qn,Jd,Ng,a,sr,Gi,Kl,Oa,y,"Throttled",-0,0),m);break e}qb(u,o,qn,Jd,Ng,a,sr,Gi,Kl,Oa,y,null,-0,0)}}break}while(!0);es(r)}function qb(r,a,o,u,m,y,_,R,B,Z,ae,ce,te,re){if(r.timeoutHandle=-1,ce=a.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:nn},Mb(a,y,ce);var ke=(y&62914560)===y?Xd-dn():(y&4194048)===y?Vb-dn():0;if(ke=WT(ce,ke),ke!==null){Us=y,r.cancelPendingCommit=ke(Wb.bind(null,r,a,y,o,u,m,_,R,B,ae,ce,null,te,re)),Ua(r,y,_,!Z);return}}Wb(r,a,y,o,u,m,_,R,B)}function fT(r){for(var a=r;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],y=m.getSnapshot;m=m.value;try{if(!Zn(y(),m))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ua(r,a,o,u){a&=~_g,a&=~Gi,r.suspendedLanes|=a,r.pingedLanes&=~a,u&&(r.warmLanes|=a),u=r.expirationTimes;for(var m=a;0<m;){var y=31-Sn(m),_=1<<y;u[y]=-1,m&=~_}o!==0&&Bo(r,o,a)}function Zd(){return(lt&6)===0?(Ac(0),!1):!0}function Sg(){if(Ge!==null){if(dt===0)var r=Ge.return;else r=Ge,Ss=Li=null,qm(r),Vl=null,dc=0,r=Ge;for(;r!==null;)vb(r.alternate,r),r=r.return;Ge=null}}function Ql(r,a){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,DT(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Us=0,Sg(),xt=r,Ge=o=Es(r.current,null),Ye=a,dt=0,rr=null,Oa=!1,Gl=ia(r,a),wg=!1,Kl=sr=_g=Gi=Ma=Dt=0,qn=Sc=null,Ng=!1,(a&8)!==0&&(a|=a&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=a;0<u;){var m=31-Sn(u),y=1<<m;a|=r[m],u&=~y}return Ls=a,vd(),o}function Hb(r,a){qe=null,X.H=bc,a===Ul||a===Td?(a=ix(),dt=3):a===Rm?(a=ix(),dt=4):dt=a===ag?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,rr=a,Ge===null&&(Dt=1,Bd(r,xr(a,r.current)))}function $b(){var r=tr.current;return r===null?!0:(Ye&4194048)===Ye?_r===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?r===_r:!1}function Gb(){var r=X.H;return X.H=bc,r===null?bc:r}function Kb(){var r=X.A;return X.A=dT,r}function eh(){Dt=4,Oa||(Ye&4194048)!==Ye&&tr.current!==null||(Gl=!0),(Ma&134217727)===0&&(Gi&134217727)===0||xt===null||Ua(xt,Ye,sr,!1)}function Tg(r,a,o){var u=lt;lt|=2;var m=Gb(),y=Kb();(xt!==r||Ye!==a)&&(Jd=null,Ql(r,a)),a=!1;var _=Dt;e:do try{if(dt!==0&&Ge!==null){var R=Ge,B=rr;switch(dt){case 8:Sg(),_=6;break e;case 3:case 2:case 9:case 6:tr.current===null&&(a=!0);var Z=dt;if(dt=0,rr=null,Xl(r,R,B,Z),o&&Gl){_=0;break e}break;default:Z=dt,dt=0,rr=null,Xl(r,R,B,Z)}}mT(),_=Dt;break}catch(ae){Hb(r,ae)}while(!0);return a&&r.shellSuspendCounter++,Ss=Li=null,lt=u,X.H=m,X.A=y,Ge===null&&(xt=null,Ye=0,vd()),_}function mT(){for(;Ge!==null;)Yb(Ge)}function gT(r,a){var o=lt;lt|=2;var u=Gb(),m=Kb();xt!==r||Ye!==a?(Jd=null,Wd=dn()+500,Ql(r,a)):Gl=ia(r,a);e:do try{if(dt!==0&&Ge!==null){a=Ge;var y=rr;t:switch(dt){case 1:dt=0,rr=null,Xl(r,a,y,1);break;case 2:case 9:if(sx(y)){dt=0,rr=null,Qb(a);break}a=function(){dt!==2&&dt!==9||xt!==r||(dt=7),es(r)},y.then(a,a);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:sx(y)?(dt=0,rr=null,Qb(a)):(dt=0,rr=null,Xl(r,a,y,7));break;case 5:var _=null;switch(Ge.tag){case 26:_=Ge.memoizedState;case 5:case 27:var R=Ge;if(_?Ov(_):R.stateNode.complete){dt=0,rr=null;var B=R.sibling;if(B!==null)Ge=B;else{var Z=R.return;Z!==null?(Ge=Z,th(Z)):Ge=null}break t}}dt=0,rr=null,Xl(r,a,y,5);break;case 6:dt=0,rr=null,Xl(r,a,y,6);break;case 8:Sg(),Dt=6;break e;default:throw Error(s(462))}}pT();break}catch(ae){Hb(r,ae)}while(!0);return Ss=Li=null,X.H=u,X.A=m,lt=o,Ge!==null?0:(xt=null,Ye=0,vd(),Dt)}function pT(){for(;Ge!==null&&!Lo();)Yb(Ge)}function Yb(r){var a=xb(r.alternate,r,Ls);r.memoizedProps=r.pendingProps,a===null?th(r):Ge=a}function Qb(r){var a=r,o=a.alternate;switch(a.tag){case 15:case 0:a=hb(o,a,a.pendingProps,a.type,void 0,Ye);break;case 11:a=hb(o,a,a.pendingProps,a.type.render,a.ref,Ye);break;case 5:qm(a);default:vb(o,a),a=Ge=Ky(a,Ls),a=xb(o,a,Ls)}r.memoizedProps=r.pendingProps,a===null?th(r):Ge=a}function Xl(r,a,o,u){Ss=Li=null,qm(a),Vl=null,dc=0;var m=a.return;try{if(sT(r,m,a,o,Ye)){Dt=1,Bd(r,xr(o,r.current)),Ge=null;return}}catch(y){if(m!==null)throw Ge=m,y;Dt=1,Bd(r,xr(o,r.current)),Ge=null;return}a.flags&32768?(et||u===1?r=!0:Gl||(Ye&536870912)!==0?r=!1:(Oa=r=!0,(u===2||u===9||u===3||u===6)&&(u=tr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Xb(a,r)):th(a)}function th(r){var a=r;do{if((a.flags&32768)!==0){Xb(a,Oa);return}r=a.return;var o=lT(a.alternate,a,Ls);if(o!==null){Ge=o;return}if(a=a.sibling,a!==null){Ge=a;return}Ge=a=r}while(a!==null);Dt===0&&(Dt=5)}function Xb(r,a){do{var o=oT(r.alternate,r);if(o!==null){o.flags&=32767,Ge=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(r=r.sibling,r!==null)){Ge=r;return}Ge=r=o}while(r!==null);Dt=6,Ge=null}function Wb(r,a,o,u,m,y,_,R,B){r.cancelPendingCommit=null;do nh();while(Xt!==0);if((lt&6)!==0)throw Error(s(327));if(a!==null){if(a===r.current)throw Error(s(177));if(y=a.lanes|a.childLanes,y|=pm,hn(r,o,y,_,R,B),r===xt&&(Ge=xt=null,Ye=0),Yl=a,La=r,Us=o,jg=y,Eg=m,zb=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,vT(ms,function(){return nv(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,m=H.p,H.p=2,_=lt,lt|=4;try{cT(r,a,o)}finally{lt=_,H.p=m,X.T=u}}Xt=1,Jb(),Zb(),ev()}}function Jb(){if(Xt===1){Xt=0;var r=La,a=Yl,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=H.p;H.p=2;var m=lt;lt|=4;try{Ib(a,r);var y=zg,_=Uy(r.containerInfo),R=y.focusedElem,B=y.selectionRange;if(_!==R&&R&&R.ownerDocument&&Ly(R.ownerDocument.documentElement,R)){if(B!==null&&dm(R)){var Z=B.start,ae=B.end;if(ae===void 0&&(ae=Z),"selectionStart"in R)R.selectionStart=Z,R.selectionEnd=Math.min(ae,R.value.length);else{var ce=R.ownerDocument||document,te=ce&&ce.defaultView||window;if(te.getSelection){var re=te.getSelection(),ke=R.textContent.length,Oe=Math.min(B.start,ke),pt=B.end===void 0?Oe:Math.min(B.end,ke);!re.extend&&Oe>pt&&(_=pt,pt=Oe,Oe=_);var Y=Py(R,Oe),$=Py(R,pt);if(Y&&$&&(re.rangeCount!==1||re.anchorNode!==Y.node||re.anchorOffset!==Y.offset||re.focusNode!==$.node||re.focusOffset!==$.offset)){var J=ce.createRange();J.setStart(Y.node,Y.offset),re.removeAllRanges(),Oe>pt?(re.addRange(J),re.extend($.node,$.offset)):(J.setEnd($.node,$.offset),re.addRange(J))}}}}for(ce=[],re=R;re=re.parentNode;)re.nodeType===1&&ce.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ce.length;R++){var le=ce[R];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}mh=!!Vg,zg=Vg=null}finally{lt=m,H.p=u,X.T=o}}r.current=a,Xt=2}}function Zb(){if(Xt===2){Xt=0;var r=La,a=Yl,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=H.p;H.p=2;var m=lt;lt|=4;try{Sb(r,a.alternate,a)}finally{lt=m,H.p=u,X.T=o}}Xt=3}}function ev(){if(Xt===4||Xt===3){Xt=0,Uo();var r=La,a=Yl,o=Us,u=zb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Xt=5:(Xt=0,Yl=La=null,tv(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(Pa=null),Ho(o),a=a.stateNode,vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(sa,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=X.T,m=H.p,H.p=2,X.T=null;try{for(var y=r.onRecoverableError,_=0;_<u.length;_++){var R=u[_];y(R.value,{componentStack:R.stack})}}finally{X.T=a,H.p=m}}(Us&3)!==0&&nh(),es(r),m=r.pendingLanes,(o&261930)!==0&&(m&42)!==0?r===kg?Tc++:(Tc=0,kg=r):Tc=0,Ac(0)}}function tv(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,cc(a)))}function nh(){return Jb(),Zb(),ev(),nv()}function nv(){if(Xt!==5)return!1;var r=La,a=jg;jg=0;var o=Ho(Us),u=X.T,m=H.p;try{H.p=32>o?32:o,X.T=null,o=Eg,Eg=null;var y=La,_=Us;if(Xt=0,Yl=La=null,Us=0,(lt&6)!==0)throw Error(s(331));var R=lt;if(lt|=4,Lb(y.current),Ob(y,y.current,_,o),lt=R,Ac(0,!1),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(sa,y)}catch{}return!0}finally{H.p=m,X.T=u,tv(r,a)}}function rv(r,a,o){a=xr(o,a),a=sg(r.stateNode,a,2),r=Ca(r,a,2),r!==null&&(la(r,2),es(r))}function ht(r,a,o){if(r.tag===3)rv(r,r,o);else for(;a!==null;){if(a.tag===3){rv(a,r,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Pa===null||!Pa.has(u))){r=xr(o,r),o=sb(2),u=Ca(a,o,2),u!==null&&(ab(o,u,a,r),la(u,2),es(u));break}}a=a.return}}function Ag(r,a,o){var u=r.pingCache;if(u===null){u=r.pingCache=new hT;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(o)||(wg=!0,m.add(o),r=yT.bind(null,r,a,o),a.then(r,r))}function yT(r,a,o){var u=r.pingCache;u!==null&&u.delete(a),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,xt===r&&(Ye&o)===o&&(Dt===4||Dt===3&&(Ye&62914560)===Ye&&300>dn()-Xd?(lt&2)===0&&Ql(r,0):_g|=o,Kl===Ye&&(Kl=0)),es(r)}function sv(r,a){a===0&&(a=Fo()),r=Oi(r,a),r!==null&&(la(r,a),es(r))}function xT(r){var a=r.memoizedState,o=0;a!==null&&(o=a.retryLane),sv(r,o)}function bT(r,a){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(a),sv(r,o)}function vT(r,a){return Ln(r,a)}var rh=null,Wl=null,Cg=!1,sh=!1,Rg=!1,Va=0;function es(r){r!==Wl&&r.next===null&&(Wl===null?rh=Wl=r:Wl=Wl.next=r),sh=!0,Cg||(Cg=!0,_T())}function Ac(r,a){if(!Rg&&sh){Rg=!0;do for(var o=!1,u=rh;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var _=u.suspendedLanes,R=u.pingedLanes;y=(1<<31-Sn(42|r)+1)-1,y&=m&~(_&~R),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,ov(u,y))}else y=Ye,y=mr(u,u===xt?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||ia(u,y)||(o=!0,ov(u,y));u=u.next}while(o);Rg=!1}}function wT(){av()}function av(){sh=Cg=!1;var r=0;Va!==0&&IT()&&(r=Va);for(var a=dn(),o=null,u=rh;u!==null;){var m=u.next,y=iv(u,a);y===0?(u.next=null,o===null?rh=m:o.next=m,m===null&&(Wl=o)):(o=u,(r!==0||(y&3)!==0)&&(sh=!0)),u=m}Xt!==0&&Xt!==5||Ac(r),Va!==0&&(Va=0)}function iv(r,a){for(var o=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var _=31-Sn(y),R=1<<_,B=m[_];B===-1?((R&o)===0||(R&u)!==0)&&(m[_]=yl(R,a)):B<=a&&(r.expiredLanes|=R),y&=~R}if(a=xt,o=Ye,o=mr(r,r===a?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===a&&(dt===2||dt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&hr(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||ia(r,o)){if(a=o&-o,a===r.callbackPriority)return a;switch(u!==null&&hr(u),Ho(o)){case 2:case 8:o=tn;break;case 32:o=ms;break;case 268435456:o=Vo;break;default:o=ms}return u=lv.bind(null,r),o=Ln(o,u),r.callbackPriority=a,r.callbackNode=o,a}return u!==null&&u!==null&&hr(u),r.callbackPriority=2,r.callbackNode=null,2}function lv(r,a){if(Xt!==0&&Xt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(nh()&&r.callbackNode!==o)return null;var u=Ye;return u=mr(r,r===xt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Bb(r,u,a),iv(r,dn()),r.callbackNode!=null&&r.callbackNode===o?lv.bind(null,r):null)}function ov(r,a){if(nh())return null;Bb(r,a,!0)}function _T(){OT(function(){(lt&6)!==0?Ln(Qt,wT):av()})}function Ig(){if(Va===0){var r=Pl;r===0&&(r=wi,wi<<=1,(wi&261888)===0&&(wi=256)),Va=r}return Va}function cv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Yr(""+r)}function uv(r,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,r.id&&o.setAttribute("form",r.id),a.parentNode.insertBefore(o,a),r=new FormData(r),o.parentNode.removeChild(o),r}function NT(r,a,o,u,m){if(a==="submit"&&o&&o.stateNode===m){var y=cv((m[fn]||null).action),_=u.submitter;_&&(a=(a=_[fn]||null)?cv(a.formAction):_.getAttribute("formAction"),a!==null&&(y=a,_=null));var R=new Si("action","action",null,u,m);r.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Va!==0){var B=_?uv(m,_):new FormData(m);Jm(o,{pending:!0,data:B,method:m.method,action:y},null,B)}}else typeof y=="function"&&(R.preventDefault(),B=_?uv(m,_):new FormData(m),Jm(o,{pending:!0,data:B,method:m.method,action:y},y,B))},currentTarget:m}]})}}for(var Dg=0;Dg<gm.length;Dg++){var Og=gm[Dg],jT=Og.toLowerCase(),ET=Og[0].toUpperCase()+Og.slice(1);Ir(jT,"on"+ET)}Ir(Fy,"onAnimationEnd"),Ir(By,"onAnimationIteration"),Ir(qy,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(FS,"onTransitionRun"),Ir(BS,"onTransitionStart"),Ir(qS,"onTransitionCancel"),Ir(Hy,"onTransitionEnd"),Kr("onMouseEnter",["mouseout","mouseover"]),Kr("onMouseLeave",["mouseout","mouseover"]),Kr("onPointerEnter",["pointerout","pointerover"]),Kr("onPointerLeave",["pointerout","pointerover"]),Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cc));function dv(r,a){a=(a&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],m=u.event;u=u.listeners;e:{var y=void 0;if(a)for(var _=u.length-1;0<=_;_--){var R=u[_],B=R.instance,Z=R.currentTarget;if(R=R.listener,B!==y&&m.isPropagationStopped())break e;y=R,m.currentTarget=Z;try{y(m)}catch(ae){bd(ae)}m.currentTarget=null,y=B}else for(_=0;_<u.length;_++){if(R=u[_],B=R.instance,Z=R.currentTarget,R=R.listener,B!==y&&m.isPropagationStopped())break e;y=R,m.currentTarget=Z;try{y(m)}catch(ae){bd(ae)}m.currentTarget=null,y=B}}}}function Ke(r,a){var o=a[ua];o===void 0&&(o=a[ua]=new Set);var u=r+"__bubble";o.has(u)||(hv(a,r,2,!1),o.add(u))}function Mg(r,a,o){var u=0;a&&(u|=4),hv(o,r,u,a)}var ah="_reactListening"+Math.random().toString(36).slice(2);function Pg(r){if(!r[ah]){r[ah]=!0,xl.forEach(function(o){o!=="selectionchange"&&(kT.has(o)||Mg(o,!1,r),Mg(o,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[ah]||(a[ah]=!0,Mg("selectionchange",!1,a))}}function hv(r,a,o,u){switch(Fv(a)){case 2:var m=e1;break;case 8:m=t1;break;default:m=Wg}o=m.bind(null,a,o,r),m=void 0,!Jo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(a,o,{capture:!0,passive:m}):r.addEventListener(a,o,!0):m!==void 0?r.addEventListener(a,o,{passive:m}):r.addEventListener(a,o,!1)}function Lg(r,a,o,u,m){var y=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var R=u.stateNode.containerInfo;if(R===m)break;if(_===4)for(_=u.return;_!==null;){var B=_.tag;if((B===3||B===4)&&_.stateNode.containerInfo===m)return;_=_.return}for(;R!==null;){if(_=xs(R),_===null)return;if(B=_.tag,B===5||B===6||B===26||B===27){u=y=_;continue e}R=R.parentNode}}u=u.return}rd(function(){var Z=y,ae=Nl(o),ce=[];e:{var te=$y.get(r);if(te!==void 0){var re=Si,ke=r;switch(r){case"keypress":if(ki(o)===0)break e;case"keydown":case"keyup":re=hd;break;case"focusin":ke="focus",re=va;break;case"focusout":ke="blur",re=va;break;case"beforeblur":case"afterblur":re=va;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=md;break;case Fy:case By:case qy:re=kl;break;case Hy:re=Sl;break;case"scroll":case"scrollend":re=sd;break;case"wheel":re=pd;break;case"copy":case"cut":case"paste":re=od;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=rc;break;case"toggle":case"beforetoggle":re=_a}var Oe=(a&4)!==0,pt=!Oe&&(r==="scroll"||r==="scrollend"),Y=Oe?te!==null?te+"Capture":null:te;Oe=[];for(var $=Z,J;$!==null;){var le=$;if(J=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||J===null||Y===null||(le=Un($,Y),le!=null&&Oe.push(Rc($,le,J))),pt)break;$=$.return}0<Oe.length&&(te=new re(te,ke,null,o,ae),ce.push({event:te,listeners:Oe}))}}if((a&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",re=r==="mouseout"||r==="pointerout",te&&o!==_l&&(ke=o.relatedTarget||o.fromElement)&&(xs(ke)||ke[$r]))break e;if((re||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,re?(ke=o.relatedTarget||o.toElement,re=Z,ke=ke?xs(ke):null,ke!==null&&(pt=c(ke),Oe=ke.tag,ke!==pt||Oe!==5&&Oe!==27&&Oe!==6)&&(ke=null)):(re=null,ke=Z),re!==ke)){if(Oe=ad,le="onMouseLeave",Y="onMouseEnter",$="mouse",(r==="pointerout"||r==="pointerover")&&(Oe=rc,le="onPointerLeave",Y="onPointerEnter",$="pointer"),pt=re==null?te:Ni(re),J=ke==null?te:Ni(ke),te=new Oe(le,$+"leave",re,o,ae),te.target=pt,te.relatedTarget=J,le=null,xs(ae)===Z&&(Oe=new Oe(Y,$+"enter",ke,o,ae),Oe.target=J,Oe.relatedTarget=pt,le=Oe),pt=le,re&&ke)t:{for(Oe=ST,Y=re,$=ke,J=0,le=Y;le;le=Oe(le))J++;le=0;for(var Re=$;Re;Re=Oe(Re))le++;for(;0<J-le;)Y=Oe(Y),J--;for(;0<le-J;)$=Oe($),le--;for(;J--;){if(Y===$||$!==null&&Y===$.alternate){Oe=Y;break t}Y=Oe(Y),$=Oe($)}Oe=null}else Oe=null;re!==null&&fv(ce,te,re,Oe,!1),ke!==null&&pt!==null&&fv(ce,pt,ke,Oe,!0)}}e:{if(te=Z?Ni(Z):window,re=te.nodeName&&te.nodeName.toLowerCase(),re==="select"||re==="input"&&te.type==="file")var at=Cy;else if(Vn(te))if(Ry)at=US;else{at=PS;var Se=MS}else re=te.nodeName,!re||re.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Xo(Z.elementType)&&(at=Cy):at=LS;if(at&&(at=at(r,Z))){Ri(ce,at,o,ae);break e}Se&&Se(r,te,Z),r==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&wl(te,"number",te.value)}switch(Se=Z?Ni(Z):window,r){case"focusin":(Vn(Se)||Se.contentEditable==="true")&&(Tl=Se,hm=Z,ic=null);break;case"focusout":ic=hm=Tl=null;break;case"mousedown":fm=!0;break;case"contextmenu":case"mouseup":case"dragend":fm=!1,Vy(ce,o,ae);break;case"selectionchange":if(zS)break;case"keydown":case"keyup":Vy(ce,o,ae)}var He;if(b)e:{switch(r){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else $e?ot(r,o)&&(Qe="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Qe="onCompositionStart");Qe&&(Q&&o.locale!=="ko"&&($e||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&$e&&(He=pa()):(Jn=ae,jl="value"in Jn?Jn.value:Jn.textContent,$e=!0)),Se=ih(Z,Qe),0<Se.length&&(Qe=new ec(Qe,r,null,o,ae),ce.push({event:Qe,listeners:Se}),He?Qe.data=He:(He=zt(o),He!==null&&(Qe.data=He)))),(He=P?rn(r,o):sn(r,o))&&(Qe=ih(Z,"onBeforeInput"),0<Qe.length&&(Se=new ec("onBeforeInput","beforeinput",null,o,ae),ce.push({event:Se,listeners:Qe}),Se.data=He)),NT(ce,r,Z,o,ae)}dv(ce,a)})}function Rc(r,a,o){return{instance:r,listener:a,currentTarget:o}}function ih(r,a){for(var o=a+"Capture",u=[];r!==null;){var m=r,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Un(r,o),m!=null&&u.unshift(Rc(r,m,y)),m=Un(r,a),m!=null&&u.push(Rc(r,m,y))),r.tag===3)return u;r=r.return}return[]}function ST(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function fv(r,a,o,u,m){for(var y=a._reactName,_=[];o!==null&&o!==u;){var R=o,B=R.alternate,Z=R.stateNode;if(R=R.tag,B!==null&&B===u)break;R!==5&&R!==26&&R!==27||Z===null||(B=Z,m?(Z=Un(o,y),Z!=null&&_.unshift(Rc(o,Z,B))):m||(Z=Un(o,y),Z!=null&&_.push(Rc(o,Z,B)))),o=o.return}_.length!==0&&r.push({event:a,listeners:_})}var TT=/\r\n?/g,AT=/\u0000|\uFFFD/g;function mv(r){return(typeof r=="string"?r:""+r).replace(TT,`
`).replace(AT,"")}function gv(r,a){return a=mv(a),mv(r)===a}function gt(r,a,o,u,m,y){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||pr(r,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&pr(r,""+u);break;case"className":fa(r,"class",u);break;case"tabIndex":fa(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":fa(r,o,u);break;case"style":td(r,u,y);break;case"data":if(a!=="object"){fa(r,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Yr(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(a!=="input"&&gt(r,a,"name",m.name,m,null),gt(r,a,"formEncType",m.formEncType,m,null),gt(r,a,"formMethod",m.formMethod,m,null),gt(r,a,"formTarget",m.formTarget,m,null)):(gt(r,a,"encType",m.encType,m,null),gt(r,a,"method",m.method,m,null),gt(r,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Yr(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=nn);break;case"onScroll":u!=null&&Ke("scroll",r);break;case"onScrollEnd":u!=null&&Ke("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Yr(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ke("beforetoggle",r),Ke("toggle",r),ha(r,"popover",u);break;case"xlinkActuate":gr(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":gr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":gr(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":gr(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":gr(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":gr(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":gr(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":gr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":gr(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ha(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=im.get(o)||o,ha(r,o,u))}}function Ug(r,a,o,u,m,y){switch(o){case"style":td(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?pr(r,u):(typeof u=="number"||typeof u=="bigint")&&pr(r,""+u);break;case"onScroll":u!=null&&Ke("scroll",r);break;case"onScrollEnd":u!=null&&Ke("scrollend",r);break;case"onClick":u!=null&&(r.onclick=nn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!da.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),a=o.slice(2,m?o.length-7:void 0),y=r[fn]||null,y=y!=null?y[o]:null,typeof y=="function"&&r.removeEventListener(a,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(a,u,m);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):ha(r,o,u)}}}function yn(r,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",r),Ke("load",r);var u=!1,m=!1,y;for(y in o)if(o.hasOwnProperty(y)){var _=o[y];if(_!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:gt(r,a,y,_,o,null)}}m&&gt(r,a,"srcSet",o.srcSet,o,null),u&&gt(r,a,"src",o.src,o,null);return;case"input":Ke("invalid",r);var R=y=_=m=null,B=null,Z=null;for(u in o)if(o.hasOwnProperty(u)){var ae=o[u];if(ae!=null)switch(u){case"name":m=ae;break;case"type":_=ae;break;case"checked":B=ae;break;case"defaultChecked":Z=ae;break;case"value":y=ae;break;case"defaultValue":R=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,a));break;default:gt(r,a,u,ae,o,null)}}ji(r,y,R,B,Z,_,m,!1);return;case"select":Ke("invalid",r),u=_=y=null;for(m in o)if(o.hasOwnProperty(m)&&(R=o[m],R!=null))switch(m){case"value":y=R;break;case"defaultValue":_=R;break;case"multiple":u=R;default:gt(r,a,m,R,o,null)}a=y,o=_,r.multiple=!!u,a!=null?st(r,!!u,a,!1):o!=null&&st(r,!!u,o,!0);return;case"textarea":Ke("invalid",r),y=m=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(R=o[_],R!=null))switch(_){case"value":u=R;break;case"defaultValue":m=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:gt(r,a,_,R,o,null)}ga(r,u,m,y);return;case"option":for(B in o)if(o.hasOwnProperty(B)&&(u=o[B],u!=null))switch(B){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:gt(r,a,B,u,o,null)}return;case"dialog":Ke("beforetoggle",r),Ke("toggle",r),Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":Ke("load",r);break;case"video":case"audio":for(u=0;u<Cc.length;u++)Ke(Cc[u],r);break;case"image":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"embed":case"source":case"link":Ke("error",r),Ke("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(u=o[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:gt(r,a,Z,u,o,null)}return;default:if(Xo(a)){for(ae in o)o.hasOwnProperty(ae)&&(u=o[ae],u!==void 0&&Ug(r,a,ae,u,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(u=o[R],u!=null&&gt(r,a,R,u,o,null))}function CT(r,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,_=null,R=null,B=null,Z=null,ae=null;for(re in o){var ce=o[re];if(o.hasOwnProperty(re)&&ce!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":B=ce;default:u.hasOwnProperty(re)||gt(r,a,re,null,u,ce)}}for(var te in u){var re=u[te];if(ce=o[te],u.hasOwnProperty(te)&&(re!=null||ce!=null))switch(te){case"type":y=re;break;case"name":m=re;break;case"checked":Z=re;break;case"defaultChecked":ae=re;break;case"value":_=re;break;case"defaultValue":R=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,a));break;default:re!==ce&&gt(r,a,te,re,u,ce)}}ma(r,_,R,B,Z,ae,y,m);return;case"select":re=_=R=te=null;for(y in o)if(B=o[y],o.hasOwnProperty(y)&&B!=null)switch(y){case"value":break;case"multiple":re=B;default:u.hasOwnProperty(y)||gt(r,a,y,null,u,B)}for(m in u)if(y=u[m],B=o[m],u.hasOwnProperty(m)&&(y!=null||B!=null))switch(m){case"value":te=y;break;case"defaultValue":R=y;break;case"multiple":_=y;default:y!==B&&gt(r,a,m,y,u,B)}a=R,o=_,u=re,te!=null?st(r,!!o,te,!1):!!u!=!!o&&(a!=null?st(r,!!o,a,!0):st(r,!!o,o?[]:"",!1));return;case"textarea":re=te=null;for(R in o)if(m=o[R],o.hasOwnProperty(R)&&m!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:gt(r,a,R,null,u,m)}for(_ in u)if(m=u[_],y=o[_],u.hasOwnProperty(_)&&(m!=null||y!=null))switch(_){case"value":te=m;break;case"defaultValue":re=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&gt(r,a,_,m,u,y)}Ei(r,te,re);return;case"option":for(var ke in o)if(te=o[ke],o.hasOwnProperty(ke)&&te!=null&&!u.hasOwnProperty(ke))switch(ke){case"selected":r.selected=!1;break;default:gt(r,a,ke,null,u,te)}for(B in u)if(te=u[B],re=o[B],u.hasOwnProperty(B)&&te!==re&&(te!=null||re!=null))switch(B){case"selected":r.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:gt(r,a,B,te,u,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in o)te=o[Oe],o.hasOwnProperty(Oe)&&te!=null&&!u.hasOwnProperty(Oe)&&gt(r,a,Oe,null,u,te);for(Z in u)if(te=u[Z],re=o[Z],u.hasOwnProperty(Z)&&te!==re&&(te!=null||re!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,a));break;default:gt(r,a,Z,te,u,re)}return;default:if(Xo(a)){for(var pt in o)te=o[pt],o.hasOwnProperty(pt)&&te!==void 0&&!u.hasOwnProperty(pt)&&Ug(r,a,pt,void 0,u,te);for(ae in u)te=u[ae],re=o[ae],!u.hasOwnProperty(ae)||te===re||te===void 0&&re===void 0||Ug(r,a,ae,te,u,re);return}}for(var Y in o)te=o[Y],o.hasOwnProperty(Y)&&te!=null&&!u.hasOwnProperty(Y)&&gt(r,a,Y,null,u,te);for(ce in u)te=u[ce],re=o[ce],!u.hasOwnProperty(ce)||te===re||te==null&&re==null||gt(r,a,ce,te,u,re)}function pv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RT(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],y=m.transferSize,_=m.initiatorType,R=m.duration;if(y&&R&&pv(_)){for(_=0,R=m.responseEnd,u+=1;u<o.length;u++){var B=o[u],Z=B.startTime;if(Z>R)break;var ae=B.transferSize,ce=B.initiatorType;ae&&pv(ce)&&(B=B.responseEnd,_+=ae*(B<R?1:(R-Z)/(B-Z)))}if(--u,a+=8*(y+_)/(m.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Vg=null,zg=null;function lh(r){return r.nodeType===9?r:r.ownerDocument}function yv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xv(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Fg(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Bg=null;function IT(){var r=window.event;return r&&r.type==="popstate"?r===Bg?!1:(Bg=r,!0):(Bg=null,!1)}var bv=typeof setTimeout=="function"?setTimeout:void 0,DT=typeof clearTimeout=="function"?clearTimeout:void 0,vv=typeof Promise=="function"?Promise:void 0,OT=typeof queueMicrotask=="function"?queueMicrotask:typeof vv<"u"?function(r){return vv.resolve(null).then(r).catch(MT)}:bv;function MT(r){setTimeout(function(){throw r})}function za(r){return r==="head"}function wv(r,a){var o=a,u=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(m),to(a);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Ic(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Ic(o);for(var y=o.firstChild;y;){var _=y.nextSibling,R=y.nodeName;y[ys]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=_}}else o==="body"&&Ic(r.ownerDocument.body);o=m}while(o);to(a)}function _v(r,a){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function qg(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":qg(o),_i(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function PT(r,a,o,u){for(;r.nodeType===1;){var m=o;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[ys])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=Nr(r.nextSibling),r===null)break}return null}function LT(r,a,o){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Nr(r.nextSibling),r===null))return null;return r}function Nv(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Nr(r.nextSibling),r===null))return null;return r}function Hg(r){return r.data==="$?"||r.data==="$~"}function $g(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function UT(r,a){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||o.readyState!=="loading")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Nr(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var Gg=null;function jv(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(a===0)return Nr(r.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}r=r.nextSibling}return null}function Ev(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return r;a--}else o!=="/$"&&o!=="/&"||a++}r=r.previousSibling}return null}function kv(r,a,o){switch(a=lh(o),r){case"html":if(r=a.documentElement,!r)throw Error(s(452));return r;case"head":if(r=a.head,!r)throw Error(s(453));return r;case"body":if(r=a.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Ic(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);_i(r)}var jr=new Map,Sv=new Set;function oh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Vs=H.d;H.d={f:VT,r:zT,D:FT,C:BT,L:qT,m:HT,X:GT,S:$T,M:KT};function VT(){var r=Vs.f(),a=Zd();return r||a}function zT(r){var a=bs(r);a!==null&&a.tag===5&&a.type==="form"?Hx(a):Vs.r(r)}var Jl=typeof document>"u"?null:document;function Tv(r,a,o){var u=Jl;if(u&&typeof a=="string"&&a){var m=Rt(a);m='link[rel="'+r+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Sv.has(m)||(Sv.add(m),r={rel:r,crossOrigin:o,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),yn(a,"link",r),Ot(a),u.head.appendChild(a)))}}function FT(r){Vs.D(r),Tv("dns-prefetch",r,null)}function BT(r,a){Vs.C(r,a),Tv("preconnect",r,a)}function qT(r,a,o){Vs.L(r,a,o);var u=Jl;if(u&&r&&a){var m='link[rel="preload"][as="'+Rt(a)+'"]';a==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Rt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Rt(o.imageSizes)+'"]')):m+='[href="'+Rt(r)+'"]';var y=m;switch(a){case"style":y=Zl(r);break;case"script":y=eo(r)}jr.has(y)||(r=v({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:r,as:a},o),jr.set(y,r),u.querySelector(m)!==null||a==="style"&&u.querySelector(Dc(y))||a==="script"&&u.querySelector(Oc(y))||(a=u.createElement("link"),yn(a,"link",r),Ot(a),u.head.appendChild(a)))}}function HT(r,a){Vs.m(r,a);var o=Jl;if(o&&r){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Rt(u)+'"][href="'+Rt(r)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=eo(r)}if(!jr.has(y)&&(r=v({rel:"modulepreload",href:r},a),jr.set(y,r),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Oc(y)))return}u=o.createElement("link"),yn(u,"link",r),Ot(u),o.head.appendChild(u)}}}function $T(r,a,o){Vs.S(r,a,o);var u=Jl;if(u&&r){var m=Cr(u).hoistableStyles,y=Zl(r);a=a||"default";var _=m.get(y);if(!_){var R={loading:0,preload:null};if(_=u.querySelector(Dc(y)))R.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":a},o),(o=jr.get(y))&&Kg(r,o);var B=_=u.createElement("link");Ot(B),yn(B,"link",r),B._p=new Promise(function(Z,ae){B.onload=Z,B.onerror=ae}),B.addEventListener("load",function(){R.loading|=1}),B.addEventListener("error",function(){R.loading|=2}),R.loading|=4,ch(_,a,u)}_={type:"stylesheet",instance:_,count:1,state:R},m.set(y,_)}}}function GT(r,a){Vs.X(r,a);var o=Jl;if(o&&r){var u=Cr(o).hoistableScripts,m=eo(r),y=u.get(m);y||(y=o.querySelector(Oc(m)),y||(r=v({src:r,async:!0},a),(a=jr.get(m))&&Yg(r,a),y=o.createElement("script"),Ot(y),yn(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function KT(r,a){Vs.M(r,a);var o=Jl;if(o&&r){var u=Cr(o).hoistableScripts,m=eo(r),y=u.get(m);y||(y=o.querySelector(Oc(m)),y||(r=v({src:r,async:!0,type:"module"},a),(a=jr.get(m))&&Yg(r,a),y=o.createElement("script"),Ot(y),yn(y,"link",r),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function Av(r,a,o,u){var m=(m=he.current)?oh(m):null;if(!m)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=Zl(o.href),o=Cr(m).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Zl(o.href);var y=Cr(m).hoistableStyles,_=y.get(r);if(_||(m=m.ownerDocument||m,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,_),(y=m.querySelector(Dc(r)))&&!y._p&&(_.instance=y,_.state.loading=5),jr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},jr.set(r,o),y||YT(m,r,o,_.state))),a&&u===null)throw Error(s(528,""));return _}if(a&&u!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=eo(o),o=Cr(m).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Zl(r){return'href="'+Rt(r)+'"'}function Dc(r){return'link[rel="stylesheet"]['+r+"]"}function Cv(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function YT(r,a,o,u){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=r.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),yn(a,"link",o),Ot(a),r.head.appendChild(a))}function eo(r){return'[src="'+Rt(r)+'"]'}function Oc(r){return"script[async]"+r}function Rv(r,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=r.querySelector('style[data-href~="'+Rt(o.href)+'"]');if(u)return a.instance=u,Ot(u),u;var m=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Ot(u),yn(u,"style",m),ch(u,o.precedence,r),a.instance=u;case"stylesheet":m=Zl(o.href);var y=r.querySelector(Dc(m));if(y)return a.state.loading|=4,a.instance=y,Ot(y),y;u=Cv(o),(m=jr.get(m))&&Kg(u,m),y=(r.ownerDocument||r).createElement("link"),Ot(y);var _=y;return _._p=new Promise(function(R,B){_.onload=R,_.onerror=B}),yn(y,"link",u),a.state.loading|=4,ch(y,o.precedence,r),a.instance=y;case"script":return y=eo(o.src),(m=r.querySelector(Oc(y)))?(a.instance=m,Ot(m),m):(u=o,(m=jr.get(y))&&(u=v({},o),Yg(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),Ot(m),yn(m,"link",u),r.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,ch(u,o.precedence,r));return a.instance}function ch(r,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,_=0;_<u.length;_++){var R=u[_];if(R.dataset.precedence===a)y=R;else if(y!==m)break}y?y.parentNode.insertBefore(r,y.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(r,a.firstChild))}function Kg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Yg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var uh=null;function Iv(r,a,o){if(uh===null){var u=new Map,m=uh=new Map;m.set(o,u)}else m=uh,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),m=0;m<o.length;m++){var y=o[m];if(!(y[ys]||y[Ct]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(a)||"";_=r+_;var R=u.get(_);R?R.push(y):u.set(_,[y])}}return u}function Dv(r,a,o){r=r.ownerDocument||r,r.head.insertBefore(o,a==="title"?r.querySelector("head > title"):null)}function QT(r,a,o){if(o===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ov(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function XT(r,a,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Zl(u.href),y=a.querySelector(Dc(m));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=dh.bind(r),a.then(r,r)),o.state.loading|=4,o.instance=y,Ot(y);return}y=a.ownerDocument||a,u=Cv(u),(m=jr.get(m))&&Kg(u,m),y=y.createElement("link"),Ot(y);var _=y;_._p=new Promise(function(R,B){_.onload=R,_.onerror=B}),yn(y,"link",u),o.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=dh.bind(r),a.addEventListener("load",o),a.addEventListener("error",o))}}var Qg=0;function WT(r,a){return r.stylesheets&&r.count===0&&fh(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&fh(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+a);0<r.imgBytes&&Qg===0&&(Qg=62500*RT());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&fh(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>Qg?50:800)+a);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function dh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var hh=null;function fh(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,hh=new Map,a.forEach(JT,r),hh=null,dh.call(r))}function JT(r,a){if(!(a.state.loading&4)){var o=hh.get(r);if(o)var u=o.get(null);else{o=new Map,hh.set(r,o);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var _=m[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}m=a.instance,_=m.getAttribute("data-precedence"),y=o.get(_)||u,y===u&&o.set(null,m),o.set(_,m),this.count++,u=dh.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),a.state.loading|=4}}var Mc={$$typeof:q,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function ZT(r,a,o,u,m,y,_,R,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gs(0),this.hiddenUpdates=gs(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Mv(r,a,o,u,m,y,_,R,B,Z,ae,ce){return r=new ZT(r,a,o,_,B,Z,ae,ce,R),a=1,y===!0&&(a|=24),y=er(3,null,null,a),r.current=y,y.stateNode=r,a=Tm(),a.refCount++,r.pooledCache=a,a.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:a},Im(y),r}function Pv(r){return r?(r=Rl,r):Rl}function Lv(r,a,o,u,m,y){m=Pv(m),u.context===null?u.context=m:u.pendingContext=m,u=Aa(a),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=Ca(r,u,a),o!==null&&(Hn(o,r,a),fc(o,r,a))}function Uv(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<a?o:a}}function Xg(r,a){Uv(r,a),(r=r.alternate)&&Uv(r,a)}function Vv(r){if(r.tag===13||r.tag===31){var a=Oi(r,67108864);a!==null&&Hn(a,r,67108864),Xg(r,67108864)}}function zv(r){if(r.tag===13||r.tag===31){var a=ar();a=qo(a);var o=Oi(r,a);o!==null&&Hn(o,r,a),Xg(r,a)}}var mh=!0;function e1(r,a,o,u){var m=X.T;X.T=null;var y=H.p;try{H.p=2,Wg(r,a,o,u)}finally{H.p=y,X.T=m}}function t1(r,a,o,u){var m=X.T;X.T=null;var y=H.p;try{H.p=8,Wg(r,a,o,u)}finally{H.p=y,X.T=m}}function Wg(r,a,o,u){if(mh){var m=Jg(u);if(m===null)Lg(r,a,u,gh,o),Bv(r,u);else if(r1(m,r,a,o,u))u.stopPropagation();else if(Bv(r,u),a&4&&-1<n1.indexOf(r)){for(;m!==null;){var y=bs(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=Ar(y.pendingLanes);if(_!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;_;){var B=1<<31-Sn(_);R.entanglements[1]|=B,_&=~B}es(y),(lt&6)===0&&(Wd=dn()+500,Ac(0))}}break;case 31:case 13:R=Oi(y,2),R!==null&&Hn(R,y,2),Zd(),Xg(y,2)}if(y=Jg(u),y===null&&Lg(r,a,u,gh,o),y===m)break;m=y}m!==null&&u.stopPropagation()}else Lg(r,a,u,null,o)}}function Jg(r){return r=Nl(r),Zg(r)}var gh=null;function Zg(r){if(gh=null,r=xs(r),r!==null){var a=c(r);if(a===null)r=null;else{var o=a.tag;if(o===13){if(r=d(a),r!==null)return r;r=null}else if(o===31){if(r=f(a),r!==null)return r;r=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return gh=r,null}function Fv(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yu()){case Qt:return 2;case tn:return 8;case ms:case Qu:return 32;case Vo:return 268435456;default:return 32}default:return 32}}var ep=!1,Fa=null,Ba=null,qa=null,Pc=new Map,Lc=new Map,Ha=[],n1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bv(r,a){switch(r){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":Pc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(a.pointerId)}}function Uc(r,a,o,u,m,y){return r===null||r.nativeEvent!==y?(r={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},a!==null&&(a=bs(a),a!==null&&Vv(a)),r):(r.eventSystemFlags|=u,a=r.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),r)}function r1(r,a,o,u,m){switch(a){case"focusin":return Fa=Uc(Fa,r,a,o,u,m),!0;case"dragenter":return Ba=Uc(Ba,r,a,o,u,m),!0;case"mouseover":return qa=Uc(qa,r,a,o,u,m),!0;case"pointerover":var y=m.pointerId;return Pc.set(y,Uc(Pc.get(y)||null,r,a,o,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Lc.set(y,Uc(Lc.get(y)||null,r,a,o,u,m)),!0}return!1}function qv(r){var a=xs(r.target);if(a!==null){var o=c(a);if(o!==null){if(a=o.tag,a===13){if(a=d(o),a!==null){r.blockedOn=a,Wu(r.priority,function(){zv(o)});return}}else if(a===31){if(a=f(o),a!==null){r.blockedOn=a,Wu(r.priority,function(){zv(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ph(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var o=Jg(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);_l=u,o.target.dispatchEvent(u),_l=null}else return a=bs(o),a!==null&&Vv(a),r.blockedOn=o,!1;a.shift()}return!0}function Hv(r,a,o){ph(r)&&o.delete(a)}function s1(){ep=!1,Fa!==null&&ph(Fa)&&(Fa=null),Ba!==null&&ph(Ba)&&(Ba=null),qa!==null&&ph(qa)&&(qa=null),Pc.forEach(Hv),Lc.forEach(Hv)}function yh(r,a){r.blockedOn===a&&(r.blockedOn=null,ep||(ep=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,s1)))}var xh=null;function $v(r){xh!==r&&(xh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){xh===r&&(xh=null);for(var a=0;a<r.length;a+=3){var o=r[a],u=r[a+1],m=r[a+2];if(typeof u!="function"){if(Zg(u||o)===null)continue;break}var y=bs(o);y!==null&&(r.splice(a,3),a-=3,Jm(y,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function to(r){function a(B){return yh(B,r)}Fa!==null&&yh(Fa,r),Ba!==null&&yh(Ba,r),qa!==null&&yh(qa,r),Pc.forEach(a),Lc.forEach(a);for(var o=0;o<Ha.length;o++){var u=Ha[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Ha.length&&(o=Ha[0],o.blockedOn===null);)qv(o),o.blockedOn===null&&Ha.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],y=o[u+1],_=m[fn]||null;if(typeof y=="function")_||$v(o);else if(_){var R=null;if(y&&y.hasAttribute("formAction")){if(m=y,_=y[fn]||null)R=_.formAction;else if(Zg(m)!==null)continue}else R=_.action;typeof R=="function"?o[u+1]=R:(o.splice(u,3),u-=3),$v(o)}}}function Gv(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(_){return m=_})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function tp(r){this._internalRoot=r}bh.prototype.render=tp.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,u=ar();Lv(o,u,r,a,null,null)},bh.prototype.unmount=tp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Lv(r.current,2,null,r,null,null),Zd(),a[$r]=null}};function bh(r){this._internalRoot=r}bh.prototype.unstable_scheduleHydration=function(r){if(r){var a=ps();r={blockedOn:null,target:r,priority:a};for(var o=0;o<Ha.length&&a!==0&&a<Ha[o].priority;o++);Ha.splice(o,0,r),o===0&&qv(r)}};var Kv=e.version;if(Kv!=="19.2.0")throw Error(s(527,Kv,"19.2.0"));H.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=p(a),r=r!==null?x(r):null,r=r===null?null:r.stateNode,r};var a1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{sa=vh.inject(a1),vn=vh}catch{}}return Fc.createRoot=function(r,a){if(!l(r))throw Error(s(299));var o=!1,u="",m=eb,y=tb,_=nb;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=Mv(r,1,!1,null,null,o,u,null,m,y,_,Gv),r[$r]=a.current,Pg(r),new tp(a)},Fc.hydrateRoot=function(r,a,o){if(!l(r))throw Error(s(299));var u=!1,m="",y=eb,_=tb,R=nb,B=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(B=o.formState)),a=Mv(r,1,!0,a,o??null,u,m,B,y,_,R,Gv),a.context=Pv(null),o=a.current,u=ar(),u=qo(u),m=Aa(u),m.callback=null,Ca(o,m,u),o=u,a.current.lanes=o,la(a,o),es(a),r[$r]=a.current,Pg(r),new bh(a)},Fc.version="19.2.0",Fc}var _w;function sA(){if(_w)return ip.exports;_w=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ip.exports=rA(),ip.exports}var aA=sA();var Nw="popstate";function iA(n={}){function e(s,l){let{pathname:c,search:d,hash:f}=s.location;return Lp("",{pathname:c,search:d,hash:f},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){return typeof l=="string"?l:mu(l)}return oA(e,t,null,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Vr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lA(){return Math.random().toString(36).substring(2,10)}function jw(n,e){return{usr:n.state,key:n.key,idx:e}}function Lp(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ku(e):e,state:t,key:e&&e.key||s||lA()}}function mu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ku(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function oA(n,e,t,s={}){let{window:l=document.defaultView,v5Compat:c=!1}=s,d=l.history,f="POP",g=null,p=x();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function x(){return(d.state||{idx:null}).idx}function v(){f="POP";let I=x(),z=I==null?null:I-p;p=I,g&&g({action:f,location:U.location,delta:z})}function w(I,z){f="PUSH";let A=Lp(U.location,I,z);p=x()+1;let q=jw(A,p),K=U.createHref(A);try{d.pushState(q,"",K)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;l.location.assign(K)}c&&g&&g({action:f,location:U.location,delta:1})}function k(I,z){f="REPLACE";let A=Lp(U.location,I,z);p=x();let q=jw(A,p),K=U.createHref(A);d.replaceState(q,"",K),c&&g&&g({action:f,location:U.location,delta:0})}function D(I){return cA(I)}let U={get action(){return f},get location(){return n(l,d)},listen(I){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Nw,v),g=I,()=>{l.removeEventListener(Nw,v),g=null}},createHref(I){return e(l,I)},createURL:D,encodeLocation(I){let z=D(I);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:w,replace:k,go(I){return d.go(I)}};return U}function cA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:mu(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function zN(n,e,t="/"){return uA(n,e,t,!1)}function uA(n,e,t,s){let l=typeof e=="string"?ku(e):e,c=Qs(l.pathname||"/",t);if(c==null)return null;let d=FN(n);dA(d);let f=null;for(let g=0;f==null&&g<d.length;++g){let p=_A(c);f=vA(d[g],p,s)}return f}function FN(n,e=[],t=[],s="",l=!1){let c=(d,f,g=l,p)=>{let x={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(s)&&g)return;Wt(x.relativePath.startsWith(s),`Absolute route path "${x.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(s.length)}let v=Hs([s,x.relativePath]),w=t.concat(x);d.children&&d.children.length>0&&(Wt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),FN(d.children,e,w,v,g)),!(d.path==null&&!d.index)&&e.push({path:v,score:xA(v,d.index),routesMeta:w})};return n.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))c(d,f);else for(let g of BN(d.path))c(d,f,!0,g)}),e}function BN(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,l=t.endsWith("?"),c=t.replace(/\?$/,"");if(s.length===0)return l?[c,""]:[c];let d=BN(s.join("/")),f=[];return f.push(...d.map(g=>g===""?c:[c,g].join("/"))),l&&f.push(...d),f.map(g=>n.startsWith("/")&&g===""?"/":g)}function dA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bA(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var hA=/^:[\w-]+$/,fA=3,mA=2,gA=1,pA=10,yA=-2,Ew=n=>n==="*";function xA(n,e){let t=n.split("/"),s=t.length;return t.some(Ew)&&(s+=yA),e&&(s+=mA),t.filter(l=>!Ew(l)).reduce((l,c)=>l+(hA.test(c)?fA:c===""?gA:pA),s)}function bA(n,e){return n.length===e.length&&n.slice(0,-1).every((s,l)=>s===e[l])?n[n.length-1]-e[e.length-1]:0}function vA(n,e,t=!1){let{routesMeta:s}=n,l={},c="/",d=[];for(let f=0;f<s.length;++f){let g=s[f],p=f===s.length-1,x=c==="/"?e:e.slice(c.length)||"/",v=Kh({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},x),w=g.route;if(!v&&p&&t&&!s[s.length-1].route.index&&(v=Kh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!v)return null;Object.assign(l,v.params),d.push({params:l,pathname:Hs([c,v.pathname]),pathnameBase:SA(Hs([c,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(c=Hs([c,v.pathnameBase]))}return d}function Kh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=wA(n.path,n.caseSensitive,n.end),l=e.match(t);if(!l)return null;let c=l[0],d=c.replace(/(.)\/+$/,"$1"),f=l.slice(1);return{params:s.reduce((p,{paramName:x,isOptional:v},w)=>{if(x==="*"){let D=f[w]||"";d=c.slice(0,c.length-D.length).replace(/(.)\/+$/,"$1")}const k=f[w];return v&&!k?p[x]=void 0:p[x]=(k||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:d,pattern:n}}function wA(n,e=!1,t=!0){Vr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],l="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),l+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":n!==""&&n!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),s]}function _A(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Qs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var NA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jA=n=>NA.test(n);function EA(n,e="/"){let{pathname:t,search:s="",hash:l=""}=typeof n=="string"?ku(n):n,c;if(t)if(jA(t))c=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),Vr(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${t}`)}t.startsWith("/")?c=kw(t.substring(1),"/"):c=kw(t,e)}else c=e;return{pathname:c,search:TA(s),hash:AA(l)}}function kw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function up(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qN(n){let e=kA(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function HN(n,e,t,s=!1){let l;typeof n=="string"?l=ku(n):(l={...n},Wt(!l.pathname||!l.pathname.includes("?"),up("?","pathname","search",l)),Wt(!l.pathname||!l.pathname.includes("#"),up("#","pathname","hash",l)),Wt(!l.search||!l.search.includes("#"),up("#","search","hash",l)));let c=n===""||l.pathname==="",d=c?"/":l.pathname,f;if(d==null)f=t;else{let v=e.length-1;if(!s&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),v-=1;l.pathname=w.join("/")}f=v>=0?e[v]:"/"}let g=EA(l,f),p=d&&d!=="/"&&d.endsWith("/"),x=(c||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(p||x)&&(g.pathname+="/"),g}var Hs=n=>n.join("/").replace(/\/\/+/g,"/"),SA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),TA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,AA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function CA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $N=["POST","PUT","PATCH","DELETE"];new Set($N);var RA=["GET",...$N];new Set(RA);var Ao=E.createContext(null);Ao.displayName="DataRouter";var bf=E.createContext(null);bf.displayName="DataRouterState";E.createContext(!1);var GN=E.createContext({isTransitioning:!1});GN.displayName="ViewTransition";var IA=E.createContext(new Map);IA.displayName="Fetchers";var DA=E.createContext(null);DA.displayName="Await";var us=E.createContext(null);us.displayName="Navigation";var vf=E.createContext(null);vf.displayName="Location";var ds=E.createContext({outlet:null,matches:[],isDataRoute:!1});ds.displayName="Route";var g0=E.createContext(null);g0.displayName="RouteError";function OA(n,{relative:e}={}){Wt(Su(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=E.useContext(us),{hash:l,pathname:c,search:d}=Tu(n,{relative:e}),f=c;return t!=="/"&&(f=c==="/"?t:Hs([t,c])),s.createHref({pathname:f,search:d,hash:l})}function Su(){return E.useContext(vf)!=null}function mi(){return Wt(Su(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(vf).location}var KN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function YN(n){E.useContext(us).static||E.useLayoutEffect(n)}function dr(){let{isDataRoute:n}=E.useContext(ds);return n?KA():MA()}function MA(){Wt(Su(),"useNavigate() may be used only in the context of a <Router> component.");let n=E.useContext(Ao),{basename:e,navigator:t}=E.useContext(us),{matches:s}=E.useContext(ds),{pathname:l}=mi(),c=JSON.stringify(qN(s)),d=E.useRef(!1);return YN(()=>{d.current=!0}),E.useCallback((g,p={})=>{if(Vr(d.current,KN),!d.current)return;if(typeof g=="number"){t.go(g);return}let x=HN(g,JSON.parse(c),l,p.relative==="path");n==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Hs([e,x.pathname])),(p.replace?t.replace:t.push)(x,p.state,p)},[e,t,c,l,n])}E.createContext(null);function QN(){let{matches:n}=E.useContext(ds),e=n[n.length-1];return e?e.params:{}}function Tu(n,{relative:e}={}){let{matches:t}=E.useContext(ds),{pathname:s}=mi(),l=JSON.stringify(qN(t));return E.useMemo(()=>HN(n,JSON.parse(l),s,e==="path"),[n,l,s,e])}function PA(n,e){return XN(n)}function XN(n,e,t,s,l){Wt(Su(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=E.useContext(us),{matches:d}=E.useContext(ds),f=d[d.length-1],g=f?f.params:{},p=f?f.pathname:"/",x=f?f.pathnameBase:"/",v=f&&f.route;{let A=v&&v.path||"";WN(p,!v||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let w=mi(),k;k=w;let D=k.pathname||"/",U=D;if(x!=="/"){let A=x.replace(/^\//,"").split("/");U="/"+D.replace(/^\//,"").split("/").slice(A.length).join("/")}let I=zN(n,{pathname:U});return Vr(v||I!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),Vr(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),FA(I&&I.map(A=>Object.assign({},A,{params:Object.assign({},g,A.params),pathname:Hs([x,c.encodeLocation?c.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?x:Hs([x,c.encodeLocation?c.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),d,t,s,l)}function LA(){let n=GA(),e=CA(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",n),d=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:c},"ErrorBoundary")," or"," ",E.createElement("code",{style:c},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:l},t):null,d)}var UA=E.createElement(LA,null),VA=class extends E.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?E.createElement(ds.Provider,{value:this.props.routeContext},E.createElement(g0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zA({routeContext:n,match:e,children:t}){let s=E.useContext(Ao);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(ds.Provider,{value:n},t)}function FA(n,e=[],t=null,s=null,l=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=t?.errors;if(d!=null){let x=c.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);Wt(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,x+1))}let f=!1,g=-1;if(t)for(let x=0;x<c.length;x++){let v=c[x];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=x),v.route.id){let{loaderData:w,errors:k}=t,D=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!k||k[v.route.id]===void 0);if(v.route.lazy||D){f=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}let p=t&&s?(x,v)=>{s(x,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:v})}:void 0;return c.reduceRight((x,v,w)=>{let k,D=!1,U=null,I=null;t&&(k=d&&v.route.id?d[v.route.id]:void 0,U=v.route.errorElement||UA,f&&(g<0&&w===0?(WN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,I=null):g===w&&(D=!0,I=v.route.hydrateFallbackElement||null)));let z=e.concat(c.slice(0,w+1)),A=()=>{let q;return k?q=U:D?q=I:v.route.Component?q=E.createElement(v.route.Component,null):v.route.element?q=v.route.element:q=x,E.createElement(zA,{match:v,routeContext:{outlet:x,matches:z,isDataRoute:t!=null},children:q})};return t&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?E.createElement(VA,{location:t.location,revalidation:t.revalidation,component:U,error:k,children:A(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:p}):A()},null)}function p0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BA(n){let e=E.useContext(Ao);return Wt(e,p0(n)),e}function qA(n){let e=E.useContext(bf);return Wt(e,p0(n)),e}function HA(n){let e=E.useContext(ds);return Wt(e,p0(n)),e}function y0(n){let e=HA(n),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function $A(){return y0("useRouteId")}function GA(){let n=E.useContext(g0),e=qA("useRouteError"),t=y0("useRouteError");return n!==void 0?n:e.errors?.[t]}function KA(){let{router:n}=BA("useNavigate"),e=y0("useNavigate"),t=E.useRef(!1);return YN(()=>{t.current=!0}),E.useCallback(async(l,c={})=>{Vr(t.current,KN),t.current&&(typeof l=="number"?n.navigate(l):await n.navigate(l,{fromRouteId:e,...c}))},[n,e])}var Sw={};function WN(n,e,t){!e&&!Sw[n]&&(Sw[n]=!0,Vr(!1,t))}E.memo(YA);function YA({routes:n,future:e,state:t,unstable_onError:s}){return XN(n,void 0,t,s,e)}function QA({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:l,static:c=!1}){Wt(!Su(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),f=E.useMemo(()=>({basename:d,navigator:l,static:c,future:{}}),[d,l,c]);typeof t=="string"&&(t=ku(t));let{pathname:g="/",search:p="",hash:x="",state:v=null,key:w="default"}=t,k=E.useMemo(()=>{let D=Qs(g,d);return D==null?null:{location:{pathname:D,search:p,hash:x,state:v,key:w},navigationType:s}},[d,g,p,x,v,w,s]);return Vr(k!=null,`<Router basename="${d}"> is not able to match the URL "${g}${p}${x}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:E.createElement(us.Provider,{value:f},E.createElement(vf.Provider,{children:e,value:k}))}var Dh="get",Oh="application/x-www-form-urlencoded";function wf(n){return n!=null&&typeof n.tagName=="string"}function XA(n){return wf(n)&&n.tagName.toLowerCase()==="button"}function WA(n){return wf(n)&&n.tagName.toLowerCase()==="form"}function JA(n){return wf(n)&&n.tagName.toLowerCase()==="input"}function ZA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function eC(n,e){return n.button===0&&(!e||e==="_self")&&!ZA(n)}var _h=null;function tC(){if(_h===null)try{new FormData(document.createElement("form"),0),_h=!1}catch{_h=!0}return _h}var nC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dp(n){return n!=null&&!nC.has(n)?(Vr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Oh}"`),null):n}function rC(n,e){let t,s,l,c,d;if(WA(n)){let f=n.getAttribute("action");s=f?Qs(f,e):null,t=n.getAttribute("method")||Dh,l=dp(n.getAttribute("enctype"))||Oh,c=new FormData(n)}else if(XA(n)||JA(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=n.getAttribute("formaction")||f.getAttribute("action");if(s=g?Qs(g,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Dh,l=dp(n.getAttribute("formenctype"))||dp(f.getAttribute("enctype"))||Oh,c=new FormData(f,n),!tC()){let{name:p,type:x,value:v}=n;if(x==="image"){let w=p?`${p}.`:"";c.append(`${w}x`,"0"),c.append(`${w}y`,"0")}else p&&c.append(p,v)}}else{if(wf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Dh,s=null,l=Oh,d=n}return c&&l==="text/plain"&&(d=c,c=void 0),{action:s,method:t.toLowerCase(),encType:l,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function x0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function sC(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&Qs(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function aC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function lC(n,e,t){let s=await Promise.all(n.map(async l=>{let c=e.routes[l.route.id];if(c){let d=await aC(c,t);return d.links?d.links():[]}return[]}));return dC(s.flat(1).filter(iC).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Tw(n,e,t,s,l,c){let d=(g,p)=>t[p]?g.route.id!==t[p].route.id:!0,f=(g,p)=>t[p].pathname!==g.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,p)=>d(g,p)||f(g,p)):c==="data"?e.filter((g,p)=>{let x=s.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(d(g,p)||f(g,p))return!0;if(g.route.shouldRevalidate){let v=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function oC(n,e,{includeHydrateFallback:t}={}){return cC(n.map(s=>{let l=e.routes[s.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function cC(n){return[...new Set(n)]}function uC(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function dC(n,e){let t=new Set;return new Set(e),n.reduce((s,l)=>{let c=JSON.stringify(uC(l));return t.has(c)||(t.add(c),s.push({key:c,link:l})),s},[])}function JN(){let n=E.useContext(Ao);return x0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function hC(){let n=E.useContext(bf);return x0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var b0=E.createContext(void 0);b0.displayName="FrameworkContext";function ZN(){let n=E.useContext(b0);return x0(n,"You must render this element inside a <HydratedRouter> element"),n}function fC(n,e){let t=E.useContext(b0),[s,l]=E.useState(!1),[c,d]=E.useState(!1),{onFocus:f,onBlur:g,onMouseEnter:p,onMouseLeave:x,onTouchStart:v}=e,w=E.useRef(null);E.useEffect(()=>{if(n==="render"&&d(!0),n==="viewport"){let U=z=>{z.forEach(A=>{d(A.isIntersecting)})},I=new IntersectionObserver(U,{threshold:.5});return w.current&&I.observe(w.current),()=>{I.disconnect()}}},[n]),E.useEffect(()=>{if(s){let U=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(U)}}},[s]);let k=()=>{l(!0)},D=()=>{l(!1),d(!1)};return t?n!=="intent"?[c,w,{}]:[c,w,{onFocus:Bc(f,k),onBlur:Bc(g,D),onMouseEnter:Bc(p,k),onMouseLeave:Bc(x,D),onTouchStart:Bc(v,k)}]:[!1,w,{}]}function Bc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function mC({page:n,...e}){let{router:t}=JN(),s=E.useMemo(()=>zN(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?E.createElement(pC,{page:n,matches:s,...e}):null}function gC(n){let{manifest:e,routeModules:t}=ZN(),[s,l]=E.useState([]);return E.useEffect(()=>{let c=!1;return lC(n,e,t).then(d=>{c||l(d)}),()=>{c=!0}},[n,e,t]),s}function pC({page:n,matches:e,...t}){let s=mi(),{manifest:l,routeModules:c}=ZN(),{basename:d}=JN(),{loaderData:f,matches:g}=hC(),p=E.useMemo(()=>Tw(n,e,g,l,s,"data"),[n,e,g,l,s]),x=E.useMemo(()=>Tw(n,e,g,l,s,"assets"),[n,e,g,l,s]),v=E.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let D=new Set,U=!1;if(e.forEach(z=>{let A=l.routes[z.route.id];!A||!A.hasLoader||(!p.some(q=>q.route.id===z.route.id)&&z.route.id in f&&c[z.route.id]?.shouldRevalidate||A.hasClientLoader?U=!0:D.add(z.route.id))}),D.size===0)return[];let I=sC(n,d,"data");return U&&D.size>0&&I.searchParams.set("_routes",e.filter(z=>D.has(z.route.id)).map(z=>z.route.id).join(",")),[I.pathname+I.search]},[d,f,s,l,p,e,n,c]),w=E.useMemo(()=>oC(x,l),[x,l]),k=gC(x);return E.createElement(E.Fragment,null,v.map(D=>E.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...t})),w.map(D=>E.createElement("link",{key:D,rel:"modulepreload",href:D,...t})),k.map(({key:D,link:U})=>E.createElement("link",{key:D,nonce:t.nonce,...U})))}function yC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ej=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ej&&(window.__reactRouterVersion="7.9.6")}catch{}function xC({basename:n,children:e,window:t}){let s=E.useRef();s.current==null&&(s.current=iA({window:t,v5Compat:!0}));let l=s.current,[c,d]=E.useState({action:l.action,location:l.location}),f=E.useCallback(g=>{E.startTransition(()=>d(g))},[d]);return E.useLayoutEffect(()=>l.listen(f),[l,f]),E.createElement(QA,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:l})}var tj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ji=E.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:l,reloadDocument:c,replace:d,state:f,target:g,to:p,preventScrollReset:x,viewTransition:v,...w},k){let{basename:D}=E.useContext(us),U=typeof p=="string"&&tj.test(p),I,z=!1;if(typeof p=="string"&&U&&(I=p,ej))try{let j=new URL(window.location.href),C=p.startsWith("//")?new URL(j.protocol+p):new URL(p),T=Qs(C.pathname,D);C.origin===j.origin&&T!=null?p=T+C.search+C.hash:z=!0}catch{Vr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=OA(p,{relative:l}),[q,K,F]=fC(s,w),ne=wC(p,{replace:d,state:f,target:g,preventScrollReset:x,relative:l,viewTransition:v});function O(j){e&&e(j),j.defaultPrevented||ne(j)}let L=E.createElement("a",{...w,...F,href:I||A,onClick:z||c?e:O,ref:yC(k,K),target:g,"data-discover":!U&&t==="render"?"true":void 0});return q&&!U?E.createElement(E.Fragment,null,L,E.createElement(mC,{page:A})):L});Ji.displayName="Link";var nj=E.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:l=!1,style:c,to:d,viewTransition:f,children:g,...p},x){let v=Tu(d,{relative:p.relative}),w=mi(),k=E.useContext(bf),{navigator:D,basename:U}=E.useContext(us),I=k!=null&&kC(v)&&f===!0,z=D.encodeLocation?D.encodeLocation(v).pathname:v.pathname,A=w.pathname,q=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;t||(A=A.toLowerCase(),q=q?q.toLowerCase():null,z=z.toLowerCase()),q&&U&&(q=Qs(q,U)||q);const K=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let F=A===z||!l&&A.startsWith(z)&&A.charAt(K)==="/",ne=q!=null&&(q===z||!l&&q.startsWith(z)&&q.charAt(z.length)==="/"),O={isActive:F,isPending:ne,isTransitioning:I},L=F?e:void 0,j;typeof s=="function"?j=s(O):j=[s,F?"active":null,ne?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let C=typeof c=="function"?c(O):c;return E.createElement(Ji,{...p,"aria-current":L,className:j,ref:x,style:C,to:d,viewTransition:f},typeof g=="function"?g(O):g)});nj.displayName="NavLink";var bC=E.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:l,state:c,method:d=Dh,action:f,onSubmit:g,relative:p,preventScrollReset:x,viewTransition:v,...w},k)=>{let D=jC(),U=EC(f,{relative:p}),I=d.toLowerCase()==="get"?"get":"post",z=typeof f=="string"&&tj.test(f),A=q=>{if(g&&g(q),q.defaultPrevented)return;q.preventDefault();let K=q.nativeEvent.submitter,F=K?.getAttribute("formmethod")||d;D(K||q.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:l,state:c,relative:p,preventScrollReset:x,viewTransition:v})};return E.createElement("form",{ref:k,method:I,action:U,onSubmit:s?g:A,...w,"data-discover":!z&&n==="render"?"true":void 0})});bC.displayName="Form";function vC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rj(n){let e=E.useContext(Ao);return Wt(e,vC(n)),e}function wC(n,{target:e,replace:t,state:s,preventScrollReset:l,relative:c,viewTransition:d}={}){let f=dr(),g=mi(),p=Tu(n,{relative:c});return E.useCallback(x=>{if(eC(x,e)){x.preventDefault();let v=t!==void 0?t:mu(g)===mu(p);f(n,{replace:v,state:s,preventScrollReset:l,relative:c,viewTransition:d})}},[g,f,p,t,s,e,n,l,c,d])}var _C=0,NC=()=>`__${String(++_C)}__`;function jC(){let{router:n}=rj("useSubmit"),{basename:e}=E.useContext(us),t=$A();return E.useCallback(async(s,l={})=>{let{action:c,method:d,encType:f,formData:g,body:p}=rC(s,e);if(l.navigate===!1){let x=l.fetcherKey||NC();await n.fetch(x,t,l.action||c,{preventScrollReset:l.preventScrollReset,formData:g,body:p,formMethod:l.method||d,formEncType:l.encType||f,flushSync:l.flushSync})}else await n.navigate(l.action||c,{preventScrollReset:l.preventScrollReset,formData:g,body:p,formMethod:l.method||d,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,e,t])}function EC(n,{relative:e}={}){let{basename:t}=E.useContext(us),s=E.useContext(ds);Wt(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),c={...Tu(n||".",{relative:e})},d=mi();if(n==null){c.search=d.search;let f=new URLSearchParams(c.search),g=f.getAll("index");if(g.some(x=>x==="")){f.delete("index"),g.filter(v=>v).forEach(v=>f.append("index",v));let x=f.toString();c.search=x?`?${x}`:""}}return(!n||n===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:Hs([t,c.pathname])),mu(c)}function kC(n,{relative:e}={}){let t=E.useContext(GN);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=rj("useViewTransitionState"),l=Tu(n,{relative:e});if(!t.isTransitioning)return!1;let c=Qs(t.currentLocation.pathname,s)||t.currentLocation.pathname,d=Qs(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Kh(l.pathname,d)!=null||Kh(l.pathname,c)!=null}const SC=()=>{};var Aw={};const sj=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let l=n.charCodeAt(s);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},TC=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const l=n[t++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=n[t++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=n[t++],d=n[t++],f=n[t++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=n[t++],d=n[t++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},aj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<n.length;l+=3){const c=n[l],d=l+1<n.length,f=d?n[l+1]:0,g=l+2<n.length,p=g?n[l+2]:0,x=c>>2,v=(c&3)<<4|f>>4;let w=(f&15)<<2|p>>6,k=p&63;g||(k=64,d||(w=64)),s.push(t[x],t[v],t[w],t[k])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sj(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):TC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<n.length;){const c=t[n.charAt(l++)],f=l<n.length?t[n.charAt(l)]:0;++l;const p=l<n.length?t[n.charAt(l)]:64;++l;const v=l<n.length?t[n.charAt(l)]:64;if(++l,c==null||f==null||p==null||v==null)throw new AC;const w=c<<2|f>>4;if(s.push(w),p!==64){const k=f<<4&240|p>>2;if(s.push(k),v!==64){const D=p<<6&192|v;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class AC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CC=function(n){const e=sj(n);return aj.encodeByteArray(e,!0)},Yh=function(n){return CC(n).replace(/\./g,"")},ij=function(n){try{return aj.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function RC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const IC=()=>RC().__FIREBASE_DEFAULTS__,DC=()=>{if(typeof process>"u"||typeof Aw>"u")return;const n=Aw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},OC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ij(n[1]);return e&&JSON.parse(e)},_f=()=>{try{return SC()||IC()||DC()||OC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lj=n=>_f()?.emulatorHosts?.[n],oj=n=>{const e=lj(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},cj=()=>_f()?.config,uj=n=>_f()?.[`_${n}`];class MC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function gi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function v0(n){return(await fetch(n,{credentials:"include"})).ok}function dj(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",l=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Yh(JSON.stringify(t)),Yh(JSON.stringify(d)),""].join(".")}const ru={};function PC(){const n={prod:[],emulator:[]};for(const e of Object.keys(ru))ru[e]?n.emulator.push(e):n.prod.push(e);return n}function LC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Cw=!1;function w0(n,e){if(typeof window>"u"||typeof document>"u"||!gi(window.location.host)||ru[n]===e||ru[n]||Cw)return;ru[n]=e;function t(w){return`__firebase__banner__${w}`}const s="__firebase__banner",c=PC().prod.length>0;function d(){const w=document.getElementById(s);w&&w.remove()}function f(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,k){w.setAttribute("width","24"),w.setAttribute("id",k),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Cw=!0,d()},w}function x(w,k){w.setAttribute("id",k),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function v(){const w=LC(s),k=t("text"),D=document.getElementById(k)||document.createElement("span"),U=t("learnmore"),I=document.getElementById(U)||document.createElement("a"),z=t("preprendIcon"),A=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const q=w.element;f(q),x(I,U);const K=p();g(A,z),q.append(A,D,I,K),document.body.appendChild(q)}c?(D.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function VC(){const n=_f()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function FC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BC(){const n=kn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function qC(){return!VC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N0(){try{return typeof indexedDB=="object"}catch{return!1}}function j0(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(t){e(t)}})}function hj(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const HC="FirebaseError";class Xn extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=HC,Object.setPrototypeOf(this,Xn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dl.prototype.create)}}class dl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?$C(c,s):"Error",f=`${this.serviceName}: ${d} (${l}).`;return new Xn(l,f,s)}}function $C(n,e){return n.replace(GC,(t,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const GC=/\{\$([^}]+)}/g;function KC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function li(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const l of t){if(!s.includes(l))return!1;const c=n[l],d=e[l];if(Rw(c)&&Rw(d)){if(!li(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!t.includes(l))return!1;return!0}function Rw(n){return n!==null&&typeof n=="object"}function Au(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Qc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Xc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function YC(n,e){const t=new QC(n,e);return t.subscribe.bind(t)}class QC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let l;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");XC(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:s},l.next===void 0&&(l.next=hp),l.error===void 0&&(l.error=hp),l.complete===void 0&&(l.complete=hp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function hp(){}const WC=1e3,JC=2,ZC=14400*1e3,e2=.5;function Iw(n,e=WC,t=JC){const s=e*Math.pow(t,n),l=Math.round(e2*s*(Math.random()-.5)*2);return Math.min(ZC,s+l)}function ft(n){return n&&n._delegate?n._delegate:n}class Sr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Yi="[DEFAULT]";class t2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new MC;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(r2(e))try{this.getOrInitializeService({instanceIdentifier:Yi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=Yi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yi){return this.instances.has(e)}getOptions(e=Yi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);s===f&&d.resolve(l)}return l}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const l of s)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:n2(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Yi){return this.component?this.component.multipleInstances?e:Yi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function n2(n){return n===Yi?void 0:n}function r2(n){return n.instantiationMode==="EAGER"}class s2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new t2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xe||(Xe={}));const a2={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},i2=Xe.INFO,l2={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},o2=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),l=l2[e];if(l)console[l](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nf{constructor(e){this.name=e,this._logLevel=i2,this._logHandler=o2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?a2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const c2=(n,e)=>e.some(t=>n instanceof t);let Dw,Ow;function u2(){return Dw||(Dw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d2(){return Ow||(Ow=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fj=new WeakMap,Up=new WeakMap,mj=new WeakMap,fp=new WeakMap,E0=new WeakMap;function h2(n){const e=new Promise((t,s)=>{const l=()=>{n.removeEventListener("success",c),n.removeEventListener("error",d)},c=()=>{t(ni(n.result)),l()},d=()=>{s(n.error),l()};n.addEventListener("success",c),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&fj.set(t,n)}).catch(()=>{}),E0.set(e,n),e}function f2(n){if(Up.has(n))return;const e=new Promise((t,s)=>{const l=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",d),n.removeEventListener("abort",d)},c=()=>{t(),l()},d=()=>{s(n.error||new DOMException("AbortError","AbortError")),l()};n.addEventListener("complete",c),n.addEventListener("error",d),n.addEventListener("abort",d)});Up.set(n,e)}let Vp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Up.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mj.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ni(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function m2(n){Vp=n(Vp)}function g2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(mp(this),e,...t);return mj.set(s,e.sort?e.sort():[e]),ni(s)}:d2().includes(n)?function(...e){return n.apply(mp(this),e),ni(fj.get(this))}:function(...e){return ni(n.apply(mp(this),e))}}function p2(n){return typeof n=="function"?g2(n):(n instanceof IDBTransaction&&f2(n),c2(n,u2())?new Proxy(n,Vp):n)}function ni(n){if(n instanceof IDBRequest)return h2(n);if(fp.has(n))return fp.get(n);const e=p2(n);return e!==n&&(fp.set(n,e),E0.set(e,n)),e}const mp=n=>E0.get(n);function gj(n,e,{blocked:t,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(n,e),f=ni(d);return s&&d.addEventListener("upgradeneeded",g=>{s(ni(d.result),g.oldVersion,g.newVersion,ni(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",p=>l(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const y2=["get","getKey","getAll","getAllKeys","count"],x2=["put","add","delete","clear"],gp=new Map;function Mw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(gp.get(e))return gp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,l=x2.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(l||y2.includes(t)))return;const c=async function(d,...f){const g=this.transaction(d,l?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),l&&g.done]))[0]};return gp.set(e,c),c}m2(n=>({...n,get:(e,t,s)=>Mw(e,t)||n.get(e,t,s),has:(e,t)=>!!Mw(e,t)||n.has(e,t)}));class b2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(v2(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function v2(n){return n.getComponent()?.type==="VERSION"}const zp="@firebase/app",Pw="0.14.0";const Xs=new Nf("@firebase/app"),w2="@firebase/app-compat",_2="@firebase/analytics-compat",N2="@firebase/analytics",j2="@firebase/app-check-compat",E2="@firebase/app-check",k2="@firebase/auth",S2="@firebase/auth-compat",T2="@firebase/database",A2="@firebase/data-connect",C2="@firebase/database-compat",R2="@firebase/functions",I2="@firebase/functions-compat",D2="@firebase/installations",O2="@firebase/installations-compat",M2="@firebase/messaging",P2="@firebase/messaging-compat",L2="@firebase/performance",U2="@firebase/performance-compat",V2="@firebase/remote-config",z2="@firebase/remote-config-compat",F2="@firebase/storage",B2="@firebase/storage-compat",q2="@firebase/firestore",H2="@firebase/ai",$2="@firebase/firestore-compat",G2="firebase",K2="12.0.0";const Fp="[DEFAULT]",Y2={[zp]:"fire-core",[w2]:"fire-core-compat",[N2]:"fire-analytics",[_2]:"fire-analytics-compat",[E2]:"fire-app-check",[j2]:"fire-app-check-compat",[k2]:"fire-auth",[S2]:"fire-auth-compat",[T2]:"fire-rtdb",[A2]:"fire-data-connect",[C2]:"fire-rtdb-compat",[R2]:"fire-fn",[I2]:"fire-fn-compat",[D2]:"fire-iid",[O2]:"fire-iid-compat",[M2]:"fire-fcm",[P2]:"fire-fcm-compat",[L2]:"fire-perf",[U2]:"fire-perf-compat",[V2]:"fire-rc",[z2]:"fire-rc-compat",[F2]:"fire-gcs",[B2]:"fire-gcs-compat",[q2]:"fire-fst",[$2]:"fire-fst-compat",[H2]:"fire-vertex","fire-js":"fire-js",[G2]:"fire-js-all"};const gu=new Map,Q2=new Map,Bp=new Map;function Lw(n,e){try{n.container.addComponent(e)}catch(t){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zr(n){const e=n.name;if(Bp.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;Bp.set(e,n);for(const t of gu.values())Lw(t,n);for(const t of Q2.values())Lw(t,n);return!0}function pi(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ir(n){return n==null?!1:n.settings!==void 0}const X2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ri=new dl("app","Firebase",X2);class W2{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Sr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}const hl=K2;function pj(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Fp,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw ri.create("bad-app-name",{appName:String(l)});if(t||(t=cj()),!t)throw ri.create("no-options");const c=gu.get(l);if(c){if(li(t,c.options)&&li(s,c.config))return c;throw ri.create("duplicate-app",{appName:l})}const d=new s2(l);for(const g of Bp.values())d.addComponent(g);const f=new W2(t,s,d);return gu.set(l,f),f}function Cu(n=Fp){const e=gu.get(n);if(!e&&n===Fp&&cj())return pj();if(!e)throw ri.create("no-app",{appName:n});return e}function J2(){return Array.from(gu.values())}function Yn(n,e,t){let s=Y2[n]??n;t&&(s+=`-${t}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(d.join(" "));return}zr(new Sr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const Z2="firebase-heartbeat-database",eR=1,pu="firebase-heartbeat-store";let pp=null;function yj(){return pp||(pp=gj(Z2,eR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ri.create("idb-open",{originalErrorMessage:n.message})})),pp}async function tR(n){try{const t=(await yj()).transaction(pu),s=await t.objectStore(pu).get(xj(n));return await t.done,s}catch(e){if(e instanceof Xn)Xs.warn(e.message);else{const t=ri.create("idb-get",{originalErrorMessage:e?.message});Xs.warn(t.message)}}}async function Uw(n,e){try{const s=(await yj()).transaction(pu,"readwrite");await s.objectStore(pu).put(e,xj(n)),await s.done}catch(t){if(t instanceof Xn)Xs.warn(t.message);else{const s=ri.create("idb-set",{originalErrorMessage:t?.message});Xs.warn(s.message)}}}function xj(n){return`${n.name}!${n.options.appId}`}const nR=1024,rR=30;class sR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Vw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>rR){const l=lR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Xs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Vw(),{heartbeatsToSend:t,unsentEntries:s}=aR(this._heartbeatsCache.heartbeats),l=Yh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Xs.warn(e),""}}}function Vw(){return new Date().toISOString().substring(0,10)}function aR(n,e=nR){const t=[];let s=n.slice();for(const l of n){const c=t.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),zw(t)>e){c.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),zw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class iR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N0()?j0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Uw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Uw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zw(n){return Yh(JSON.stringify({version:2,heartbeats:n})).length}function lR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}function oR(n){zr(new Sr("platform-logger",e=>new b2(e),"PRIVATE")),zr(new Sr("heartbeat",e=>new sR(e),"PRIVATE")),Yn(zp,Pw,n),Yn(zp,Pw,"esm2020"),Yn("fire-js","")}oR("");var Fw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var si,bj;(function(){var n;function e(O,L){function j(){}j.prototype=L.prototype,O.D=L.prototype,O.prototype=new j,O.prototype.constructor=O,O.C=function(C,T,S){for(var M=Array(arguments.length-2),me=2;me<arguments.length;me++)M[me-2]=arguments[me];return L.prototype[T].apply(C,M)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(O,L,j){j||(j=0);var C=Array(16);if(typeof L=="string")for(var T=0;16>T;++T)C[T]=L.charCodeAt(j++)|L.charCodeAt(j++)<<8|L.charCodeAt(j++)<<16|L.charCodeAt(j++)<<24;else for(T=0;16>T;++T)C[T]=L[j++]|L[j++]<<8|L[j++]<<16|L[j++]<<24;L=O.g[0],j=O.g[1],T=O.g[2];var S=O.g[3],M=L+(S^j&(T^S))+C[0]+3614090360&4294967295;L=j+(M<<7&4294967295|M>>>25),M=S+(T^L&(j^T))+C[1]+3905402710&4294967295,S=L+(M<<12&4294967295|M>>>20),M=T+(j^S&(L^j))+C[2]+606105819&4294967295,T=S+(M<<17&4294967295|M>>>15),M=j+(L^T&(S^L))+C[3]+3250441966&4294967295,j=T+(M<<22&4294967295|M>>>10),M=L+(S^j&(T^S))+C[4]+4118548399&4294967295,L=j+(M<<7&4294967295|M>>>25),M=S+(T^L&(j^T))+C[5]+1200080426&4294967295,S=L+(M<<12&4294967295|M>>>20),M=T+(j^S&(L^j))+C[6]+2821735955&4294967295,T=S+(M<<17&4294967295|M>>>15),M=j+(L^T&(S^L))+C[7]+4249261313&4294967295,j=T+(M<<22&4294967295|M>>>10),M=L+(S^j&(T^S))+C[8]+1770035416&4294967295,L=j+(M<<7&4294967295|M>>>25),M=S+(T^L&(j^T))+C[9]+2336552879&4294967295,S=L+(M<<12&4294967295|M>>>20),M=T+(j^S&(L^j))+C[10]+4294925233&4294967295,T=S+(M<<17&4294967295|M>>>15),M=j+(L^T&(S^L))+C[11]+2304563134&4294967295,j=T+(M<<22&4294967295|M>>>10),M=L+(S^j&(T^S))+C[12]+1804603682&4294967295,L=j+(M<<7&4294967295|M>>>25),M=S+(T^L&(j^T))+C[13]+4254626195&4294967295,S=L+(M<<12&4294967295|M>>>20),M=T+(j^S&(L^j))+C[14]+2792965006&4294967295,T=S+(M<<17&4294967295|M>>>15),M=j+(L^T&(S^L))+C[15]+1236535329&4294967295,j=T+(M<<22&4294967295|M>>>10),M=L+(T^S&(j^T))+C[1]+4129170786&4294967295,L=j+(M<<5&4294967295|M>>>27),M=S+(j^T&(L^j))+C[6]+3225465664&4294967295,S=L+(M<<9&4294967295|M>>>23),M=T+(L^j&(S^L))+C[11]+643717713&4294967295,T=S+(M<<14&4294967295|M>>>18),M=j+(S^L&(T^S))+C[0]+3921069994&4294967295,j=T+(M<<20&4294967295|M>>>12),M=L+(T^S&(j^T))+C[5]+3593408605&4294967295,L=j+(M<<5&4294967295|M>>>27),M=S+(j^T&(L^j))+C[10]+38016083&4294967295,S=L+(M<<9&4294967295|M>>>23),M=T+(L^j&(S^L))+C[15]+3634488961&4294967295,T=S+(M<<14&4294967295|M>>>18),M=j+(S^L&(T^S))+C[4]+3889429448&4294967295,j=T+(M<<20&4294967295|M>>>12),M=L+(T^S&(j^T))+C[9]+568446438&4294967295,L=j+(M<<5&4294967295|M>>>27),M=S+(j^T&(L^j))+C[14]+3275163606&4294967295,S=L+(M<<9&4294967295|M>>>23),M=T+(L^j&(S^L))+C[3]+4107603335&4294967295,T=S+(M<<14&4294967295|M>>>18),M=j+(S^L&(T^S))+C[8]+1163531501&4294967295,j=T+(M<<20&4294967295|M>>>12),M=L+(T^S&(j^T))+C[13]+2850285829&4294967295,L=j+(M<<5&4294967295|M>>>27),M=S+(j^T&(L^j))+C[2]+4243563512&4294967295,S=L+(M<<9&4294967295|M>>>23),M=T+(L^j&(S^L))+C[7]+1735328473&4294967295,T=S+(M<<14&4294967295|M>>>18),M=j+(S^L&(T^S))+C[12]+2368359562&4294967295,j=T+(M<<20&4294967295|M>>>12),M=L+(j^T^S)+C[5]+4294588738&4294967295,L=j+(M<<4&4294967295|M>>>28),M=S+(L^j^T)+C[8]+2272392833&4294967295,S=L+(M<<11&4294967295|M>>>21),M=T+(S^L^j)+C[11]+1839030562&4294967295,T=S+(M<<16&4294967295|M>>>16),M=j+(T^S^L)+C[14]+4259657740&4294967295,j=T+(M<<23&4294967295|M>>>9),M=L+(j^T^S)+C[1]+2763975236&4294967295,L=j+(M<<4&4294967295|M>>>28),M=S+(L^j^T)+C[4]+1272893353&4294967295,S=L+(M<<11&4294967295|M>>>21),M=T+(S^L^j)+C[7]+4139469664&4294967295,T=S+(M<<16&4294967295|M>>>16),M=j+(T^S^L)+C[10]+3200236656&4294967295,j=T+(M<<23&4294967295|M>>>9),M=L+(j^T^S)+C[13]+681279174&4294967295,L=j+(M<<4&4294967295|M>>>28),M=S+(L^j^T)+C[0]+3936430074&4294967295,S=L+(M<<11&4294967295|M>>>21),M=T+(S^L^j)+C[3]+3572445317&4294967295,T=S+(M<<16&4294967295|M>>>16),M=j+(T^S^L)+C[6]+76029189&4294967295,j=T+(M<<23&4294967295|M>>>9),M=L+(j^T^S)+C[9]+3654602809&4294967295,L=j+(M<<4&4294967295|M>>>28),M=S+(L^j^T)+C[12]+3873151461&4294967295,S=L+(M<<11&4294967295|M>>>21),M=T+(S^L^j)+C[15]+530742520&4294967295,T=S+(M<<16&4294967295|M>>>16),M=j+(T^S^L)+C[2]+3299628645&4294967295,j=T+(M<<23&4294967295|M>>>9),M=L+(T^(j|~S))+C[0]+4096336452&4294967295,L=j+(M<<6&4294967295|M>>>26),M=S+(j^(L|~T))+C[7]+1126891415&4294967295,S=L+(M<<10&4294967295|M>>>22),M=T+(L^(S|~j))+C[14]+2878612391&4294967295,T=S+(M<<15&4294967295|M>>>17),M=j+(S^(T|~L))+C[5]+4237533241&4294967295,j=T+(M<<21&4294967295|M>>>11),M=L+(T^(j|~S))+C[12]+1700485571&4294967295,L=j+(M<<6&4294967295|M>>>26),M=S+(j^(L|~T))+C[3]+2399980690&4294967295,S=L+(M<<10&4294967295|M>>>22),M=T+(L^(S|~j))+C[10]+4293915773&4294967295,T=S+(M<<15&4294967295|M>>>17),M=j+(S^(T|~L))+C[1]+2240044497&4294967295,j=T+(M<<21&4294967295|M>>>11),M=L+(T^(j|~S))+C[8]+1873313359&4294967295,L=j+(M<<6&4294967295|M>>>26),M=S+(j^(L|~T))+C[15]+4264355552&4294967295,S=L+(M<<10&4294967295|M>>>22),M=T+(L^(S|~j))+C[6]+2734768916&4294967295,T=S+(M<<15&4294967295|M>>>17),M=j+(S^(T|~L))+C[13]+1309151649&4294967295,j=T+(M<<21&4294967295|M>>>11),M=L+(T^(j|~S))+C[4]+4149444226&4294967295,L=j+(M<<6&4294967295|M>>>26),M=S+(j^(L|~T))+C[11]+3174756917&4294967295,S=L+(M<<10&4294967295|M>>>22),M=T+(L^(S|~j))+C[2]+718787259&4294967295,T=S+(M<<15&4294967295|M>>>17),M=j+(S^(T|~L))+C[9]+3951481745&4294967295,O.g[0]=O.g[0]+L&4294967295,O.g[1]=O.g[1]+(T+(M<<21&4294967295|M>>>11))&4294967295,O.g[2]=O.g[2]+T&4294967295,O.g[3]=O.g[3]+S&4294967295}s.prototype.u=function(O,L){L===void 0&&(L=O.length);for(var j=L-this.blockSize,C=this.B,T=this.h,S=0;S<L;){if(T==0)for(;S<=j;)l(this,O,S),S+=this.blockSize;if(typeof O=="string"){for(;S<L;)if(C[T++]=O.charCodeAt(S++),T==this.blockSize){l(this,C),T=0;break}}else for(;S<L;)if(C[T++]=O[S++],T==this.blockSize){l(this,C),T=0;break}}this.h=T,this.o+=L},s.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var L=1;L<O.length-8;++L)O[L]=0;var j=8*this.o;for(L=O.length-8;L<O.length;++L)O[L]=j&255,j/=256;for(this.u(O),O=Array(16),L=j=0;4>L;++L)for(var C=0;32>C;C+=8)O[j++]=this.g[L]>>>C&255;return O};function c(O,L){var j=f;return Object.prototype.hasOwnProperty.call(j,O)?j[O]:j[O]=L(O)}function d(O,L){this.h=L;for(var j=[],C=!0,T=O.length-1;0<=T;T--){var S=O[T]|0;C&&S==L||(j[T]=S,C=!1)}this.g=j}var f={};function g(O){return-128<=O&&128>O?c(O,function(L){return new d([L|0],0>L?-1:0)}):new d([O|0],0>O?-1:0)}function p(O){if(isNaN(O)||!isFinite(O))return v;if(0>O)return I(p(-O));for(var L=[],j=1,C=0;O>=j;C++)L[C]=O/j|0,j*=4294967296;return new d(L,0)}function x(O,L){if(O.length==0)throw Error("number format error: empty string");if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(O.charAt(0)=="-")return I(x(O.substring(1),L));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=p(Math.pow(L,8)),C=v,T=0;T<O.length;T+=8){var S=Math.min(8,O.length-T),M=parseInt(O.substring(T,T+S),L);8>S?(S=p(Math.pow(L,S)),C=C.j(S).add(p(M))):(C=C.j(j),C=C.add(p(M)))}return C}var v=g(0),w=g(1),k=g(16777216);n=d.prototype,n.m=function(){if(U(this))return-I(this).m();for(var O=0,L=1,j=0;j<this.g.length;j++){var C=this.i(j);O+=(0<=C?C:4294967296+C)*L,L*=4294967296}return O},n.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(D(this))return"0";if(U(this))return"-"+I(this).toString(O);for(var L=p(Math.pow(O,6)),j=this,C="";;){var T=K(j,L).g;j=z(j,T.j(L));var S=((0<j.g.length?j.g[0]:j.h)>>>0).toString(O);if(j=T,D(j))return S+C;for(;6>S.length;)S="0"+S;C=S+C}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function D(O){if(O.h!=0)return!1;for(var L=0;L<O.g.length;L++)if(O.g[L]!=0)return!1;return!0}function U(O){return O.h==-1}n.l=function(O){return O=z(this,O),U(O)?-1:D(O)?0:1};function I(O){for(var L=O.g.length,j=[],C=0;C<L;C++)j[C]=~O.g[C];return new d(j,~O.h).add(w)}n.abs=function(){return U(this)?I(this):this},n.add=function(O){for(var L=Math.max(this.g.length,O.g.length),j=[],C=0,T=0;T<=L;T++){var S=C+(this.i(T)&65535)+(O.i(T)&65535),M=(S>>>16)+(this.i(T)>>>16)+(O.i(T)>>>16);C=M>>>16,S&=65535,M&=65535,j[T]=M<<16|S}return new d(j,j[j.length-1]&-2147483648?-1:0)};function z(O,L){return O.add(I(L))}n.j=function(O){if(D(this)||D(O))return v;if(U(this))return U(O)?I(this).j(I(O)):I(I(this).j(O));if(U(O))return I(this.j(I(O)));if(0>this.l(k)&&0>O.l(k))return p(this.m()*O.m());for(var L=this.g.length+O.g.length,j=[],C=0;C<2*L;C++)j[C]=0;for(C=0;C<this.g.length;C++)for(var T=0;T<O.g.length;T++){var S=this.i(C)>>>16,M=this.i(C)&65535,me=O.i(T)>>>16,Te=O.i(T)&65535;j[2*C+2*T]+=M*Te,A(j,2*C+2*T),j[2*C+2*T+1]+=S*Te,A(j,2*C+2*T+1),j[2*C+2*T+1]+=M*me,A(j,2*C+2*T+1),j[2*C+2*T+2]+=S*me,A(j,2*C+2*T+2)}for(C=0;C<L;C++)j[C]=j[2*C+1]<<16|j[2*C];for(C=L;C<2*L;C++)j[C]=0;return new d(j,0)};function A(O,L){for(;(O[L]&65535)!=O[L];)O[L+1]+=O[L]>>>16,O[L]&=65535,L++}function q(O,L){this.g=O,this.h=L}function K(O,L){if(D(L))throw Error("division by zero");if(D(O))return new q(v,v);if(U(O))return L=K(I(O),L),new q(I(L.g),I(L.h));if(U(L))return L=K(O,I(L)),new q(I(L.g),L.h);if(30<O.g.length){if(U(O)||U(L))throw Error("slowDivide_ only works with positive integers.");for(var j=w,C=L;0>=C.l(O);)j=F(j),C=F(C);var T=ne(j,1),S=ne(C,1);for(C=ne(C,2),j=ne(j,2);!D(C);){var M=S.add(C);0>=M.l(O)&&(T=T.add(j),S=M),C=ne(C,1),j=ne(j,1)}return L=z(O,T.j(L)),new q(T,L)}for(T=v;0<=O.l(L);){for(j=Math.max(1,Math.floor(O.m()/L.m())),C=Math.ceil(Math.log(j)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),S=p(j),M=S.j(L);U(M)||0<M.l(O);)j-=C,S=p(j),M=S.j(L);D(S)&&(S=w),T=T.add(S),O=z(O,M)}return new q(T,O)}n.A=function(O){return K(this,O).h},n.and=function(O){for(var L=Math.max(this.g.length,O.g.length),j=[],C=0;C<L;C++)j[C]=this.i(C)&O.i(C);return new d(j,this.h&O.h)},n.or=function(O){for(var L=Math.max(this.g.length,O.g.length),j=[],C=0;C<L;C++)j[C]=this.i(C)|O.i(C);return new d(j,this.h|O.h)},n.xor=function(O){for(var L=Math.max(this.g.length,O.g.length),j=[],C=0;C<L;C++)j[C]=this.i(C)^O.i(C);return new d(j,this.h^O.h)};function F(O){for(var L=O.g.length+1,j=[],C=0;C<L;C++)j[C]=O.i(C)<<1|O.i(C-1)>>>31;return new d(j,O.h)}function ne(O,L){var j=L>>5;L%=32;for(var C=O.g.length-j,T=[],S=0;S<C;S++)T[S]=0<L?O.i(S+j)>>>L|O.i(S+j+1)<<32-L:O.i(S+j);return new d(T,O.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,bj=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=x,si=d}).apply(typeof Fw<"u"?Fw:typeof self<"u"?self:typeof window<"u"?window:{});var Nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vj,Wc,wj,Mh,qp,_j,Nj,jj;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,b,N){return h==Array.prototype||h==Object.prototype||(h[b]=N.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nh=="object"&&Nh];for(var b=0;b<h.length;++b){var N=h[b];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var s=t(this);function l(h,b){if(b)e:{var N=s;h=h.split(".");for(var P=0;P<h.length-1;P++){var Q=h[P];if(!(Q in N))break e;N=N[Q]}h=h[h.length-1],P=N[h],b=b(P),b!=P&&b!=null&&e(N,h,{configurable:!0,writable:!0,value:b})}}function c(h,b){h instanceof String&&(h+="");var N=0,P=!1,Q={next:function(){if(!P&&N<h.length){var se=N++;return{value:b(se,h[se]),done:!1}}return P=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}l("Array.prototype.values",function(h){return h||function(){return c(this,function(b,N){return N})}});var d=d||{},f=this||self;function g(h){var b=typeof h;return b=b!="object"?b:h?Array.isArray(h)?"array":b:"null",b=="array"||b=="object"&&typeof h.length=="number"}function p(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function x(h,b,N){return h.call.apply(h.bind,arguments)}function v(h,b,N){if(!h)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,P),h.apply(b,Q)}}return function(){return h.apply(b,arguments)}}function w(h,b,N){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:v,w.apply(null,arguments)}function k(h,b){var N=Array.prototype.slice.call(arguments,1);return function(){var P=N.slice();return P.push.apply(P,arguments),h.apply(this,P)}}function D(h,b){function N(){}N.prototype=b.prototype,h.aa=b.prototype,h.prototype=new N,h.prototype.constructor=h,h.Qb=function(P,Q,se){for(var ye=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)ye[ot-2]=arguments[ot];return b.prototype[Q].apply(P,ye)}}function U(h){const b=h.length;if(0<b){const N=Array(b);for(let P=0;P<b;P++)N[P]=h[P];return N}return[]}function I(h,b){for(let N=1;N<arguments.length;N++){const P=arguments[N];if(g(P)){const Q=h.length||0,se=P.length||0;h.length=Q+se;for(let ye=0;ye<se;ye++)h[Q+ye]=P[ye]}else h.push(P)}}class z{constructor(b,N){this.i=b,this.j=N,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function A(h){return/^[\s\xa0]*$/.test(h)}function q(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function K(h){return K[" "](h),h}K[" "]=function(){};var F=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function ne(h,b,N){for(const P in h)b.call(N,h[P],P,h)}function O(h,b){for(const N in h)b.call(void 0,h[N],N,h)}function L(h){const b={};for(const N in h)b[N]=h[N];return b}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(h,b){let N,P;for(let Q=1;Q<arguments.length;Q++){P=arguments[Q];for(N in P)h[N]=P[N];for(let se=0;se<j.length;se++)N=j[se],Object.prototype.hasOwnProperty.call(P,N)&&(h[N]=P[N])}}function T(h){var b=1;h=h.split(":");const N=[];for(;0<b&&h.length;)N.push(h.shift()),b--;return h.length&&N.push(h.join(":")),N}function S(h){f.setTimeout(()=>{throw h},0)}function M(){var h=ge;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class me{constructor(){this.h=this.g=null}add(b,N){const P=Te.get();P.set(b,N),this.h?this.h.next=P:this.g=P,this.h=P}}var Te=new z(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(b,N){this.h=b,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let H,ue=!1,ge=new me,ee=()=>{const h=f.Promise.resolve(void 0);H=()=>{h.then(V)}};var V=()=>{for(var h;h=M();){try{h.h.call(h.g)}catch(N){S(N)}var b=Te;b.j(h),100>b.h&&(b.h++,h.next=b.g,b.g=h)}ue=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var we=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const N=()=>{};f.addEventListener("test",N,b),f.removeEventListener("test",N,b)}catch{}return h})();function G(h,b){if(ie.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var N=this.type=h.type,P=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget){if(F){e:{try{K(b.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(b=null)}}else N=="mouseover"?b=h.fromElement:N=="mouseout"&&(b=h.toElement);this.relatedTarget=b,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:he[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&G.aa.h.call(this)}}D(G,ie);var he={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function Be(h,b,N,P,Q){this.listener=h,this.proxy=null,this.src=b,this.type=N,this.capture=!!P,this.ha=Q,this.key=++Ee,this.da=this.fa=!1}function rt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function bt(h){this.src=h,this.g={},this.h=0}bt.prototype.add=function(h,b,N,P,Q){var se=h.toString();h=this.g[se],h||(h=this.g[se]=[],this.h++);var ye=Ue(h,b,P,Q);return-1<ye?(b=h[ye],N||(b.fa=!1)):(b=new Be(b,this.src,se,!!P,Q),b.fa=N,h.push(b)),b};function pe(h,b){var N=b.type;if(N in h.g){var P=h.g[N],Q=Array.prototype.indexOf.call(P,b,void 0),se;(se=0<=Q)&&Array.prototype.splice.call(P,Q,1),se&&(rt(b),h.g[N].length==0&&(delete h.g[N],h.h--))}}function Ue(h,b,N,P){for(var Q=0;Q<h.length;++Q){var se=h[Q];if(!se.da&&se.listener==b&&se.capture==!!N&&se.ha==P)return Q}return-1}var Ae="closure_lm_"+(1e6*Math.random()|0),yt={};function Yt(h,b,N,P,Q){if(Array.isArray(b)){for(var se=0;se<b.length;se++)Yt(h,b[se],N,P,Q);return null}return N=Yu(N),h&&h[xe]?h.K(b,N,p(P)?!!P.capture:!1,Q):fs(h,b,N,!1,P,Q)}function fs(h,b,N,P,Q,se){if(!b)throw Error("Invalid event type");var ye=p(Q)?!!Q.capture:!!Q,ot=Uo(h);if(ot||(h[Ae]=ot=new bt(h)),N=ot.add(b,N,P,ye,se),N.proxy)return N;if(P=na(),N.proxy=P,P.src=h,P.listener=N,h.addEventListener)we||(Q=ye),Q===void 0&&(Q=!1),h.addEventListener(b.toString(),P,Q);else if(h.attachEvent)h.attachEvent(hr(b.toString()),P);else if(h.addListener&&h.removeListener)h.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return N}function na(){function h(N){return b.call(h.src,h.listener,N)}const b=Lo;return h}function ra(h,b,N,P,Q){if(Array.isArray(b))for(var se=0;se<b.length;se++)ra(h,b[se],N,P,Q);else P=p(P)?!!P.capture:!!P,N=Yu(N),h&&h[xe]?(h=h.i,b=String(b).toString(),b in h.g&&(se=h.g[b],N=Ue(se,N,P,Q),-1<N&&(rt(se[N]),Array.prototype.splice.call(se,N,1),se.length==0&&(delete h.g[b],h.h--)))):h&&(h=Uo(h))&&(b=h.g[b.toString()],h=-1,b&&(h=Ue(b,N,P,Q)),(N=-1<h?b[h]:null)&&Ln(N))}function Ln(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[xe])pe(b.i,h);else{var N=h.type,P=h.proxy;b.removeEventListener?b.removeEventListener(N,P,h.capture):b.detachEvent?b.detachEvent(hr(N),P):b.addListener&&b.removeListener&&b.removeListener(P),(N=Uo(b))?(pe(N,h),N.h==0&&(N.src=null,b[Ae]=null)):rt(h)}}}function hr(h){return h in yt?yt[h]:yt[h]="on"+h}function Lo(h,b){if(h.da)h=!0;else{b=new G(b,this);var N=h.listener,P=h.ha||h.src;h.fa&&Ln(h),h=N.call(P,b)}return h}function Uo(h){return h=h[Ae],h instanceof bt?h:null}var dn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yu(h){return typeof h=="function"?h:(h[dn]||(h[dn]=function(b){return h.handleEvent(b)}),h[dn])}function Qt(){W.call(this),this.i=new bt(this),this.M=this,this.F=null}D(Qt,W),Qt.prototype[xe]=!0,Qt.prototype.removeEventListener=function(h,b,N,P){ra(this,h,b,N,P)};function tn(h,b){var N,P=h.F;if(P)for(N=[];P;P=P.F)N.push(P);if(h=h.M,P=b.type||b,typeof b=="string")b=new ie(b,h);else if(b instanceof ie)b.target=b.target||h;else{var Q=b;b=new ie(P,h),C(b,Q)}if(Q=!0,N)for(var se=N.length-1;0<=se;se--){var ye=b.g=N[se];Q=ms(ye,P,!0,b)&&Q}if(ye=b.g=h,Q=ms(ye,P,!0,b)&&Q,Q=ms(ye,P,!1,b)&&Q,N)for(se=0;se<N.length;se++)ye=b.g=N[se],Q=ms(ye,P,!1,b)&&Q}Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var h=this.i,b;for(b in h.g){for(var N=h.g[b],P=0;P<N.length;P++)rt(N[P]);delete h.g[b],h.h--}}this.F=null},Qt.prototype.K=function(h,b,N,P){return this.i.add(String(h),b,!1,N,P)},Qt.prototype.L=function(h,b,N,P){return this.i.add(String(h),b,!0,N,P)};function ms(h,b,N,P){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();for(var Q=!0,se=0;se<b.length;++se){var ye=b[se];if(ye&&!ye.da&&ye.capture==N){var ot=ye.listener,zt=ye.ha||ye.src;ye.fa&&pe(h.i,ye),Q=ot.call(zt,P)!==!1&&Q}}return Q&&!P.defaultPrevented}function Qu(h,b,N){if(typeof h=="function")N&&(h=w(h,N));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:f.setTimeout(h,b||0)}function Vo(h){h.g=Qu(()=>{h.g=null,h.i&&(h.i=!1,Vo(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class tm extends W{constructor(b,N){super(),this.m=b,this.l=N,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Vo(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(h){W.call(this),this.h=h,this.g={}}D(vi,W);var sa=[];function vn(h){ne(h.g,function(b,N){this.g.hasOwnProperty(N)&&Ln(b)},h),h.g={}}vi.prototype.N=function(){vi.aa.N.call(this),vn(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fr=f.JSON.stringify,Sn=f.JSON.parse,nm=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function zo(){}zo.prototype.h=null;function Xu(h){return h.h||(h.h=h.i())}function wi(){}var qr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function aa(){ie.call(this,"d")}D(aa,ie);function Ar(){ie.call(this,"c")}D(Ar,ie);var mr={},ia=null;function yl(){return ia=ia||new Qt}mr.La="serverreachability";function Fo(h){ie.call(this,mr.La,h)}D(Fo,ie);function gs(h){const b=yl();tn(b,new Fo(b))}mr.STAT_EVENT="statevent";function la(h,b){ie.call(this,mr.STAT_EVENT,h),this.stat=b}D(la,ie);function hn(h){const b=yl();tn(b,new la(b,h))}mr.Ma="timingevent";function Bo(h,b){ie.call(this,mr.Ma,h),this.size=b}D(Bo,ie);function oa(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},b)}function ca(){this.g=!0}ca.prototype.xa=function(){this.g=!1};function qo(h,b,N,P,Q,se){h.info(function(){if(h.g)if(se)for(var ye="",ot=se.split("&"),zt=0;zt<ot.length;zt++){var $e=ot[zt].split("=");if(1<$e.length){var rn=$e[0];$e=$e[1];var sn=rn.split("_");ye=2<=sn.length&&sn[1]=="type"?ye+(rn+"="+$e+"&"):ye+(rn+"=redacted&")}}else ye=null;else ye=se;return"XMLHTTP REQ ("+P+") [attempt "+Q+"]: "+b+`
`+N+`
`+ye})}function Ho(h,b,N,P,Q,se,ye){h.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+Q+"]: "+b+`
`+N+`
`+se+" "+ye})}function ps(h,b,N,P){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+Hr(h,N)+(P?" "+P:"")})}function Wu(h,b){h.info(function(){return"TIMEOUT: "+b})}ca.prototype.info=function(){};function Hr(h,b){if(!h.g)return b;if(!b)return null;try{var N=JSON.parse(b);if(N){for(h=0;h<N.length;h++)if(Array.isArray(N[h])){var P=N[h];if(!(2>P.length)){var Q=P[1];if(Array.isArray(Q)&&!(1>Q.length)){var se=Q[0];if(se!="noop"&&se!="stop"&&se!="close")for(var ye=1;ye<Q.length;ye++)Q[ye]=""}}}}return fr(N)}catch{return b}}var Ct={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$r;function ua(){}D(ua,zo),ua.prototype.g=function(){return new XMLHttpRequest},ua.prototype.i=function(){return{}},$r=new ua;function Gr(h,b,N,P){this.j=h,this.i=b,this.l=N,this.R=P||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ju}function Ju(){this.i=null,this.g="",this.h=!1}var $o={},ys={};function _i(h,b,N){h.L=1,h.v=Ei(Rt(b)),h.m=N,h.P=!0,xs(h,null)}function xs(h,b){h.F=Date.now(),Cr(h),h.A=Rt(h.v);var N=h.A,P=h.R;Array.isArray(P)||(P=[String(P)]),ws(N.i,"t",P),h.C=0,N=h.j.J,h.h=new Ju,h.g=md(h.j,N?b:null,!h.m),0<h.O&&(h.M=new tm(w(h.Y,h,h.g),h.O)),b=h.U,N=h.g,P=h.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(sa[0]=Q.toString()),Q=sa);for(var se=0;se<Q.length;se++){var ye=Yt(N,Q[se],P||b.handleEvent,!1,b.h||b);if(!ye)break;b.g[ye.key]=ye}b=h.H?L(h.H):{},h.m?(h.u||(h.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,b)):(h.u="GET",h.g.ea(h.A,h.u,null,b)),gs(),qo(h.i,h.u,h.A,h.l,h.R,h.m)}Gr.prototype.ca=function(h){h=h.target;const b=this.M;b&&Cn(h)==3?b.j():this.Y(h)},Gr.prototype.Y=function(h){try{if(h==this.g)e:{const sn=Cn(this.g);var b=this.g.Ba();const Na=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||Ti(this.g)))){this.J||sn!=4||b==7||(b==8||0>=Na?gs(3):gs(2)),xl(this);var N=this.g.Z();this.X=N;t:if(bs(this)){var P=Ti(this.g);h="";var Q=P.length,se=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tn(this),da(this);var ye="";break t}this.h.i=new f.TextDecoder}for(b=0;b<Q;b++)this.h.h=!0,h+=this.h.i.decode(P[b],{stream:!(se&&b==Q-1)});P.length=0,this.h.g+=h,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=N==200,Ho(this.i,this.u,this.A,this.l,this.R,sn,N),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,zt=this.g;if((ot=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(ot)){var $e=ot;break t}}$e=null}if(N=$e)ps(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kr(this,N);else{this.o=!1,this.s=3,hn(12),Tn(this),da(this);break e}}if(this.P){N=!0;let Vn;for(;!this.J&&this.C<ye.length;)if(Vn=Ni(this,ye),Vn==ys){sn==4&&(this.s=4,hn(14),N=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==$o){this.s=4,hn(15),ps(this.i,this.l,ye,"[Invalid Chunk]"),N=!1;break}else ps(this.i,this.l,Vn,null),Kr(this,Vn);if(bs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||ye.length!=0||this.h.h||(this.s=1,hn(16),N=!1),this.o=this.o&&N,!N)ps(this.i,this.l,ye,"[Invalid Chunked Response]"),Tn(this),da(this);else if(0<ye.length&&!this.W){this.W=!0;var rn=this.j;rn.g==this&&rn.ba&&!rn.M&&(rn.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),nc(rn),rn.M=!0,hn(11))}}else ps(this.i,this.l,ye,null),Kr(this,ye);sn==4&&Tn(this),this.o&&!this.J&&(sn==4?dd(this.j,this):(this.o=!1,Cr(this)))}else ad(this.g),N==400&&0<ye.indexOf("Unknown SID")?(this.s=3,hn(12)):(this.s=0,hn(13)),Tn(this),da(this)}}}catch{}finally{}};function bs(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Ni(h,b){var N=h.C,P=b.indexOf(`
`,N);return P==-1?ys:(N=Number(b.substring(N,P)),isNaN(N)?$o:(P+=1,P+N>b.length?ys:(b=b.slice(P,P+N),h.C=P+N,b)))}Gr.prototype.cancel=function(){this.J=!0,Tn(this)};function Cr(h){h.S=Date.now()+h.I,Ot(h,h.I)}function Ot(h,b){if(h.B!=null)throw Error("WatchDog timer not null");h.B=oa(w(h.ba,h),b)}function xl(h){h.B&&(f.clearTimeout(h.B),h.B=null)}Gr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Wu(this.i,this.A),this.L!=2&&(gs(),hn(17)),Tn(this),this.s=2,da(this)):Ot(this,this.S-h)};function da(h){h.j.G==0||h.J||dd(h.j,h)}function Tn(h){xl(h);var b=h.M;b&&typeof b.ma=="function"&&b.ma(),h.M=null,vn(h.U),h.g&&(b=h.g,h.g=null,b.abort(),b.ma())}function Kr(h,b){try{var N=h.j;if(N.G!=0&&(N.g==h||ha(N.h,h))){if(!h.K&&ha(N.h,h)&&N.G==3){try{var P=N.Da.g.parse(b)}catch{P=null}if(Array.isArray(P)&&P.length==3){var Q=P;if(Q[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<h.F)wa(N),va(N);else break e;tc(N),hn(18)}}else N.za=Q[1],0<N.za-N.T&&37500>Q[2]&&N.F&&N.v==0&&!N.C&&(N.C=oa(w(N.Za,N),6e3));if(1>=Zu(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else Ns(N,11)}else if((h.K||N.g==h)&&wa(N),!A(b))for(Q=N.Da.g.parse(b),b=0;b<Q.length;b++){let $e=Q[b];if(N.T=$e[0],$e=$e[1],N.G==2)if($e[0]=="c"){N.K=$e[1],N.ia=$e[2];const rn=$e[3];rn!=null&&(N.la=rn,N.j.info("VER="+N.la));const sn=$e[4];sn!=null&&(N.Aa=sn,N.j.info("SVER="+N.Aa));const Na=$e[5];Na!=null&&typeof Na=="number"&&0<Na&&(P=1.5*Na,N.L=P,N.j.info("backChannelRequestTimeoutMs_="+P)),P=N;const Vn=h.g;if(Vn){const Ri=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ri){var se=P.h;se.g||Ri.indexOf("spdy")==-1&&Ri.indexOf("quic")==-1&&Ri.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(fa(se,se.h),se.h=null))}if(P.D){const js=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;js&&(P.ya=js,st(P.I,P.D,js))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-h.F,N.j.info("Handshake RTT: "+N.R+"ms")),P=N;var ye=h;if(P.qa=fd(P,P.J?P.ia:null,P.W),ye.K){gr(P.h,ye);var ot=ye,zt=P.L;zt&&(ot.I=zt),ot.B&&(xl(ot),Cr(ot)),P.g=ye}else cd(P);0<N.i.length&&kl(N)}else $e[0]!="stop"&&$e[0]!="close"||Ns(N,7);else N.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Ns(N,7):Zo(N):$e[0]!="noop"&&N.l&&N.l.ta($e),N.v=0)}}gs(4)}catch{}}var rm=class{constructor(h,b){this.g=h,this.map=b}};function Go(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ko(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Zu(h){return h.h?1:h.g?h.g.size:0}function ha(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function fa(h,b){h.g?h.g.add(b):h.h=b}function gr(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}Go.prototype.cancel=function(){if(this.i=An(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function An(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const N of h.g.values())b=b.concat(N.D);return b}return U(h.i)}function ed(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var b=[],N=h.length,P=0;P<N;P++)b.push(h[P]);return b}b=[],N=0;for(P in h)b[N++]=h[P];return b}function sm(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var b=[];h=h.length;for(var N=0;N<h;N++)b.push(N);return b}b=[],N=0;for(const P in h)b[N++]=P;return b}}}function bl(h,b){if(h.forEach&&typeof h.forEach=="function")h.forEach(b,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,b,void 0);else for(var N=sm(h),P=ed(h),Q=P.length,se=0;se<Q;se++)b.call(void 0,P[se],N&&N[se],h)}var Yo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vl(h,b){if(h){h=h.split("&");for(var N=0;N<h.length;N++){var P=h[N].indexOf("="),Q=null;if(0<=P){var se=h[N].substring(0,P);Q=h[N].substring(P+1)}else se=h[N];b(se,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function vs(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof vs){this.h=h.h,ma(this,h.j),this.o=h.o,this.g=h.g,ji(this,h.s),this.l=h.l;var b=h.i,N=new Yr;N.i=b.i,b.g&&(N.g=new Map(b.g),N.h=b.h),wl(this,N),this.m=h.m}else h&&(b=String(h).match(Yo))?(this.h=!1,ma(this,b[1]||"",!0),this.o=ga(b[2]||""),this.g=ga(b[3]||"",!0),ji(this,b[4]),this.l=ga(b[5]||"",!0),wl(this,b[6]||"",!0),this.m=ga(b[7]||"")):(this.h=!1,this.i=new Yr(null,this.h))}vs.prototype.toString=function(){var h=[],b=this.j;b&&h.push(pr(b,Qo,!0),":");var N=this.g;return(N||b=="file")&&(h.push("//"),(b=this.o)&&h.push(pr(b,Qo,!0),"@"),h.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&h.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&h.push("/"),h.push(pr(N,N.charAt(0)=="/"?Xo:td,!0))),(N=this.i.toString())&&h.push("?",N),(N=this.m)&&h.push("#",pr(N,lm)),h.join("")};function Rt(h){return new vs(h)}function ma(h,b,N){h.j=N?ga(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function ji(h,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);h.s=b}else h.s=null}function wl(h,b,N){b instanceof Yr?(h.i=b,nd(h.i,h.h)):(N||(b=pr(b,im)),h.i=new Yr(b,h.h))}function st(h,b,N){h.i.set(b,N)}function Ei(h){return st(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ga(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function pr(h,b,N){return typeof h=="string"?(h=encodeURI(h).replace(b,am),N&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function am(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Qo=/[#\/\?@]/g,td=/[#\?:]/g,Xo=/[#\?]/g,im=/[#\?@]/g,lm=/#/g;function Yr(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function nn(h){h.g||(h.g=new Map,h.h=0,h.i&&vl(h.i,function(b,N){h.add(decodeURIComponent(b.replace(/\+/g," ")),N)}))}n=Yr.prototype,n.add=function(h,b){nn(this),this.i=null,h=Wn(this,h);var N=this.g.get(h);return N||this.g.set(h,N=[]),N.push(b),this.h+=1,this};function _l(h,b){nn(h),b=Wn(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function Nl(h,b){return nn(h),b=Wn(h,b),h.g.has(b)}n.forEach=function(h,b){nn(this),this.g.forEach(function(N,P){N.forEach(function(Q){h.call(b,Q,P,this)},this)},this)},n.na=function(){nn(this);const h=Array.from(this.g.values()),b=Array.from(this.g.keys()),N=[];for(let P=0;P<b.length;P++){const Q=h[P];for(let se=0;se<Q.length;se++)N.push(b[P])}return N},n.V=function(h){nn(this);let b=[];if(typeof h=="string")Nl(this,h)&&(b=b.concat(this.g.get(Wn(this,h))));else{h=Array.from(this.g.values());for(let N=0;N<h.length;N++)b=b.concat(h[N])}return b},n.set=function(h,b){return nn(this),this.i=null,h=Wn(this,h),Nl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},n.get=function(h,b){return h?(h=this.V(h),0<h.length?String(h[0]):b):b};function ws(h,b,N){_l(h,b),0<N.length&&(h.i=null,h.g.set(Wn(h,b),U(N)),h.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(var N=0;N<b.length;N++){var P=b[N];const se=encodeURIComponent(String(P)),ye=this.V(P);for(P=0;P<ye.length;P++){var Q=se;ye[P]!==""&&(Q+="="+encodeURIComponent(String(ye[P]))),h.push(Q)}}return this.i=h.join("&")};function Wn(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function nd(h,b){b&&!h.j&&(nn(h),h.i=null,h.g.forEach(function(N,P){var Q=P.toLowerCase();P!=Q&&(_l(this,P),ws(this,Q,N))},h)),h.j=b}function Wo(h,b){const N=new ca;if(f.Image){const P=new Image;P.onload=k(Un,N,"TestLoadImage: loaded",!0,b,P),P.onerror=k(Un,N,"TestLoadImage: error",!1,b,P),P.onabort=k(Un,N,"TestLoadImage: abort",!1,b,P),P.ontimeout=k(Un,N,"TestLoadImage: timeout",!1,b,P),f.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=h}else b(!1)}function rd(h,b){const N=new ca,P=new AbortController,Q=setTimeout(()=>{P.abort(),Un(N,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:P.signal}).then(se=>{clearTimeout(Q),se.ok?Un(N,"TestPingServer: ok",!0,b):Un(N,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Q),Un(N,"TestPingServer: error",!1,b)})}function Un(h,b,N,P,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),P(N)}catch{}}function Rr(){this.g=new nm}function Jo(h,b,N){const P=N||"";try{bl(h,function(Q,se){let ye=Q;p(Q)&&(ye=fr(Q)),b.push(P+se+"="+encodeURIComponent(ye))})}catch(Q){throw b.push(P+"type="+encodeURIComponent("_badmap")),Q}}function Qr(h){this.l=h.Ub||null,this.j=h.eb||!1}D(Qr,zo),Qr.prototype.g=function(){return new Jn(this.l,this.j)},Qr.prototype.i=(function(h){return function(){return h}})({});function Jn(h,b){Qt.call(this),this.D=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Jn,Qt),n=Jn.prototype,n.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=b,this.readyState=1,pa(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(b.body=h),(this.D||f).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,pa(this)),this.g&&(this.readyState=3,pa(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function jl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?Xr(this):pa(this),this.readyState==3&&jl(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Xr(this))},n.Qa=function(h){this.g&&(this.response=h,Xr(this))},n.ga=function(){this.g&&Xr(this)};function Xr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,pa(h)}n.setRequestHeader=function(h,b){this.u.append(h,b)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var N=b.next();!N.done;)N=N.value,h.push(N[0]+": "+N[1]),N=b.next();return h.join(`\r
`)};function pa(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ki(h){let b="";return ne(h,function(N,P){b+=P,b+=":",b+=N,b+=`\r
`}),b}function ya(h,b,N){e:{for(P in N){var P=!1;break e}P=!0}P||(N=ki(N),typeof h=="string"?N!=null&&encodeURIComponent(String(N)):st(h,b,N))}function wt(h){Qt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(wt,Qt);var wn=/^https?$/i,_s=["POST","PUT"];n=wt.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,b,N,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$r.g(),this.v=this.o?Xu(this.o):Xu($r),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(se){Si(this,se);return}if(h=N||"",N=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var Q in P)N.set(Q,P[Q]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const se of P.keys())N.set(se,P.get(se));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(N.keys()).find(se=>se.toLowerCase()=="content-type"),Q=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(_s,b,void 0))||P||Q||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,ye]of N)this.g.setRequestHeader(se,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{El(this),this.u=!0,this.g.send(h),this.u=!1}catch(se){Si(this,se)}};function Si(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.m=5,xa(h),ba(h)}function xa(h){h.A||(h.A=!0,tn(h,"complete"),tn(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,tn(this,"complete"),tn(this,"abort"),ba(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ba(this,!0)),wt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?sd(this):this.bb())},n.bb=function(){sd(this)};function sd(h){if(h.h&&typeof d<"u"&&(!h.v[1]||Cn(h)!=4||h.Z()!=2)){if(h.u&&Cn(h)==4)Qu(h.Ea,0,h);else if(tn(h,"readystatechange"),Cn(h)==4){h.h=!1;try{const ye=h.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var N;if(!(N=b)){var P;if(P=ye===0){var Q=String(h.D).match(Yo)[1]||null;!Q&&f.self&&f.self.location&&(Q=f.self.location.protocol.slice(0,-1)),P=!wn.test(Q?Q.toLowerCase():"")}N=P}if(N)tn(h,"complete"),tn(h,"success");else{h.m=6;try{var se=2<Cn(h)?h.g.statusText:""}catch{se=""}h.l=se+" ["+h.Z()+"]",xa(h)}}finally{ba(h)}}}}function ba(h,b){if(h.g){El(h);const N=h.g,P=h.v[0]?()=>{}:null;h.g=null,h.v=null,b||tn(h,"ready");try{N.onreadystatechange=P}catch{}}}function El(h){h.I&&(f.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Cn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),Sn(b)}};function Ti(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ad(h){const b={};h=(h.g&&2<=Cn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<h.length;P++){if(A(h[P]))continue;var N=T(h[P]);const Q=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const se=b[Q]||[];b[Q]=se,se.push(N)}O(b,function(P){return P.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(h,b,N){return N&&N.internalChannelParams&&N.internalChannelParams[h]||b}function id(h){this.Aa=0,this.i=[],this.j=new ca,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ai("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ai("baseRetryDelayMs",5e3,h),this.cb=Ai("retryDelaySeedMs",1e4,h),this.Wa=Ai("forwardChannelMaxRetries",2,h),this.wa=Ai("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Go(h&&h.concurrentRequestLimit),this.Da=new Rr,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=id.prototype,n.la=8,n.G=1,n.connect=function(h,b,N,P){hn(0),this.W=h,this.H=b||{},N&&P!==void 0&&(this.H.OSID=N,this.H.OAID=P),this.F=this.X,this.I=fd(this,null,this.W),kl(this)};function Zo(h){if(ld(h),h.G==3){var b=h.U++,N=Rt(h.I);if(st(N,"SID",h.K),st(N,"RID",b),st(N,"TYPE","terminate"),Ci(h,N),b=new Gr(h,h.j,b),b.L=2,b.v=Ei(Rt(N)),N=!1,f.navigator&&f.navigator.sendBeacon)try{N=f.navigator.sendBeacon(b.v.toString(),"")}catch{}!N&&f.Image&&(new Image().src=b.v,N=!0),N||(b.g=md(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Cr(b)}rc(h)}function va(h){h.g&&(nc(h),h.g.cancel(),h.g=null)}function ld(h){va(h),h.u&&(f.clearTimeout(h.u),h.u=null),wa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function kl(h){if(!Ko(h.h)&&!h.s){h.s=!0;var b=h.Ga;H||ee(),ue||(H(),ue=!0),ge.add(b,h),h.B=0}}function om(h,b){return Zu(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=b.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=oa(w(h.Ga,h,b),hd(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Q=new Gr(this,this.j,h);let se=this.o;if(this.S&&(se?(se=L(se),C(se,this.S)):se=this.S),this.m!==null||this.O||(Q.H=se,se=null),this.P)e:{for(var b=0,N=0;N<this.i.length;N++){t:{var P=this.i[N];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(b+=P,4096<b){b=N;break e}if(b===4096||N===this.i.length-1){b=N+1;break e}}b=1e3}else b=1e3;b=ec(this,Q,b),N=Rt(this.I),st(N,"RID",h),st(N,"CVER",22),this.D&&st(N,"X-HTTP-Session-Id",this.D),Ci(this,N),se&&(this.O?b="headers="+encodeURIComponent(String(ki(se)))+"&"+b:this.m&&ya(N,this.m,se)),fa(this.h,Q),this.Ua&&st(N,"TYPE","init"),this.P?(st(N,"$req",b),st(N,"SID","null"),Q.T=!0,_i(Q,N,null)):_i(Q,N,b),this.G=2}}else this.G==3&&(h?od(this,h):this.i.length==0||Ko(this.h)||od(this))};function od(h,b){var N;b?N=b.l:N=h.U++;const P=Rt(h.I);st(P,"SID",h.K),st(P,"RID",N),st(P,"AID",h.T),Ci(h,P),h.m&&h.o&&ya(P,h.m,h.o),N=new Gr(h,h.j,N,h.B+1),h.m===null&&(N.H=h.o),b&&(h.i=b.D.concat(h.i)),b=ec(h,N,1e3),N.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),fa(h.h,N),_i(N,P,b)}function Ci(h,b){h.H&&ne(h.H,function(N,P){st(b,P,N)}),h.l&&bl({},function(N,P){st(b,P,N)})}function ec(h,b,N){N=Math.min(h.i.length,N);var P=h.l?w(h.l.Na,h.l,h):null;e:{var Q=h.i;let se=-1;for(;;){const ye=["count="+N];se==-1?0<N?(se=Q[0].g,ye.push("ofs="+se)):se=0:ye.push("ofs="+se);let ot=!0;for(let zt=0;zt<N;zt++){let $e=Q[zt].g;const rn=Q[zt].map;if($e-=se,0>$e)se=Math.max(0,Q[zt].g-100),ot=!1;else try{Jo(rn,ye,"req"+$e+"_")}catch{P&&P(rn)}}if(ot){P=ye.join("&");break e}}}return h=h.i.splice(0,N),b.D=h,P}function cd(h){if(!h.g&&!h.u){h.Y=1;var b=h.Fa;H||ee(),ue||(H(),ue=!0),ge.add(b,h),h.v=0}}function tc(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=oa(w(h.Fa,h),hd(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,ud(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=oa(w(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hn(10),va(this),ud(this))};function nc(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function ud(h){h.g=new Gr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var b=Rt(h.qa);st(b,"RID","rpc"),st(b,"SID",h.K),st(b,"AID",h.T),st(b,"CI",h.F?"0":"1"),!h.F&&h.ja&&st(b,"TO",h.ja),st(b,"TYPE","xmlhttp"),Ci(h,b),h.m&&h.o&&ya(b,h.m,h.o),h.L&&(h.g.I=h.L);var N=h.g;h=h.ia,N.L=1,N.v=Ei(Rt(b)),N.m=null,N.P=!0,xs(N,h)}n.Za=function(){this.C!=null&&(this.C=null,va(this),tc(this),hn(19))};function wa(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function dd(h,b){var N=null;if(h.g==b){wa(h),nc(h),h.g=null;var P=2}else if(ha(h.h,b))N=b.D,gr(h.h,b),P=1;else return;if(h.G!=0){if(b.o)if(P==1){N=b.m?b.m.length:0,b=Date.now()-b.F;var Q=h.B;P=yl(),tn(P,new Bo(P,N)),kl(h)}else cd(h);else if(Q=b.s,Q==3||Q==0&&0<b.X||!(P==1&&om(h,b)||P==2&&tc(h)))switch(N&&0<N.length&&(b=h.h,b.i=b.i.concat(N)),Q){case 1:Ns(h,5);break;case 4:Ns(h,10);break;case 3:Ns(h,6);break;default:Ns(h,2)}}}function hd(h,b){let N=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(N*=2),N*b}function Ns(h,b){if(h.j.info("Error code "+b),b==2){var N=w(h.fb,h),P=h.Xa;const Q=!P;P=new vs(P||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||ma(P,"https"),Ei(P),Q?Wo(P.toString(),N):rd(P.toString(),N)}else hn(2);h.G=0,h.l&&h.l.sa(b),rc(h),ld(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function rc(h){if(h.G=0,h.ka=[],h.l){const b=An(h.h);(b.length!=0||h.i.length!=0)&&(I(h.ka,b),I(h.ka,h.i),h.h.i.length=0,U(h.i),h.i.length=0),h.l.ra()}}function fd(h,b,N){var P=N instanceof vs?Rt(N):new vs(N);if(P.g!="")b&&(P.g=b+"."+P.g),ji(P,P.s);else{var Q=f.location;P=Q.protocol,b=b?b+"."+Q.hostname:Q.hostname,Q=+Q.port;var se=new vs(null);P&&ma(se,P),b&&(se.g=b),Q&&ji(se,Q),N&&(se.l=N),P=se}return N=h.D,b=h.ya,N&&b&&st(P,N,b),st(P,"VER",h.la),Ci(h,P),P}function md(h,b,N){if(b&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Ca&&!h.pa?new wt(new Qr({eb:N})):new wt(h.pa),b.Ha(h.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function gd(){}n=gd.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Sl(){}Sl.prototype.g=function(h,b){return new Rn(h,b)};function Rn(h,b){Qt.call(this),this.g=new id(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(h?h["X-WebChannel-Client-Profile"]=b.va:h={"X-WebChannel-Client-Profile":b.va}),this.g.S=h,(h=b&&b.Sb)&&!A(h)&&(this.g.m=h),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!A(b)&&(this.g.D=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new _a(this)}D(Rn,Qt),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Zo(this.g)},Rn.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var N={};N.__data__=h,h=N}else this.u&&(N={},N.__data__=fr(h),h=N);b.i.push(new rm(b.Ya++,h)),b.G==3&&kl(b)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Zo(this.g),delete this.g,Rn.aa.N.call(this)};function pd(h){aa.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const N in b){h=N;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}D(pd,aa);function yd(){Ar.call(this),this.status=1}D(yd,Ar);function _a(h){this.g=h}D(_a,gd),_a.prototype.ua=function(){tn(this.g,"a")},_a.prototype.ta=function(h){tn(this.g,new pd(h))},_a.prototype.sa=function(h){tn(this.g,new yd)},_a.prototype.ra=function(){tn(this.g,"b")},Sl.prototype.createWebChannel=Sl.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,jj=function(){return new Sl},Nj=function(){return yl()},_j=mr,qp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ct.NO_ERROR=0,Ct.TIMEOUT=8,Ct.HTTP_ERROR=6,Mh=Ct,fn.COMPLETE="complete",wj=fn,wi.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,Wc=wi,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,vj=wt}).apply(typeof Nh<"u"?Nh:typeof self<"u"?self:typeof window<"u"?window:{});const Bw="@firebase/firestore",qw="4.9.0";class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");let Co="12.0.0";const el=new Nf("@firebase/firestore");function uo(){return el.logLevel}function je(n,...e){if(el.logLevel<=Xe.DEBUG){const t=e.map(k0);el.debug(`Firestore (${Co}): ${n}`,...t)}}function Ws(n,...e){if(el.logLevel<=Xe.ERROR){const t=e.map(k0);el.error(`Firestore (${Co}): ${n}`,...t)}}function tl(n,...e){if(el.logLevel<=Xe.WARN){const t=e.map(k0);el.warn(`Firestore (${Co}): ${n}`,...t)}}function k0(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Pe(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Ej(n,s,t)}function Ej(n,e,t){let s=`FIRESTORE (${Co}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ws(s),new Error(s)}function ut(n,e,t,s){let l="Unexpected state";typeof t=="string"?l=t:s=t,n||Ej(e,l,s)}function Fe(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Xn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class kj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jn.UNAUTHENTICATED)))}shutdown(){}}class cR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class uR{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ut(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new $s,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},f=g=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new $s)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ut(typeof s.accessToken=="string",31837,{l:s}),new kj(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new jn(e)}}class dR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new dR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ut(this.o===void 0,3512);const s=c=>{c.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,je("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ut(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Hw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function mR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class jf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=mR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<t&&(s+=e.charAt(l[c]%62))}return s}}function We(n,e){return n<e?-1:n>e?1:0}function Hp(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const l=n.charAt(s),c=e.charAt(s);if(l!==c)return yp(l)===yp(c)?We(l,c):yp(l)?1:-1}return We(n.length,e.length)}const gR=55296,pR=57343;function yp(n){const e=n.charCodeAt(0);return e>=gR&&e<=pR}function _o(n,e,t){return n.length===e.length&&n.every(((s,l)=>t(s,e[l])))}const $w="__name__";class ts{constructor(e,t,s){t===void 0?t=0:t>e.length&&Pe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Pe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ts.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ts?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let l=0;l<s;l++){const c=ts.compareSegments(e.get(l),t.get(l));if(c!==0)return c}return We(e.length,t.length)}static compareSegments(e,t){const s=ts.isNumericId(e),l=ts.isNumericId(t);return s&&!l?-1:!s&&l?1:s&&l?ts.extractNumericId(e).compare(ts.extractNumericId(t)):Hp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return si.fromString(e.substring(4,e.length-2))}}class vt extends ts{construct(e,t,s){return new vt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new _e(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((l=>l.length>0)))}return new vt(t)}static emptyPath(){return new vt([])}}const yR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends ts{construct(e,t,s){return new cn(e,t,s)}static isValidIdentifier(e){return yR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$w}static keyField(){return new cn([$w])}static fromServerFormat(e){const t=[];let s="",l=0;const c=()=>{if(s.length===0)throw new _e(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;l<e.length;){const f=e[l];if(f==="\\"){if(l+1===e.length)throw new _e(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new _e(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else f==="`"?(d=!d,l++):f!=="."||d?(s+=f,l++):(c(),l++)}if(c(),d)throw new _e(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(vt.fromString(e))}static fromName(e){return new Ce(vt.fromString(e).popFirst(5))}static empty(){return new Ce(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new vt(e.slice()))}}function Tj(n,e,t){if(!t)throw new _e(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Aj(n,e,t,s){if(e===!0&&s===!0)throw new _e(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Gw(n){if(!Ce.isDocumentKey(n))throw new _e(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Kw(n){if(Ce.isDocumentKey(n))throw new _e(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Cj(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ef(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe(12329,{type:typeof n})}function Mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ef(n);throw new _e(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Kt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ru(n,e){if(!Cj(n))throw new _e(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const d=n[s];if(l&&typeof d!==l){t=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new _e(oe.INVALID_ARGUMENT,t);return!0}const Yw=-62135596800,Qw=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Qw);return new De(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Yw)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qw}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ru(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Yw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:Kt("string",De._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new De(0,0))}static max(){return new Ve(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const yu=-1;function xR(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,l=Ve.fromTimestamp(s===1e9?new De(t+1,0):new De(t,s));return new oi(l,Ce.empty(),e)}function bR(n){return new oi(n.readTime,n.key,yu)}class oi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new oi(Ve.min(),Ce.empty(),yu)}static max(){return new oi(Ve.max(),Ce.empty(),yu)}}function vR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}const wR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _R{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ro(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==wR)throw n;je("LocalStore","Unexpectedly lost primary lease")}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):de.reject(t)}static resolve(e){return new de(((t,s)=>{t(e)}))}static reject(e){return new de(((t,s)=>{s(e)}))}static waitFor(e){return new de(((t,s)=>{let l=0,c=0,d=!1;e.forEach((f=>{++l,f.next((()=>{++c,d&&c===l&&t()}),(g=>s(g)))})),d=!0,c===l&&t()}))}static or(e){let t=de.resolve(!1);for(const s of e)t=t.next((l=>l?de.resolve(l):s()));return t}static forEach(e,t){const s=[];return e.forEach(((l,c)=>{s.push(t.call(this,l,c))})),this.waitFor(s)}static mapArray(e,t){return new de(((s,l)=>{const c=e.length,d=new Array(c);let f=0;for(let g=0;g<c;g++){const p=g;t(e[p]).next((x=>{d[p]=x,++f,f===c&&s(d)}),(x=>l(x)))}}))}static doWhile(e,t){return new de(((s,l)=>{const c=()=>{e()===!0?t().next((()=>{c()}),l):s()};c()}))}}function NR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Io(n){return n.name==="IndexedDbTransactionError"}class kf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kf.ce=-1;const S0=-1;function Sf(n){return n==null}function Qh(n){return n===0&&1/n==-1/0}function jR(n){return typeof n=="number"&&Number.isInteger(n)&&!Qh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Rj="";function ER(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Xw(e)),e=kR(n.get(t),e);return Xw(e)}function kR(n,e){let t=e;const s=n.length;for(let l=0;l<s;l++){const c=n.charAt(l);switch(c){case"\0":t+="";break;case Rj:t+="";break;default:t+=c}}return t}function Xw(n){return n+Rj+""}function Ww(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ij(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Tt{constructor(e,t){this.comparator=e,this.root=t||xn.EMPTY}insert(e,t){return new Tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return t+s.left.size;l<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jh(this.root,e,this.comparator,!0)}}class jh{constructor(e,t,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xn{constructor(e,t,s,l,c){this.key=e,this.value=t,this.color=s??xn.RED,this.left=l??xn.EMPTY,this.right=c??xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,l,c){return new xn(e??this.key,t??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,t,s),null):c===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return xn.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,t,s,l,c){return this}insert(e,t,s){return new xn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jw(this.data.getIterator())}getIteratorFrom(e){return new Jw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Jt(this.comparator);return t.data=e,t}}class Jw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class or{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new or([])}unionWith(e){let t=new Jt(cn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new or(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _o(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Dj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Dj("Invalid base64 string: "+c):c}})(e);return new un(t)}static fromUint8Array(e){const t=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const SR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ci(n){if(ut(!!n,39018),typeof n=="string"){let e=0;const t=SR.exec(n);if(ut(!!t,46558,{timestamp:n}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Lt(n.seconds),nanos:Lt(n.nanos)}}function Lt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ui(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}const Oj="server_timestamp",Mj="__type__",Pj="__previous_value__",Lj="__local_write_time__";function T0(n){return(n?.mapValue?.fields||{})[Mj]?.stringValue===Oj}function Tf(n){const e=n.mapValue.fields[Pj];return T0(e)?Tf(e):e}function xu(n){const e=ci(n.mapValue.fields[Lj].timestampValue);return new De(e.seconds,e.nanos)}class TR{constructor(e,t,s,l,c,d,f,g,p,x){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=x}}const Xh="(default)";class No{constructor(e,t){this.projectId=e,this.database=t||Xh}static empty(){return new No("","")}get isDefaultDatabase(){return this.database===Xh}isEqual(e){return e instanceof No&&e.projectId===this.projectId&&e.database===this.database}}const Uj="__type__",AR="__max__",Eh={mapValue:{}},Vj="__vector__",Wh="value";function di(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?T0(n)?4:RR(n)?9007199254740991:CR(n)?10:11:Pe(28295,{value:n})}function os(n,e){if(n===e)return!0;const t=di(n);if(t!==di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xu(n).isEqual(xu(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=ci(l.timestampValue),f=ci(c.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(l,c){return ui(l.bytesValue).isEqual(ui(c.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(l,c){return Lt(l.geoPointValue.latitude)===Lt(c.geoPointValue.latitude)&&Lt(l.geoPointValue.longitude)===Lt(c.geoPointValue.longitude)})(n,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Lt(l.integerValue)===Lt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=Lt(l.doubleValue),f=Lt(c.doubleValue);return d===f?Qh(d)===Qh(f):isNaN(d)&&isNaN(f)}return!1})(n,e);case 9:return _o(n.arrayValue.values||[],e.arrayValue.values||[],os);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},f=c.mapValue.fields||{};if(Ww(d)!==Ww(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(f[g]===void 0||!os(d[g],f[g])))return!1;return!0})(n,e);default:return Pe(52216,{left:n})}}function bu(n,e){return(n.values||[]).find((t=>os(t,e)))!==void 0}function jo(n,e){if(n===e)return 0;const t=di(n),s=di(e);if(t!==s)return We(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return(function(c,d){const f=Lt(c.integerValue||c.doubleValue),g=Lt(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return Zw(n.timestampValue,e.timestampValue);case 4:return Zw(xu(n),xu(e));case 5:return Hp(n.stringValue,e.stringValue);case 6:return(function(c,d){const f=ui(c),g=ui(d);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(c,d){const f=c.split("/"),g=d.split("/");for(let p=0;p<f.length&&p<g.length;p++){const x=We(f[p],g[p]);if(x!==0)return x}return We(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(c,d){const f=We(Lt(c.latitude),Lt(d.latitude));return f!==0?f:We(Lt(c.longitude),Lt(d.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return e_(n.arrayValue,e.arrayValue);case 10:return(function(c,d){const f=c.fields||{},g=d.fields||{},p=f[Wh]?.arrayValue,x=g[Wh]?.arrayValue,v=We(p?.values?.length||0,x?.values?.length||0);return v!==0?v:e_(p,x)})(n.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Eh.mapValue&&d===Eh.mapValue)return 0;if(c===Eh.mapValue)return 1;if(d===Eh.mapValue)return-1;const f=c.fields||{},g=Object.keys(f),p=d.fields||{},x=Object.keys(p);g.sort(),x.sort();for(let v=0;v<g.length&&v<x.length;++v){const w=Hp(g[v],x[v]);if(w!==0)return w;const k=jo(f[g[v]],p[x[v]]);if(k!==0)return k}return We(g.length,x.length)})(n.mapValue,e.mapValue);default:throw Pe(23264,{he:t})}}function Zw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=ci(n),s=ci(e),l=We(t.seconds,s.seconds);return l!==0?l:We(t.nanos,s.nanos)}function e_(n,e){const t=n.values||[],s=e.values||[];for(let l=0;l<t.length&&l<s.length;++l){const c=jo(t[l],s[l]);if(c)return c}return We(t.length,s.length)}function Eo(n){return $p(n)}function $p(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ci(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ui(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",l=!0;for(const c of t.values||[])l?l=!1:s+=",",s+=$p(c);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${$p(t.fields[d])}`;return l+"}"})(n.mapValue):Pe(61005,{value:n})}function Ph(n){switch(di(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tf(n);return e?16+Ph(e):16;case 5:return 2*n.stringValue.length;case 6:return ui(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Ph(c)),0)})(n.arrayValue);case 10:case 11:return(function(s){let l=0;return yi(s.fields,((c,d)=>{l+=c.length+Ph(d)})),l})(n.mapValue);default:throw Pe(13486,{value:n})}}function t_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gp(n){return!!n&&"integerValue"in n}function A0(n){return!!n&&"arrayValue"in n}function n_(n){return!!n&&"nullValue"in n}function r_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lh(n){return!!n&&"mapValue"in n}function CR(n){return(n?.mapValue?.fields||{})[Uj]?.stringValue===Vj}function su(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return yi(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=su(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=su(n.arrayValue.values[t]);return e}return{...n}}function RR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===AR}class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Lh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(t)}setAll(e){let t=cn.emptyPath(),s={},l=[];e.forEach(((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,l),s={},l=[],t=f.popLast()}d?s[f.lastSegment()]=su(d):l.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,l)}delete(e){const t=this.field(e.popLast());Lh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return os(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=t.mapValue.fields[e.get(s)];Lh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,s){yi(t,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new Kn(su(this.value))}}function zj(n){const e=[];return yi(n.fields,((t,s)=>{const l=new cn([t]);if(Lh(s)){const c=zj(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new or(e)}class En{constructor(e,t,s,l,c,d,f){this.key=e,this.documentType=t,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=f}static newInvalidDocument(e){return new En(e,0,Ve.min(),Ve.min(),Ve.min(),Kn.empty(),0)}static newFoundDocument(e,t,s,l){return new En(e,1,t,Ve.min(),s,l,0)}static newNoDocument(e,t){return new En(e,2,t,Ve.min(),Ve.min(),Kn.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,Ve.min(),Ve.min(),Kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jh{constructor(e,t){this.position=e,this.inclusive=t}}function s_(n,e,t){let s=0;for(let l=0;l<n.position.length;l++){const c=e[l],d=n.position[l];if(c.field.isKeyField()?s=Ce.comparator(Ce.fromName(d.referenceValue),t.key):s=jo(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function a_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!os(n.position[t],e.position[t]))return!1;return!0}class vu{constructor(e,t="asc"){this.field=e,this.dir=t}}function IR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Fj{}class Gt extends Fj{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new OR(e,t,s):t==="array-contains"?new LR(e,s):t==="in"?new UR(e,s):t==="not-in"?new VR(e,s):t==="array-contains-any"?new zR(e,s):new Gt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new MR(e,s):new PR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(jo(t,this.value)):t!==null&&di(this.value)===di(t)&&this.matchesComparison(jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fr extends Fj{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fr(e,t)}matches(e){return Bj(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Bj(n){return n.op==="and"}function qj(n){return DR(n)&&Bj(n)}function DR(n){for(const e of n.filters)if(e instanceof Fr)return!1;return!0}function Kp(n){if(n instanceof Gt)return n.field.canonicalString()+n.op.toString()+Eo(n.value);if(qj(n))return n.filters.map((e=>Kp(e))).join(",");{const e=n.filters.map((t=>Kp(t))).join(",");return`${n.op}(${e})`}}function Hj(n,e){return n instanceof Gt?(function(s,l){return l instanceof Gt&&s.op===l.op&&s.field.isEqual(l.field)&&os(s.value,l.value)})(n,e):n instanceof Fr?(function(s,l){return l instanceof Fr&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,f)=>c&&Hj(d,l.filters[f])),!0):!1})(n,e):void Pe(19439)}function $j(n){return n instanceof Gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Eo(t.value)}`})(n):n instanceof Fr?(function(t){return t.op.toString()+" {"+t.getFilters().map($j).join(" ,")+"}"})(n):"Filter"}class OR extends Gt{constructor(e,t,s){super(e,t,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class MR extends Gt{constructor(e,t){super(e,"in",t),this.keys=Gj("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class PR extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=Gj("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Gj(n,e){return(e.arrayValue?.values||[]).map((t=>Ce.fromName(t.referenceValue)))}class LR extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return A0(t)&&bu(t.arrayValue,this.value)}}class UR extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bu(this.value.arrayValue,t)}}class VR extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bu(this.value.arrayValue,t)}}class zR extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!A0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>bu(this.value.arrayValue,s)))}}class FR{constructor(e,t=null,s=[],l=[],c=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=f,this.Te=null}}function i_(n,e=null,t=[],s=[],l=null,c=null,d=null){return new FR(n,e,t,s,l,c,d)}function C0(n){const e=Fe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Kp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Eo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Eo(s))).join(",")),e.Te=t}return e.Te}function R0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!IR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Hj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!a_(n.startAt,e.startAt)&&a_(n.endAt,e.endAt)}function Yp(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Do{constructor(e,t=null,s=[],l=[],c=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function BR(n,e,t,s,l,c,d,f){return new Do(n,e,t,s,l,c,d,f)}function Af(n){return new Do(n)}function l_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Kj(n){return n.collectionGroup!==null}function au(n){const e=Fe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Jt(cn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new vu(c,s))})),t.has(cn.keyField().canonicalString())||e.Ie.push(new vu(cn.keyField(),s))}return e.Ie}function ss(n){const e=Fe(n);return e.Ee||(e.Ee=qR(e,au(n))),e.Ee}function qR(n,e){if(n.limitType==="F")return i_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new vu(l.field,c)}));const t=n.endAt?new Jh(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Jh(n.startAt.position,n.startAt.inclusive):null;return i_(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Qp(n,e){const t=n.filters.concat([e]);return new Do(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zh(n,e,t){return new Do(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cf(n,e){return R0(ss(n),ss(e))&&n.limitType===e.limitType}function Yj(n){return`${C0(ss(n))}|lt:${n.limitType}`}function ho(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((l=>$j(l))).join(", ")}]`),Sf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((l=>Eo(l))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((l=>Eo(l))).join(",")),`Target(${s})`})(ss(n))}; limitType=${n.limitType})`}function Rf(n,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ce.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(n,e)&&(function(s,l){for(const c of au(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(n,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(n,e)&&(function(s,l){return!(s.startAt&&!(function(d,f,g){const p=s_(d,f,g);return d.inclusive?p<=0:p<0})(s.startAt,au(s),l)||s.endAt&&!(function(d,f,g){const p=s_(d,f,g);return d.inclusive?p>=0:p>0})(s.endAt,au(s),l))})(n,e)}function HR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Qj(n){return(e,t)=>{let s=!1;for(const l of au(n)){const c=$R(l,e,t);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function $R(n,e,t){const s=n.field.isKeyField()?Ce.comparator(e.key,t.key):(function(c,d,f){const g=d.data.field(c),p=f.data.field(c);return g!==null&&p!==null?jo(g,p):Pe(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Pe(19790,{direction:n.dir})}}class fl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[t]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){yi(this.inner,((t,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return Ij(this.inner)}size(){return this.innerSize}}const GR=new Tt(Ce.comparator);function Js(){return GR}const Xj=new Tt(Ce.comparator);function Jc(...n){let e=Xj;for(const t of n)e=e.insert(t.key,t);return e}function Wj(n){let e=Xj;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Qi(){return iu()}function Jj(){return iu()}function iu(){return new fl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const KR=new Tt(Ce.comparator),YR=new Jt(Ce.comparator);function Je(...n){let e=YR;for(const t of n)e=e.add(t);return e}const QR=new Jt(We);function XR(){return QR}function I0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function Zj(n){return{integerValue:""+n}}function WR(n,e){return jR(e)?Zj(e):I0(n,e)}class If{constructor(){this._=void 0}}function JR(n,e,t){return n instanceof wu?(function(l,c){const d={fields:{[Mj]:{stringValue:Oj},[Lj]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&T0(c)&&(c=Tf(c)),c&&(d.fields[Pj]=c),{mapValue:d}})(t,e):n instanceof _u?tE(n,e):n instanceof Nu?nE(n,e):(function(l,c){const d=eE(l,c),f=o_(d)+o_(l.Ae);return Gp(d)&&Gp(l.Ae)?Zj(f):I0(l.serializer,f)})(n,e)}function ZR(n,e,t){return n instanceof _u?tE(n,e):n instanceof Nu?nE(n,e):t}function eE(n,e){return n instanceof ef?(function(s){return Gp(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class wu extends If{}class _u extends If{constructor(e){super(),this.elements=e}}function tE(n,e){const t=rE(e);for(const s of n.elements)t.some((l=>os(l,s)))||t.push(s);return{arrayValue:{values:t}}}class Nu extends If{constructor(e){super(),this.elements=e}}function nE(n,e){let t=rE(e);for(const s of n.elements)t=t.filter((l=>!os(l,s)));return{arrayValue:{values:t}}}class ef extends If{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function o_(n){return Lt(n.integerValue||n.doubleValue)}function rE(n){return A0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class eI{constructor(e,t){this.field=e,this.transform=t}}function tI(n,e){return n.field.isEqual(e.field)&&(function(s,l){return s instanceof _u&&l instanceof _u||s instanceof Nu&&l instanceof Nu?_o(s.elements,l.elements,os):s instanceof ef&&l instanceof ef?os(s.Ae,l.Ae):s instanceof wu&&l instanceof wu})(n.transform,e.transform)}class nI{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Df{}function sE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new D0(n.key,Er.none()):new Iu(n.key,n.data,Er.none());{const t=n.data,s=Kn.empty();let l=new Jt(cn.comparator);for(let c of e.fields)if(!l.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new xi(n.key,s,new or(l.toArray()),Er.none())}}function rI(n,e,t){n instanceof Iu?(function(l,c,d){const f=l.value.clone(),g=u_(l.fieldTransforms,c,d.transformResults);f.setAll(g),c.convertToFoundDocument(d.version,f).setHasCommittedMutations()})(n,e,t):n instanceof xi?(function(l,c,d){if(!Uh(l.precondition,c))return void c.convertToUnknownDocument(d.version);const f=u_(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(aE(l)),g.setAll(f),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(n,e,t):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function lu(n,e,t,s){return n instanceof Iu?(function(c,d,f,g){if(!Uh(c.precondition,d))return f;const p=c.value.clone(),x=d_(c.fieldTransforms,g,d);return p.setAll(x),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof xi?(function(c,d,f,g){if(!Uh(c.precondition,d))return f;const p=d_(c.fieldTransforms,g,d),x=d.data;return x.setAll(aE(c)),x.setAll(p),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((v=>v.field)))})(n,e,t,s):(function(c,d,f){return Uh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f})(n,e,t)}function sI(n,e){let t=null;for(const s of n.fieldTransforms){const l=e.data.field(s.field),c=eE(s.transform,l||null);c!=null&&(t===null&&(t=Kn.empty()),t.set(s.field,c))}return t||null}function c_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&_o(s,l,((c,d)=>tI(c,d)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Iu extends Df{constructor(e,t,s,l=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class xi extends Df{constructor(e,t,s,l,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function aE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function u_(n,e,t){const s=new Map;ut(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let l=0;l<t.length;l++){const c=n[l],d=c.transform,f=e.data.field(c.field);s.set(c.field,ZR(d,f,t[l]))}return s}function d_(n,e,t){const s=new Map;for(const l of n){const c=l.transform,d=t.data.field(l.field);s.set(l.field,JR(c,d,e))}return s}class D0 extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aI extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class iI{constructor(e,t,s,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&rI(c,e,s[l])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=lu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=lu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Jj();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let f=this.applyToLocalView(d,c.mutatedFields);f=t.has(l.key)?null:f;const g=sE(d,f);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Ve.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&_o(this.mutations,e.mutations,((t,s)=>c_(t,s)))&&_o(this.baseMutations,e.baseMutations,((t,s)=>c_(t,s)))}}class O0{constructor(e,t,s,l){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=l}static from(e,t,s){ut(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return KR})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new O0(e,t,s,l)}}class lI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class oI{constructor(e,t){this.count=e,this.unchangedNames=t}}var $t,nt;function cI(n){switch(n){case oe.OK:return Pe(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Pe(15467,{code:n})}}function iE(n){if(n===void 0)return Ws("GRPC error has no .code"),oe.UNKNOWN;switch(n){case $t.OK:return oe.OK;case $t.CANCELLED:return oe.CANCELLED;case $t.UNKNOWN:return oe.UNKNOWN;case $t.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case $t.INTERNAL:return oe.INTERNAL;case $t.UNAVAILABLE:return oe.UNAVAILABLE;case $t.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case $t.NOT_FOUND:return oe.NOT_FOUND;case $t.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case $t.ABORTED:return oe.ABORTED;case $t.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case $t.DATA_LOSS:return oe.DATA_LOSS;default:return Pe(39323,{code:n})}}(nt=$t||($t={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function uI(){return new TextEncoder}const dI=new si([4294967295,4294967295],0);function h_(n){const e=uI().encode(n),t=new bj;return t.update(e),new Uint8Array(t.digest())}function f_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new si([t,s],0),new si([l,c],0)]}class M0{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Zc(`Invalid padding: ${t}`);if(s<0)throw new Zc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Zc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Zc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=si.fromNumber(this.ge)}ye(e,t,s){let l=e.add(t.multiply(si.fromNumber(s)));return l.compare(dI)===1&&(l=new si([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=h_(e),[s,l]=f_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,t,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new M0(c,l,t);return s.forEach((f=>d.insert(f))),d}insert(e){if(this.ge===0)return;const t=h_(e),[s,l]=f_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Of{constructor(e,t,s,l,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const l=new Map;return l.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Of(Ve.min(),l,new Tt(We),Js(),Je())}}class Du{constructor(e,t,s,l,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Du(s,t,Je(),Je(),Je())}}class Vh{constructor(e,t,s,l){this.be=e,this.removedTargetIds=t,this.key=s,this.De=l}}class lE{constructor(e,t){this.targetId=e,this.Ce=t}}class oE{constructor(e,t,s=un.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=l}}class m_{constructor(){this.ve=0,this.Fe=g_(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),s=Je();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:s=s.add(l);break;default:Pe(38017,{changeType:c})}})),new Du(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=g_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class hI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Js(),this.Je=kh(),this.He=kh(),this.Ye=new Tt(We)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,s=e.Ce.count,l=this.ot(t);if(l){const c=l.target;if(Yp(c))if(s===0){const d=new Ce(c.path);this.et(t,d,En.newNoDocument(d,Ve.min()))}else ut(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const f=this.ut(e),g=f?this.ct(f,e,d):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=t;let d,f;try{d=ui(s).toUint8Array()}catch(g){if(g instanceof Dj)return tl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new M0(d,l,c)}catch(g){return tl(g instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),f=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const f=this.ot(d);if(f){if(c.current&&Yp(f.target)){const g=new Ce(f.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,En.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let s=Je();this.He.forEach(((c,d)=>{let f=!0;d.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new Of(e,t,this.Ye,this.je,s);return this.je=Js(),this.Je=kh(),this.He=kh(),this.Ye=new Tt(We),l}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.Qe(t,1):l.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new m_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Jt(We),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Jt(We),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||je("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new m_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function kh(){return new Tt(Ce.comparator)}function g_(){return new Tt(Ce.comparator)}const fI={asc:"ASCENDING",desc:"DESCENDING"},mI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gI={and:"AND",or:"OR"};class pI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xp(n,e){return n.useProto3Json||Sf(e)?e:{value:e}}function tf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function yI(n,e){return tf(n,e.toTimestamp())}function as(n){return ut(!!n,49232),Ve.fromTimestamp((function(t){const s=ci(t);return new De(s.seconds,s.nanos)})(n))}function P0(n,e){return Wp(n,e).canonicalString()}function Wp(n,e){const t=(function(l){return new vt(["projects",l.projectId,"databases",l.database])})(n).child("documents");return e===void 0?t:t.child(e)}function uE(n){const e=vt.fromString(n);return ut(gE(e),10190,{key:e.toString()}),e}function Jp(n,e){return P0(n.databaseId,e.path)}function xp(n,e){const t=uE(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(hE(t))}function dE(n,e){return P0(n.databaseId,e)}function xI(n){const e=uE(n);return e.length===4?vt.emptyPath():hE(e)}function Zp(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hE(n){return ut(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function p_(n,e,t){return{name:Jp(n,e),fields:t.value.mapValue.fields}}function bI(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Pe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(p,x){return p.useProto3Json?(ut(x===void 0||typeof x=="string",58123),un.fromBase64String(x||"")):(ut(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),un.fromUint8Array(x||new Uint8Array))})(n,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&(function(p){const x=p.code===void 0?oe.UNKNOWN:iE(p.code);return new _e(x,p.message||"")})(d);t=new oE(s,l,c,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=xp(n,s.document.name),c=as(s.document.updateTime),d=s.document.createTime?as(s.document.createTime):Ve.min(),f=new Kn({mapValue:{fields:s.document.fields}}),g=En.newFoundDocument(l,c,d,f),p=s.targetIds||[],x=s.removedTargetIds||[];t=new Vh(p,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=xp(n,s.document),c=s.readTime?as(s.readTime):Ve.min(),d=En.newNoDocument(l,c),f=s.removedTargetIds||[];t=new Vh([],f,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=xp(n,s.document),c=s.removedTargetIds||[];t=new Vh([],c,l,null)}else{if(!("filter"in e))return Pe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new oI(l,c),f=s.targetId;t=new lE(f,d)}}return t}function vI(n,e){let t;if(e instanceof Iu)t={update:p_(n,e.key,e.value)};else if(e instanceof D0)t={delete:Jp(n,e.key)};else if(e instanceof xi)t={update:p_(n,e.key,e.data),updateMask:AI(e.fieldMask)};else{if(!(e instanceof aI))return Pe(16599,{Vt:e.type});t={verify:Jp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const f=d.transform;if(f instanceof wu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof _u)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Nu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ef)return{fieldPath:d.field.canonicalString(),increment:f.Ae};throw Pe(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:yI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Pe(27497)})(n,e.precondition)),t}function wI(n,e){return n&&n.length>0?(ut(e!==void 0,14353),n.map((t=>(function(l,c){let d=l.updateTime?as(l.updateTime):as(c);return d.isEqual(Ve.min())&&(d=as(c)),new nI(d,l.transformResults||[])})(t,e)))):[]}function _I(n,e){return{documents:[dE(n,e.path)]}}function NI(n,e){const t={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=dE(n,l);const c=(function(p){if(p.length!==0)return mE(Fr.create(p,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(p){if(p.length!==0)return p.map((x=>(function(w){return{field:fo(w.field),direction:kI(w.dir)}})(x)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=Xp(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:l}}function jI(n){let e=xI(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let l=null;if(s>0){ut(s===1,65062);const x=t.from[0];x.allDescendants?l=x.collectionId:e=e.child(x.collectionId)}let c=[];t.where&&(c=(function(v){const w=fE(v);return w instanceof Fr&&qj(w)?w.getFilters():[w]})(t.where));let d=[];t.orderBy&&(d=(function(v){return v.map((w=>(function(D){return new vu(mo(D.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(w)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let w;return w=typeof v=="object"?v.value:v,Sf(w)?null:w})(t.limit));let g=null;t.startAt&&(g=(function(v){const w=!!v.before,k=v.values||[];return new Jh(k,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const w=!v.before,k=v.values||[];return new Jh(k,w)})(t.endAt)),BR(e,l,d,c,f,"F",g,p)}function EI(n,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=mo(t.unaryFilter.field);return Gt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=mo(t.unaryFilter.field);return Gt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=mo(t.unaryFilter.field);return Gt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=mo(t.unaryFilter.field);return Gt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Gt.create(mo(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Fr.create(t.compositeFilter.filters.map((s=>fE(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}})(t.compositeFilter.op))})(n):Pe(30097,{filter:n})}function kI(n){return fI[n]}function SI(n){return mI[n]}function TI(n){return gI[n]}function fo(n){return{fieldPath:n.canonicalString()}}function mo(n){return cn.fromServerFormat(n.fieldPath)}function mE(n){return n instanceof Gt?(function(t){if(t.op==="=="){if(r_(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NAN"}};if(n_(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(r_(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NOT_NAN"}};if(n_(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(t.field),op:SI(t.op),value:t.value}}})(n):n instanceof Fr?(function(t){const s=t.getFilters().map((l=>mE(l)));return s.length===1?s[0]:{compositeFilter:{op:TI(t.op),filters:s}}})(n):Pe(54877,{filter:n})}function AI(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function gE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class ti{constructor(e,t,s,l,c=Ve.min(),d=Ve.min(),f=un.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class CI{constructor(e){this.yt=e}}function RI(n){const e=jI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zh(e,e.limit,"L"):e}class II{constructor(){this.Cn=new DI}addToCollectionParentIndex(e,t){return this.Cn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(oi.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(oi.min())}updateCollectionGroup(e,t,s){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class DI{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t]||new Jt(vt.comparator),c=!l.has(s);return this.index[t]=l.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Jt(vt.comparator)).toArray()}}const y_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pE=41943040;class $n{static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(pE,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);class ko{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ko(0)}static cr(){return new ko(-1)}}const x_="LruGarbageCollector",OI=1048576;function b_([n,e],[t,s]){const l=We(n,t);return l===0?We(e,s):l}class MI{constructor(e){this.Ir=e,this.buffer=new Jt(b_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();b_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PI{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){je(x_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Io(t)?je(x_,"Ignoring IndexedDB error during garbage collection: ",t):await Ro(t)}await this.Vr(3e5)}))}}class LI{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return de.resolve(kf.ce);const s=new MI(t);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(je("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(y_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,l,c,d,f,g,p;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),l=this.params.maximumSequenceNumbersToCollect):l=v,d=Date.now(),this.nthSequenceNumber(e,l)))).next((v=>(s=v,f=Date.now(),this.removeTargets(e,s,t)))).next((v=>(c=v,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((v=>(p=Date.now(),uo()<=Xe.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${l} in `+(f-d)+`ms
	Removed ${c} targets in `+(g-f)+`ms
	Removed ${v} documents in `+(p-g)+`ms
Total Duration: ${p-x}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:v}))))}}function UI(n,e){return new LI(n,e)}class VI{constructor(){this.changes=new fl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?de.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class FI{constructor(e,t,s,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(s!==null&&lu(s.mutation,l,or.empty(),De.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Je()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Je()){const l=Qi();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,s).next((c=>{let d=Jc();return c.forEach(((f,g)=>{d=d.insert(f,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=Qi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Je())))}populateOverlays(e,t,s){const l=[];return s.forEach((c=>{t.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,f)=>{t.set(d,f)}))}))}computeViews(e,t,s,l){let c=Js();const d=iu(),f=(function(){return iu()})();return t.forEach(((g,p)=>{const x=s.get(p.key);l.has(p.key)&&(x===void 0||x.mutation instanceof xi)?c=c.insert(p.key,p):x!==void 0?(d.set(p.key,x.mutation.getFieldMask()),lu(x.mutation,p,x.mutation.getFieldMask(),De.now())):d.set(p.key,or.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((p,x)=>d.set(p,x))),t.forEach(((p,x)=>f.set(p,new zI(x,d.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=iu();let l=new Tt(((d,f)=>d-f)),c=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const f of d)f.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let x=s.get(g)||or.empty();x=f.applyToLocalView(p,x),s.set(g,x);const v=(l.get(f.batchId)||Je()).add(g);l=l.insert(f.batchId,v)}))})).next((()=>{const d=[],f=l.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),p=g.key,x=g.value,v=Jj();x.forEach((w=>{if(!c.has(w)){const k=sE(t.get(w),s.get(w));k!==null&&v.set(w,k),c=c.add(w)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,v))}return de.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,l){return(function(d){return Ce.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,l):this.getDocumentsMatchingCollectionQuery(e,t,s,l)}getNextDocuments(e,t,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,l-c.size):de.resolve(Qi());let f=yu,g=c;return d.next((p=>de.forEach(p,((x,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),c.get(x)?de.resolve():this.remoteDocumentCache.getEntry(e,x).next((w=>{g=g.insert(x,w)}))))).next((()=>this.populateOverlays(e,p,c))).next((()=>this.computeViews(e,g,p,Je()))).next((x=>({batchId:f,changes:Wj(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((s=>{let l=Jc();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,l){const c=t.collectionGroup;let d=Jc();return this.indexManager.getCollectionParents(e,c).next((f=>de.forEach(f,(g=>{const p=(function(v,w){return new Do(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,s,l).next((x=>{x.forEach(((v,w)=>{d=d.insert(v,w)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,l)))).next((d=>{c.forEach(((g,p)=>{const x=p.getKey();d.get(x)===null&&(d=d.insert(x,En.newInvalidDocument(x)))}));let f=Jc();return d.forEach(((g,p)=>{const x=c.get(g);x!==void 0&&lu(x.mutation,p,or.empty(),De.now()),Rf(t,p)&&(f=f.insert(g,p))})),f}))}}class BI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return de.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:as(l.createTime)}})(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(l){return{name:l.name,query:RI(l.bundledQuery),readTime:as(l.readTime)}})(t)),de.resolve()}}class qI{constructor(){this.overlays=new Tt(Ce.comparator),this.qr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Qi();return de.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((l,c)=>{this.St(e,t,c)})),de.resolve()}removeOverlaysForBatchId(e,t,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),de.resolve()}getOverlaysForCollection(e,t,s){const l=Qi(),c=t.length+1,d=new Ce(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return de.resolve(l)}getOverlaysForCollectionGroup(e,t,s,l){let c=new Tt(((p,x)=>p-x));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let x=c.get(p.largestBatchId);x===null&&(x=Qi(),c=c.insert(p.largestBatchId,x)),x.set(p.getKey(),p)}}const f=Qi(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,x)=>f.set(p,x))),!(f.size()>=l)););return de.resolve(f)}St(e,t,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new lI(t,s));let c=this.qr.get(t);c===void 0&&(c=Je(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}class HI{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}class L0{constructor(){this.Qr=new Jt(on.$r),this.Ur=new Jt(on.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new on(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new on(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ce(new vt([])),s=new on(t,e),l=new on(t,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ce(new vt([])),s=new on(t,e),l=new on(t,e+1);let c=Je();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new on(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class on{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||We(e.Yr,t.Yr)}static Kr(e,t){return We(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}}class $I{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(on.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new iI(c,t,s,l);this.mutationQueue.push(d);for(const f of l)this.Zr=this.Zr.add(new on(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return de.resolve(d)}lookupMutationBatch(e,t){return de.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=this.ei(s),c=l<0?0:l;return de.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?S0:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new on(t,0),l=new on(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const f=this.Xr(d.Yr);c.push(f)})),de.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Jt(We);return t.forEach((l=>{const c=new on(l,0),d=new on(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(f=>{s=s.add(f.Yr)}))})),de.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1;let c=s;Ce.isDocumentKey(c)||(c=c.child(""));const d=new on(new Ce(c),0);let f=new Jt(We);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===l&&(f=f.add(g.Yr)),!0)}),d),de.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){ut(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return de.forEach(t.mutations,(l=>{const c=new on(l.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new on(t,0),l=this.Zr.firstAfterOrEqual(s);return de.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class GI{constructor(e){this.ri=e,this.docs=(function(){return new Tt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return de.resolve(s?s.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let s=Js();return t.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():En.newInvalidDocument(l))})),de.resolve(s)}getDocumentsMatchingQuery(e,t,s,l){let c=Js();const d=t.path,f=new Ce(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:p,value:{document:x}}=g.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||vR(bR(x),s)<=0||(l.has(x.key)||Rf(t,x))&&(c=c.insert(x.key,x.mutableCopy()))}return de.resolve(c)}getAllFromCollectionGroup(e,t,s,l){Pe(9500)}ii(e,t){return de.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new KI(this)}getSize(e){return de.resolve(this.size)}}class KI extends VI{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?t.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),de.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class YI{constructor(e){this.persistence=e,this.si=new fl((t=>C0(t)),R0),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new L0,this.targetCount=0,this.ai=ko.ur()}forEachTarget(e,t){return this.si.forEach(((s,l)=>t(l))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),de.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ko(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Pr(t),de.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,s){let l=0;const c=[];return this.si.forEach(((d,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),l++)})),de.waitFor(c).next((()=>l))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return de.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),de.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const l=this.persistence.referenceDelegate,c=[];return l&&t.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),de.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return de.resolve(s)}containsKey(e,t){return de.resolve(this._i.containsKey(t))}}class yE{constructor(e,t){this.ui={},this.overlays={},this.ci=new kf(0),this.li=!1,this.li=!0,this.hi=new HI,this.referenceDelegate=e(this),this.Pi=new YI(this),this.indexManager=new II,this.remoteDocumentCache=(function(l){return new GI(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new CI(t),this.Ii=new BI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new $I(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){je("MemoryPersistence","Starting transaction:",e);const l=new QI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,t){return de.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class QI extends _R{constructor(e){super(),this.currentSequenceNumber=e}}class U0{constructor(e){this.persistence=e,this.Ri=new L0,this.Vi=null}static mi(e){return new U0(e)}get fi(){if(this.Vi)return this.Vi;throw Pe(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),de.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(s=>{const l=Ce.fromPath(s);return this.gi(e,l).next((c=>{c||t.removeEntry(l,Ve.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return de.or([()=>de.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class nf{constructor(e,t){this.persistence=e,this.pi=new fl((s=>ER(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=UI(this,t)}static mi(e,t){return new nf(e,t)}Ei(){}di(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return de.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?de.resolve():t(l)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,t).next((f=>{f||(s++,c.removeEntry(d,Ve.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),de.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ph(e.data.value)),t}br(e,t,s){return de.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.pi.get(t);return de.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class V0{constructor(e,t,s,l){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=l}static As(e,t){let s=Je(),l=Je();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new V0(e,t.fromCache,s,l)}}class XI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class WI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return qC()?8:NR(kn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,l){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new XI;return this.Ss(e,t,d).next((f=>{if(c.result=f,this.Vs)return this.bs(e,t,d,f.size)}))})).next((()=>c.result))}bs(e,t,s,l){return s.documentReadCount<this.fs?(uo()<=Xe.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",ho(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(uo()<=Xe.DEBUG&&je("QueryEngine","Query:",ho(t),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(uo()<=Xe.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",ho(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ss(t))):de.resolve())}ys(e,t){if(l_(t))return de.resolve(null);let s=ss(t);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Zh(t,null,"F"),s=ss(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=Je(...c);return this.ps.getDocuments(e,d).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,f);return this.Cs(t,p,d,g.readTime)?this.ys(e,Zh(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,l){return l_(t)||l.isEqual(Ve.min())?de.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,s,l)?de.resolve(null):(uo()<=Xe.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ho(t)),this.vs(e,d,t,xR(l,yu)).next((f=>f)))}))}Ds(e,t){let s=new Jt(Qj(e));return t.forEach(((l,c)=>{Rf(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,l){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,t,s){return uo()<=Xe.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",ho(t)),this.ps.getDocumentsMatchingQuery(e,t,oi.min(),s)}vs(e,t,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const z0="LocalStore",JI=3e8;class ZI{constructor(e,t,s,l){this.persistence=e,this.Fs=t,this.serializer=l,this.Ms=new Tt(We),this.xs=new fl((c=>C0(c)),R0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function e4(n,e,t,s){return new ZI(n,e,t,s)}async function xE(n,e){const t=Fe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return t.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],f=[];let g=Je();for(const p of l){d.push(p.batchId);for(const x of p.mutations)g=g.add(x.key)}for(const p of c){f.push(p.batchId);for(const x of p.mutations)g=g.add(x.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:f})))}))}))}function t4(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,p,x){const v=p.batch,w=v.keys();let k=de.resolve();return w.forEach((D=>{k=k.next((()=>x.getEntry(g,D))).next((U=>{const I=p.docVersions.get(D);ut(I!==null,48541),U.version.compareTo(I)<0&&(v.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),x.addEntry(U)))}))})),k.next((()=>f.mutationQueue.removeMutationBatch(g,v)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=Je();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(g=g.add(f.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,l)))}))}function bE(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function n4(n,e){const t=Fe(n),s=e.snapshotVersion;let l=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});l=t.Ms;const f=[];e.targetChanges.forEach(((x,v)=>{const w=l.get(v);if(!w)return;f.push(t.Pi.removeMatchingKeys(c,x.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(c,x.addedDocuments,v))));let k=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(v)!==null?k=k.withResumeToken(un.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):x.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(x.resumeToken,s)),l=l.insert(v,k),(function(U,I,z){return U.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=JI?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(w,k,x)&&f.push(t.Pi.updateTargetData(c,k))}));let g=Js(),p=Je();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,x))})),f.push(r4(c,d,e.documentUpdates).next((x=>{g=x.ks,p=x.qs}))),!s.isEqual(Ve.min())){const x=t.Pi.getLastRemoteSnapshotVersion(c).next((v=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));f.push(x)}return de.waitFor(f).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,p))).next((()=>g))})).then((c=>(t.Ms=l,c)))}function r4(n,e,t){let s=Je(),l=Je();return t.forEach((c=>s=s.add(c))),e.getEntries(n,s).next((c=>{let d=Js();return t.forEach(((f,g)=>{const p=c.get(f);g.isFoundDocument()!==p.isFoundDocument()&&(l=l.add(f)),g.isNoDocument()&&g.version.isEqual(Ve.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):je(z0,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function s4(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=S0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function a4(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return t.Pi.getTargetData(s,e).next((c=>c?(l=c,de.resolve(l)):t.Pi.allocateTargetId(s).next((d=>(l=new ti(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=t.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function e0(n,e,t){const s=Fe(n),l=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Io(d))throw d;je(z0,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function v_(n,e,t){const s=Fe(n);let l=Ve.min(),c=Je();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,p,x){const v=Fe(g),w=v.xs.get(x);return w!==void 0?de.resolve(v.Ms.get(w)):v.Pi.getTargetData(p,x)})(s,d,ss(e)).next((f=>{if(f)return l=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,f.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,t?l:Ve.min(),t?c:Je()))).next((f=>(i4(s,HR(e),f),{documents:f,Qs:c})))))}function i4(n,e,t){let s=n.Os.get(e)||Ve.min();t.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),n.Os.set(e,s)}class w_{constructor(){this.activeTargetIds=XR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l4{constructor(){this.Mo=new w_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new w_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class o4{Oo(e){}shutdown(){}}const __="ConnectivityMonitor";class N_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){je(__,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){je(__,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Sh=null;function t0(){return Sh===null?Sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sh++,"0x"+Sh.toString(16)}const bp="RestConnection",c4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Xh?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,t,s,l,c){const d=t0(),f=this.zo(e,t.toUriEncodedString());je(bp,`Sending RPC '${e}' ${d}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:p}=new URL(f),x=gi(p);return this.Jo(e,f,g,s,x).then((v=>(je(bp,`Received RPC '${e}' ${d}: `,v),v)),(v=>{throw tl(bp,`RPC '${e}' ${d} failed with error: `,v,"url: ",f,"request:",s),v}))}Ho(e,t,s,l,c,d){return this.Go(e,t,s,l,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Co})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,t){const s=c4[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class d4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Nn="WebChannelConnection";class h4 extends u4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,l,c){const d=t0();return new Promise(((f,g)=>{const p=new vj;p.setWithCredentials(!0),p.listenOnce(wj.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Mh.NO_ERROR:const v=p.getResponseJson();je(Nn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(v)),f(v);break;case Mh.TIMEOUT:je(Nn,`RPC '${e}' ${d} timed out`),g(new _e(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Mh.HTTP_ERROR:const w=p.getStatus();if(je(Nn,`RPC '${e}' ${d} failed with status:`,w,"response text:",p.getResponseText()),w>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const D=k?.error;if(D&&D.status&&D.message){const U=(function(z){const A=z.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(A)>=0?A:oe.UNKNOWN})(D.status);g(new _e(U,D.message))}else g(new _e(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new _e(oe.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{je(Nn,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(l);je(Nn,`RPC '${e}' ${d} sending request:`,l),p.send(t,"POST",x,s,15)}))}T_(e,t,s){const l=t0(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=jj(),f=Nj(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const x=c.join("");je(Nn,`Creating RPC '${e}' stream ${l}: ${x}`,g);const v=d.createWebChannel(x,g);this.I_(v);let w=!1,k=!1;const D=new d4({Yo:I=>{k?je(Nn,`Not sending because RPC '${e}' stream ${l} is closed:`,I):(w||(je(Nn,`Opening RPC '${e}' stream ${l} transport.`),v.open(),w=!0),je(Nn,`RPC '${e}' stream ${l} sending:`,I),v.send(I))},Zo:()=>v.close()}),U=(I,z,A)=>{I.listen(z,(q=>{try{A(q)}catch(K){setTimeout((()=>{throw K}),0)}}))};return U(v,Wc.EventType.OPEN,(()=>{k||(je(Nn,`RPC '${e}' stream ${l} transport opened.`),D.o_())})),U(v,Wc.EventType.CLOSE,(()=>{k||(k=!0,je(Nn,`RPC '${e}' stream ${l} transport closed`),D.a_(),this.E_(v))})),U(v,Wc.EventType.ERROR,(I=>{k||(k=!0,tl(Nn,`RPC '${e}' stream ${l} transport errored. Name:`,I.name,"Message:",I.message),D.a_(new _e(oe.UNAVAILABLE,"The operation could not be completed")))})),U(v,Wc.EventType.MESSAGE,(I=>{if(!k){const z=I.data[0];ut(!!z,16349);const A=z,q=A?.error||A[0]?.error;if(q){je(Nn,`RPC '${e}' stream ${l} received error:`,q);const K=q.status;let F=(function(L){const j=$t[L];if(j!==void 0)return iE(j)})(K),ne=q.message;F===void 0&&(F=oe.INTERNAL,ne="Unknown error status: "+K+" with message "+q.message),k=!0,D.a_(new _e(F,ne)),v.close()}else je(Nn,`RPC '${e}' stream ${l} received:`,z),D.u_(z)}})),U(f,_j.STAT_EVENT,(I=>{I.stat===qp.PROXY?je(Nn,`RPC '${e}' stream ${l} detected buffering proxy`):I.stat===qp.NOPROXY&&je(Nn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{D.__()}),0),D}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function vp(){return typeof document<"u"?document:null}function Mf(n){return new pI(n,!0)}class vE{constructor(e,t,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-s);l>0&&je("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const j_="PersistentStream";class wE{constructor(e,t,s,l,c,d,f,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Ws(t.toString()),Ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===t&&this.G_(s,l)}),(s=>{e((()=>{const l=new _e(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return je(j_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(je(j_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class f4 extends wE{constructor(e,t,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=bI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ve.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ve.min():d.readTime?as(d.readTime):Ve.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Zp(this.serializer),t.addTarget=(function(c,d){let f;const g=d.target;if(f=Yp(g)?{documents:_I(c,g)}:{query:NI(c,g).ft},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=cE(c,d.resumeToken);const p=Xp(c,d.expectedCount);p!==null&&(f.expectedCount=p)}else if(d.snapshotVersion.compareTo(Ve.min())>0){f.readTime=tf(c,d.snapshotVersion.toTimestamp());const p=Xp(c,d.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const s=EI(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Zp(this.serializer),t.removeTarget=e,this.q_(t)}}class m4 extends wE{constructor(e,t,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=wI(e.writeResults,e.commitTime),s=as(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Zp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>vI(this.serializer,s)))};this.q_(t)}}class g4{}class p4 extends g4{constructor(e,t,s,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Wp(t,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(oe.UNKNOWN,c.toString())}))}Ho(e,t,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Ho(e,Wp(t,s),l,d,f,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new _e(oe.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class y4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ws(t),this.aa=!1):je("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const nl="RemoteStore";class x4{constructor(e,t,s,l,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{ml(this)&&(je(nl,"Restarting streams for network reachability change."),await(async function(g){const p=Fe(g);p.Ea.add(4),await Ou(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Pf(p)})(this))}))})),this.Ra=new y4(s,l)}}async function Pf(n){if(ml(n))for(const e of n.da)await e(!0)}async function Ou(n){for(const e of n.da)await e(!1)}function _E(n,e){const t=Fe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),H0(t)?q0(t):Oo(t).O_()&&B0(t,e))}function F0(n,e){const t=Fe(n),s=Oo(t);t.Ia.delete(e),s.O_()&&NE(t,e),t.Ia.size===0&&(s.O_()?s.L_():ml(t)&&t.Ra.set("Unknown"))}function B0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Oo(n).Y_(e)}function NE(n,e){n.Va.Ue(e),Oo(n).Z_(e)}function q0(n){n.Va=new hI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Oo(n).start(),n.Ra.ua()}function H0(n){return ml(n)&&!Oo(n).x_()&&n.Ia.size>0}function ml(n){return Fe(n).Ea.size===0}function jE(n){n.Va=void 0}async function b4(n){n.Ra.set("Online")}async function v4(n){n.Ia.forEach(((e,t)=>{B0(n,e)}))}async function w4(n,e){jE(n),H0(n)?(n.Ra.ha(e),q0(n)):n.Ra.set("Unknown")}async function _4(n,e,t){if(n.Ra.set("Online"),e instanceof oE&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const f of c.targetIds)l.Ia.has(f)&&(await l.remoteSyncer.rejectListen(f,d),l.Ia.delete(f),l.Va.removeTarget(f))})(n,e)}catch(s){je(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await rf(n,s)}else if(e instanceof Vh?n.Va.Ze(e):e instanceof lE?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ve.min()))try{const s=await bE(n.localStore);t.compareTo(s)>=0&&await(function(c,d){const f=c.Va.Tt(d);return f.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const x=c.Ia.get(p);x&&c.Ia.set(p,x.withResumeToken(g.resumeToken,d))}})),f.targetMismatches.forEach(((g,p)=>{const x=c.Ia.get(g);if(!x)return;c.Ia.set(g,x.withResumeToken(un.EMPTY_BYTE_STRING,x.snapshotVersion)),NE(c,g);const v=new ti(x.target,g,p,x.sequenceNumber);B0(c,v)})),c.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){je(nl,"Failed to raise snapshot:",s),await rf(n,s)}}async function rf(n,e,t){if(!Io(e))throw e;n.Ea.add(1),await Ou(n),n.Ra.set("Offline"),t||(t=()=>bE(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{je(nl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Pf(n)}))}function EE(n,e){return e().catch((t=>rf(n,t,e)))}async function Lf(n){const e=Fe(n),t=hi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:S0;for(;N4(e);)try{const l=await s4(e.localStore,s);if(l===null){e.Ta.length===0&&t.L_();break}s=l.batchId,j4(e,l)}catch(l){await rf(e,l)}kE(e)&&SE(e)}function N4(n){return ml(n)&&n.Ta.length<10}function j4(n,e){n.Ta.push(e);const t=hi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function kE(n){return ml(n)&&!hi(n).x_()&&n.Ta.length>0}function SE(n){hi(n).start()}async function E4(n){hi(n).ra()}async function k4(n){const e=hi(n);for(const t of n.Ta)e.ea(t.mutations)}async function S4(n,e,t){const s=n.Ta.shift(),l=O0.from(s,e,t);await EE(n,(()=>n.remoteSyncer.applySuccessfulWrite(l))),await Lf(n)}async function T4(n,e){e&&hi(n).X_&&await(async function(s,l){if((function(d){return cI(d)&&d!==oe.ABORTED})(l.code)){const c=s.Ta.shift();hi(s).B_(),await EE(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Lf(s)}})(n,e),kE(n)&&SE(n)}async function E_(n,e){const t=Fe(n);t.asyncQueue.verifyOperationInProgress(),je(nl,"RemoteStore received new credentials");const s=ml(t);t.Ea.add(3),await Ou(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Pf(t)}async function A4(n,e){const t=Fe(n);e?(t.Ea.delete(2),await Pf(t)):e||(t.Ea.add(2),await Ou(t),t.Ra.set("Unknown"))}function Oo(n){return n.ma||(n.ma=(function(t,s,l){const c=Fe(t);return c.sa(),new f4(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(n.datastore,n.asyncQueue,{Xo:b4.bind(null,n),t_:v4.bind(null,n),r_:w4.bind(null,n),H_:_4.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),H0(n)?q0(n):n.Ra.set("Unknown")):(await n.ma.stop(),jE(n))}))),n.ma}function hi(n){return n.fa||(n.fa=(function(t,s,l){const c=Fe(t);return c.sa(),new m4(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:E4.bind(null,n),r_:T4.bind(null,n),ta:k4.bind(null,n),na:S4.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Lf(n)):(await n.fa.stop(),n.Ta.length>0&&(je(nl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class $0{constructor(e,t,s,l,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,l,c){const d=Date.now()+s,f=new $0(e,t,d,l,c);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G0(n,e){if(Ws("AsyncQueue",`${e}: ${n}`),Io(n))return new _e(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class xo{static emptySet(e){return new xo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ce.comparator(t.key,s.key):(t,s)=>Ce.comparator(t.key,s.key),this.keyedMap=Jc(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new xo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class k_{constructor(){this.ga=new Tt(Ce.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Pe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class So{constructor(e,t,s,l,c,d,f,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,l,c){const d=[];return t.forEach((f=>{d.push({type:0,doc:f})})),new So(e,t,xo.emptySet(t),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==s[l].type||!t[l].doc.isEqual(s[l].doc))return!1;return!0}}class C4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class R4{constructor(){this.queries=S_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const l=Fe(t),c=l.queries;l.queries=S_(),c.forEach(((d,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new _e(oe.ABORTED,"Firestore shutting down"))}}function S_(){return new fl((n=>Yj(n)),Cf)}async function K0(n,e){const t=Fe(n);let s=3;const l=e.query;let c=t.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new C4,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(l,!0);break;case 1:c.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const f=G0(d,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(f)}t.queries.set(l,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Q0(t)}async function Y0(n,e){const t=Fe(n),s=e.query;let l=3;const c=t.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function I4(n,e){const t=Fe(n);let s=!1;for(const l of e){const c=l.query,d=t.queries.get(c);if(d){for(const f of d.Sa)f.Fa(l)&&(s=!0);d.wa=l}}s&&Q0(t)}function D4(n,e,t){const s=Fe(n),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(t);s.queries.delete(e)}function Q0(n){n.Ca.forEach((e=>{e.next()}))}var n0,T_;(T_=n0||(n0={})).Ma="default",T_.Cache="cache";class X0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new So(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=So.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==n0.Cache}}class TE{constructor(e){this.key=e}}class AE{constructor(e){this.key=e}}class O4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=Qj(e),this.tu=new xo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new k_,l=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=l,f=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,p=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((x,v)=>{const w=l.get(x),k=Rf(this.query,v)?v:null,D=!!w&&this.mutatedKeys.has(w.key),U=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let I=!1;w&&k?w.data.isEqual(k.data)?D!==U&&(s.track({type:3,doc:k}),I=!0):this.su(w,k)||(s.track({type:2,doc:k}),I=!0,(g&&this.eu(k,g)>0||p&&this.eu(k,p)<0)&&(f=!0)):!w&&k?(s.track({type:0,doc:k}),I=!0):w&&!k&&(s.track({type:1,doc:w}),I=!0,(g||p)&&(f=!0)),I&&(k?(d=d.add(k),c=U?c.add(x):c.delete(x)):(d=d.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),c=c.delete(x.key),s.track({type:1,doc:x})}return{tu:d,iu:s,Cs:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,v)=>(function(k,D){const U=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Rt:I})}};return U(k)-U(D)})(x.type,v.type)||this.eu(x.doc,v.doc))),this.ou(s),l=l??!1;const f=t&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,p=g!==this.Za;return this.Za=g,d.length!==0||p?{snapshot:new So(this.query,e.tu,c,d,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new k_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new AE(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new TE(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return So.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const W0="SyncEngine";class M4{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class P4{constructor(e){this.key=e,this.hu=!1}}class L4{constructor(e,t,s,l,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new fl((f=>Yj(f)),Cf),this.Iu=new Map,this.Eu=new Set,this.du=new Tt(Ce.comparator),this.Au=new Map,this.Ru=new L0,this.Vu={},this.mu=new Map,this.fu=ko.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function U4(n,e,t=!0){const s=ME(n);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await CE(s,e,t,!0),l}async function V4(n,e){const t=ME(n);await CE(t,e,!0,!1)}async function CE(n,e,t,s){const l=await a4(n.localStore,ss(e)),c=l.targetId,d=n.sharedClientState.addLocalQueryTarget(c,t);let f;return s&&(f=await z4(n,e,c,d==="current",l.resumeToken)),n.isPrimaryClient&&t&&_E(n.remoteStore,l),f}async function z4(n,e,t,s,l){n.pu=(v,w,k)=>(async function(U,I,z,A){let q=I.view.ru(z);q.Cs&&(q=await v_(U.localStore,I.query,!1).then((({documents:O})=>I.view.ru(O,q))));const K=A&&A.targetChanges.get(I.targetId),F=A&&A.targetMismatches.get(I.targetId)!=null,ne=I.view.applyChanges(q,U.isPrimaryClient,K,F);return C_(U,I.targetId,ne.au),ne.snapshot})(n,v,w,k);const c=await v_(n.localStore,e,!0),d=new O4(e,c.Qs),f=d.ru(c.documents),g=Du.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",l),p=d.applyChanges(f,n.isPrimaryClient,g);C_(n,t,p.au);const x=new M4(e,t,d);return n.Tu.set(e,x),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function F4(n,e,t){const s=Fe(n),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!Cf(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await e0(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),t&&F0(s.remoteStore,l.targetId),r0(s,l.targetId)})).catch(Ro)):(r0(s,l.targetId),await e0(s.localStore,l.targetId,!0))}async function B4(n,e){const t=Fe(n),s=t.Tu.get(e),l=t.Iu.get(s.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),F0(t.remoteStore,s.targetId))}async function q4(n,e,t){const s=X4(n);try{const l=await(function(d,f){const g=Fe(d),p=De.now(),x=f.reduce(((k,D)=>k.add(D.key)),Je());let v,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let D=Js(),U=Je();return g.Ns.getEntries(k,x).next((I=>{D=I,D.forEach(((z,A)=>{A.isValidDocument()||(U=U.add(z))}))})).next((()=>g.localDocuments.getOverlayedDocuments(k,D))).next((I=>{v=I;const z=[];for(const A of f){const q=sI(A,v.get(A.key).overlayedDocument);q!=null&&z.push(new xi(A.key,q,zj(q.value.mapValue),Er.exists(!0)))}return g.mutationQueue.addMutationBatch(k,p,z,f)})).next((I=>{w=I;const z=I.applyToLocalDocumentSet(v,U);return g.documentOverlayCache.saveOverlays(k,I.batchId,z)}))})).then((()=>({batchId:w.batchId,changes:Wj(v)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,f,g){let p=d.Vu[d.currentUser.toKey()];p||(p=new Tt(We)),p=p.insert(f,g),d.Vu[d.currentUser.toKey()]=p})(s,l.batchId,t),await Mu(s,l.changes),await Lf(s.remoteStore)}catch(l){const c=G0(l,"Failed to persist write");t.reject(c)}}async function RE(n,e){const t=Fe(n);try{const s=await n4(t.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=t.Au.get(c);d&&(ut(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?ut(d.hu,14607):l.removedDocuments.size>0&&(ut(d.hu,42227),d.hu=!1))})),await Mu(t,s,e)}catch(s){await Ro(s)}}function A_(n,e,t){const s=Fe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const l=[];s.Tu.forEach(((c,d)=>{const f=d.view.va(e);f.snapshot&&l.push(f.snapshot)})),(function(d,f){const g=Fe(d);g.onlineState=f;let p=!1;g.queries.forEach(((x,v)=>{for(const w of v.Sa)w.va(f)&&(p=!0)})),p&&Q0(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function H4(n,e,t){const s=Fe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new Tt(Ce.comparator);d=d.insert(c,En.newNoDocument(c,Ve.min()));const f=Je().add(c),g=new Of(Ve.min(),new Map,new Tt(We),d,f);await RE(s,g),s.du=s.du.remove(c),s.Au.delete(e),J0(s)}else await e0(s.localStore,e,!1).then((()=>r0(s,e,t))).catch(Ro)}async function $4(n,e){const t=Fe(n),s=e.batch.batchId;try{const l=await t4(t.localStore,e);DE(t,s,null),IE(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Mu(t,l)}catch(l){await Ro(l)}}async function G4(n,e,t){const s=Fe(n);try{const l=await(function(d,f){const g=Fe(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let x;return g.mutationQueue.lookupMutationBatch(p,f).next((v=>(ut(v!==null,37113),x=v.keys(),g.mutationQueue.removeMutationBatch(p,v)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,x,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,x))).next((()=>g.localDocuments.getDocuments(p,x)))}))})(s.localStore,e);DE(s,e,t),IE(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Mu(s,l)}catch(l){await Ro(l)}}function IE(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function DE(n,e,t){const s=Fe(n);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(t?c.reject(t):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function r0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||OE(n,s)}))}function OE(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(F0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),J0(n))}function C_(n,e,t){for(const s of t)s instanceof TE?(n.Ru.addReference(s.key,e),K4(n,s)):s instanceof AE?(je(W0,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||OE(n,s.key)):Pe(19791,{wu:s})}function K4(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(je(W0,"New document in limbo: "+t),n.Eu.add(s),J0(n))}function J0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ce(vt.fromString(e)),s=n.fu.next();n.Au.set(s,new P4(t)),n.du=n.du.insert(t,s),_E(n.remoteStore,new ti(ss(Af(t.path)),s,"TargetPurposeLimboResolution",kf.ce))}}async function Mu(n,e,t){const s=Fe(n),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{d.push(s.pu(g,e,t).then((p=>{if((p||t)&&s.isPrimaryClient){const x=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(p){l.push(p);const x=V0.As(g.targetId,p);c.push(x)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,p){const x=Fe(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>de.forEach(p,(w=>de.forEach(w.Es,(k=>x.persistence.referenceDelegate.addReference(v,w.targetId,k))).next((()=>de.forEach(w.ds,(k=>x.persistence.referenceDelegate.removeReference(v,w.targetId,k)))))))))}catch(v){if(!Io(v))throw v;je(z0,"Failed to update sequence numbers: "+v)}for(const v of p){const w=v.targetId;if(!v.fromCache){const k=x.Ms.get(w),D=k.snapshotVersion,U=k.withLastLimboFreeSnapshotVersion(D);x.Ms=x.Ms.insert(w,U)}}})(s.localStore,c))}async function Y4(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){je(W0,"User change. New user:",e.toKey());const s=await xE(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((f=>{f.forEach((g=>{g.reject(new _e(oe.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Mu(t,s.Ls)}}function Q4(n,e){const t=Fe(n),s=t.Au.get(e);if(s&&s.hu)return Je().add(s.key);{let l=Je();const c=t.Iu.get(e);if(!c)return l;for(const d of c){const f=t.Tu.get(d);l=l.unionWith(f.view.nu)}return l}}function ME(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H4.bind(null,e),e.Pu.H_=I4.bind(null,e.eventManager),e.Pu.yu=D4.bind(null,e.eventManager),e}function X4(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G4.bind(null,e),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return e4(this.persistence,new WI,e.initialUser,this.serializer)}Cu(e){return new yE(U0.mi,this.serializer)}Du(e){return new l4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class W4 extends sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ut(this.persistence.referenceDelegate instanceof nf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new PI(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new yE((s=>nf.mi(s,t)),this.serializer)}}class s0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>A_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Y4.bind(null,this.syncEngine),await A4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new R4})()}createDatastore(e){const t=Mf(e.databaseInfo.databaseId),s=(function(c){return new h4(c)})(e.databaseInfo);return(function(c,d,f,g){return new p4(c,d,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,l,c,d,f){return new x4(s,l,c,d,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>A_(this.syncEngine,t,0)),(function(){return N_.v()?new N_:new o4})())}createSyncEngine(e,t){return(function(l,c,d,f,g,p,x){const v=new L4(l,c,d,f,g,p);return x&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Fe(t);je(nl,"RemoteStore shutting down."),s.Ea.add(5),await Ou(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}s0.provider={build:()=>new s0};class Z0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const fi="FirestoreClient";class J4{constructor(e,t,s,l,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=jn.UNAUTHENTICATED,this.clientId=jf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{je(fi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(je(fi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=G0(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function wp(n,e){n.asyncQueue.verifyOperationInProgress(),je(fi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async l=>{s.isEqual(l)||(await xE(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function R_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Z4(n);je(fi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>E_(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,l)=>E_(e.remoteStore,l))),n._onlineComponents=e}async function Z4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){je(fi,"Using user provided OfflineComponentProvider");try{await wp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===oe.FAILED_PRECONDITION||l.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;tl("Error using user provided cache. Falling back to memory cache: "+t),await wp(n,new sf)}}else je(fi,"Using default OfflineComponentProvider"),await wp(n,new W4(void 0));return n._offlineComponents}async function PE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(je(fi,"Using user provided OnlineComponentProvider"),await R_(n,n._uninitializedComponentsProvider._online)):(je(fi,"Using default OnlineComponentProvider"),await R_(n,new s0))),n._onlineComponents}function eD(n){return PE(n).then((e=>e.syncEngine))}async function af(n){const e=await PE(n),t=e.eventManager;return t.onListen=U4.bind(null,e.syncEngine),t.onUnlisten=F4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=V4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=B4.bind(null,e.syncEngine),t}function tD(n,e,t={}){const s=new $s;return n.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,p){const x=new Z0({next:w=>{x.Nu(),d.enqueueAndForget((()=>Y0(c,v)));const k=w.docs.has(f);!k&&w.fromCache?p.reject(new _e(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&w.fromCache&&g&&g.source==="server"?p.reject(new _e(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new X0(Af(f.path),x,{includeMetadataChanges:!0,qa:!0});return K0(c,v)})(await af(n),n.asyncQueue,e,t,s))),s.promise}function nD(n,e,t={}){const s=new $s;return n.asyncQueue.enqueueAndForget((async()=>(function(c,d,f,g,p){const x=new Z0({next:w=>{x.Nu(),d.enqueueAndForget((()=>Y0(c,v))),w.fromCache&&g.source==="server"?p.reject(new _e(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new X0(f,x,{includeMetadataChanges:!0,qa:!0});return K0(c,v)})(await af(n),n.asyncQueue,e,t,s))),s.promise}function LE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const I_=new Map;const UE="firestore.googleapis.com",D_=!0;class O_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UE,this.ssl=D_}else this.host=e.host,this.ssl=e.ssl??D_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OI)throw new _e(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Aj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uf{constructor(e,t,s,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new O_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new O_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Sj;switch(s.type){case"firstParty":return new hR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _e(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=I_.get(t);s&&(je("ComponentProvider","Removing Datastore"),I_.delete(t),s.terminate())})(this),Promise.resolve()}}function VE(n,e,t,s={}){n=Mn(n,Uf);const l=gi(e),c=n._getSettings(),d={...c,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;l&&(v0(`https://${f}`),w0("Firestore",!0)),c.host!==UE&&c.host!==f&&tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:f,ssl:l,emulatorOptions:s};if(!li(g,d)&&(n._setSettings(g),s.mockUserToken)){let p,x;if(typeof s.mockUserToken=="string")p=s.mockUserToken,x=jn.MOCK_USER;else{p=dj(s.mockUserToken,n._app?.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new _e(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new jn(v)}n._authCredentials=new cR(new kj(p,x))}}class hs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class St{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ru(t,St._jsonSchema))return new St(e,s||null,new Ce(vt.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:Kt("string",St._jsonSchemaVersion),referencePath:Kt("string")};class Gs extends hs{constructor(e,t,s){super(e,t,Af(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new Ce(e))}withConverter(e){return new Gs(this.firestore,e,this._path)}}function Ie(n,e,...t){if(n=ft(n),Tj("collection","path",e),n instanceof Uf){const s=vt.fromString(e,...t);return Kw(s),new Gs(n,null,s)}{if(!(n instanceof St||n instanceof Gs))throw new _e(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(vt.fromString(e,...t));return Kw(s),new Gs(n.firestore,null,s)}}function ct(n,e,...t){if(n=ft(n),arguments.length===1&&(e=jf.newId()),Tj("doc","path",e),n instanceof Uf){const s=vt.fromString(e,...t);return Gw(s),new St(n,null,new Ce(s))}{if(!(n instanceof St||n instanceof Gs))throw new _e(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(vt.fromString(e,...t));return Gw(s),new St(n.firestore,n instanceof Gs?n.converter:null,new Ce(s))}}const M_="AsyncQueue";class P_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vE(this,"async_queue_retry"),this._c=()=>{const s=vp();s&&je(M_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=vp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new $s;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Io(e))throw e;je(M_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ws("INTERNAL UNHANDLED ERROR: ",L_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=$0.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Pe(47125,{Pc:L_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function L_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function U_(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const l=t;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(n,["next","error","complete"])}class cs extends Uf{constructor(e,t,s,l){super(e,t,s,l),this.type="firestore",this._queue=new P_,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new P_(e),this._firestoreClient=void 0,await e}}}function zE(n,e){const t=typeof n=="object"?n:Cu(),s=typeof n=="string"?n:Xh,l=pi(t,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=oj("firestore");c&&VE(l,...c)}return l}function Pu(n){if(n._terminated)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rD(n),n._firestoreClient}function rD(n){const e=n._freezeSettings(),t=(function(l,c,d,f){return new TR(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,LE(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new J4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(n._componentsProvider))}class lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lr(un.fromBase64String(e))}catch(t){throw new _e(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lr(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ru(e,lr._jsonSchema))return lr.fromBase64String(e.bytes)}}lr._jsonSchemaVersion="firestore/bytes/1.0",lr._jsonSchema={type:Kt("string",lr._jsonSchemaVersion),bytes:Kt("string")};class Lu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uu{constructor(e){this._methodName=e}}class Lr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Lr._jsonSchemaVersion}}static fromJSON(e){if(Ru(e,Lr._jsonSchema))return new Lr(e.latitude,e.longitude)}}Lr._jsonSchemaVersion="firestore/geoPoint/1.0",Lr._jsonSchema={type:Kt("string",Lr._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};class Ur{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ur._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ru(e,Ur._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ur(e.vectorValues);throw new _e(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ur._jsonSchemaVersion="firestore/vectorValue/1.0",Ur._jsonSchema={type:Kt("string",Ur._jsonSchemaVersion),vectorValues:Kt("object")};const sD=/^__.*__$/;class aD{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new xi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Iu(e,this.data,t,this.fieldTransforms)}}class FE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new xi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function BE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ac:n})}}class ey{constructor(e,t,s,l,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ey({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return lf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(BE(this.Ac)&&sD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class iD{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Mf(e)}Cc(e,t,s,l=!1){return new ey({Ac:e,methodName:t,Dc:s,path:cn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vf(n){const e=n._freezeSettings(),t=Mf(n._databaseId);return new iD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qE(n,e,t,s,l,c={}){const d=n.Cc(c.merge||c.mergeFields?2:0,e,t,l);ny("Data must be an object, but it was:",d,s);const f=HE(s,d);let g,p;if(c.merge)g=new or(d.fieldMask),p=d.fieldTransforms;else if(c.mergeFields){const x=[];for(const v of c.mergeFields){const w=a0(e,v,t);if(!d.contains(w))throw new _e(oe.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);GE(x,w)||x.push(w)}g=new or(x),p=d.fieldTransforms.filter((v=>g.covers(v.field)))}else g=null,p=d.fieldTransforms;return new aD(new Kn(f),g,p)}class zf extends Uu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zf}}class ty extends Uu{_toFieldTransform(e){return new eI(e.path,new wu)}isEqual(e){return e instanceof ty}}function lD(n,e,t,s){const l=n.Cc(1,e,t);ny("Data must be an object, but it was:",l,s);const c=[],d=Kn.empty();yi(s,((g,p)=>{const x=ry(e,g,t);p=ft(p);const v=l.yc(x);if(p instanceof zf)c.push(x);else{const w=Vu(p,v);w!=null&&(c.push(x),d.set(x,w))}}));const f=new or(c);return new FE(d,f,l.fieldTransforms)}function oD(n,e,t,s,l,c){const d=n.Cc(1,e,t),f=[a0(e,s,t)],g=[l];if(c.length%2!=0)throw new _e(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<c.length;w+=2)f.push(a0(e,c[w])),g.push(c[w+1]);const p=[],x=Kn.empty();for(let w=f.length-1;w>=0;--w)if(!GE(p,f[w])){const k=f[w];let D=g[w];D=ft(D);const U=d.yc(k);if(D instanceof zf)p.push(k);else{const I=Vu(D,U);I!=null&&(p.push(k),x.set(k,I))}}const v=new or(p);return new FE(x,v,d.fieldTransforms)}function cD(n,e,t,s=!1){return Vu(t,n.Cc(s?4:3,e))}function Vu(n,e){if($E(n=ft(n)))return ny("Unsupported field value:",e,n),HE(n,e);if(n instanceof Uu)return(function(s,l){if(!BE(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const f of s){let g=Vu(f,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(n,e)}return(function(s,l){if((s=ft(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return WR(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=De.fromDate(s);return{timestampValue:tf(l.serializer,c)}}if(s instanceof De){const c=new De(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:tf(l.serializer,c)}}if(s instanceof Lr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof lr)return{bytesValue:cE(l.serializer,s._byteString)};if(s instanceof St){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:P0(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Ur)return(function(d,f){return{mapValue:{fields:{[Uj]:{stringValue:Vj},[Wh]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw f.Sc("VectorValues must only contain numeric values.");return I0(f.serializer,p)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${Ef(s)}`)})(n,e)}function HE(n,e){const t={};return Ij(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yi(n,((s,l)=>{const c=Vu(l,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function $E(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof De||n instanceof Lr||n instanceof lr||n instanceof St||n instanceof Uu||n instanceof Ur)}function ny(n,e,t){if(!$E(t)||!Cj(t)){const s=Ef(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function a0(n,e,t){if((e=ft(e))instanceof Lu)return e._internalPath;if(typeof e=="string")return ry(n,e);throw lf("Field path arguments must be of type string or ",n,!1,void 0,t)}const uD=new RegExp("[~\\*/\\[\\]]");function ry(n,e,t){if(e.search(uD)>=0)throw lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lu(...e.split("."))._internalPath}catch{throw lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lf(n,e,t,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new _e(oe.INVALID_ARGUMENT,f+n+g)}function GE(n,e){return n.some((t=>t.isEqual(e)))}class KE{constructor(e,t,s,l,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ff("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dD extends KE{data(){return super.data()}}function Ff(n,e){return typeof e=="string"?ry(n,e):e instanceof Lu?e._internalPath:e._delegate._internalPath}function YE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sy{}class Bf extends sy{}function Ze(n,e,...t){let s=[];e instanceof sy&&s.push(e),s=s.concat(t),(function(c){const d=c.filter((g=>g instanceof qf)).length,f=c.filter((g=>g instanceof zu)).length;if(d>1||d>0&&f>0)throw new _e(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)n=l._apply(n);return n}class zu extends Bf{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new zu(e,t,s)}_apply(e){const t=this._parse(e);return XE(e._query,t),new hs(e.firestore,e.converter,Qp(e._query,t))}_parse(e){const t=Vf(e.firestore);return(function(c,d,f,g,p,x,v){let w;if(p.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new _e(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){z_(v,x);const D=[];for(const U of v)D.push(V_(g,c,U));w={arrayValue:{values:D}}}else w=V_(g,c,v)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||z_(v,x),w=cD(f,d,v,x==="in"||x==="not-in");return Gt.create(p,x,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function bn(n,e,t){const s=e,l=Ff("where",n);return zu._create(l,s,t)}class qf extends sy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qf(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Fr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,c){let d=l;const f=c.getFlattenedFilters();for(const g of f)XE(d,g),d=Qp(d,g)})(e._query,t),new hs(e.firestore,e.converter,Qp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hf extends Bf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hf(e,t)}_apply(e){const t=(function(l,c,d){if(l.startAt!==null)throw new _e(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new _e(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vu(c,d)})(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new Do(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,t))}}function kt(n,e="asc"){const t=e,s=Ff("orderBy",n);return Hf._create(s,t)}class $f extends Bf{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new $f(e,t,s)}_apply(e){return new hs(e.firestore,e.converter,Zh(e._query,this._limit,this._limitType))}}function QE(n){return $f._create("limit",n,"F")}function V_(n,e,t){if(typeof(t=ft(t))=="string"){if(t==="")throw new _e(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kj(e)&&t.indexOf("/")!==-1)throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(vt.fromString(t));if(!Ce.isDocumentKey(s))throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return t_(n,new Ce(s))}if(t instanceof St)return t_(n,t._key);throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ef(t)}.`)}function z_(n,e){if(!Array.isArray(n)||n.length===0)throw new _e(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XE(n,e){const t=(function(l,c){for(const d of l)for(const f of d.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new _e(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class WE{convertValue(e,t="none"){switch(di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return yi(e,((l,c)=>{s[l]=this.convertValue(c,t)})),s}convertVectorValue(e){const t=e.fields?.[Wh].arrayValue?.values?.map((s=>Lt(s.doubleValue)));return new Ur(t)}convertGeoPoint(e){return new Lr(Lt(e.latitude),Lt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Tf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const t=ci(e);return new De(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=vt.fromString(e);ut(gE(s),9688,{name:e});const l=new No(s.get(1),s.get(3)),c=new Ce(s.popFirst(5));return l.isEqual(t)||Ws(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function JE(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class go{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ai extends KE{constructor(e,t,s,l,c,d){super(e,t,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ff("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ai._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ai._jsonSchemaVersion="firestore/documentSnapshot/1.0",ai._jsonSchema={type:Kt("string",ai._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class ou extends ai{data(e={}){return super.data(e)}}class ii{constructor(e,t,s,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new go(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new ou(this._firestore,this._userDataWriter,s.key,s,new go(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((f=>{const g=new ou(l._firestore,l._userDataWriter,f.doc.key,f.doc,new go(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const g=new ou(l._firestore,l._userDataWriter,f.doc.key,f.doc,new go(l._snapshot.mutatedKeys.has(f.doc.key),l._snapshot.fromCache),l.query.converter);let p=-1,x=-1;return f.type!==0&&(p=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),f.type!==1&&(d=d.add(f.doc),x=d.indexOf(f.doc.key)),{type:hD(f.type),doc:g,oldIndex:p,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ii._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:n})}}function cu(n){n=Mn(n,St);const e=Mn(n.firestore,cs);return tD(Pu(e),n._key).then((t=>ek(e,n,t)))}ii._jsonSchemaVersion="firestore/querySnapshot/1.0",ii._jsonSchema={type:Kt("string",ii._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class ay extends WE{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function tt(n){n=Mn(n,hs);const e=Mn(n.firestore,cs),t=Pu(e),s=new ay(e);return YE(n._query),nD(t,n._query).then((l=>new ii(e,s,n,l)))}function ZE(n,e,t){n=Mn(n,St);const s=Mn(n.firestore,cs),l=JE(n.converter,e);return Fu(s,[qE(Vf(s),"setDoc",n._key,l,n.converter!==null,t).toMutation(n._key,Er.none())])}function Vt(n,e,t,...s){n=Mn(n,St);const l=Mn(n.firestore,cs),c=Vf(l);let d;return d=typeof(e=ft(e))=="string"||e instanceof Lu?oD(c,"updateDoc",n._key,e,t,s):lD(c,"updateDoc",n._key,e),Fu(l,[d.toMutation(n._key,Er.exists(!0))])}function rl(n){return Fu(Mn(n.firestore,cs),[new D0(n._key,Er.none())])}function Tr(n,e){const t=Mn(n.firestore,cs),s=ct(n),l=JE(n.converter,e);return Fu(t,[qE(Vf(n.firestore),"addDoc",s._key,l,n.converter!==null,{}).toMutation(s._key,Er.exists(!1))]).then((()=>s))}function kr(n,...e){n=ft(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||U_(e[s])||(t=e[s++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(U_(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let c,d,f;if(n instanceof St)d=Mn(n.firestore,cs),f=Af(n._key.path),c={next:g=>{e[s]&&e[s](ek(d,n,g))},error:e[s+1],complete:e[s+2]};else{const g=Mn(n,hs);d=Mn(g.firestore,cs),f=g._query;const p=new ay(d);c={next:x=>{e[s]&&e[s](new ii(d,p,g,x))},error:e[s+1],complete:e[s+2]},YE(n._query)}return(function(p,x,v,w){const k=new Z0(w),D=new X0(x,k,v);return p.asyncQueue.enqueueAndForget((async()=>K0(await af(p),D))),()=>{k.Nu(),p.asyncQueue.enqueueAndForget((async()=>Y0(await af(p),D)))}})(Pu(d),f,l,c)}function Fu(n,e){return(function(s,l){const c=new $s;return s.asyncQueue.enqueueAndForget((async()=>q4(await eD(s),l,c))),c.promise})(Pu(n),e)}function ek(n,e,t){const s=t.docs.get(e._key),l=new ay(n);return new ai(n,l,e._key,s,new go(t.hasPendingWrites,t.fromCache),e.converter)}function i0(){return new ty("serverTimestamp")}(function(e,t=!0){(function(l){Co=l})(hl),zr(new Sr("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),f=new cs(new uR(s.getProvider("auth-internal")),new fR(d,s.getProvider("app-check-internal")),(function(p,x){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new _e(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new No(p.options.projectId,x)})(d,l),d);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Yn(Bw,qw,e),Yn(Bw,qw,"esm2020")})();const _p=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:WE,Bytes:lr,CollectionReference:Gs,DocumentReference:St,DocumentSnapshot:ai,FieldPath:Lu,FieldValue:Uu,Firestore:cs,FirestoreError:_e,GeoPoint:Lr,Query:hs,QueryCompositeFilterConstraint:qf,QueryConstraint:Bf,QueryDocumentSnapshot:ou,QueryFieldFilterConstraint:zu,QueryLimitConstraint:$f,QueryOrderByConstraint:Hf,QuerySnapshot:ii,SnapshotMetadata:go,Timestamp:De,VectorValue:Ur,_AutoId:jf,_ByteString:un,_DatabaseId:No,_DocumentKey:Ce,_EmptyAuthCredentialsProvider:Sj,_FieldPath:cn,_cast:Mn,_logWarn:tl,_validateIsNotUsedTogether:Aj,addDoc:Tr,collection:Ie,connectFirestoreEmulator:VE,deleteDoc:rl,doc:ct,ensureFirestoreConfigured:Pu,executeWrite:Fu,getDoc:cu,getDocs:tt,getFirestore:zE,limit:QE,onSnapshot:kr,orderBy:kt,query:Ze,serverTimestamp:i0,setDoc:ZE,updateDoc:Vt,where:bn},Symbol.toStringTag,{value:"Module"}));function tk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fD=tk,nk=new dl("auth","Firebase",tk());const of=new Nf("@firebase/auth");function mD(n,...e){of.logLevel<=Xe.WARN&&of.warn(`Auth (${hl}): ${n}`,...e)}function zh(n,...e){of.logLevel<=Xe.ERROR&&of.error(`Auth (${hl}): ${n}`,...e)}function Br(n,...e){throw iy(n,...e)}function is(n,...e){return iy(n,...e)}function rk(n,e,t){const s={...fD(),[e]:t};return new dl("auth","Firebase",s).create(e,{appName:n.name})}function Ks(n){return rk(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iy(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return nk.create(n,...e)}function Me(n,e,...t){if(!n)throw iy(e,...t)}function Bs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zh(e),new Error(e)}function Zs(n,e){n||Bs(e)}function l0(){return typeof self<"u"&&self.location?.href||""}function gD(){return F_()==="http:"||F_()==="https:"}function F_(){return typeof self<"u"&&self.location?.protocol||null}function pD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gD()||_0()||"connection"in navigator)?navigator.onLine:!0}function yD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zs(t>e,"Short delay should be less than long delay!"),this.isMobile=UC()||FC()}get(){return pD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ly(n,e){Zs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class sk{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const bD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vD=new Bu(3e4,6e4);function bi(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ea(n,e,t,s,l={}){return ak(n,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const f=Au({key:n.config.apiKey,...d}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:g,...c};return zC()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&gi(n.emulatorConfig.host)&&(p.credentials="include"),sk.fetch()(await ik(n,n.config.apiHost,t,f),p)})}async function ak(n,e,t){n._canInitEmulator=!1;const s={...xD,...e};try{const l=new _D(n),c=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Th(n,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const f=c.ok?d.errorMessage:d.error.message,[g,p]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Th(n,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Th(n,"email-already-in-use",d);if(g==="USER_DISABLED")throw Th(n,"user-disabled",d);const x=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw rk(n,x,p);Br(n,x)}}catch(l){if(l instanceof Xn)throw l;Br(n,"network-request-failed",{message:String(l)})}}async function qu(n,e,t,s,l={}){const c=await ea(n,e,t,s,l);return"mfaPendingCredential"in c&&Br(n,"multi-factor-auth-required",{_serverResponse:c}),c}async function ik(n,e,t,s){const l=`${e}${t}?${s}`,c=n,d=c.config.emulator?ly(n.config,l):`${n.config.apiScheme}://${l}`;return bD.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function wD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _D{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(is(this.auth,"network-request-failed")),vD.get())})}}function Th(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const l=is(n,e,s);return l.customData._tokenResponse=t,l}function B_(n){return n!==void 0&&n.enterprise!==void 0}class ND{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return wD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jD(n,e){return ea(n,"GET","/v2/recaptchaConfig",bi(n,e))}async function ED(n,e){return ea(n,"POST","/v1/accounts:delete",e)}async function cf(n,e){return ea(n,"POST","/v1/accounts:lookup",e)}function uu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kD(n,e=!1){const t=ft(n),s=await t.getIdToken(e),l=oy(s);Me(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:uu(Np(l.auth_time)),issuedAtTime:uu(Np(l.iat)),expirationTime:uu(Np(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Np(n){return Number(n)*1e3}function oy(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return zh("JWT malformed, contained fewer than 3 sections"),null;try{const l=ij(t);return l?JSON.parse(l):(zh("Failed to decode base64 JWT payload"),null)}catch(l){return zh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function q_(n){const e=oy(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function To(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Xn&&SD(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function SD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class TD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class o0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function uf(n){const e=n.auth,t=await n.getIdToken(),s=await To(n,cf(e,{idToken:t}));Me(s?.users.length,e,"internal-error");const l=s.users[0];n._notifyReloadListener(l);const c=l.providerUserInfo?.length?lk(l.providerUserInfo):[],d=CD(n.providerData,c),f=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!d?.length,p=f?g:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new o0(l.createdAt,l.lastLoginAt),isAnonymous:p};Object.assign(n,x)}async function AD(n){const e=ft(n);await uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CD(n,e){return[...n.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function lk(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function RD(n,e){const t=await ak(n,{},async()=>{const s=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=n.config,d=await ik(n,l,"/v1/token",`key=${c}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return n.emulatorConfig&&gi(n.emulatorConfig.host)&&(g.credentials="include"),sk.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ID(n,e){return ea(n,"POST","/v2/accounts:revokeToken",bi(n,e))}class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=q_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:l,expiresIn:c}=await RD(e,t);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:l,expirationTime:c}=t,d=new bo;return s&&(Me(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(Me(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Me(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return Bs("not implemented")}}function Ga(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Pr{constructor({uid:e,auth:t,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new TD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new o0(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await To(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kD(this,e)}reload(){return AD(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Pr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await uf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Ks(this.auth));const e=await this.getIdToken();return await To(this,ED(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,l=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,x=t.lastLoginAt??void 0,{uid:v,emailVerified:w,isAnonymous:k,providerData:D,stsTokenManager:U}=t;Me(v&&U,e,"internal-error");const I=bo.fromJSON(this.name,U);Me(typeof v=="string",e,"internal-error"),Ga(s,e.name),Ga(l,e.name),Me(typeof w=="boolean",e,"internal-error"),Me(typeof k=="boolean",e,"internal-error"),Ga(c,e.name),Ga(d,e.name),Ga(f,e.name),Ga(g,e.name),Ga(p,e.name),Ga(x,e.name);const z=new Pr({uid:v,auth:e,email:l,emailVerified:w,displayName:s,isAnonymous:k,photoURL:d,phoneNumber:c,tenantId:f,stsTokenManager:I,createdAt:p,lastLoginAt:x});return D&&Array.isArray(D)&&(z.providerData=D.map(A=>({...A}))),g&&(z._redirectEventId=g),z}static async _fromIdTokenResponse(e,t,s=!1){const l=new bo;l.updateFromServerResponse(t);const c=new Pr({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await uf(c),c}static async _fromGetAccountInfoResponse(e,t,s){const l=t.users[0];Me(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?lk(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,f=new bo;f.updateFromIdToken(s);const g=new Pr({uid:l.localId,auth:e,stsTokenManager:f,isAnonymous:d}),p={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new o0(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,p),g}}const H_=new Map;function qs(n){Zs(n instanceof Function,"Expected a class definition");let e=H_.get(n);return e?(Zs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,H_.set(n,e),e)}class ok{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ok.type="NONE";const $_=ok;function Fh(n,e,t){return`firebase:${n}:${e}:${t}`}class vo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Fh(this.userKey,l.apiKey,c),this.fullPersistenceKey=Fh("persistence",l.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cf(this.auth,{idToken:e}).catch(()=>{});return t?Pr._fromGetAccountInfoResponse(this.auth,t,e):null}return Pr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new vo(qs($_),e,s);const l=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let c=l[0]||qs($_);const d=Fh(s,e.config.apiKey,e.name);let f=null;for(const p of t)try{const x=await p._get(d);if(x){let v;if(typeof x=="string"){const w=await cf(e,{idToken:x}).catch(()=>{});if(!w)break;v=await Pr._fromGetAccountInfoResponse(e,w,x)}else v=Pr._fromJSON(e,x);p!==c&&(f=v),c=p;break}}catch{}const g=l.filter(p=>p._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new vo(c,e,s):(c=g[0],f&&await c._set(d,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==c)try{await p._remove(d)}catch{}})),new vo(c,e,s))}}function G_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ck(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mk(e))return"Blackberry";if(gk(e))return"Webos";if(uk(e))return"Safari";if((e.includes("chrome/")||dk(e))&&!e.includes("edge/"))return"Chrome";if(fk(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function ck(n=kn()){return/firefox\//i.test(n)}function uk(n=kn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dk(n=kn()){return/crios\//i.test(n)}function hk(n=kn()){return/iemobile/i.test(n)}function fk(n=kn()){return/android/i.test(n)}function mk(n=kn()){return/blackberry/i.test(n)}function gk(n=kn()){return/webos/i.test(n)}function cy(n=kn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function DD(n=kn()){return cy(n)&&!!window.navigator?.standalone}function OD(){return BC()&&document.documentMode===10}function pk(n=kn()){return cy(n)||fk(n)||gk(n)||mk(n)||/windows phone/i.test(n)||hk(n)}function yk(n,e=[]){let t;switch(n){case"Browser":t=G_(kn());break;case"Worker":t=`${G_(kn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${hl}/${s}`}class MD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,f)=>{try{const g=e(c);d(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function PD(n,e={}){return ea(n,"GET","/v2/passwordPolicy",bi(n,e))}const LD=6;class UD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??LD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class VD{constructor(e,t,s,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K_(this),this.idTokenSubscription=new K_(this),this.beforeStateQueue=new MD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cf(this,{idToken:e}),s=await Pr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ir(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&f?.user&&(s=f.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Ks(this));const t=e?ft(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PD(this),t=new UD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await ID(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qs(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[qs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,l){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(f,this,"internal-error"),f.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,l);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&mD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function gl(n){return ft(n)}class K_{constructor(e){this.auth=e,this.observer=null,this.addObserver=YC(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zD(n){Gf=n}function xk(n){return Gf.loadJS(n)}function FD(){return Gf.recaptchaEnterpriseScript}function BD(){return Gf.gapiScript}function qD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class HD{constructor(){this.enterprise=new $D}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class $D{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const GD="recaptcha-enterprise",bk="NO_RECAPTCHA";class KD{constructor(e){this.type=GD,this.auth=gl(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,f)=>{jD(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new ND(g);return c.tenantId==null?c._agentRecaptchaConfig=p:c._tenantRecaptchaConfigs[c.tenantId]=p,d(p.siteKey)}}).catch(g=>{f(g)})})}function l(c,d,f){const g=window.grecaptcha;B_(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(p=>{d(p)}).catch(()=>{d(bk)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HD().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(f=>{if(!t&&B_(window.grecaptcha))l(f,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=FD();g.length!==0&&(g+=f),xk(g).then(()=>{l(f,c,d)}).catch(p=>{d(p)})}}).catch(f=>{d(f)})})}}async function Y_(n,e,t,s=!1,l=!1){const c=new KD(n);let d;if(l)d=bk;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:d}):Object.assign(f,{captchaResponse:d}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function c0(n,e,t,s,l){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Y_(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Y_(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(c)})}function YD(n,e){const t=pi(n,"auth");if(t.isInitialized()){const l=t.getImmediate(),c=t.getOptions();if(li(c,e??{}))return l;Br(l,"already-initialized")}return t.initialize({options:e})}function QD(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(qs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function XD(n,e,t){const s=gl(n);Me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=vk(e),{host:d,port:f}=WD(e),g=f===null?"":`:${f}`,p={url:`${c}//${d}${g}/`},x=Object.freeze({host:d,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Me(li(p,s.config.emulator)&&li(x,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=x,s.settings.appVerificationDisabledForTesting=!0,gi(d)?(v0(`${c}//${d}${g}`),w0("Auth",!0)):JD()}function vk(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function WD(n){const e=vk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Q_(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Q_(d)}}}function Q_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function JD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class uy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bs("not implemented")}_getIdTokenResponse(e){return Bs("not implemented")}_linkToIdToken(e,t){return Bs("not implemented")}_getReauthenticationResolver(e){return Bs("not implemented")}}async function ZD(n,e){return ea(n,"POST","/v1/accounts:signUp",e)}async function e6(n,e){return qu(n,"POST","/v1/accounts:signInWithPassword",bi(n,e))}async function t6(n,e){return qu(n,"POST","/v1/accounts:signInWithEmailLink",bi(n,e))}async function n6(n,e){return qu(n,"POST","/v1/accounts:signInWithEmailLink",bi(n,e))}class ju extends uy{constructor(e,t,s,l=null){super("password",s),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new ju(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new ju(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c0(e,t,"signInWithPassword",e6);case"emailLink":return t6(e,{email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c0(e,s,"signUpPassword",ZD);case"emailLink":return n6(e,{idToken:t,email:this._email,oobCode:this._password});default:Br(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function wo(n,e){return qu(n,"POST","/v1/accounts:signInWithIdp",bi(n,e))}const r6="http://localhost";class sl extends uy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new sl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=t;if(!s||!l)return null;const d=new sl(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return wo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,wo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wo(e,t)}buildRequest(){const e={requestUri:r6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Au(t)}return e}}function s6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function a6(n){const e=Qc(Xc(n)).link,t=e?Qc(Xc(e)).deep_link_id:null,s=Qc(Xc(n)).deep_link_id;return(s?Qc(Xc(s)).link:null)||s||t||e||n}class dy{constructor(e){const t=Qc(Xc(e)),s=t.apiKey??null,l=t.oobCode??null,c=s6(t.mode??null);Me(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=a6(e);try{return new dy(t)}catch{return null}}}class Mo{constructor(){this.providerId=Mo.PROVIDER_ID}static credential(e,t){return ju._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=dy.parseLink(t);return Me(s,"argument-error"),ju._fromEmailAndCode(e,s.code,s.tenantId)}}Mo.PROVIDER_ID="password";Mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class wk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Hu extends wk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Xa extends Hu{constructor(){super("facebook.com")}static credential(e){return sl._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xa.credential(e.oauthAccessToken)}catch{return null}}}Xa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xa.PROVIDER_ID="facebook.com";class Wa extends Hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return sl._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Wa.credential(t,s)}catch{return null}}}Wa.GOOGLE_SIGN_IN_METHOD="google.com";Wa.PROVIDER_ID="google.com";class Ja extends Hu{constructor(){super("github.com")}static credential(e){return sl._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ja.credential(e.oauthAccessToken)}catch{return null}}}Ja.GITHUB_SIGN_IN_METHOD="github.com";Ja.PROVIDER_ID="github.com";class Za extends Hu{constructor(){super("twitter.com")}static credential(e,t){return sl._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Za.credential(t,s)}catch{return null}}}Za.TWITTER_SIGN_IN_METHOD="twitter.com";Za.PROVIDER_ID="twitter.com";async function i6(n,e){return qu(n,"POST","/v1/accounts:signUp",bi(n,e))}class al{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,l=!1){const c=await Pr._fromIdTokenResponse(e,s,l),d=X_(s);return new al({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const l=X_(s);return new al({user:e,providerId:l,_tokenResponse:s,operationType:t})}}function X_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class df extends Xn{constructor(e,t,s,l){super(t.code,t.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,l){return new df(e,t,s,l)}}function _k(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?df._fromErrorAndOperation(n,c,e,s):c})}async function l6(n,e,t=!1){const s=await To(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return al._forOperation(n,"link",s)}async function o6(n,e,t=!1){const{auth:s}=n;if(ir(s.app))return Promise.reject(Ks(s));const l="reauthenticate";try{const c=await To(n,_k(s,l,e,n),t);Me(c.idToken,s,"internal-error");const d=oy(c.idToken);Me(d,s,"internal-error");const{sub:f}=d;return Me(n.uid===f,s,"user-mismatch"),al._forOperation(n,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Br(s,"user-mismatch"),c}}async function Nk(n,e,t=!1){if(ir(n.app))return Promise.reject(Ks(n));const s="signIn",l=await _k(n,s,e),c=await al._fromIdTokenResponse(n,s,l);return t||await n._updateCurrentUser(c.user),c}async function c6(n,e){return Nk(gl(n),e)}async function jk(n){const e=gl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ek(n,e,t){if(ir(n.app))return Promise.reject(Ks(n));const s=gl(n),d=await c0(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",i6).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&jk(n),g}),f=await al._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(f.user),f}function u6(n,e,t){return ir(n.app)?Promise.reject(Ks(n)):c6(ft(n),Mo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&jk(n),s})}async function d6(n,e){return ea(n,"POST","/v1/accounts:update",e)}async function h6(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=ft(n),c={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await To(s,d6(s.auth,c));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const f=s.providerData.find(({providerId:g})=>g==="password");f&&(f.displayName=s.displayName,f.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function W_(n,e){return ft(n).setPersistence(e)}function f6(n,e,t,s){return ft(n).onIdTokenChanged(e,t,s)}function m6(n,e,t){return ft(n).beforeAuthStateChanged(e,t)}function g6(n,e,t,s){return ft(n).onAuthStateChanged(e,t,s)}function kk(n){return ft(n).signOut()}const hf="__sak";class Sk{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hf,"1"),this.storage.removeItem(hf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const p6=1e3,y6=10;class Tk extends Sk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),l=this.localCache[t];s!==l&&e(t,l,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,f,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);OD()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,y6):l()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},p6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tk.type="LOCAL";const u0=Tk;class Ak extends Sk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ak.type="SESSION";const hy=Ak;function x6(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const s=new Kf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:l,data:c}=t.data,d=this.handlersMap[l];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const f=Array.from(d).map(async p=>p(t.origin,c)),g=await x6(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kf.receivers=[];function fy(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}class b6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((f,g)=>{const p=fy("",20);l.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(v){const w=v;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(w.data.response);break;default:clearTimeout(x),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ls(){return window}function v6(n){ls().location.href=n}function Ck(){return typeof ls().WorkerGlobalScope<"u"&&typeof ls().importScripts=="function"}async function w6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _6(){return navigator?.serviceWorker?.controller||null}function N6(){return Ck()?self:null}const Rk="firebaseLocalStorageDb",j6=1,ff="firebaseLocalStorage",Ik="fbase_key";class $u{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yf(n,e){return n.transaction([ff],e?"readwrite":"readonly").objectStore(ff)}function E6(){const n=indexedDB.deleteDatabase(Rk);return new $u(n).toPromise()}function d0(){const n=indexedDB.open(Rk,j6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(ff,{keyPath:Ik})}catch(l){t(l)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(ff)?e(s):(s.close(),await E6(),e(await d0()))})})}async function J_(n,e,t){const s=Yf(n,!0).put({[Ik]:e,value:t});return new $u(s).toPromise()}async function k6(n,e){const t=Yf(n,!1).get(e),s=await new $u(t).toPromise();return s===void 0?null:s.value}function Z_(n,e){const t=Yf(n,!0).delete(e);return new $u(t).toPromise()}const S6=800,T6=3;class Dk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await d0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>T6)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ck()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kf._getInstance(N6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await w6(),!this.activeServiceWorker)return;this.sender=new b6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await d0();return await J_(e,hf,"1"),await Z_(e,hf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>J_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>k6(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Z_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Yf(l,!1).getAll();return new $u(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Dk.type="LOCAL";const A6=Dk;new Bu(3e4,6e4);function C6(n,e){return e?qs(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class my extends uy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function R6(n){return Nk(n.auth,new my(n),n.bypassAuthState)}function I6(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),o6(t,new my(n),n.bypassAuthState)}async function D6(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),l6(t,new my(n),n.bypassAuthState)}class Ok{constructor(e,t,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:l,tenantId:c,error:d,type:f}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R6;case"linkViaPopup":case"linkViaRedirect":return D6;case"reauthViaPopup":case"reauthViaRedirect":return I6;default:Br(this.auth,"internal-error")}}resolve(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const O6=new Bu(2e3,1e4);class po extends Ok{constructor(e,t,s,l,c){super(e,t,l,c),this.provider=s,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Zs(this.filter.length===1,"Popup operations only handle one event");const e=fy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(is(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(is(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(is(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,O6.get())};e()}}po.currentPopupAction=null;const M6="pendingRedirect",Bh=new Map;class P6 extends Ok{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Bh.get(this.auth._key());if(!e){try{const s=await L6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function L6(n,e){const t=z6(e),s=V6(n);if(!await s._isAvailable())return!1;const l=await s._get(t)==="true";return await s._remove(t),l}function U6(n,e){Bh.set(n._key(),e)}function V6(n){return qs(n._redirectPersistence)}function z6(n){return Fh(M6,n.config.apiKey,n.name)}async function F6(n,e,t=!1){if(ir(n.app))return Promise.reject(Ks(n));const s=gl(n),l=C6(s,e),d=await new P6(s,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const B6=600*1e3;class q6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!H6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Mk(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(is(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B6&&this.cachedEventUids.clear(),this.cachedEventUids.has(eN(e))}saveEventToCache(e){this.cachedEventUids.add(eN(e)),this.lastProcessedEventTime=Date.now()}}function eN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Mk({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function H6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mk(n);default:return!1}}async function $6(n,e={}){return ea(n,"GET","/v1/projects",e)}const G6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K6=/^https?/;async function Y6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await $6(n);for(const t of e)try{if(Q6(t))return}catch{}Br(n,"unauthorized-domain")}function Q6(n){const e=l0(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!K6.test(t))return!1;if(G6.test(n))return s===n;const l=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}const X6=new Bu(3e4,6e4);function tN(){const n=ls().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function W6(n){return new Promise((e,t)=>{function s(){tN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tN(),t(is(n,"network-request-failed"))},timeout:X6.get()})}if(ls().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ls().gapi?.load)s();else{const l=qD("iframefcb");return ls()[l]=()=>{gapi.load?s():t(is(n,"network-request-failed"))},xk(`${BD()}?onload=${l}`).catch(c=>t(c))}}).catch(e=>{throw qh=null,e})}let qh=null;function J6(n){return qh=qh||W6(n),qh}const Z6=new Bu(5e3,15e3),eO="__/auth/iframe",tO="emulator/auth/iframe",nO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sO(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ly(e,tO):`https://${n.config.authDomain}/${eO}`,s={apiKey:e.apiKey,appName:n.name,v:hl},l=rO.get(n.config.apiHost);l&&(s.eid=l);const c=n._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Au(s).slice(1)}`}async function aO(n){const e=await J6(n),t=ls().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:sO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nO,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=is(n,"network-request-failed"),f=ls().setTimeout(()=>{c(d)},Z6.get());function g(){ls().clearTimeout(f),l(s)}s.ping(g).then(g,()=>{c(d)})}))}const iO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lO=500,oO=600,cO="_blank",uO="http://localhost";class nN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dO(n,e,t,s=lO,l=oO){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...iO,width:s.toString(),height:l.toString(),top:c,left:d},p=kn().toLowerCase();t&&(f=dk(p)?cO:t),ck(p)&&(e=e||uO,g.scrollbars="yes");const x=Object.entries(g).reduce((w,[k,D])=>`${w}${k}=${D},`,"");if(DD(p)&&f!=="_self")return hO(e||"",f),new nN(null);const v=window.open(e||"",f,x);Me(v,n,"popup-blocked");try{v.focus()}catch{}return new nN(v)}function hO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const fO="__/auth/handler",mO="emulator/auth/handler",gO=encodeURIComponent("fac");async function rN(n,e,t,s,l,c){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:hl,eventId:l};if(e instanceof wk){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",KC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,v]of Object.entries({}))d[x]=v}if(e instanceof Hu){const x=e.getScopes().filter(v=>v!=="");x.length>0&&(d.scopes=x.join(","))}n.tenantId&&(d.tid=n.tenantId);const f=d;for(const x of Object.keys(f))f[x]===void 0&&delete f[x];const g=await n._getAppCheckToken(),p=g?`#${gO}=${encodeURIComponent(g)}`:"";return`${pO(n)}?${Au(f).slice(1)}${p}`}function pO({config:n}){return n.emulator?ly(n,mO):`https://${n.authDomain}/${fO}`}const jp="webStorageSupport";class yO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hy,this._completeRedirectFn=F6,this._overrideRedirectResult=U6}async _openPopup(e,t,s,l){Zs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await rN(e,t,s,l0(),l);return dO(e,c,fy())}async _openRedirect(e,t,s,l){await this._originValidation(e);const c=await rN(e,t,s,l0(),l);return v6(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:c}=this.eventManagers[t];return l?Promise.resolve(l):(Zs(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await aO(e),s=new q6(e);return t.register("authEvent",l=>(Me(l?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jp,{type:jp},l=>{const c=l?.[0]?.[jp];c!==void 0&&t(!!c),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Y6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pk()||uk()||cy()}}const xO=yO;var sN="@firebase/auth",aN="1.11.0";class bO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wO(n){zr(new Sr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=s.options;Me(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yk(n)},p=new VD(s,l,c,g);return QD(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),zr(new Sr("auth-internal",e=>{const t=gl(e.getProvider("auth").getImmediate());return(s=>new bO(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(sN,aN,vO(n)),Yn(sN,aN,"esm2020")}const _O=300,NO=uj("authIdTokenMaxAge")||_O;let iN=null;const jO=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>NO)return;const l=t?.token;iN!==l&&(iN=l,await fetch(n,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function EO(n=Cu()){const e=pi(n,"auth");if(e.isInitialized())return e.getImmediate();const t=YD(n,{popupRedirectResolver:xO,persistence:[A6,u0,hy]}),s=uj("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=jO(c.toString());m6(t,d,()=>d(t.currentUser)),f6(t,f=>d(f))}}const l=lj("auth");return l&&XD(t,`http://${l}`),t}function kO(){return document.getElementsByTagName("head")?.[0]??document}zD({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=l=>{const c=is("internal-error");c.customData=l,t(c)},s.type="text/javascript",s.charset="UTF-8",kO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wO("Browser");var SO="firebase",TO="12.0.0";Yn(SO,TO,"app");const Pk="@firebase/installations",gy="0.6.19";const Lk=1e4,Uk=`w:${gy}`,Vk="FIS_v2",AO="https://firebaseinstallations.googleapis.com/v1",CO=3600*1e3,RO="installations",IO="Installations";const DO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},il=new dl(RO,IO,DO);function zk(n){return n instanceof Xn&&n.code.includes("request-failed")}function Fk({projectId:n}){return`${AO}/projects/${n}/installations`}function Bk(n){return{token:n.token,requestStatus:2,expiresIn:MO(n.expiresIn),creationTime:Date.now()}}async function qk(n,e){const s=(await e.json()).error;return il.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Hk({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function OO(n,{refreshToken:e}){const t=Hk(n);return t.append("Authorization",PO(e)),t}async function $k(n){const e=await n();return e.status>=500&&e.status<600?n():e}function MO(n){return Number(n.replace("s","000"))}function PO(n){return`${Vk} ${n}`}async function LO({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=Fk(n),l=Hk(n),c=e.getImmediate({optional:!0});if(c){const p=await c.getHeartbeatsHeader();p&&l.append("x-firebase-client",p)}const d={fid:t,authVersion:Vk,appId:n.appId,sdkVersion:Uk},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await $k(()=>fetch(s,f));if(g.ok){const p=await g.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:Bk(p.authToken)}}else throw await qk("Create Installation",g)}function Gk(n){return new Promise(e=>{setTimeout(e,n)})}function UO(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}const VO=/^[cdef][\w-]{21}$/,h0="";function zO(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=FO(n);return VO.test(t)?t:h0}catch{return h0}}function FO(n){return UO(n).substr(0,22)}function Qf(n){return`${n.appName}!${n.appId}`}const Kk=new Map;function Yk(n,e){const t=Qf(n);Qk(t,e),BO(t,e)}function Qk(n,e){const t=Kk.get(n);if(t)for(const s of t)s(e)}function BO(n,e){const t=qO();t&&t.postMessage({key:n,fid:e}),HO()}let Xi=null;function qO(){return!Xi&&"BroadcastChannel"in self&&(Xi=new BroadcastChannel("[Firebase] FID Change"),Xi.onmessage=n=>{Qk(n.data.key,n.data.fid)}),Xi}function HO(){Kk.size===0&&Xi&&(Xi.close(),Xi=null)}const $O="firebase-installations-database",GO=1,ll="firebase-installations-store";let Ep=null;function py(){return Ep||(Ep=gj($O,GO,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ll)}}})),Ep}async function mf(n,e){const t=Qf(n),l=(await py()).transaction(ll,"readwrite"),c=l.objectStore(ll),d=await c.get(t);return await c.put(e,t),await l.done,(!d||d.fid!==e.fid)&&Yk(n,e.fid),e}async function Xk(n){const e=Qf(n),s=(await py()).transaction(ll,"readwrite");await s.objectStore(ll).delete(e),await s.done}async function Xf(n,e){const t=Qf(n),l=(await py()).transaction(ll,"readwrite"),c=l.objectStore(ll),d=await c.get(t),f=e(d);return f===void 0?await c.delete(t):await c.put(f,t),await l.done,f&&(!d||d.fid!==f.fid)&&Yk(n,f.fid),f}async function yy(n){let e;const t=await Xf(n.appConfig,s=>{const l=KO(s),c=YO(n,l);return e=c.registrationPromise,c.installationEntry});return t.fid===h0?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function KO(n){const e=n||{fid:zO(),registrationStatus:0};return Wk(e)}function YO(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(il.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=QO(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XO(n)}:{installationEntry:e}}async function QO(n,e){try{const t=await LO(n,e);return mf(n.appConfig,t)}catch(t){throw zk(t)&&t.customData.serverCode===409?await Xk(n.appConfig):await mf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function XO(n){let e=await lN(n.appConfig);for(;e.registrationStatus===1;)await Gk(100),e=await lN(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await yy(n);return s||t}return e}function lN(n){return Xf(n,e=>{if(!e)throw il.create("installation-not-found");return Wk(e)})}function Wk(n){return WO(n)?{fid:n.fid,registrationStatus:0}:n}function WO(n){return n.registrationStatus===1&&n.registrationTime+Lk<Date.now()}async function JO({appConfig:n,heartbeatServiceProvider:e},t){const s=ZO(n,t),l=OO(n,t),c=e.getImmediate({optional:!0});if(c){const p=await c.getHeartbeatsHeader();p&&l.append("x-firebase-client",p)}const d={installation:{sdkVersion:Uk,appId:n.appId}},f={method:"POST",headers:l,body:JSON.stringify(d)},g=await $k(()=>fetch(s,f));if(g.ok){const p=await g.json();return Bk(p)}else throw await qk("Generate Auth Token",g)}function ZO(n,{fid:e}){return`${Fk(n)}/${e}/authTokens:generate`}async function xy(n,e=!1){let t;const s=await Xf(n.appConfig,c=>{if(!Jk(c))throw il.create("not-registered");const d=c.authToken;if(!e&&nM(d))return c;if(d.requestStatus===1)return t=eM(n,e),c;{if(!navigator.onLine)throw il.create("app-offline");const f=sM(c);return t=tM(n,f),f}});return t?await t:s.authToken}async function eM(n,e){let t=await oN(n.appConfig);for(;t.authToken.requestStatus===1;)await Gk(100),t=await oN(n.appConfig);const s=t.authToken;return s.requestStatus===0?xy(n,e):s}function oN(n){return Xf(n,e=>{if(!Jk(e))throw il.create("not-registered");const t=e.authToken;return aM(t)?{...e,authToken:{requestStatus:0}}:e})}async function tM(n,e){try{const t=await JO(n,e),s={...e,authToken:t};return await mf(n.appConfig,s),t}catch(t){if(zk(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Xk(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await mf(n.appConfig,s)}throw t}}function Jk(n){return n!==void 0&&n.registrationStatus===2}function nM(n){return n.requestStatus===2&&!rM(n)}function rM(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+CO}function sM(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function aM(n){return n.requestStatus===1&&n.requestTime+Lk<Date.now()}async function iM(n){const e=n,{installationEntry:t,registrationPromise:s}=await yy(e);return s?s.catch(console.error):xy(e).catch(console.error),t.fid}async function lM(n,e=!1){const t=n;return await oM(t),(await xy(t,e)).token}async function oM(n){const{registrationPromise:e}=await yy(n);e&&await e}function cM(n){if(!n||!n.options)throw kp("App Configuration");if(!n.name)throw kp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw kp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function kp(n){return il.create("missing-app-config-values",{valueName:n})}const Zk="installations",uM="installations-internal",dM=n=>{const e=n.getProvider("app").getImmediate(),t=cM(e),s=pi(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},hM=n=>{const e=n.getProvider("app").getImmediate(),t=pi(e,Zk).getImmediate();return{getId:()=>iM(t),getToken:l=>lM(t,l)}};function fM(){zr(new Sr(Zk,dM,"PUBLIC")),zr(new Sr(uM,hM,"PRIVATE"))}fM();Yn(Pk,gy);Yn(Pk,gy,"esm2020");const gf="analytics",mM="firebase_id",gM="origin",pM=60*1e3,yM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",by="https://www.googletagmanager.com/gtag/js";const Qn=new Nf("@firebase/analytics");const xM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ur=new dl("analytics","Analytics",xM);function bM(n){if(!n.startsWith(by)){const e=ur.create("invalid-gtag-resource",{gtagURL:n});return Qn.warn(e.message),""}return n}function eS(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function vM(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function wM(n,e){const t=vM("firebase-js-sdk-policy",{createScriptURL:bM}),s=document.createElement("script"),l=`${by}?l=${n}&id=${e}`;s.src=t?t?.createScriptURL(l):l,s.async=!0,document.head.appendChild(s)}function _M(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function NM(n,e,t,s,l,c){const d=s[l];try{if(d)await e[d];else{const g=(await eS(t)).find(p=>p.measurementId===l);g&&await e[g.appId]}}catch(f){Qn.error(f)}n("config",l,c)}async function jM(n,e,t,s,l){try{let c=[];if(l&&l.send_to){let d=l.send_to;Array.isArray(d)||(d=[d]);const f=await eS(t);for(const g of d){const p=f.find(v=>v.measurementId===g),x=p&&e[p.appId];if(x)c.push(x);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),n("event",s,l||{})}catch(c){Qn.error(c)}}function EM(n,e,t,s){async function l(c,...d){try{if(c==="event"){const[f,g]=d;await jM(n,e,t,f,g)}else if(c==="config"){const[f,g]=d;await NM(n,e,t,s,f,g)}else if(c==="consent"){const[f,g]=d;n("consent",f,g)}else if(c==="get"){const[f,g,p]=d;n("get",f,g,p)}else if(c==="set"){const[f]=d;n("set",f)}else n(c,...d)}catch(f){Qn.error(f)}}return l}function kM(n,e,t,s,l){let c=function(...d){window[s].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=EM(c,n,e,t),{gtagCore:c,wrappedGtag:window[l]}}function SM(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(by)&&t.src.includes(n))return t;return null}const TM=30,AM=1e3;class CM{constructor(e={},t=AM){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const tS=new CM;function RM(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function IM(n){const{appId:e,apiKey:t}=n,s={method:"GET",headers:RM(t)},l=yM.replace("{app-id}",e),c=await fetch(l,s);if(c.status!==200&&c.status!==304){let d="";try{const f=await c.json();f.error?.message&&(d=f.error.message)}catch{}throw ur.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function DM(n,e=tS,t){const{appId:s,apiKey:l,measurementId:c}=n.options;if(!s)throw ur.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:s};throw ur.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new PM;return setTimeout(async()=>{f.abort()},pM),nS({appId:s,apiKey:l,measurementId:c},d,f,e)}async function nS(n,{throttleEndTimeMillis:e,backoffCount:t},s,l=tS){const{appId:c,measurementId:d}=n;try{await OM(s,e)}catch(f){if(d)return Qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:c,measurementId:d};throw f}try{const f=await IM(n);return l.deleteThrottleMetadata(c),f}catch(f){const g=f;if(!MM(g)){if(l.deleteThrottleMetadata(c),d)return Qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:c,measurementId:d};throw f}const p=Number(g?.customData?.httpStatus)===503?Iw(t,l.intervalMillis,TM):Iw(t,l.intervalMillis),x={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return l.setThrottleMetadata(c,x),Qn.debug(`Calling attemptFetch again in ${p} millis`),nS(n,x,s,l)}}function OM(n,e){return new Promise((t,s)=>{const l=Math.max(e-Date.now(),0),c=setTimeout(t,l);n.addEventListener(()=>{clearTimeout(c),s(ur.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function MM(n){if(!(n instanceof Xn)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class PM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function LM(n,e,t,s,l){if(l&&l.global){n("event",t,s);return}else{const c=await e,d={...s,send_to:c};n("event",t,d)}}async function UM(){if(N0())try{await j0()}catch(n){return Qn.warn(ur.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Qn.warn(ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function VM(n,e,t,s,l,c,d){const f=DM(n);f.then(w=>{t[w.measurementId]=w.appId,n.options.measurementId&&w.measurementId!==n.options.measurementId&&Qn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Qn.error(w)),e.push(f);const g=UM().then(w=>{if(w)return s.getId()}),[p,x]=await Promise.all([f,g]);SM(c)||wM(c,p.measurementId),l("js",new Date);const v=d?.config??{};return v[gM]="firebase",v.update=!0,x!=null&&(v[mM]=x),l("config",p.measurementId,v),p.measurementId}class zM{constructor(e){this.app=e}_delete(){return delete du[this.app.options.appId],Promise.resolve()}}let du={},cN=[];const uN={};let Sp="dataLayer",FM="gtag",dN,rS,hN=!1;function BM(){const n=[];if(_0()&&n.push("This is a browser extension environment."),hj()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,l)=>`(${l+1}) ${s}`).join(" "),t=ur.create("invalid-analytics-context",{errorInfo:e});Qn.warn(t.message)}}function qM(n,e,t){BM();const s=n.options.appId;if(!s)throw ur.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ur.create("no-api-key");if(du[s]!=null)throw ur.create("already-exists",{id:s});if(!hN){_M(Sp);const{wrappedGtag:c,gtagCore:d}=kM(du,cN,uN,Sp,FM);rS=c,dN=d,hN=!0}return du[s]=VM(n,cN,uN,e,dN,Sp,t),new zM(n)}function HM(n=Cu()){n=ft(n);const e=pi(n,gf);return e.isInitialized()?e.getImmediate():$M(n)}function $M(n,e={}){const t=pi(n,gf);if(t.isInitialized()){const l=t.getImmediate();if(li(e,t.getOptions()))return l;throw ur.create("already-initialized")}return t.initialize({options:e})}async function GM(){if(_0()||!hj()||!N0())return!1;try{return await j0()}catch{return!1}}function KM(n,e,t,s){n=ft(n),LM(rS,du[n.app.options.appId],e,t,s).catch(l=>Qn.error(l))}const fN="@firebase/analytics",mN="0.10.18";function YM(){zr(new Sr(gf,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("installations-internal").getImmediate();return qM(s,l,t)},"PUBLIC")),zr(new Sr("analytics-internal",n,"PRIVATE")),Yn(fN,mN),Yn(fN,mN,"esm2020");function n(e){try{const t=e.getProvider(gf).getImmediate();return{logEvent:(s,l,c)=>KM(t,s,l,c)}}catch(t){throw ur.create("interop-component-reg-failed",{reason:t})}}}YM();const sS="firebasestorage.googleapis.com",aS="storageBucket",QM=120*1e3,XM=600*1e3,WM=1e3;class At extends Xn{constructor(e,t,s=0){super(Tp(e),`Firebase Storage: ${t} (${Tp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,At.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jt||(jt={}));function Tp(n){return"storage/"+n}function vy(){const n="An unknown error occurred, please check the error payload for server response.";return new At(jt.UNKNOWN,n)}function JM(n){return new At(jt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function ZM(n){return new At(jt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function e3(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new At(jt.UNAUTHENTICATED,n)}function t3(){return new At(jt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function n3(n){return new At(jt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function iS(){return new At(jt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lS(){return new At(jt.CANCELED,"User canceled the upload/download.")}function r3(n){return new At(jt.INVALID_URL,"Invalid URL '"+n+"'.")}function s3(n){return new At(jt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function a3(){return new At(jt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aS+"' property when initializing the app?")}function oS(){return new At(jt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function i3(){return new At(jt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function l3(){return new At(jt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function o3(n){return new At(jt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function f0(n){return new At(jt.INVALID_ARGUMENT,n)}function cS(){return new At(jt.APP_DELETED,"The Firebase app was deleted.")}function c3(n){return new At(jt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hu(n,e){return new At(jt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function qc(n){throw new At(jt.INTERNAL_ERROR,"Internal error: "+n)}class cr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=cr.makeFromUrl(e,t)}catch{return new cr(e,"")}if(s.path==="")return s;throw s3(e)}static makeFromUrl(e,t){let s=null;const l="([A-Za-z0-9.\\-_]+)";function c(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const d="(/(.*))?$",f=new RegExp("^gs://"+l+d,"i"),g={bucket:1,path:3};function p(K){K.path_=decodeURIComponent(K.path)}const x="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",k=new RegExp(`^https?://${v}/${x}/b/${l}/o${w}`,"i"),D={bucket:1,path:3},U=t===sS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,I="([^?#]*)",z=new RegExp(`^https?://${U}/${l}/${I}`,"i"),q=[{regex:f,indices:g,postModify:c},{regex:k,indices:D,postModify:p},{regex:z,indices:{bucket:1,path:2},postModify:p}];for(let K=0;K<q.length;K++){const F=q[K],ne=F.regex.exec(e);if(ne){const O=ne[F.indices.bucket];let L=ne[F.indices.path];L||(L=""),s=new cr(O,L),F.postModify(s);break}}if(s==null)throw r3(e);return s}}class u3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function d3(n,e,t){let s=1,l=null,c=null,d=!1,f=0;function g(){return f===2}let p=!1;function x(...I){p||(p=!0,e.apply(null,I))}function v(I){l=setTimeout(()=>{l=null,n(k,g())},I)}function w(){c&&clearTimeout(c)}function k(I,...z){if(p){w();return}if(I){w(),x.call(null,I,...z);return}if(g()||d){w(),x.call(null,I,...z);return}s<64&&(s*=2);let q;f===1?(f=2,q=0):q=(s+Math.random())*1e3,v(q)}let D=!1;function U(I){D||(D=!0,w(),!p&&(l!==null?(I||(f=2),clearTimeout(l),v(0)):I||(f=1)))}return v(0),c=setTimeout(()=>{d=!0,U(!0)},t),U}function h3(n){n(!1)}function f3(n){return n!==void 0}function m3(n){return typeof n=="function"}function g3(n){return typeof n=="object"&&!Array.isArray(n)}function Wf(n){return typeof n=="string"||n instanceof String}function gN(n){return wy()&&n instanceof Blob}function wy(){return typeof Blob<"u"}function pN(n,e,t,s){if(s<e)throw f0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw f0(`Invalid value for '${n}'. Expected ${t} or less.`)}function Po(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function uS(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const l=e(s)+"="+e(n[s]);t=t+l+"&"}return t=t.slice(0,-1),t}var Zi;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Zi||(Zi={}));function dS(n,e){const t=n>=500&&n<600,l=[408,429].indexOf(n)!==-1,c=e.indexOf(n)!==-1;return t||l||c}class p3{constructor(e,t,s,l,c,d,f,g,p,x,v,w=!0,k=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=l,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=f,this.errorCallback_=g,this.timeout_=p,this.progressCallback_=x,this.connectionFactory_=v,this.retry=w,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,U)=>{this.resolve_=D,this.reject_=U,this.start_()})}start_(){const e=(s,l)=>{if(l){s(!1,new Ah(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=f=>{const g=f.loaded,p=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,p)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const f=c.getErrorCode()===Zi.NO_ERROR,g=c.getStatus();if(!f||dS(g,this.additionalRetryCodes_)&&this.retry){const x=c.getErrorCode()===Zi.ABORT;s(!1,new Ah(!1,null,x));return}const p=this.successCodes_.indexOf(g)!==-1;s(!0,new Ah(p,c))})},t=(s,l)=>{const c=this.resolve_,d=this.reject_,f=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());f3(g)?c(g):c()}catch(g){d(g)}else if(f!==null){const g=vy();g.serverResponse=f.getErrorText(),this.errorCallback_?d(this.errorCallback_(f,g)):d(g)}else if(l.canceled){const g=this.appDelete_?cS():lS();d(g)}else{const g=iS();d(g)}};this.canceled_?t(!1,new Ah(!1,null,!0)):this.backoffId_=d3(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&h3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ah{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function y3(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function x3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function b3(n,e){e&&(n["X-Firebase-GMPID"]=e)}function v3(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function w3(n,e,t,s,l,c,d=!0,f=!1){const g=uS(n.urlParams),p=n.url+g,x=Object.assign({},n.headers);return b3(x,e),y3(x,t),x3(x,c),v3(x,s),new p3(p,n.method,x,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,l,d,f)}function _3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function N3(...n){const e=_3();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(wy())return new Blob(n);throw new At(jt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function j3(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function E3(n){if(typeof atob>"u")throw o3("base-64");return atob(n)}const rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ap{constructor(e,t){this.data=e,this.contentType=t||null}}function k3(n,e){switch(n){case rs.RAW:return new Ap(hS(e));case rs.BASE64:case rs.BASE64URL:return new Ap(fS(n,e));case rs.DATA_URL:return new Ap(T3(e),A3(e))}throw vy()}function hS(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const c=s,d=n.charCodeAt(++t);s=65536|(c&1023)<<10|d&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function S3(n){let e;try{e=decodeURIComponent(n)}catch{throw hu(rs.DATA_URL,"Malformed data URL.")}return hS(e)}function fS(n,e){switch(n){case rs.BASE64:{const l=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(l||c)throw hu(n,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case rs.BASE64URL:{const l=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(l||c)throw hu(n,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=E3(e)}catch(l){throw l.message.includes("polyfill")?l:hu(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s}class mS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw hu(rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=C3(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function T3(n){const e=new mS(n);return e.base64?fS(rs.BASE64,e.rest):S3(e.rest)}function A3(n){return new mS(n).contentType}function C3(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class Fs{constructor(e,t){let s=0,l="";gN(e)?(this.data_=e,s=e.size,l=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,t){if(gN(this.data_)){const s=this.data_,l=j3(s,e,t);return l===null?null:new Fs(l)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new Fs(s,!0)}}static getBlob(...e){if(wy()){const t=e.map(s=>s instanceof Fs?s.data_:s);return new Fs(N3.apply(null,t))}else{const t=e.map(d=>Wf(d)?k3(rs.RAW,d).data:d.data_);let s=0;t.forEach(d=>{s+=d.byteLength});const l=new Uint8Array(s);let c=0;return t.forEach(d=>{for(let f=0;f<d.length;f++)l[c++]=d[f]}),new Fs(l,!0)}}uploadData(){return this.data_}}function gS(n){let e;try{e=JSON.parse(n)}catch{return null}return g3(e)?e:null}function R3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function I3(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function pS(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function D3(n,e){return e}class Dn{constructor(e,t,s,l){this.server=e,this.local=t||e,this.writable=!!s,this.xform=l||D3}}let Ch=null;function O3(n){return!Wf(n)||n.length<2?n:pS(n)}function _y(){if(Ch)return Ch;const n=[];n.push(new Dn("bucket")),n.push(new Dn("generation")),n.push(new Dn("metageneration")),n.push(new Dn("name","fullPath",!0));function e(c,d){return O3(d)}const t=new Dn("name");t.xform=e,n.push(t);function s(c,d){return d!==void 0?Number(d):d}const l=new Dn("size");return l.xform=s,n.push(l),n.push(new Dn("timeCreated")),n.push(new Dn("updated")),n.push(new Dn("md5Hash",null,!0)),n.push(new Dn("cacheControl",null,!0)),n.push(new Dn("contentDisposition",null,!0)),n.push(new Dn("contentEncoding",null,!0)),n.push(new Dn("contentLanguage",null,!0)),n.push(new Dn("contentType",null,!0)),n.push(new Dn("metadata","customMetadata",!0)),Ch=n,Ch}function M3(n,e){function t(){const s=n.bucket,l=n.fullPath,c=new cr(s,l);return e._makeStorageReference(c)}Object.defineProperty(n,"ref",{get:t})}function P3(n,e,t){const s={};s.type="file";const l=t.length;for(let c=0;c<l;c++){const d=t[c];s[d.local]=d.xform(s,e[d.server])}return M3(s,n),s}function yS(n,e,t){const s=gS(e);return s===null?null:P3(n,s,t)}function L3(n,e,t,s){const l=gS(e);if(l===null||!Wf(l.downloadTokens))return null;const c=l.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(p=>{const x=n.bucket,v=n.fullPath,w="/b/"+d(x)+"/o/"+d(v),k=Po(w,t,s),D=uS({alt:"media",token:p});return k+D})[0]}function xS(n,e){const t={},s=e.length;for(let l=0;l<s;l++){const c=e[l];c.writable&&(t[c.server]=n[c.local])}return JSON.stringify(t)}class pl{constructor(e,t,s,l){this.url=e,this.method=t,this.handler=s,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ys(n){if(!n)throw vy()}function Ny(n,e){function t(s,l){const c=yS(n,l,e);return Ys(c!==null),c}return t}function U3(n,e){function t(s,l){const c=yS(n,l,e);return Ys(c!==null),L3(c,l,n.host,n._protocol)}return t}function Gu(n){function e(t,s){let l;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?l=t3():l=e3():t.getStatus()===402?l=ZM(n.bucket):t.getStatus()===403?l=n3(n.path):l=s,l.status=t.getStatus(),l.serverResponse=s.serverResponse,l}return e}function jy(n){const e=Gu(n);function t(s,l){let c=e(s,l);return s.getStatus()===404&&(c=JM(n.path)),c.serverResponse=l.serverResponse,c}return t}function V3(n,e,t){const s=e.fullServerUrl(),l=Po(s,n.host,n._protocol),c="GET",d=n.maxOperationRetryTime,f=new pl(l,c,Ny(n,t),d);return f.errorHandler=jy(e),f}function z3(n,e,t){const s=e.fullServerUrl(),l=Po(s,n.host,n._protocol),c="GET",d=n.maxOperationRetryTime,f=new pl(l,c,U3(n,t),d);return f.errorHandler=jy(e),f}function F3(n,e){const t=e.fullServerUrl(),s=Po(t,n.host,n._protocol),l="DELETE",c=n.maxOperationRetryTime;function d(g,p){}const f=new pl(s,l,d,c);return f.successCodes=[200,204],f.errorHandler=jy(e),f}function B3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function bS(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=B3(null,e)),s}function vS(n,e,t,s,l){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function f(){let q="";for(let K=0;K<2;K++)q=q+Math.random().toString().slice(2);return q}const g=f();d["Content-Type"]="multipart/related; boundary="+g;const p=bS(e,s,l),x=xS(p,t),v="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+g+`\r
Content-Type: `+p.contentType+`\r
\r
`,w=`\r
--`+g+"--",k=Fs.getBlob(v,s,w);if(k===null)throw oS();const D={name:p.fullPath},U=Po(c,n.host,n._protocol),I="POST",z=n.maxUploadRetryTime,A=new pl(U,I,Ny(n,t),z);return A.urlParams=D,A.headers=d,A.body=k.uploadData(),A.errorHandler=Gu(e),A}class pf{constructor(e,t,s,l){this.current=e,this.total=t,this.finalized=!!s,this.metadata=l||null}}function Ey(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ys(!1)}return Ys(!!t&&(e||["active"]).indexOf(t)!==-1),t}function q3(n,e,t,s,l){const c=e.bucketOnlyServerUrl(),d=bS(e,s,l),f={name:d.fullPath},g=Po(c,n.host,n._protocol),p="POST",x={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},v=xS(d,t),w=n.maxUploadRetryTime;function k(U){Ey(U);let I;try{I=U.getResponseHeader("X-Goog-Upload-URL")}catch{Ys(!1)}return Ys(Wf(I)),I}const D=new pl(g,p,k,w);return D.urlParams=f,D.headers=x,D.body=v,D.errorHandler=Gu(e),D}function H3(n,e,t,s){const l={"X-Goog-Upload-Command":"query"};function c(p){const x=Ey(p,["active","final"]);let v=null;try{v=p.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ys(!1)}v||Ys(!1);const w=Number(v);return Ys(!isNaN(w)),new pf(w,s.size(),x==="final")}const d="POST",f=n.maxUploadRetryTime,g=new pl(t,d,c,f);return g.headers=l,g.errorHandler=Gu(e),g}const yN=256*1024;function $3(n,e,t,s,l,c,d,f){const g=new pf(0,0);if(d?(g.current=d.current,g.total=d.total):(g.current=0,g.total=s.size()),s.size()!==g.total)throw i3();const p=g.total-g.current;let x=p;l>0&&(x=Math.min(x,l));const v=g.current,w=v+x;let k="";x===0?k="finalize":p===x?k="upload, finalize":k="upload";const D={"X-Goog-Upload-Command":k,"X-Goog-Upload-Offset":`${g.current}`},U=s.slice(v,w);if(U===null)throw oS();function I(K,F){const ne=Ey(K,["active","final"]),O=g.current+x,L=s.size();let j;return ne==="final"?j=Ny(e,c)(K,F):j=null,new pf(O,L,ne==="final",j)}const z="POST",A=e.maxUploadRetryTime,q=new pl(t,z,I,A);return q.headers=D,q.body=U.uploadData(),q.progressCallback=f||null,q.errorHandler=Gu(n),q}const Gn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Cp(n){switch(n){case"running":case"pausing":case"canceling":return Gn.RUNNING;case"paused":return Gn.PAUSED;case"success":return Gn.SUCCESS;case"canceled":return Gn.CANCELED;case"error":return Gn.ERROR;default:return Gn.ERROR}}class G3{constructor(e,t,s){if(m3(e)||t!=null||s!=null)this.next=e,this.error=t??void 0,this.complete=s??void 0;else{const c=e;this.next=c.next,this.error=c.error,this.complete=c.complete}}}function ao(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class K3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,l,c){if(this.sent_)throw qc("cannot .send() more than once");if(gi(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),c!==void 0)for(const d in c)c.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,c[d].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Y3 extends K3{initXhr(){this.xhr_.responseType="text"}}function ei(){return new Y3}class Q3{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=s,this._mappings=_y(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=l=>{if(this._request=void 0,this._chunkMultiplier=1,l._codeEquals(jt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const c=this.isExponentialBackoffExpired();if(dS(l.status,[]))if(c)l=iS();else{this.sleepTime=Math.max(this.sleepTime*2,WM),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=l,this._transition("error")}},this._metadataErrorHandler=l=>{this._request=void 0,l._codeEquals(jt.CANCELED)?this.completeTransitions_():(this._error=l,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((l,c)=>{this._resolve=l,this._reject=c,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,s])=>{switch(this._state){case"running":e(t,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const s=q3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),l=this._ref.storage._makeRequest(s,ei,e,t);this._request=l,l.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,s)=>{const l=H3(this._ref.storage,this._ref._location,e,this._blob),c=this._ref.storage._makeRequest(l,ei,t,s);this._request=c,c.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=yN*this._chunkMultiplier,t=new pf(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((l,c)=>{let d;try{d=$3(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){this._error=g,this._transition("error");return}const f=this._ref.storage._makeRequest(d,ei,l,c,!1);this._request=f,f.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){yN*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const s=V3(this._ref.storage,this._ref._location,this._mappings),l=this._ref.storage._makeRequest(s,ei,e,t);this._request=l,l.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const s=vS(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),l=this._ref.storage._makeRequest(s,ei,e,t);this._request=l,l.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=lS(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Cp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,s,l){const c=new G3(t||void 0,s||void 0,l||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Cp(this._state)){case Gn.SUCCESS:ao(this._resolve.bind(null,this.snapshot))();break;case Gn.CANCELED:case Gn.ERROR:const t=this._reject;ao(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Cp(this._state)){case Gn.RUNNING:case Gn.PAUSED:e.next&&ao(e.next.bind(e,this.snapshot))();break;case Gn.SUCCESS:e.complete&&ao(e.complete.bind(e))();break;case Gn.CANCELED:case Gn.ERROR:e.error&&ao(e.error.bind(e,this._error))();break;default:e.error&&ao(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class ol{constructor(e,t){this._service=e,t instanceof cr?this._location=t:this._location=cr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ol(e,t)}get root(){const e=new cr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pS(this._location.path)}get storage(){return this._service}get parent(){const e=R3(this._location.path);if(e===null)return null;const t=new cr(this._location.bucket,e);return new ol(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw c3(e)}}function X3(n,e,t){n._throwIfRoot("uploadBytes");const s=vS(n.storage,n._location,_y(),new Fs(e,!0),t);return n.storage.makeRequestWithTokens(s,ei).then(l=>({metadata:l,ref:n}))}function W3(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Q3(n,new Fs(e),t)}function J3(n){n._throwIfRoot("getDownloadURL");const e=z3(n.storage,n._location,_y());return n.storage.makeRequestWithTokens(e,ei).then(t=>{if(t===null)throw l3();return t})}function Z3(n){n._throwIfRoot("deleteObject");const e=F3(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ei)}function eP(n,e){const t=I3(n._location.path,e),s=new cr(n._location.bucket,t);return new ol(n.storage,s)}function tP(n){return/^[A-Za-z]+:\/\//.test(n)}function nP(n,e){return new ol(n,e)}function wS(n,e){if(n instanceof ky){const t=n;if(t._bucket==null)throw a3();const s=new ol(t,t._bucket);return e!=null?wS(s,e):s}else return e!==void 0?eP(n,e):n}function rP(n,e){if(e&&tP(e)){if(n instanceof ky)return nP(n,e);throw f0("To use ref(service, url), the first argument must be a Storage instance.")}else return wS(n,e)}function xN(n,e){const t=e?.[aS];return t==null?null:cr.makeFromBucketSpec(t,n)}function sP(n,e,t,s={}){n.host=`${e}:${t}`;const l=gi(e);l&&(v0(`https://${n.host}/b`),w0("Storage",!0)),n._isUsingEmulator=!0,n._protocol=l?"https":"http";const{mockUserToken:c}=s;c&&(n._overrideAuthToken=typeof c=="string"?c:dj(c,n.app.options.projectId))}class ky{constructor(e,t,s,l,c,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=l,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=sS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QM,this._maxUploadRetryTime=XM,this._requests=new Set,l!=null?this._bucket=cr.makeFromBucketSpec(l,this._host):this._bucket=xN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cr.makeFromBucketSpec(this._url,e):this._bucket=xN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ol(this,e)}_makeRequest(e,t,s,l,c=!0){if(this._deleted)return new u3(cS());{const d=w3(e,this._appId,s,l,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[s,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,l).getPromise()}}const bN="@firebase/storage",vN="0.14.0";const _S="storage";function NS(n,e,t){return n=ft(n),X3(n,e,t)}function Sy(n,e,t){return n=ft(n),W3(n,e,t)}function Ku(n){return n=ft(n),J3(n)}function jS(n){return n=ft(n),Z3(n)}function cl(n,e){return n=ft(n),rP(n,e)}function aP(n=Cu(),e){n=ft(n);const s=pi(n,_S).getImmediate({identifier:e}),l=oj("storage");return l&&iP(s,...l),s}function iP(n,e,t,s={}){sP(n,e,t,s)}function lP(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),l=n.getProvider("app-check-internal");return new ky(t,s,l,e,hl)}function oP(){zr(new Sr(_S,lP,"PUBLIC").setMultipleInstances(!0)),Yn(bN,vN,""),Yn(bN,vN,"esm2020")}oP();const cP={apiKey:"AIzaSyDyo2mO3V_udQY_KiVrTItXOD3ETSGufAo",authDomain:"familymatters-98d8f.firebaseapp.com",projectId:"familymatters-98d8f",storageBucket:"familymatters-98d8f.firebasestorage.app",messagingSenderId:"472637655089",appId:"1:472637655089:web:83f2c1599e79f20a20ed10",measurementId:"G-GPLQ4XPXGJ"},Jf=J2().length?Cu():pj(cP),Qa=EO(Jf),be=zE(Jf);typeof window<"u"&&GM().then(n=>{n&&HM(Jf)});const ul=aP(Jf),Zt=()=>{const n=mi(),e=dr(),t=async()=>{try{await kk(Qa),e("/auth/login")}catch(l){console.error("Error signing out:",l)}},s=[{icon:"ri-dashboard-line",label:"Dashboard",path:"/"},{icon:"ri-parent-line",label:"Parents",path:"/parents"},{icon:"ri-user-heart-line",label:"Surrogates",path:"/surrogates"},{icon:"ri-links-line",label:"Matches",path:"/matches"},{icon:"ri-chat-1-line",label:"Inquiries",path:"/inquiries"},{icon:"ri-file-text-line",label:"Contracts",path:"/contracts"},{type:"divider"},{icon:"ri-task-line",label:"Tasks",path:"/tasks"},{icon:"ri-calendar-line",label:"Calendar",path:"/calendar"},{icon:"ri-time-line",label:"Appointments",path:"/appointments"},{icon:"ri-heart-pulse-line",label:"Baby Watch",path:"/baby-watch"},{icon:"ri-hospital-line",label:"Medical",path:"/medical"},{icon:"ri-money-dollar-circle-line",label:"Compensation",path:"/payments"},{type:"divider"},{icon:"ri-message-3-line",label:"Messages",path:"/messages"},{icon:"ri-roadmap-line",label:"Milestones",path:"/milestones"},{icon:"ri-file-chart-line",label:"Reports",path:"/reports"},{icon:"ri-settings-4-line",label:"Settings",path:"/settings"}];return i.jsxs("aside",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col h-full flex-shrink-0",children:[i.jsxs("div",{className:"p-6 flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-rose-500 to-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-lg",children:"FM"}),i.jsx("span",{className:"font-bold text-xl text-gray-900 dark:text-white tracking-tight",children:"Family Matters"})]}),i.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-2 space-y-1 custom-scrollbar",children:s.map((l,c)=>{if(l.type==="divider")return i.jsx("div",{className:"my-4 border-t border-gray-100 dark:border-gray-700"},c);const d=l.path==="/"?n.pathname==="/":n.pathname.startsWith(l.path||"");return i.jsxs(nj,{to:l.path,className:({isActive:f})=>`
                flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group
                ${d||f?"bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-200"}
              `,children:[i.jsx("i",{className:`${l.icon} text-lg ${d?"text-rose-500 dark:text-rose-400":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`}),i.jsx("span",{children:l.label})]},l.path)})}),i.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("button",{onClick:t,className:"flex items-center gap-3 w-full px-3 py-2.5 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-lg transition-colors",children:[i.jsx("i",{className:"ri-logout-box-line text-lg"}),i.jsx("span",{children:"Sign Out"})]})})]})},ES=E.createContext(void 0),uP=()=>{const n=E.useContext(ES);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},dP=({children:n})=>{const[e,t]=E.useState(()=>{const l=localStorage.getItem("theme");return l?l==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});E.useEffect(()=>{const l=document.documentElement,c=document.body;e?(l.classList.add("dark"),c.classList.add("dark:bg-gray-900"),c.classList.remove("bg-gray-50")):(l.classList.remove("dark"),c.classList.add("bg-gray-50"),c.classList.remove("dark:bg-gray-900")),localStorage.setItem("theme",e?"dark":"light")},[e]);const s=()=>{t(l=>!l)};return i.jsx(ES.Provider,{value:{isDark:e,toggleTheme:s},children:n})},fe=({children:n,variant:e="primary",size:t="md",color:s,onClick:l,disabled:c=!1,className:d="",type:f="button"})=>{const g="whitespace-nowrap cursor-pointer font-medium rounded-lg transition-all duration-200 flex items-center justify-center gap-2",p=()=>{if(s)switch(s){case"green":return e==="outline"?"border border-green-300 hover:border-green-400 text-green-700 bg-white hover:bg-green-50":"bg-green-600 hover:bg-green-700 text-white shadow-sm";case"red":return e==="outline"?"border border-red-300 hover:border-red-400 text-red-700 bg-white hover:bg-red-50":"bg-red-600 hover:bg-red-700 text-white shadow-sm";case"blue":return e==="outline"?"border border-blue-300 hover:border-blue-400 text-blue-700 bg-white hover:bg-blue-50":"bg-blue-600 hover:bg-blue-700 text-white shadow-sm";default:return"bg-blue-600 hover:bg-blue-700 text-white shadow-sm"}return{primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm",secondary:"bg-gray-100 hover:bg-gray-200 text-gray-700",outline:"border border-gray-300 hover:border-gray-400 text-gray-700 bg-white",danger:"bg-red-600 hover:bg-red-700 text-white shadow-sm"}[e]},x={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},v=c?"opacity-50 cursor-not-allowed":"";return i.jsx("button",{type:f,onClick:l,disabled:c,className:`${g} ${p()} ${x[t]} ${v} ${d}`,children:n})},kS=E.createContext(void 0);function hP({children:n}){const[e,t]=E.useState(null),[s,l]=E.useState(!0),[c,d]=E.useState(null),[f,g]=E.useState(!1),[p,x]=E.useState(null);E.useEffect(()=>{const U=g6(Qa,I=>{t(I),l(!1)});return()=>U()},[]),E.useEffect(()=>{if(!e){d(null),g(!1),x(null);return}g(!0),x(null);const U=ct(be,"users",e.uid),I=kr(U,z=>{if(z.exists()){const A=z.data();d({id:z.id,...A})}else d(null);g(!1)},z=>{console.error("Failed to subscribe to user profile",z),d(null),x(z.message),g(!1)});return()=>I()},[e]);const v=async({email:U,password:I,rememberMe:z=!0})=>(await W_(Qa,z?u0:hy),u6(Qa,U,I)),w=async({email:U,password:I})=>(await W_(Qa,u0),Ek(Qa,U,I)),k=async()=>{await kk(Qa)},D=E.useMemo(()=>({user:e,initializing:s,profile:c,profileLoading:f,profileError:p,login:v,signup:w,logout:k}),[e,s,c,f,p]);return i.jsx(kS.Provider,{value:D,children:n})}function Zf(){const n=E.useContext(kS);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}const fP=({onClose:n})=>{const[e,t]=E.useState([]),[s,l]=E.useState(!0),c=dr();E.useEffect(()=>{const f=Ze(Ie(be,"users"),kt("createdAt","desc"),QE(5)),g=kr(f,p=>{const x=p.docs.map(v=>{const w=v.data(),D=(w.role||"inquiry")==="inquiry"?"inquiry":"request";let U="Just now";if(w.createdAt instanceof De){const z=De.now().seconds-w.createdAt.seconds;z<60?U="Just now":z<3600?U=`${Math.floor(z/60)}m ago`:z<86400?U=`${Math.floor(z/3600)}h ago`:U=`${Math.floor(z/86400)}d ago`}const I=w.displayName||w.firstName||w.email||"New User";return{id:v.id,type:D,name:I,time:U,isRead:!1,source:w.source||"online"}});t(x),l(!1)});return()=>g()},[]);const d=f=>{f.type==="request"?c("/requests"):c("/inquiries"),n()};return i.jsxs("div",{className:"absolute right-0 top-12 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Notifications"}),i.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded-full",children:[e.length," New"]})]}),i.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:s?i.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"Loading..."}):e.length===0?i.jsxs("div",{className:"p-8 text-center text-gray-500 text-sm",children:[i.jsx("i",{className:"ri-notification-off-line text-2xl mb-2 block text-gray-400"}),"No new notifications"]}):i.jsx("div",{className:"divide-y divide-gray-50 dark:divide-gray-700",children:e.map(f=>i.jsx("div",{onClick:()=>d(f),className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors group",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:`mt-1 w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${f.type==="request"?"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400":"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400"}`,children:i.jsx("i",{className:f.type==="request"?"ri-file-list-3-line":"ri-question-line"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:f.type==="request"?"New Request received":"New Inquiry received"}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["From ",i.jsx("span",{className:"font-medium",children:f.name})," (",f.source,")"]}),i.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 block",children:f.time})]})]})},f.id))})}),i.jsx("div",{className:"p-3 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 text-center",children:i.jsx("button",{onClick:n,className:"text-xs font-medium text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Close Notifications"})})]})},en=({onToggleSidebar:n})=>{const{isDark:e,toggleTheme:t}=uP(),s=dr(),{user:l,logout:c,initializing:d,profile:f,profileLoading:g}=Zf(),[p,x]=E.useState(!1),[v,w]=E.useState(!1),k=Hh.useRef(null);Hh.useEffect(()=>{const K=F=>{k.current&&!k.current.contains(F.target)&&w(!1)};return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[]);const D=E.useMemo(()=>{if(f&&typeof f=="object"){const K=f.firstName?.trim(),F=f.lastName?.trim(),ne=[K,F].filter(Boolean).join(" ");if(ne.length>0)return ne;const O=f.formData?.firstName,L=f.formData?.lastName,j=[O,L].filter(Boolean).join(" ");if(j.length>0)return j;const C=f.parent1?.name;if(C&&C.trim().length>0)return C.trim()}if(l?.displayName&&l.displayName.trim().length>0)return l.displayName;if(l?.email){const[K]=l.email.split("@");return K.charAt(0).toUpperCase()+K.slice(1)}return"Administrator"},[l,f]),U=E.useMemo(()=>{if(f&&typeof f=="object"){const K=f.role;if(K)return K}return"Signed in user"},[f]),I=E.useMemo(()=>g?"":f&&typeof f=="object"?f.email??l?.email??"Signed in user":l?.email??"Signed in user",[f,g,l]),z=E.useMemo(()=>d||g?"":[U,I].filter(F=>F&&F.length>0).join("  "),[I,d,g,U]),A=E.useMemo(()=>{const F=(D||I||"FM").split(" ").filter(Boolean).map(ne=>ne[0]?.toUpperCase()??"").join("").slice(0,2);return F.length>0?F:"FM"},[D,I]),q=async()=>{if(!p){x(!0);try{await c(),s("/auth/login")}catch(K){console.error("Failed to log out",K)}finally{x(!1)}}};return i.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 transition-colors duration-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[n&&i.jsx("button",{onClick:n,className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:i.jsx("i",{className:"ri-menu-line text-xl text-gray-600 dark:text-gray-300"})}),i.jsxs("div",{className:"hidden sm:block",children:[i.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Family Matters Admin"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Surrogacy Program Management"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:e?"Switch to light mode":"Switch to dark mode",children:e?i.jsx("i",{className:"ri-sun-line text-xl text-yellow-500"}):i.jsx("i",{className:"ri-moon-line text-xl text-gray-600"})}),i.jsxs("div",{className:"relative",ref:k,children:[i.jsxs("button",{onClick:()=>w(!v),className:`p-2 rounded-lg transition-colors relative ${v?"bg-gray-100 dark:bg-gray-700 text-blue-600":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:[i.jsx("i",{className:`text-xl ${v?"ri-notification-fill":"ri-notification-line"}`}),i.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white dark:border-gray-800"})]}),v&&i.jsx(fP,{onClose:()=>w(!1)})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"hidden md:block text-right",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:d||g?"Loading...":D}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:d||g?"":z})]}),i.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-sm font-medium text-white",children:A})}),i.jsxs(fe,{onClick:q,disabled:p,variant:"outline",size:"sm",className:"hidden sm:flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 border-gray-300 dark:border-gray-600 hover:border-red-300 dark:hover:border-red-600",children:[i.jsx("i",{className:"ri-logout-box-line text-sm"}),i.jsx("span",{className:"hidden lg:inline",children:"Logout"})]}),i.jsx("button",{onClick:q,disabled:p,className:"sm:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Logout",children:i.jsx("i",{className:"ri-logout-box-line text-xl text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400"})})]})]})]})})},ve=({children:n,className:e="",padding:t="md",onClick:s})=>{const l={sm:"p-4",md:"p-6",lg:"p-8"};return i.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 transition-colors duration-200 ${l[t]} ${e}`,onClick:s,children:n})},Ne=({children:n,variant:e="neutral",color:t,size:s="md",className:l=""})=>{const c="inline-flex items-center font-medium rounded-full whitespace-nowrap",d=()=>{if(t)switch(t){case"yellow":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"blue":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"green":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"red":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"gray":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200";case"purple":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"indigo":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200";case"pink":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}return{success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",danger:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",info:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",neutral:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}[e]},f={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"};return i.jsx("span",{className:`${c} ${d()} ${f[s]} ${l}`,children:n})},mP=n=>typeof n=="object"&&n!==null&&!Array.isArray(n),gP=n=>typeof n=="object"&&n!==null&&typeof n.toDate=="function",pP=n=>n.replace(/([A-Z])/g," $1").replace(/_/g," ").replace(/\s+/g," ").trim().replace(/^\w/,e=>e.toUpperCase()),SS=n=>n==null?"":typeof n=="boolean"?n?"Yes":"No":n instanceof Date?n.toLocaleString():gP(n)?n.toDate().toLocaleString():Array.isArray(n)?n.length===0?"":i.jsx("ul",{className:"list-disc list-inside space-y-1",children:n.map((e,t)=>i.jsx("li",{className:"text-sm text-gray-700 dark:text-gray-300",children:SS(e)},t))}):typeof n=="object"?Ty(n,1):String(n),Rh=["firstname","lastname","name","email","phone","phonenumber","city","state","country","address","zipcode","zip","dob","dateofbirth"],wN=n=>n.replace(/[^a-z0-9]/gi,"").toLowerCase(),yP=n=>[...n].sort(([e],[t])=>{const s=wN(e),l=wN(t),c=Rh.indexOf(s),d=Rh.indexOf(l),f=c===-1?Rh.length:c,g=d===-1?Rh.length:d;return f!==g?f-g:e.localeCompare(t,void 0,{sensitivity:"base"})}),Ty=(n,e=0)=>{const t=yP(Object.entries(n));return t.length===0?i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No data available."}):i.jsx("div",{className:`space-y-3 ${e>0?"pl-4 border-l border-gray-200 dark:border-gray-700":""}`,children:t.map(([s,l])=>{const c=pP(s);return mP(l)?i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:c}),Ty(l,e+1)]},s):i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:c}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white break-words",children:SS(l)})]},s)})})},Ut=({title:n,data:e,emptyMessage:t})=>!e||Object.keys(e).length===0?t?i.jsxs("div",{children:[n&&n.trim().length>0&&i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:n}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t})]}):null:i.jsxs("div",{children:[n&&n.trim().length>0&&i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:n}),Ty(e)]}),xP=()=>{const n=dr(),[e,t]=E.useState([]),[s,l]=E.useState([]),[c,d]=E.useState([]),[f,g]=E.useState(!0),[p,x]=E.useState(!0),[v,w]=E.useState(null),[k,D]=E.useState(null),U=()=>{n("/medical")},I=()=>{n("/requests")},z=()=>{n("/appointments")};E.useEffect(()=>{const j=Ze(Ie(be,"users"),bn("role","==","Intended Parent"),kt("updatedAt","desc")),C=kr(j,T=>{const S=T.docs.map(M=>({id:M.id,data:M.data()}));t(S),g(!1),w(null)},T=>{console.error("Failed to load parents for dashboard",T),t([]),w("Unable to load intended parent updates."),g(!1)});return()=>C()},[]),E.useEffect(()=>{const j=Ze(Ie(be,"users"),bn("role","==","Surrogate"),kt("updatedAt","desc")),C=kr(j,T=>{const S=T.docs.map(M=>({id:M.id,data:M.data()}));l(S),x(!1),D(null)},T=>{console.error("Failed to load surrogates for dashboard",T),l([]),D("Unable to load surrogate updates."),x(!1)});return()=>C()},[]),E.useEffect(()=>{const j=Ze(Ie(be,"users"),kt("createdAt","desc")),C=kr(j,T=>{const S=T.docs.map(M=>{const me=M.data();return{id:M.id,data:{...me,source:me.source||"online"}}});d(S)},T=>{console.error("Failed to load inquiries for dashboard",T)});return()=>C()},[]);const A=E.useMemo(()=>{const j=e.length,C=e.filter(S=>S.data.profileCompleted).length,T=e.filter(S=>S.data.form2Completed).length;return[{label:"Tracked Parents",value:j},{label:"Profiles Complete",value:C},{label:"Form 2 Complete",value:T}]},[e]),q=E.useMemo(()=>{const j=s.length,C=s.filter(S=>S.data.profileCompleted).length,T=s.filter(S=>S.data.form2Completed).length;return[{label:"Tracked Surrogates",value:j},{label:"Profiles Complete",value:C},{label:"Form 2 Complete",value:T}]},[s]),K=j=>{if(!j)return null;if(typeof j=="object"&&j!==null&&"toDate"in j&&typeof j.toDate=="function")return j.toDate();const C=new Date(j);return Number.isNaN(C.getTime())?null:C},F=j=>j?j.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"",ne=E.useMemo(()=>[...e].sort((j,C)=>{const T=K(j.data.updatedAt)??K(j.data.createdAt)??new Date(0);return(K(C.data.updatedAt)??K(C.data.createdAt)??new Date(0)).getTime()-T.getTime()}).slice(0,5).map(({id:j,data:C})=>{const T=C.parent1?.name,M=[C.formData?.firstName,C.formData?.lastName].filter(Boolean).join(" "),me=M.length>0?M:void 0,Te=C.firstName,X=C.email,H=T??me??Te??X??"Intended Parent",ue=!!C.profileCompleted,ge=!!C.form2Completed;let ee="new";ge?ee="form2":ue&&(ee="profile");const V={new:{label:"New",color:"yellow"},profile:{label:"Profile Complete",color:"blue"},form2:{label:"Form 2 Complete",color:"green"}},W=K(C.updatedAt)??K(C.createdAt);return{id:j,name:H,statusConfig:V[ee],dateLabel:F(W),timeline:C.formData?.whenToStart,location:[C.formData?.city,C.formData?.state].filter(Boolean).join(", ")}}),[e]),O=E.useMemo(()=>{const j=e.length,C=s.length,T=e.filter(X=>X.data.profileCompleted).length,S=s.filter(X=>X.data.profileCompleted).length,M=(X,H)=>H===0?"0 of 0":`${X} of ${H}  ${Math.round(X/H*100)}%`,me=c.filter(X=>X.data.source==="online").length,Te=c.filter(X=>X.data.source==="phone").length;return[{id:"online-inquiries",label:"Online Inquiries",value:me,subText:"Real-time",icon:"ri-global-line",colorClass:"bg-indigo-100 text-indigo-600"},{id:"phone-inquiries",label:"Phone Inquiries",value:Te,subText:"Real-time",icon:"ri-phone-line",colorClass:"bg-pink-100 text-pink-600"},{id:"parents-total",label:"Intended Parents",value:j,subText:M(T,j)+" profiles ready",icon:"ri-parent-line",colorClass:"bg-blue-100 text-blue-600"},{id:"surrogates-total",label:"Surrogates",value:C,subText:M(S,C)+" profiles ready",icon:"ri-user-heart-line",colorClass:"bg-rose-100 text-rose-600"}]},[e,s,c]),L=j=>{n(`/parents/${j}`)};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Dashboard"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Welcome back! Here's what's happening with your surrogacy program."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:O.map(j=>i.jsx(ve,{className:"hover:shadow-lg transition-shadow",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:j.label}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:j.value}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:j.subText})]}),i.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${j.colorClass}`,children:i.jsx("i",{className:`${j.icon} text-lg`})})]})},j.id))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(ve,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Recent Requests"}),i.jsxs(fe,{variant:"outline",size:"sm",onClick:I,children:[i.jsx("i",{className:"ri-arrow-right-line mr-1"}),"View All"]})]}),f?i.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((j,C)=>i.jsx("div",{className:"h-16 w-full rounded-xl bg-gray-100 dark:bg-gray-800 animate-pulse"},C))}):v?i.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:v}):ne.length===0?i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No recent requests yet."}):i.jsx("div",{className:"space-y-4",children:ne.map(j=>i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer",onClick:()=>L(j.id),children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-user-line text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:j.name}),i.jsx("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 mt-0.5",children:j.dateLabel}),i.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[j.timeline&&i.jsxs("p",{children:["Timeline: ",j.timeline]}),j.location&&i.jsxs("p",{children:["Location: ",j.location]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ne,{color:j.statusConfig.color,children:j.statusConfig.label}),i.jsxs(fe,{size:"sm",variant:"outline",onClick:C=>{C.stopPropagation(),L(j.id)},children:[i.jsx("i",{className:"ri-eye-line mr-1"}),"View"]})]})]},j.id))})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ve,{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(fe,{className:"w-full justify-start",variant:"outline",onClick:()=>n("/requests"),children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Application"]}),i.jsxs(fe,{className:"w-full justify-start",variant:"outline",onClick:()=>n("/matches"),children:[i.jsx("i",{className:"ri-links-line mr-2"}),"Create Match"]}),i.jsxs(fe,{className:"w-full justify-start",variant:"outline",onClick:()=>n("/appointments"),children:[i.jsx("i",{className:"ri-calendar-line mr-2"}),"Schedule Meeting"]}),i.jsxs(fe,{className:"w-full justify-start",variant:"outline",onClick:()=>n("/reports"),children:[i.jsx("i",{className:"ri-file-text-line mr-2"}),"Generate Report"]})]})]}),i.jsxs(ve,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Upcoming"}),i.jsxs(fe,{variant:"outline",size:"sm",onClick:z,children:[i.jsx("i",{className:"ri-calendar-line mr-1"}),"Calendar"]})]}),i.jsx("div",{className:"space-y-3",children:[].map(j=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer",onClick:z,children:[i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:j.title}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:j.time})]})]},j.id))})]})]})]}),i.jsx("div",{className:"mt-8",children:i.jsxs(ve,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Recent Medical Records"}),i.jsxs(fe,{variant:"outline",size:"sm",onClick:U,children:[i.jsx("i",{className:"ri-arrow-right-line mr-1"}),"View All"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[].map(j=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:U,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400",children:i.jsx("i",{className:"ri-search-line text-lg"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:j.title}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[i.jsx("i",{className:"ri-user-heart-line text-xs"}),i.jsx("span",{children:j.patient}),i.jsx("span",{children:""}),i.jsx("span",{children:j.date})]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[j.doctor,"  ",j.facility]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx(Ne,{color:j.status==="completed"?"green":j.status==="pending"?"yellow":"blue",children:j.status}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[j.attachments," attachments"]})]})]})},j.id))})]})}),i.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ve,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Intended Parents Snapshot"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Latest families onboarding to Family Matters."})]}),i.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>n("/parents"),children:[i.jsx("i",{className:"ri-parent-line mr-1"}),"View All"]})]}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:A.map(j=>i.jsxs("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-3 shadow-sm",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:j.label}),i.jsx("p",{className:"mt-2 text-lg font-semibold text-gray-900 dark:text-white",children:j.value})]},j.label))}),f?i.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((j,C)=>i.jsx("div",{className:"h-20 w-full rounded-2xl bg-gray-100 dark:bg-gray-800 animate-pulse"},C))}):v?i.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:v}):e.length===0?i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No intended parents found."}):i.jsx("div",{className:"space-y-4",children:e.map(({id:j,data:C})=>i.jsxs("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/60 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:()=>n(`/parents/${j}`),children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:C.firstName??C.email??"Intended Parent"}),i.jsxs("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 mt-1",children:["ID: ",j]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ne,{color:C.profileCompleted?"green":"yellow",children:C.profileCompleted?"Profile Complete":"Profile Pending"}),i.jsx(Ne,{color:C.form2Completed?"blue":"gray",children:C.form2Completed?"Form 2 Complete":"Form 2 Pending"})]})]}),i.jsx("div",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400",children:i.jsx(Ut,{title:"",data:{"When To Start":C.formData?.whenToStart,Location:[C.formData?.city,C.formData?.state].filter(Boolean).join(", ")},emptyMessage:"No journey details yet."})})]},j))})]}),i.jsxs(ve,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Surrogate Snapshot"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Recent surrogates progressing through screening."})]}),i.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>n("/surrogates"),children:[i.jsx("i",{className:"ri-user-heart-line mr-1"}),"View All"]})]}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:q.map(j=>i.jsxs("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-3 shadow-sm",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:j.label}),i.jsx("p",{className:"mt-2 text-lg font-semibold text-gray-900 dark:text-white",children:j.value})]},j.label))}),p?i.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((j,C)=>i.jsx("div",{className:"h-20 w-full rounded-2xl bg-gray-100 dark:bg-gray-800 animate-pulse"},C))}):k?i.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:k}):s.length===0?i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No surrogates found."}):i.jsx("div",{className:"space-y-4",children:s.map(({id:j,data:C})=>i.jsxs("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/60 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:()=>n(`/surrogates/${j}`),children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:C.firstName??C.email??"Surrogate"}),i.jsxs("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 mt-1",children:["ID: ",j]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ne,{color:C.profileCompleted?"green":"yellow",children:C.profileCompleted?"Profile Complete":"Profile Pending"}),i.jsx(Ne,{color:C.form2Completed?"blue":"gray",children:C.form2Completed?"Form 2 Complete":"Form 2 Pending"})]})]}),i.jsx("div",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400",children:i.jsx(Ut,{title:"",data:{Availability:C.form2?.availability,Location:[C.formData?.city,C.formData?.state].filter(Boolean).join(", ")},emptyMessage:"No readiness details yet."})})]},j))})]})]})]})]})]})},TS=({isOpen:n,onClose:e,onSuccess:t,variant:s="simple"})=>{const[l,c]=E.useState(!1),[d,f]=E.useState({name:"",email:"",phone:"",message:"",role:"Intended Parents",age:"",location:"",experience:""});if(!n)return null;const g=async p=>{p.preventDefault(),c(!0);try{const x={displayName:d.name,email:d.email,phone:d.phone,message:d.message,source:"phone",status:"new",role:s==="detailed"?d.role==="Surrogate"?"Surrogate":"Intended Parents":"inquiry",createdAt:i0(),updatedAt:i0()};if(s==="detailed"&&(x.age=d.age,x.location=d.location,x.experience=d.experience),d.email){d.phone.length<6&&alert("Phone number too short to be used as password (min 6 chars). Inquiry saved without account creation.");try{const w=(await Ek(Qa,d.email,d.phone)).user.uid;await ZE(ct(be,"users",w),x)}catch(v){if(console.error("Auth creation failed:",v),v.code==="auth/email-already-in-use")alert("Email already in use. Saving inquiry without creating a new account."),await Tr(Ie(be,"users"),x);else throw v}}else await Tr(Ie(be,"users"),x);f({name:"",email:"",phone:"",message:"",role:"Intended Parents",age:"",location:"",experience:""}),t(),e()}catch(x){console.error("Error recording inquiry:",x),alert("Failed to record inquiry. Please check the details and try again.")}finally{c(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Record Phone ",s==="detailed"?"Request":"Inquiry"]}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s==="detailed"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type *"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx("button",{type:"button",onClick:()=>f({...d,role:"Intended Parents"}),className:`px-4 py-2 rounded-lg border text-sm font-medium transition-colors ${d.role==="Intended Parents"?"border-blue-600 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:"Intended Parent"}),i.jsx("button",{type:"button",onClick:()=>f({...d,role:"Surrogate"}),className:`px-4 py-2 rounded-lg border text-sm font-medium transition-colors ${d.role==="Surrogate"?"border-blue-600 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:"Surrogate"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),i.jsx("input",{type:"text",required:!0,value:d.name,onChange:p=>f({...d,name:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors",placeholder:"Caller's Name"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone *"}),i.jsx("input",{type:"tel",required:!0,value:d.phone,onChange:p=>f({...d,phone:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors",placeholder:"Phone Number"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:d.email,onChange:p=>f({...d,email:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors",placeholder:"Email (Optional)"})]})]}),s==="detailed"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Age"}),i.jsx("input",{type:"text",value:d.age,onChange:p=>f({...d,age:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors",placeholder:"Age"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),i.jsx("input",{type:"text",value:d.location,onChange:p=>f({...d,location:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors",placeholder:"City, State"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Experience / Background"}),i.jsx("textarea",{rows:2,value:d.experience,onChange:p=>f({...d,experience:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors resize-none",placeholder:"Relevant experience..."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Message / Notes"}),i.jsx("textarea",{rows:s==="detailed"?3:4,value:d.message,onChange:p=>f({...d,message:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors resize-none",placeholder:"Notes from the call..."})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-save-line"}),"Save ",s==="detailed"?"Request":"Inquiry"]})})]})]})]})})})},bP=()=>{const[n,e]=E.useState("all"),[t,s]=E.useState("online"),[l,c]=E.useState(!1),[d,f]=E.useState(null),[g,p]=E.useState(!1),[x,v]=E.useState([]),[w,k]=E.useState(!0),D=dr();E.useEffect(()=>{const j=Ze(Ie(be,"users"),kt("createdAt","desc")),C=kr(j,T=>{const S=T.docs.map(M=>{const me=M.data(),Te=me.source||"online";return{id:M.id,...me,applicantName:me.displayName||`${me.firstName||""} ${me.lastName||""}`.trim()||me.email,type:me.role==="Surrogate"?"Surrogate Application":"Intended Parents",status:me.status||"pending",source:Te,submittedDate:me.createdAt instanceof De?me.createdAt.toDate().toLocaleDateString():me.submittedDate||"N/A"}});v(S),k(!1)},T=>{console.error("Error fetching requests:",T),k(!1)});return()=>C()},[]);const[U,I]=E.useState(!1),z=async j=>{if(d){I(!0);try{await Vt(ct(be,"users",d.id),{status:j,updatedAt:De.now()}),f(null)}catch(C){console.error("Error updating status:",C),alert("Failed to update status. Please try again.")}finally{I(!1)}}},A=()=>{if(!d?.email){alert("No email address available for this request.");return}window.open(`mailto:${d.email}?subject=Regarding your application`,"_blank")},q=async()=>{if(d){I(!0);try{await Vt(ct(be,"users",d.id),{role:"inquiry",status:"new",updatedAt:De.now()}),D("/inquiries")}catch(j){console.error("Error converting to inquiry:",j),alert("Failed to convert to inquiry.")}finally{I(!1)}}},K=x.filter(j=>j.source===t),F=n==="all"?K:K.filter(j=>j.status===n),ne=j=>j==="all"?K.length:K.filter(C=>C.status===j).length,O=[{value:"all",label:"All Requests"},{value:"pending",label:"Pending"},{value:"under-review",label:"Under Review"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}],L=j=>{switch(j){case"pending":return i.jsx(Ne,{color:"yellow",children:"Pending"});case"under-review":return i.jsx(Ne,{color:"blue",children:"Under Review"});case"approved":return i.jsx(Ne,{color:"green",children:"Approved"});case"rejected":return i.jsx(Ne,{color:"red",children:"Rejected"});default:return i.jsx(Ne,{children:j})}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{onToggleSidebar:()=>p(!g)}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Requests Management"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage all incoming surrogacy applications and requests."})]}),i.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2 w-fit shadow-sm",children:[i.jsx("i",{className:"ri-phone-line"}),"Record Phone Request"]})]}),i.jsx(TS,{isOpen:l,onClose:()=>c(!1),onSuccess:()=>s("phone"),variant:"detailed"}),i.jsx("div",{className:"mb-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex space-x-8",children:[i.jsxs("button",{onClick:()=>{s("online"),e("all")},className:`pb-4 px-2 text-sm font-medium transition-colors cursor-pointer relative ${t==="online"?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:["Online Inquiries",t==="online"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]}),i.jsxs("button",{onClick:()=>{s("phone"),e("all")},className:`pb-4 px-2 text-sm font-medium transition-colors cursor-pointer relative ${t==="phone"?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:["Phone Inquiries",t==="phone"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:O.map(j=>i.jsxs("button",{onClick:()=>e(j.value),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${n===j.value?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[j.label," (",ne(j.value),")"]},j.value))})}),w?i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:Array.from({length:6}).map((j,C)=>i.jsx("div",{className:"h-64 bg-gray-100 dark:bg-gray-800 rounded-xl animate-pulse"},C))}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:F.map(j=>i.jsxs(ve,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>f(j),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-user-line text-blue-600 dark:text-blue-400 text-lg"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:j.applicantName}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.type})]})]}),L(j.status)]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Age:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:j.age})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:j.location})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Experience:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:j.experience})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Submitted:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:j.submittedDate})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(fe,{size:"sm",className:"flex-1",children:[i.jsx("i",{className:"ri-eye-line mr-1"}),"View Details"]}),j.status==="pending"&&i.jsx(fe,{size:"sm",color:"green",onClick:C=>{C.stopPropagation()},children:i.jsx("i",{className:"ri-check-line"})})]})]},j.id))}),d&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Request Details"}),i.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-user-line text-blue-600 dark:text-blue-400 text-2xl"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:d.applicantName}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d.type}),L(d.status)]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Age"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:d.age||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Location"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:d.location||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Experience"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:d.experience||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Submitted Date"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:d.submittedDate})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Contact Information"}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("p",{className:"text-gray-900 dark:text-white",children:["Email: ",d.email]}),i.jsxs("p",{className:"text-gray-900 dark:text-white",children:["Phone: ",d.phone]})]})]}),d.message&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Notes / Message"}),i.jsx("p",{className:"text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-900 p-3 rounded mt-2",children:d.message})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(fe,{color:"green",className:"flex-1",onClick:()=>z("approved"),disabled:U||d.status==="approved",children:[U?i.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}):i.jsx("i",{className:"ri-check-line mr-2"}),"Approve"]}),i.jsxs(fe,{color:"red",className:"flex-1",onClick:()=>z("rejected"),disabled:U||d.status==="rejected",children:[U?i.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}):i.jsx("i",{className:"ri-close-line mr-2"}),"Reject"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",onClick:A,children:[i.jsx("i",{className:"ri-message-line mr-2"}),"Contact"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",onClick:q,disabled:U,children:[U?i.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}):i.jsx("i",{className:"ri-share-forward-line mr-2"}),"Convert to Inquiry"]})]})]})]})})})]})]})]})},vP=()=>{const[n,e]=E.useState("online"),[t,s]=E.useState(null),[l,c]=E.useState(!1),[d,f]=E.useState([]),[g,p]=E.useState(!0);E.useEffect(()=>{const w=Ze(Ie(be,"users"),kt("createdAt","desc")),k=kr(w,D=>{const U=D.docs.map(I=>{const z=I.data(),A=z.formData||{},q=z.source==="phone"?"phone":"online";let K="Recently";if(z.createdAt){if(z.createdAt instanceof De)K=z.createdAt.toDate().toLocaleDateString();else if(typeof z.createdAt=="string"){const ne=new Date(z.createdAt);isNaN(ne.getTime())?K=z.createdAt:K=ne.toLocaleDateString()}}const F=z.displayName||(z.firstName&&z.lastName?`${z.firstName} ${z.lastName}`:"")||(A.firstName&&A.lastName?`${A.firstName} ${A.lastName}`:"")||z.email||"Unknown User";return{id:I.id,name:F,type:q,email:z.email||A.email||"No email provided",phone:z.phone||A.phone||"No phone provided",message:z.message||A.message||"No message content",date:K,status:z.status||"new",fullData:z}});f(U),p(!1)},D=>{console.error("Error fetching inquiries:",D),p(!1)});return()=>k()},[]);const x=d.filter(w=>w.type===n),v=w=>{switch(w){case"new":return i.jsx(Ne,{color:"blue",children:"New"});case"in-progress":return i.jsx(Ne,{color:"yellow",children:"In Progress"});case"closed":return i.jsx(Ne,{color:"green",children:"Closed"});default:return i.jsx(Ne,{children:w})}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Inquiries"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage online and phone inquiries."})]}),i.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2 w-fit shadow-sm",children:[i.jsx("i",{className:"ri-phone-line"}),"Record Phone Inquiry"]})]}),i.jsx(TS,{isOpen:l,onClose:()=>c(!1),onSuccess:()=>{},variant:"detailed"}),"     ",i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:[i.jsx("button",{onClick:()=>e("online"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${n==="online"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Online Inquiries"}),i.jsx("button",{onClick:()=>e("phone"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${n==="phone"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Phone Inquiries"})]})}),g?i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[1,2,3].map(w=>i.jsx("div",{className:"h-48 bg-gray-100 dark:bg-gray-800 rounded-lg animate-pulse"},w))}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[x.map(w=>i.jsxs(ve,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(w),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${w.type==="online"?"bg-purple-100 dark:bg-purple-900":"bg-green-100 dark:bg-green-900"}`,children:i.jsx("i",{className:`${w.type==="online"?"ri-global-line text-purple-600 dark:text-purple-400":"ri-phone-line text-green-600 dark:text-green-400"} text-lg`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:w.name}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:w.type})]})]}),v(w.status)]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Date:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:w.date})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Email:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:w.email})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Phone:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:w.phone})]})]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-4",children:w.message})]},w.id)),x.length===0&&i.jsxs("div",{className:"col-span-full text-center py-10 text-gray-500 dark:text-gray-400",children:["No ",n," inquiries found."]})]}),t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Inquiry Details"}),i.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${t.type==="online"?"bg-purple-100 dark:bg-purple-900":"bg-green-100 dark:bg-green-900"}`,children:i.jsx("i",{className:`${t.type==="online"?"ri-global-line text-purple-600 dark:text-purple-400":"ri-phone-line text-green-600 dark:text-green-400"} text-2xl`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.name}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t.email}),v(t.status)]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Message"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:t.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400 block text-sm",children:"Phone"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:t.phone})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400 block text-sm",children:"Date"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:t.date})]})]})]})]})})})]})]})]})},Rp=[{id:"all",label:"All",filter:n=>!0},{id:"available",label:"Available",filter:n=>n.status==="Available"||!n.form2Completed&&!n.profileCompleted},{id:"potential",label:"Potential",filter:n=>n.status==="Potential"},{id:"records_review",label:"Records Review",filter:n=>n.status==="Records Review"},{id:"screening",label:"Screening",filter:n=>n.status==="Screening"},{id:"legal",label:"Legal",filter:n=>n.status==="Legal"},{id:"cycling",label:"Cycling",filter:n=>n.status==="Cycling"},{id:"pregnant",label:"Pregnant",filter:n=>n.status==="Pregnant"}],wP=()=>{const[n,e]=E.useState("all"),[t,s]=E.useState(null),[l,c]=E.useState([]),[d,f]=E.useState(!0),[g,p]=E.useState(null),x=dr();E.useEffect(()=>{const A=Ze(Ie(be,"users"),bn("role","==","Surrogate")),q=kr(A,K=>{const F=K.docs.map(ne=>({id:ne.id,...ne.data()}));c(F),f(!1),p(null)},K=>{console.error("Failed to load surrogates",K),p("Unable to load surrogate records. Please try again later."),f(!1)});return()=>q()},[]);const v=E.useMemo(()=>Rp.reduce((A,q)=>(A[q.id]=l.filter(K=>q.filter(K)).length,A),{}),[l]),w=E.useMemo(()=>{const A=Rp.find(q=>q.id===n);return A?l.filter(q=>A.filter(q)):l},[n,l]),k=A=>{switch(A.status){case"Available":return i.jsx(Ne,{color:"green",children:"Available"});case"Potential":return i.jsx(Ne,{color:"blue",children:"Potential"});case"Records Review":return i.jsx(Ne,{color:"yellow",children:"Records Review"});case"Screening":return i.jsx(Ne,{color:"purple",children:"Screening"});case"Legal":return i.jsx(Ne,{color:"indigo",children:"Legal"});case"Cycling":return i.jsx(Ne,{color:"pink",children:"Cycling"});case"Pregnant":return i.jsx(Ne,{color:"red",children:"Pregnant"});default:return A.form2Completed?i.jsx(Ne,{color:"green",children:"Form 2 Complete"}):A.profileCompleted?i.jsx(Ne,{color:"blue",children:"Profile Complete"}):i.jsx(Ne,{color:"gray",children:"Unknown"})}},D=A=>{const q=A.formData?.firstName,K=A.formData?.lastName,F=[q,K].filter(Boolean).join(" ");if(F.length>0)return F;const ne=A.firstName??"",O=A.lastName??"",L=[ne,O].filter(Boolean).join(" ");return L.length>0?L:A.email??"Surrogate"},U=A=>{const q=A.formData,K=q?.city??"",F=q?.state??"";return[K,F].filter(Boolean).join(", ")||"Not specified"},I=A=>(A.form2??{})?.pregnancyHistory?.total??A.form2?.surrogacyChildren??"",z=A=>A.form2?.availability??"Not provided";return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Surrogates Management"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage all registered surrogates and their profiles."})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:Rp.map(A=>i.jsxs("button",{onClick:()=>e(A.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${n===A.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[A.label," (",v[A.id]??0,")"]},A.id))})}),g&&i.jsx("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-900 dark:bg-red-950/60 dark:text-red-300",children:g}),d?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:Array.from({length:6}).map((A,q)=>i.jsx(ve,{className:"animate-pulse",children:i.jsx("div",{className:"h-48 w-full rounded-lg bg-gray-100 dark:bg-gray-800"})},q))}):i.jsx(i.Fragment,{children:w.length===0?i.jsx(ve,{className:"p-6 text-center text-gray-600 dark:text-gray-300",children:"No surrogate profiles match this filter."}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:w.map(A=>i.jsxs(ve,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(A),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-pink-100 dark:bg-pink-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-user-heart-line text-pink-600 dark:text-pink-400 text-lg"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:D(A)}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 break-all",children:["ID: ",A.id]})]})]}),k(A)]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Email:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right break-words",children:A.email??""})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right",children:U(A)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Experience:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right",children:I(A)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Availability:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right",children:z(A)})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(fe,{size:"sm",className:"flex-1",onClick:q=>{q.stopPropagation(),x(`/surrogates/${A.id}`)},children:[i.jsx("i",{className:"ri-eye-line mr-1"}),"View Profile"]}),i.jsx(fe,{size:"sm",color:"blue",children:i.jsx("i",{className:"ri-message-line"})})]})]},A.id))})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Surrogate Profile"}),i.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-pink-100 dark:bg-pink-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-user-heart-line text-pink-600 dark:text-pink-400 text-2xl"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:D(t)}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 break-all",children:["Surrogate ID: ",t.id]}),k(t)]})]}),i.jsx(Ut,{title:"Profile Overview",data:{Email:t.email,Role:t.role,"Profile Completed":t.profileCompleted,"Form 2 Completed":t.form2Completed,"Created At":t.createdAt,"Updated At":t.updatedAt}}),i.jsx(Ut,{title:"Form 1 Responses",data:t.formData??null,emptyMessage:"No form data available."}),i.jsx(Ut,{title:"Form 2 Responses",data:t.form2??null,emptyMessage:"Form 2 has not been completed."}),i.jsx(Ut,{title:"Additional Profile Data",data:t.form2Data??null,emptyMessage:"No additional data provided."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(fe,{color:"blue",className:"flex-1",children:[i.jsx("i",{className:"ri-links-line mr-2"}),"Create Match"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",children:[i.jsx("i",{className:"ri-message-line mr-2"}),"Send Message"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit Profile"]})]})]})]})})})]})]})]})},Ih=(n,e)=>{try{const t=n&&Object.keys(n).length>0,s=e&&Object.keys(e).length>0;return JSON.stringify((t?n:s?e:{})??{},null,2)}catch{return"{}"}},ln=({title:n,data:e,emptyMessage:t,description:s,templateData:l,onSave:c})=>{const[d,f]=E.useState(!1),[g,p]=E.useState(Ih(e,l)),[x,v]=E.useState(null),[w,k]=E.useState(!1),D=!e||Object.keys(e).length===0;E.useEffect(()=>{d||p(Ih(e,l))},[e,l,d]);const U=()=>{p(Ih(e,l)),v(null),f(!0)},I=()=>{f(!1),v(null),p(Ih(e,l))},z=async()=>{try{const A=g.trim()===""?{}:JSON.parse(g);if(A===null||Array.isArray(A)||typeof A!="object"){v("Please provide a valid JSON object.");return}k(!0),await c(A),k(!1),f(!1),v(null)}catch(A){console.error(A),k(!1),v("Unable to parse the JSON. Please ensure it is valid.")}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n}),s&&i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:s})]}),d?null:D?i.jsxs(fe,{size:"sm",color:"blue",onClick:U,children:[i.jsx("i",{className:"ri-add-line text-sm"}),"Add Details"]}):i.jsxs(fe,{size:"sm",variant:"outline",onClick:U,children:[i.jsx("i",{className:"ri-edit-line text-sm"}),"Edit"]})]}),d?i.jsxs(i.Fragment,{children:[i.jsx("textarea",{value:g,onChange:A=>p(A.target.value),rows:14,spellCheck:!1,className:"w-full rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-4 py-3 font-mono text-sm text-gray-800 dark:text-gray-100 shadow-inner focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:`{
  "example": "value"
}`}),x&&i.jsx("p",{className:"text-xs font-medium text-red-500 dark:text-red-400",children:x}),i.jsxs("div",{className:"flex items-center justify-end gap-3",children:[i.jsx(fe,{size:"sm",variant:"outline",onClick:I,disabled:w,children:"Cancel"}),i.jsx(fe,{size:"sm",color:"blue",onClick:z,disabled:w,children:w?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-loader-4-line animate-spin text-sm"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-save-3-line text-sm"}),"Save"]})})]})]}):i.jsx(Ut,{title:"",data:e??void 0,emptyMessage:t})]})},AS=({title:n,data:e,onSave:t,templateData:s,emptyMessage:l="No information provided.",type:c="parent"})=>{const[d,f]=E.useState(!1);if(d)return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n}),i.jsx(fe,{size:"sm",variant:"outline",onClick:()=>f(!1),children:"Cancel"})]}),i.jsx(ln,{title:"",data:e,onSave:async ne=>{await t(ne),f(!1)},templateData:s})]});if(!e||Object.values(e).every(ne=>!ne))return i.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-full mb-3",children:i.jsx("i",{className:"ri-user-smile-line text-3xl text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No About Info"}),i.jsx("p",{className:"text-sm text-gray-500 max-w-xs mx-auto mb-4",children:l}),i.jsxs(fe,{size:"sm",onClick:()=>f(!0),children:[i.jsx("i",{className:"ri-add-line mr-2"}),"Add Details"]})]});const g=ne=>e?.[ne],p=g("bio")||g("aboutUs"),x=g("age"),v=g("height"),w=g("occupation"),k=g("education"),D=g("religion"),U=g("relationshipPreference"),I=g("hobbies"),z=g("familyLifestyle"),A=g("heritage")||[g("bioMotherHeritage"),g("bioFatherHeritage")].filter(Boolean).join(" & "),q=g("amhStatus"),K=g("opennessToSecondCycle"),F=({icon:ne,label:O,value:L,className:j})=>L?i.jsxs("div",{className:`p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 border border-gray-100 dark:border-gray-700/50 flex items-start gap-4 ${j}`,children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-white dark:bg-gray-700 flex items-center justify-center text-primary-500 shadow-sm",children:i.jsx("i",{className:`${ne} text-xl`})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-0.5",children:O}),i.jsx("p",{className:"font-medium text-gray-900 dark:text-white leading-tight",children:L})]})]}):null;return i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[n,i.jsx("span",{className:"px-2.5 py-0.5 rounded-full bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 text-xs font-bold uppercase tracking-wider",children:c==="parent"?"Family Profile":"Surrogate Profile"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[x&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md bg-gray-100 dark:bg-gray-800 text-xs font-medium text-gray-600 dark:text-gray-300",children:[i.jsx("i",{className:"ri-cake-line"})," ",x," years"]}),v&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md bg-gray-100 dark:bg-gray-800 text-xs font-medium text-gray-600 dark:text-gray-300",children:[i.jsx("i",{className:"ri-ruler-line"})," ",v]})]})]}),i.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>f(!0),children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(F,{icon:"ri-briefcase-line",label:"Occupation",value:w}),i.jsx(F,{icon:"ri-graduation-cap-line",label:"Education",value:k}),i.jsx(F,{icon:"ri-heart-2-line",label:"Relationship Status",value:U}),A&&i.jsx(F,{icon:"ri-global-line",label:"Heritage",value:A}),D&&i.jsx(F,{icon:"ri-service-line",label:"Religion",value:D}),c==="surrogate"&&q&&i.jsx(F,{icon:"ri-test-tube-line",label:"AMH Level",value:q}),c==="surrogate"&&K&&i.jsx(F,{icon:"ri-loop-right-line",label:"Second Cycle",value:K})]}),p&&i.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("i",{className:"ri-double-quotes-l text-3xl text-primary-200 dark:text-primary-800"}),i.jsx("h3",{className:"text-lg font-semibold m-0",children:c==="parent"?"Our Story":"About Me"})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg leading-relaxed whitespace-pre-line pl-4 border-l-4 border-primary-100 dark:border-primary-900/50",children:p})]}),(I||z)&&i.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100 dark:border-gray-800",children:[I&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"ri-seedling-line"})," Hobbies & Interests"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:I.split(/[,\n&]/).filter(Boolean).map((ne,O)=>i.jsx("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-sm font-medium border border-blue-100 dark:border-blue-800/30",children:ne.trim()},O))})]}),z&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("h4",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"ri-home-heart-line"})," Family Lifestyle"]}),i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-xl border border-amber-100 dark:border-amber-800/30",children:i.jsxs("p",{className:"text-gray-700 dark:text-gray-300 italic",children:['"',z,'"']})})]})]})]})},_P=({isOpen:n,onClose:e,onConfirm:t,title:s,message:l,confirmLabel:c="Confirm",cancelLabel:d="Cancel",isDestructive:f=!1})=>n?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:i.jsx("div",{className:"w-full max-w-sm overflow-hidden bg-white rounded-2xl shadow-xl dark:bg-gray-800",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${f?"bg-red-100 text-red-600 dark:bg-red-900/20":"bg-blue-100 text-blue-600 dark:bg-blue-900/20"}`,children:i.jsx("i",{className:`text-xl ${f?"ri-error-warning-line":"ri-information-line"}`})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s})]}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l}),i.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[i.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 transition-colors bg-white border border-gray-300 rounded-xl hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",children:d}),i.jsx("button",{onClick:()=>{t(),e()},className:`px-4 py-2 text-sm font-medium text-white transition-colors rounded-xl ${f?"bg-red-600 hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600":"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600"}`,children:c})]})]})})}):null,NP=["Legal","Financial","Medical","Personal","Other"],CS=({title:n,description:e,userId:t,files:s=[],onFilesChange:l})=>{const[c,d]=E.useState(!1),[f,g]=E.useState(0),[p,x]=E.useState(!1),[v,w]=E.useState(null),[k,D]=E.useState("Other"),[U,I]=E.useState(null),z=E.useRef(null),A=C=>{C.preventDefault(),C.stopPropagation(),C.type==="dragenter"||C.type==="dragover"?x(!0):C.type==="dragleave"&&x(!1)},q=C=>{C.preventDefault(),C.stopPropagation(),x(!1),C.dataTransfer.files&&C.dataTransfer.files[0]&&F(C.dataTransfer.files[0])},K=C=>{C.target.files&&C.target.files[0]&&F(C.target.files[0])},F=async C=>{if(d(!0),g(0),w(null),!t){w("User ID is missing. Cannot upload."),d(!1);return}try{const T=`users/${t}/${k}/${Date.now()}_${C.name}`,S=cl(ul,T),M=Sy(S,C);M.on("state_changed",me=>{const Te=me.bytesTransferred/me.totalBytes*100;g(Te)},me=>{console.error("Upload failed:",me);let Te=`Upload failed: ${me.message}`;w(Te),d(!1)},async()=>{try{const me=await Ku(M.snapshot.ref),Te={name:C.name,url:me,category:k,uploadedAt:new Date().toISOString(),type:C.type,path:T},X=[...s,Te];await l(X),d(!1),z.current&&(z.current.value="")}catch(me){console.error("Error getting download URL:",me),w("Upload succeeded but failed to get file URL."),d(!1)}})}catch(T){console.error("Error starting upload:",T),w("Failed to start upload."),d(!1)}},ne=async()=>{if(!U)return;const T=(S=>{if(S.path)return S.path;try{const M=new URL(S.url),me=M.pathname.indexOf("/o/");if(me===-1)return null;const Te=M.pathname.substring(me+3);return decodeURIComponent(Te)}catch{return null}})(U);try{if(T){const M=cl(ul,T);await jS(M).catch(me=>{console.warn("File might not exist in storage or invalid path, proceeding to remove record:",me)})}else console.warn("Could not determine storage path, removing record only.");const S=s.filter(M=>M.url!==U.url);await l(S)}catch(S){console.error("Error deleting file:",S),alert("Failed to delete file.")}finally{I(null)}},O=C=>new Date(C).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),L=s.filter(C=>C.type.startsWith("image/")),j=s.filter(C=>!C.type.startsWith("image/"));return i.jsxs("div",{className:"space-y-6",children:[i.jsx(_P,{isOpen:!!U,onClose:()=>I(null),onConfirm:ne,title:"Delete File",message:`Are you sure you want to delete ${U?.name}? This action cannot be undone.`,confirmLabel:"Delete",isDestructive:!0}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-50",children:n}),e&&i.jsx("p",{className:"mt-1 text-sm text-emerald-700/80 dark:text-emerald-200/70",children:e})]}),i.jsxs("div",{className:`relative flex flex-col items-center justify-center rounded-3xl border-2 border-dashed p-8 transition-all
          ${p?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/10":"border-emerald-200 dark:border-emerald-800 hover:border-emerald-400 dark:hover:border-emerald-600 bg-white dark:bg-gray-900/50"}`,onDragEnter:A,onDragLeave:A,onDragOver:A,onDrop:q,children:[i.jsx("input",{ref:z,type:"file",className:"hidden",onChange:K,disabled:c}),i.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[i.jsx("div",{className:"rounded-full bg-emerald-100 p-5 dark:bg-emerald-900/30",children:c?i.jsxs("div",{className:"relative",children:[i.jsx("i",{className:"ri-loader-4-line animate-spin text-3xl text-emerald-600 dark:text-emerald-400"}),i.jsxs("span",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 text-xs font-bold text-emerald-700 dark:text-emerald-300",children:[Math.round(f),"%"]})]}):i.jsx("i",{className:"ri-upload-cloud-2-line text-3xl text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:c?"Uploading your file...":"Drop files here or click to upload"}),c&&i.jsx("div",{className:"mt-3 h-2 w-64 overflow-hidden rounded-full bg-emerald-100 dark:bg-emerald-900/30",children:i.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-300 ease-out",style:{width:`${f}%`}})}),!c&&i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Supports Images, PDF, and Documents"})]})]}),!c&&i.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-3",children:[i.jsx("select",{value:k,onChange:C=>D(C.target.value),className:"rounded-xl border-gray-200 bg-gray-50 py-2 pl-3 pr-8 text-sm font-semibold text-gray-700 focus:border-emerald-500 focus:ring-emerald-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200",children:NP.map(C=>i.jsx("option",{value:C,children:C},C))}),i.jsx(fe,{size:"sm",className:"bg-emerald-600 text-white hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 rounded-xl px-6",onClick:()=>z.current?.click(),children:"Select File"})]}),v&&i.jsxs("div",{className:"mt-6 flex items-center gap-2 rounded-lg bg-red-50 px-4 py-2 text-sm font-medium text-red-600 dark:bg-red-900/20 dark:text-red-400",children:[i.jsx("i",{className:"ri-error-warning-line"}),v]})]}),L.length>0&&i.jsxs("div",{children:[i.jsx("h4",{className:"mb-3 text-sm font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Photos"}),i.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:L.map((C,T)=>i.jsxs("div",{className:"group relative aspect-square overflow-hidden rounded-2xl bg-gray-100 dark:bg-gray-800",children:[i.jsx("img",{src:C.url,alt:C.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 transition-opacity group-hover:opacity-100"}),i.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 opacity-0 transition-opacity group-hover:opacity-100",children:[i.jsx("p",{className:"truncate text-xs font-medium text-white",children:C.name}),i.jsx("p",{className:"text-[10px] text-white/80",children:C.category})]}),i.jsx("button",{onClick:()=>I(C),className:"absolute right-2 top-2 rounded-full bg-white/20 p-1.5 text-white backdrop-blur-sm transition-colors hover:bg-red-500",title:"Delete image",children:i.jsx("i",{className:"ri-delete-bin-line text-sm"})})]},`${C.path}-${T}`))})]}),j.length>0&&i.jsxs("div",{children:[i.jsx("h4",{className:"mb-3 text-sm font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Documents"}),i.jsx("div",{className:"grid gap-3",children:j.map((C,T)=>i.jsxs("div",{className:"group flex items-center gap-4 rounded-2xl border border-gray-100 bg-white p-4 shadow-sm transition-all hover:border-emerald-200 hover:shadow-md dark:border-gray-800 dark:bg-gray-900 dark:hover:border-emerald-800",children:[i.jsx("div",{className:`flex h-12 w-12 shrink-0 items-center justify-center rounded-xl 
                  ${C.type.includes("pdf")?"bg-red-50 text-red-500 dark:bg-red-900/20":"bg-blue-50 text-blue-500 dark:bg-blue-900/20"}`,children:i.jsx("i",{className:`${C.type.includes("pdf")?"ri-file-pdf-line":"ri-file-text-line"} text-2xl`})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("a",{href:C.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-base font-semibold text-gray-900 hover:text-emerald-600 dark:text-gray-100 dark:hover:text-emerald-400",children:C.name}),i.jsxs("div",{className:"mt-1 flex items-center gap-3 text-xs text-gray-500",children:[i.jsx("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:C.category}),i.jsx("span",{className:"h-1 w-1 rounded-full bg-gray-300 dark:bg-gray-600"}),i.jsx("span",{children:O(C.uploadedAt)})]})]}),i.jsxs("div",{className:"flex items-center gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:[i.jsx("a",{href:C.url,download:!0,className:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-emerald-600 dark:hover:bg-gray-800",title:"Download",children:i.jsx("i",{className:"ri-download-line text-lg"})}),i.jsx("button",{onClick:()=>I(C),className:"rounded-lg p-2 text-gray-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20",title:"Delete",children:i.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})]},`${C.path}-${T}`))})]}),s.length===0&&!c&&i.jsx("div",{className:"py-8 text-center",children:i.jsx("p",{className:"text-sm text-gray-400",children:"No documents or media uploaded yet."})})]})},Ay=({message:n,subMessage:e,type:t="success",onClose:s,duration:l=3e3})=>{E.useEffect(()=>{const g=setTimeout(()=>{s()},l);return()=>clearTimeout(g)},[l,s]);const c={success:"bg-emerald-50 dark:bg-emerald-900/30 border-emerald-200 dark:border-emerald-800",error:"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800",info:"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800"},d={success:"text-emerald-500 dark:text-emerald-400",error:"text-red-500 dark:text-red-400",info:"text-blue-500 dark:text-blue-400"},f={success:"ri-checkbox-circle-fill",error:"ri-error-warning-fill",info:"ri-information-fill"};return i.jsx("div",{className:"fixed bottom-6 right-6 z-50 animate-slide-up",children:i.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg shadow-lg border ${c[t]} max-w-md`,children:[i.jsx("i",{className:`${f[t]} ${d[t]} text-xl mt-0.5`}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:n}),e&&i.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs mt-1",children:e})]}),i.jsx("button",{onClick:s,className:"ml-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:i.jsx("i",{className:"ri-close-line"})})]})})},io="medical_records",lo="medications",Mr={getAllRecords:async()=>{try{const n=Ze(Ie(be,io),kt("date","desc"));return(await tt(n)).docs.map(t=>({id:t.id,...t.data()}))}catch(n){throw console.error("Error fetching medical records:",n),n}},createRecord:async n=>{try{return(await Tr(Ie(be,io),{...n,createdAt:De.now()})).id}catch(e){throw console.error("Error creating medical record:",e),e}},updateRecord:async(n,e)=>{try{const t=ct(be,io,n);await Vt(t,{...e})}catch(t){throw console.error("Error updating medical record:",t),t}},deleteRecord:async n=>{try{await rl(ct(be,io,n))}catch(e){throw console.error("Error deleting medical record:",e),e}},getAllMedications:async()=>{try{const n=Ze(Ie(be,lo),kt("startDate","desc"));return(await tt(n)).docs.map(t=>({id:t.id,...t.data()}))}catch(n){throw console.error("Error fetching medications:",n),n}},addMedication:async n=>{try{return(await Tr(Ie(be,lo),{...n})).id}catch(e){throw console.error("Error creating medication:",e),e}},updateMedication:async(n,e)=>{try{const t=ct(be,lo,n);await Vt(t,{...e})}catch(t){throw console.error("Error updating medication:",t),t}},deleteMedication:async n=>{try{await rl(ct(be,lo,n))}catch(e){throw console.error("Error deleting medication:",e),e}},getRecordsBySurrogateId:async n=>{try{const e=Ze(Ie(be,io),bn("userId","==",n),kt("date","desc"));return(await tt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.warn("Error fetching surrogate records (possibly missing index), trying simple fetch",e);try{const t=Ze(Ie(be,io));return(await tt(t)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.userId===n||l.surrogateId===n).sort((l,c)=>c.date.localeCompare(l.date))}catch(t){return console.error("Fallback fetch also failed",t),[]}}},getMedicationsBySurrogateId:async n=>{try{const e=Ze(Ie(be,lo),bn("userId","==",n));return(await tt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.error("Error fetching surrogate medications:",e),console.warn("Error fetching surrogate medications (possibly missing index), trying simple fetch",e);try{const t=Ze(Ie(be,lo));return(await tt(t)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.userId===n||l.surrogateId===n)}catch(t){return console.error("Fallback fetch also failed",t),[]}}}},oo="payments",eu={getAllPayments:async()=>{try{const n=Ze(Ie(be,oo),kt("dueDate","desc"));return(await tt(n)).docs.map(t=>({id:t.id,...t.data()}))}catch(n){throw console.error("Error fetching payments:",n),n}},createPayment:async n=>{try{return(await Tr(Ie(be,oo),{...n,createdAt:De.now()})).id}catch(e){throw console.error("Error creating payment:",e),e}},updatePayment:async(n,e)=>{try{const t=ct(be,oo,n);await Vt(t,{...e})}catch(t){throw console.error("Error updating payment:",t),t}},deletePayment:async n=>{try{await rl(ct(be,oo,n))}catch(e){throw console.error("Error deleting payment:",e),e}},getPaymentsBySurrogateId:async n=>{try{const e=Ze(Ie(be,oo),bn("surrogateId","==",n),kt("dueDate","desc"));return(await tt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.warn("Error fetching surrogate payments (possibly missing index), trying simple fetch",e);const t=Ze(Ie(be,oo),bn("surrogateId","==",n));try{return(await tt(t)).docs.map(l=>({id:l.id,...l.data()})).sort((l,c)=>c.dueDate.localeCompare(l.dueDate))}catch(s){return console.error("Fallback fetch also failed",s),[]}}}},RS={firstName:"",lastName:"",role:"",profileCompleted:!1,form2Completed:!1,profileCompletedAt:"",form2CompletedAt:""},IS={firstName:"",lastName:"",email:"",phoneNumber:"",city:"",state:"",country:"",zip:"",address:"",whenToStart:"",preferredContactMethod:""},jP={availability:"",pregnancyHistory:{total:"",vaginal:"",cSection:""},surrogacyChildren:"",bmi:"",smoker:!1,medications:"",supportSystem:""},EP={preferences:"",notes:"",availabilityWindow:"",languages:[]},_N={bioMotherHeritage:"",bioFatherHeritage:"",education:"",occupation:"",age:"",height:"",relationshipPreference:"",amhStatus:"",opennessToSecondCycle:"",bio:"",caption:""},NN={bio:"",age:"",aboutUs:"",relationshipPreference:"",familyLifestyle:"",occupation:"",education:"",heritage:"",religion:"",hobbies:"",caption:""},kP={fertilityClinic:"",embryosAvailable:"",embryoQuality:"",medicalHistory:"",timeline:"",surrogacyBudget:"",legalCounsel:""},SP={clinicName:"",physician:"",clinicContact:"",embryoReport:"",geneticTesting:""},jN={name:"",dateOfBirth:"",occupation:"",phoneNumber:"",email:"",preferredPronouns:"",notes:""},TP={location:"",experiencePreference:"",communicationStyle:"",budgetRange:"",lifestylePreferences:""},AP={ivfEvaluationSummary:"",ovarianReserveAMH:"",semenAnalysis:"",diagnosis:""},CP={hiv:"",hbsag:"",hcv:"",vdrl:"",cmv:""},RP={embryoFreezingReport:"",donorScreeningReport:""},IP={gynecologicalExam:"",obstetricHistory:"",bmi:"",bp:"",generalHealthClearance:""},DP={hiv:"",hbsag:"",hcv:"",vdrl:"",torch:""},OP={mentalHealthClearanceDoc:""},EN=["firstName","lastName","role","profileCompleted","form2Completed","profileCompletedAt","form2CompletedAt"],MP=["Available","Potential","Records Review","Screening","Legal","Cycling","Pregnant"],PP=[{id:"overview",label:"Overview",icon:"ri-dashboard-line"},{id:"about",label:"About",icon:"ri-information-line"},{id:"personal",label:"Personal & Intake",icon:"ri-user-line"},{id:"medical_intake",label:"Medical Intake",icon:"ri-file-shield-line"},{id:"clinical",label:"Clinical Care",icon:"ri-stethoscope-line"},{id:"compensation",label:"Compensation",icon:"ri-money-dollar-circle-line"},{id:"documents",label:"Documents",icon:"ri-folder-open-line"}],LP=()=>{const{id:n}=QN(),e=dr(),[t,s]=E.useState(null),[l,c]=E.useState(!0),[d,f]=E.useState(null),[g,p]=E.useState(!1),[x,v]=E.useState(null),[w,k]=E.useState(!1),[D,U]=E.useState("overview"),I=Hh.useRef(null),[z,A]=E.useState([]),[q,K]=E.useState([]),[F,ne]=E.useState([]),O=E.useMemo(()=>n?ct(be,"users",n):null,[n]);E.useEffect(()=>{if(!n){f("No surrogate id provided."),c(!1);return}if(!O){s(null),f("Surrogate profile not found."),c(!1);return}const G=kr(O,xe=>{xe.exists()?(s({id:xe.id,...xe.data()}),f(null)):(s(null),f("Surrogate profile not found.")),c(!1)},xe=>{console.error("Failed to load surrogate profile",xe),f("Unable to load surrogate profile. Please try again later."),s(null),c(!1)});return(async()=>{try{const[xe,Ee,Be]=await Promise.all([Mr.getRecordsBySurrogateId(n),Mr.getMedicationsBySurrogateId(n),eu.getPaymentsBySurrogateId(n)]);A(xe),K(Ee),ne(Be)}catch(xe){console.error("Failed to load clinical/financial data",xe)}})(),()=>G()},[n,O]);const L=G=>{if(!G)return"";if(typeof G=="string"||typeof G=="number"){const he=new Date(G);return Number.isNaN(he.getTime())?String(G):he.toLocaleString()}return typeof G=="object"&&G!==null&&"toDate"in G&&typeof G.toDate=="function"?G.toDate().toLocaleString():String(G)},j=E.useMemo(()=>{if(!t)return"Surrogate Profile";const G=t.formData?.firstName,he=t.formData?.lastName,xe=[G,he].filter(Boolean).join(" ");if(xe.length>0)return xe;const Ee=t.firstName??"",Be=t.lastName??"",rt=[Ee,Be].filter(Boolean).join(" ");return rt.length>0?rt:t.email??"Surrogate Profile"},[t]),C=E.useMemo(()=>j&&j.split(" ").filter(Boolean).map(G=>G[0]?.toUpperCase()??"").join("").slice(0,2)||"FM",[j]),T=E.useMemo(()=>{if(!t)return null;const G=t.formData,he=G?.city?.trim(),xe=G?.state?.trim(),Ee=[he,xe].filter(Boolean).join(", ");return Ee.length>0?Ee:null},[t]),S=E.useMemo(()=>{if(!t)return null;const he=t.form2?.availability??t.form2Data?.availability;return he?String(he):null},[t]),M=E.useMemo(()=>{if(!t)return null;const G=t.form2??{},he=G?.pregnancyHistory?.total,xe=G?.surrogacyChildren??t.form2Data?.surrogacyChildren;return he?`${he} pregnancies`:xe?`${xe} surrogacy journey${xe==="1"?"":"s"}`:null},[t]),me=E.useMemo(()=>L(t?.createdAt),[t]),Te=E.useMemo(()=>L(t?.updatedAt),[t]),X=E.useMemo(()=>[t?.email&&{icon:"ri-mail-line",label:"Email",value:t.email},T&&{icon:"ri-map-pin-line",label:"Location",value:T},S&&{icon:"ri-calendar-check-line",label:"Availability",value:S}].filter(Boolean),[S,T,t?.email]),H=E.useMemo(()=>[{label:"Profile Status",value:t?.profileCompleted?"Ready":"In Progress",icon:t?.profileCompleted?"ri-heart-3-line":"ri-time-line",className:t?.profileCompleted?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"bg-amber-500/10 text-amber-400 border border-amber-500/20"},{label:"Form 2",value:t?.form2Completed?"Complete":"Pending",icon:t?.form2Completed?"ri-clipboard-check-line":"ri-clipboard-line",className:t?.form2Completed?"bg-fuchsia-500/10 text-fuchsia-400 border border-fuchsia-500/20":"bg-blue-500/10 text-blue-400 border border-blue-500/20"},{label:"Experience",value:M??"",icon:"ri-user-heart-line",className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200"},{label:"Last Updated",value:Te,icon:"ri-refresh-line",className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200"}],[M,t?.form2Completed,t?.profileCompleted,Te]),ue=E.useMemo(()=>t?EN.reduce((G,he)=>(he in t&&t[he]!==void 0&&(G[he]=t[he]),G),{}):null,[t]),ge=E.useCallback(async(G,he)=>{O&&await Vt(O,{[G]:he})},[O]),ee=E.useCallback(async G=>{if(!O)return;const he=Object.keys(G).reduce((xe,Ee)=>(EN.includes(Ee)&&(xe[Ee]=G[Ee]),xe),{});Object.keys(he).length!==0&&await Vt(O,he)},[O]),V=async G=>{if(O){p(!0);try{await Vt(O,{status:G}),v({message:"Status updated successfully",type:"success"})}catch(he){console.error("Failed to update status",he),v({message:"Failed to update status",type:"error"})}finally{p(!1)}}},W=E.useMemo(()=>{if(!t)return null;const G=t.about??{},he=t.formData??{},xe=he.form2??{},Ee=(...Ln)=>Ln.find(hr=>hr!=null&&hr!==""),Be=Ee(G.age,t.age,he.age,xe.age);let rt="";if(!Be&&he.dateOfBirth)try{const Ln=new Date(he.dateOfBirth);if(!isNaN(Ln.getTime())){const hr=Date.now()-Ln.getTime(),Lo=new Date(hr);rt=String(Math.abs(Lo.getUTCFullYear()-1970))}}catch(Ln){console.error("Error calculating age",Ln)}const bt=Ee(G.height,t.height,he.height,xe.height),pe=Ee(G.education,t.education,he.educationLevel,xe.educationLevel,he["Education Level"]),Ue=Ee(G.occupation,t.occupation,he.occupation,xe.occupation,he.Occupation),Ae=Ee(G.bioMotherHeritage,t.bioMotherHeritage,he.ethnicity,xe.ethnicity,he.Ethnicity),yt=Ee(G.bioFatherHeritage,t.bioFatherHeritage),Yt=Ee(G.relationshipPreference,t.relationshipPreference,he.relationshipStatus,xe.relationshipStatus,he["Relationship Status"]),fs=Ee(G.amhStatus,t.amhStatus),na=Ee(G.opennessToSecondCycle,t.opennessToSecondCycle),ra=Ee(G.bio,t.bio,he.messageToParents,xe.messageToParents,he["Message To Parents"],he.surrogacyReasons,xe.surrogacyReasons,he["Surrogacy Reasons"]);return{..._N,...G,age:Be?String(Be):rt,height:bt?String(bt):"",education:pe||"",occupation:Ue||"",bioMotherHeritage:Ae||"",bioFatherHeritage:yt||"",relationshipPreference:Yt||"",amhStatus:fs||"",opennessToSecondCycle:na||"",bio:ra||""}},[t]),ie=async G=>{const he=G.target.files?.[0];if(!(!he||!O)){if(!he.type.startsWith("image/")){v({message:"Please upload an image file",type:"error"});return}if(he.size>5*1024*1024){v({message:"File size must be less than 5MB",type:"error"});return}try{k(!0);const xe=cl(ul,`users/${n}/profile/avatar_${Date.now()}_${he.name}`),Ee=Sy(xe,he);await new Promise((Be,rt)=>{Ee.on("state_changed",null,bt=>rt(bt),async()=>{try{const bt=await Ku(Ee.snapshot.ref);await Vt(O,{profileImageUrl:bt}),v({message:"Profile picture updated successfully",type:"success"}),Be()}catch(bt){rt(bt)}})})}catch(xe){console.error("Error uploading image:",xe),v({message:"Failed to upload profile picture",type:"error"})}finally{k(!1),I.current&&(I.current.value="")}}},we=G=>{switch(G){case"Paid":return"green";case"Pending":return"yellow";case"Overdue":return"red";default:return"gray"}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),x&&i.jsx(Ay,{message:x.message,type:x.type,onClose:()=>v(null)}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs(fe,{variant:"outline",onClick:()=>e("/surrogates"),children:[i.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to list"]})}),l?i.jsx("div",{className:"grid gap-6",children:i.jsx(ve,{className:"animate-pulse h-48",children:i.jsx("div",{className:"h-full w-full rounded-xl bg-gray-100 dark:bg-gray-800"})})}):d?i.jsx(ve,{className:"p-6 text-red-600 dark:text-red-400",children:d}):t?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-rose-500 via-fuchsia-500 to-indigo-500 p-8 text-white shadow-2xl",children:[i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.3),_transparent_65%)] opacity-80"}),i.jsxs("div",{className:"relative flex flex-col gap-8 lg:flex-row lg:items-center lg:justify-between",children:[i.jsxs("div",{className:"flex items-start gap-6",children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-2xl border border-white/40 bg-white/10 text-3xl font-semibold backdrop-blur-xl overflow-hidden",children:t.profileImageUrl?i.jsx("img",{src:t.profileImageUrl,alt:j,className:"h-full w-full object-cover"}):C}),i.jsx("button",{onClick:()=>I.current?.click(),disabled:w,className:"absolute inset-0 flex items-center justify-center bg-black/40 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer disabled:cursor-not-allowed",title:"Change profile picture",children:w?i.jsx("i",{className:"ri-loader-4-line animate-spin text-white text-xl"}):i.jsx("i",{className:"ri-camera-line text-white text-xl"})}),i.jsx("input",{type:"file",ref:I,onChange:ie,accept:"image/*",className:"hidden"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-semibold leading-tight",children:j}),i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white/80",children:[i.jsx("i",{className:"ri-user-heart-line text-sm"}),"Surrogate"]})]}),i.jsx("p",{className:"mt-3 text-sm text-white/80",children:"Compassionate partner ready to support intended parents throughout the journey."}),i.jsx("div",{className:"mt-4 flex flex-wrap gap-3 text-sm font-medium text-white/90",children:X.map(G=>i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur-md",children:[i.jsx("i",{className:`${G.icon} text-base text-white/90`}),i.jsx("span",{children:G.value})]},G.label))})]})]}),i.jsxs("div",{className:"flex flex-col gap-3 text-sm text-white/80",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur",children:[i.jsx("i",{className:"ri-donut-chart-line text-base text-white/90"}),i.jsx("span",{className:"font-medium mr-1",children:"Status:"}),i.jsx("select",{value:t.status||"Available",onChange:G=>V(G.target.value),disabled:g,className:"bg-transparent border-none text-white focus:ring-0 cursor-pointer py-0 pl-0 pr-8 font-semibold [&>option]:text-gray-900 [&>option]:bg-white",children:MP.map(G=>i.jsx("option",{value:G,children:G},G))})]}),i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur",children:[i.jsx("i",{className:"ri-hashtag text-base text-white/90"}),"ID: ",t.id]}),i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur",children:[i.jsx("i",{className:"ri-time-line text-base text-white/90"}),"Joined: ",me]})]})]})]}),i.jsx("div",{className:"flex overflow-x-auto border-b border-gray-200 dark:border-gray-700 no-scrollbar",children:PP.map(G=>i.jsxs("button",{onClick:()=>U(G.id),className:`
                            flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap
                            ${D===G.id?"border-primary-500 text-primary-600 dark:border-primary-400 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
                        `,children:[i.jsx("i",{className:G.icon}),G.label]},G.id))}),i.jsxs("div",{className:"space-y-6",children:[D==="overview"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:H.map(G=>i.jsx(ve,{padding:"sm",className:`${G.className} border-none shadow-sm backdrop-blur`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide opacity-70",children:G.label}),i.jsx("p",{className:"mt-2 text-lg font-semibold",children:G.value})]}),i.jsx("span",{className:"text-xl opacity-70",children:i.jsx("i",{className:G.icon})})]})},G.label))}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[i.jsx(ve,{className:"xl:col-span-2",children:i.jsx(ln,{title:"Core Profile",description:"Update the surrogates headline details such as role and completion flags.",data:ue,emptyMessage:"No core profile data available.",templateData:RS,onSave:ee})}),i.jsx(ve,{className:"xl:col-span-2",children:i.jsx(ln,{title:"Additional Profile Data",description:"Capture any supplementary information stored alongside the surrogate profile.",data:t.form2Data??null,emptyMessage:"No additional data provided.",templateData:EP,onSave:G=>ge("form2Data",G)})})]})]}),D==="about"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-12",children:[i.jsx("div",{className:"xl:col-span-5 space-y-4",children:i.jsxs("div",{className:"columns-1 gap-4 sm:columns-2 space-y-4",children:[t.profileImageUrl&&i.jsx("div",{className:"break-inside-avoid overflow-hidden rounded-2xl bg-gray-100 dark:bg-gray-800 shadow-md",children:i.jsx("img",{src:t.profileImageUrl,alt:j,className:"h-full w-full object-cover"})}),t.documents?.filter(G=>{const he=G.type?.startsWith("image/"),xe=/\.(jpg|jpeg|png|gif|webp)$/i.test(G.name),Ee=!G.type;return he||xe||Ee&&xe}).map((G,he)=>i.jsxs("div",{className:"break-inside-avoid overflow-hidden rounded-2xl bg-gray-100 dark:bg-gray-800 shadow-md group relative",children:[i.jsx("img",{src:G.url,alt:G.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}),i.jsx("div",{className:"absolute inset-0 bg-black/0 transition-colors group-hover:bg-black/10"})]},`${G.url}-${he}`)),!t.profileImageUrl&&(!t.documents||!t.documents.some(G=>G.type?.startsWith("image/")||/\.(jpg|jpeg|png|gif|webp)$/i.test(G.name)))&&i.jsx("div",{className:"break-inside-avoid flex aspect-[3/4] w-full items-center justify-center rounded-2xl bg-gray-100 dark:bg-gray-800 text-4xl text-gray-300 dark:text-gray-600",children:i.jsx("i",{className:"ri-image-line"})})]})}),i.jsx("div",{className:"xl:col-span-7 space-y-6",children:i.jsx(ve,{children:i.jsx(AS,{title:`About ${t.firstName||"Surrogate"}`,data:W,type:"surrogate",templateData:_N,onSave:G=>ge("about",G)})})})]}),D==="personal"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[i.jsx(ve,{children:i.jsx(ln,{title:"Form 1 Responses",description:"Update the initial intake form shared by the surrogate.",data:t.formData??null,emptyMessage:"No form data available.",templateData:IS,onSave:G=>ge("formData",G)})}),i.jsx(ve,{children:i.jsx(ln,{title:"Form 2 Responses",description:"Modify detailed screening information.",data:t.form2??null,emptyMessage:"Form 2 has not been completed.",templateData:jP,onSave:G=>ge("form2",G)})})]}),D==="medical_intake"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[i.jsx(ve,{className:"xl:col-span-2",children:i.jsx(ln,{title:"Comprehensive Medical Fitness Certificate",description:"Gynecological exam, obstetric history, BMI, BP, and general health clearance.",data:t.form2?.medicalFitness??null,emptyMessage:"No medical fitness report available.",templateData:IP,onSave:G=>ge("form2.medicalFitness",G)})}),i.jsx(ve,{children:i.jsx(ln,{title:"Infectious Disease Screening Report",description:"Screening results for HIV, HBsAg, HCV, VDRL, TORCH.",data:t.form2?.infectiousDisease??null,emptyMessage:"No screening report available.",templateData:DP,onSave:G=>ge("form2.infectiousDisease",G)})}),i.jsx(ve,{children:i.jsx(ln,{title:"Psychological / Mental Health Clearance",description:"Upload evaluation by certified psychologist/psychiatrist.",data:t.form2?.psychClearance??null,emptyMessage:"No psychological clearance available.",templateData:OP,onSave:G=>ge("form2.psychClearance",G)})})]}),D==="clinical"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[i.jsxs(ve,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Active Medications"}),i.jsx(fe,{size:"sm",onClick:()=>e("/medical"),children:"Manage Meds"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 rounded-l-lg",children:"Name"}),i.jsx("th",{className:"px-4 py-3",children:"Dosage"}),i.jsx("th",{className:"px-4 py-3",children:"Frequency"}),i.jsx("th",{className:"px-4 py-3",children:"Start Date"}),i.jsx("th",{className:"px-4 py-3 rounded-r-lg",children:"Status"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:q.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No medications found."})}):q.map(G=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white",children:G.name}),i.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:G.dosage}),i.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:G.frequency}),i.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:G.startDate}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:G.status})})]},G.id))})]})})]}),i.jsxs(ve,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Medical Records"}),i.jsx(fe,{size:"sm",onClick:()=>e("/medical"),children:"View All Records"})]}),i.jsx("div",{className:"space-y-4",children:z.length===0?i.jsx("div",{className:"text-center text-gray-500 py-8",children:"No medical records found."}):z.map(G=>i.jsxs("div",{className:"flex items-start justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"mt-1",children:i.jsx("i",{className:"ri-file-list-3-line text-xl text-blue-500"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:G.title}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[G.date,"  ",G.type]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:G.summary})]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i.jsx(Ne,{color:G.status==="Verified"?"green":"yellow",children:G.status}),G.sharedWithParents&&i.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx("i",{className:"ri-eye-line"})," Shared"]})]})]},G.id))})]})]}),D==="compensation"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(ve,{className:"bg-gradient-to-br from-green-500 to-emerald-600 text-white border-none",children:[i.jsx("div",{className:"text-green-100 mb-1",children:"Total Paid"}),i.jsxs("div",{className:"text-2xl font-bold",children:["$",F.filter(G=>G.status==="Paid").reduce((G,he)=>G+Number(he.amount),0).toLocaleString()]})]}),i.jsxs(ve,{className:"bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-1",children:"Pending Approval"}),i.jsxs("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-500",children:["$",F.filter(G=>G.status==="Pending").reduce((G,he)=>G+Number(he.amount),0).toLocaleString()]})]}),i.jsxs(ve,{className:"bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-1",children:"Next Payment"}),i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-500",children:F.filter(G=>G.status==="Scheduled").sort((G,he)=>G.dueDate.localeCompare(he.dueDate))[0]?.dueDate||""})]})]}),i.jsxs(ve,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Payment History"}),i.jsx(fe,{size:"sm",onClick:()=>e("/payments"),children:"Manage Payments"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 rounded-l-lg",children:"Type"}),i.jsx("th",{className:"px-4 py-3",children:"Amount"}),i.jsx("th",{className:"px-4 py-3",children:"Due Date"}),i.jsx("th",{className:"px-4 py-3",children:"Status"}),i.jsx("th",{className:"px-4 py-3 rounded-r-lg",children:"Notes"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:F.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No payments found."})}):F.map(G=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white",children:G.type}),i.jsxs("td",{className:"px-4 py-3 font-mono font-medium",children:["$",Number(G.amount).toLocaleString()]}),i.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:G.dueDate}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(Ne,{color:we(G.status),children:G.status})}),i.jsx("td",{className:"px-4 py-3 text-gray-500 truncate max-w-xs",children:G.notes})]},G.id))})]})})]})]}),D==="documents"&&i.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.jsx(ve,{children:i.jsx(CS,{title:"Documents & Media",description:"Upload legal contracts, receipts, medical reports, and other documents.",userId:t.id,files:t.documents??[],onFilesChange:G=>ge("documents",G)})})})]})]}):i.jsx(ve,{className:"p-6 text-gray-600 dark:text-gray-300",children:"Surrogate profile not found."})]})]})]})},Ip=[{id:"all",label:"All",filter:n=>!0},{id:"to_be_matched",label:"To be Matched",filter:n=>n.status==="To be Matched"||!n.form2Completed&&!n.profileCompleted},{id:"matched",label:"Matched",filter:n=>n.status==="Matched"},{id:"rematch",label:"Rematch",filter:n=>n.status==="Rematch"}],UP=()=>{const[n,e]=E.useState("all"),[t,s]=E.useState(null),[l,c]=E.useState([]),[d,f]=E.useState(!0),[g,p]=E.useState(null),x=dr();E.useEffect(()=>{const A=Ze(Ie(be,"users"),bn("role","==","Intended Parent")),q=kr(A,K=>{const F=K.docs.map(ne=>({id:ne.id,...ne.data()}));c(F),f(!1),p(null)},K=>{console.error("Failed to load intended parents",K),p("Unable to load intended parent records. Please try again later."),f(!1)});return()=>q()},[]);const v=E.useMemo(()=>Ip.reduce((A,q)=>(A[q.id]=l.filter(K=>q.filter(K)).length,A),{}),[l]),w=E.useMemo(()=>{const A=Ip.find(q=>q.id===n);return A?l.filter(q=>A.filter(q)):l},[n,l]),k=A=>{switch(A.status){case"To be Matched":return i.jsx(Ne,{color:"yellow",children:"To be Matched"});case"Matched":return i.jsx(Ne,{color:"green",children:"Matched"});case"Rematch":return i.jsx(Ne,{color:"red",children:"Rematch"});default:return A.form2Completed?i.jsx(Ne,{color:"green",children:"Form 2 Complete"}):A.profileCompleted?i.jsx(Ne,{color:"blue",children:"Profile Complete"}):i.jsx(Ne,{color:"gray",children:"Unknown"})}},D=A=>{const q=A.parent1?.name;if(q&&q.trim().length>0)return q;const K=A.formData?.firstName,F=A.formData?.lastName,ne=[K,F].filter(Boolean).join(" ");if(ne.length>0)return ne;const O=A.firstName??"",L=A.lastName??"",j=[O,L].filter(Boolean).join(" ");return j.length>0?j:A.email??"Intended Parent"},U=A=>{const q=A.formData,K=q?.city??"",F=q?.state??"";return[K,F].filter(Boolean).join(", ")||"Not specified"},I=A=>A.formData?.whenToStart??"No timeline set",z=A=>A.form2Data?.budget??"Not provided";return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Intended Parents"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage all intended parents and their journey progress."})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:Ip.map(A=>i.jsxs("button",{onClick:()=>e(A.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${n===A.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[A.label," (",v[A.id]??0,")"]},A.id))})}),g&&i.jsx("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-900 dark:bg-red-950/60 dark:text-red-300",children:g}),d?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:Array.from({length:6}).map((A,q)=>i.jsx(ve,{className:"animate-pulse",children:i.jsx("div",{className:"h-48 w-full rounded-lg bg-gray-100 dark:bg-gray-800"})},q))}):i.jsx(i.Fragment,{children:w.length===0?i.jsx(ve,{className:"p-6 text-center text-gray-600 dark:text-gray-300",children:"No intended parents found for this filter."}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:w.map(A=>i.jsxs(ve,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(A),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-parent-line text-purple-600 dark:text-purple-400 text-lg"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:D(A)}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 break-all",children:["ID: ",A.id]})]})]}),k(A)]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Email:"}),i.jsx("span",{className:"text-gray-900 dark:text-white break-words text-right",children:A.email??""})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right",children:U(A)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Timeline:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right",children:I(A)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Budget:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right",children:z(A)})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(fe,{size:"sm",className:"flex-1",onClick:q=>{q.stopPropagation(),x(`/parents/${A.id}`)},children:[i.jsx("i",{className:"ri-eye-line mr-1"}),"View Profile"]}),i.jsx(fe,{size:"sm",color:"blue",children:i.jsx("i",{className:"ri-message-line"})})]})]},A.id))})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Intended Parents Profile"}),i.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-parent-line text-purple-600 dark:text-purple-400 text-2xl"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:D(t)}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 break-all",children:["Parent ID: ",t.id]}),k(t)]})]}),i.jsx(Ut,{title:"Profile Overview",data:{Email:t.email,Role:t.role,"Profile Completed":t.profileCompleted,"Form 2 Completed":t.form2Completed,"Created At":t.createdAt,"Updated At":t.updatedAt}}),i.jsx(Ut,{title:"Form 1 Responses",data:t.formData??null,emptyMessage:"No form data available."}),i.jsx(Ut,{title:"Form 2 Responses",data:t.form2Data??null,emptyMessage:"Form 2 has not been completed."}),i.jsx(Ut,{title:"Fertility Information",data:t.form2Data?.fertility??null,emptyMessage:"No fertility information provided."}),i.jsx(Ut,{title:"Parent 1",data:t.parent1??null,emptyMessage:"Parent 1 details not provided."}),i.jsx(Ut,{title:"Parent 2",data:t.parent2??null,emptyMessage:"Parent 2 details not provided."}),i.jsx(Ut,{title:"Surrogate Preferences",data:t.surrogateRelated??null,emptyMessage:"No surrogate preferences captured."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(fe,{color:"blue",className:"flex-1",children:[i.jsx("i",{className:"ri-links-line mr-2"}),"Find Match"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",children:[i.jsx("i",{className:"ri-message-line mr-2"}),"Send Message"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit Profile"]})]})]})]})})})]})]})]})},kN=["firstName","lastName","role","profileCompleted","form2Completed","profileCompletedAt","form2CompletedAt"],VP=["To be Matched","Matched","Rematch"],zP=[{id:"overview",label:"Overview",icon:"ri-dashboard-line"},{id:"about",label:"About",icon:"ri-information-line"},{id:"personal",label:"Personal",icon:"ri-user-line"},{id:"medical",label:"Medical & Fertility",icon:"ri-stethoscope-line"},{id:"intake",label:"Intake & Preferences",icon:"ri-file-list-3-line"},{id:"documents",label:"Documents",icon:"ri-folder-open-line"}],FP=()=>{const{id:n}=QN(),e=dr(),[t,s]=E.useState(null),[l,c]=E.useState(!0),[d,f]=E.useState(null),[g,p]=E.useState(!1),[x,v]=E.useState(null),[w,k]=E.useState(!1),[D,U]=E.useState("overview"),I=Hh.useRef(null),z=E.useMemo(()=>n?ct(be,"users",n):null,[n]);E.useEffect(()=>{if(!n){f("No parent id provided."),c(!1);return}if(!z){s(null),f("Parent profile not found."),c(!1);return}const H=kr(z,ue=>{ue.exists()?(s({id:ue.id,...ue.data()}),f(null)):(s(null),f("Parent profile not found.")),c(!1)},ue=>{console.error("Failed to load parent profile",ue),f("Unable to load parent profile. Please try again later."),s(null),c(!1)});return()=>H()},[n,z]);const A=H=>{if(!H)return"";if(typeof H=="string"||typeof H=="number"){const ue=new Date(H);return Number.isNaN(ue.getTime())?String(H):ue.toLocaleString()}return typeof H=="object"&&H!==null&&"toDate"in H&&typeof H.toDate=="function"?H.toDate().toLocaleString():String(H)},q=E.useMemo(()=>{if(!t)return"Parent Profile";const H=t.parent1?.name;if(H&&H.trim().length>0)return H;const ue=t.formData?.firstName,ge=t.formData?.lastName,ee=[ue,ge].filter(Boolean).join(" ");if(ee.length>0)return ee;const V=t.firstName??"",W=t.lastName??"",ie=[V,W].filter(Boolean).join(" ");return ie.length>0?ie:t.email??"Parent Profile"},[t]),K=E.useMemo(()=>q&&q.split(" ").filter(Boolean).map(H=>H[0]?.toUpperCase()??"").join("").slice(0,2)||"FM",[q]),F=E.useMemo(()=>{if(!t)return null;const H=t.formData,ue=H?.city?.trim(),ge=H?.state?.trim(),ee=[ue,ge].filter(Boolean).join(", ");return ee.length>0?ee:null},[t]),ne=E.useMemo(()=>t?t.formData?.whenToStart??null:null,[t]),O=E.useMemo(()=>A(t?.createdAt),[t]),L=E.useMemo(()=>A(t?.updatedAt),[t]),j=E.useMemo(()=>[t?.email&&{icon:"ri-mail-line",label:"Email",value:t.email},F&&{icon:"ri-map-pin-line",label:"Location",value:F},ne&&{icon:"ri-timer-line",label:"Intended Timeline",value:ne}].filter(Boolean),[F,t?.email,ne]),C=E.useMemo(()=>[{label:"Profile Status",value:t?.profileCompleted?"Complete":"In Progress",icon:t?.profileCompleted?"ri-shield-check-line":"ri-time-line",className:t?.profileCompleted?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"bg-amber-500/10 text-amber-400 border border-amber-500/20"},{label:"Form 2",value:t?.form2Completed?"Submitted":"Pending",icon:t?.form2Completed?"ri-file-check-line":"ri-draft-line",className:t?.form2Completed?"bg-indigo-500/10 text-indigo-400 border border-indigo-500/20":"bg-blue-500/10 text-blue-400 border border-blue-500/20"},{label:"Created",value:O,icon:"ri-calendar-line",className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200"},{label:"Last Updated",value:L,icon:"ri-refresh-line",className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200"}],[O,t?.form2Completed,t?.profileCompleted,L]),T=E.useMemo(()=>t?kN.reduce((H,ue)=>(ue in t&&t[ue]!==void 0&&(H[ue]=t[ue]),H),{}):null,[t]),S=E.useCallback(async(H,ue)=>{z&&await Vt(z,{[H]:ue})},[z]),M=E.useCallback(async H=>{if(!z)return;const ue=Object.keys(H).reduce((ge,ee)=>(kN.includes(ee)&&(ge[ee]=H[ee]),ge),{});Object.keys(ue).length!==0&&await Vt(z,ue)},[z]),me=async H=>{if(z){p(!0);try{await Vt(z,{status:H}),v({message:"Status updated successfully",type:"success"})}catch(ue){console.error("Failed to update status",ue),v({message:"Failed to update status",type:"error"})}finally{p(!1)}}},Te=async H=>{const ue=H.target.files?.[0];if(!(!ue||!z)){if(!ue.type.startsWith("image/")){v({message:"Please upload an image file",type:"error"});return}if(ue.size>5*1024*1024){v({message:"File size must be less than 5MB",type:"error"});return}try{k(!0);const ge=cl(ul,`users/${n}/profile/avatar_${Date.now()}_${ue.name}`),ee=Sy(ge,ue);await new Promise((V,W)=>{ee.on("state_changed",null,ie=>W(ie),async()=>{try{const ie=await Ku(ee.snapshot.ref);await Vt(z,{profileImageUrl:ie}),v({message:"Profile picture updated successfully",type:"success"}),V()}catch(ie){W(ie)}})})}catch(ge){console.error("Error uploading image:",ge),v({message:"Failed to upload profile picture",type:"error"})}finally{k(!1),I.current&&(I.current.value="")}}},X=E.useMemo(()=>{if(!t)return null;const H=t.about??{},ue=t.formData??{},ge=t.form2Data??{},ee=t.parent1??{},V=t.parent2??{},W=(...yt)=>yt.find(Yt=>Yt!=null&&Yt!==""),ie=W(H.bio,t.bio,[ge?.parent1?.aboutYourself,ge?.parent2?.aboutYourself].filter(Boolean).join(`

`),ee?.aboutYourself),we=W(H.aboutUs,ue.message,ue.whySurrogate,ge?.surrogateRelated?.additionalInfoForSurrogate,ue.messageToSurrogate,ge.familyDescription),G=W(H.relationshipPreference,t.relationshipPreference,ge?.surrogateRelated?.pregnancyRelationship,ue.relationshipType),he=W(H.occupation,t.occupation,[ge?.parent1?.occupation,ge?.parent2?.occupation].filter(Boolean).join(" & "),[ee.occupation,V.occupation].filter(Boolean).join(" & ")),xe=W(H.education,t.education,[ge?.parent1?.education,ge?.parent2?.education].filter(Boolean).join(" & "),[ee.education,V.education].filter(Boolean).join(" & ")),Ee=W(H.hobbies,[ge?.parent1?.hobbiesInterests,ge?.parent2?.hobbiesInterests].filter(Boolean).join(", ")),Be=W(H.religion,[ge?.parent1?.religion,ge?.parent2?.religion].filter(Boolean).join(" & ")),rt=W(H.familyLifestyle,[ge?.parent1?.personalityDescription,ge?.parent2?.personalityDescription].filter(Boolean).join(`

`)),bt=yt=>{if(!yt)return"";try{const Yt=new Date(yt);if(isNaN(Yt.getTime()))return"";const fs=Date.now()-Yt.getTime(),na=new Date(fs);return Math.abs(na.getUTCFullYear()-1970).toString()}catch{return""}},pe=ee?.age||bt(ee?.dob)||bt(ge?.parent1?.dob),Ue=V?.age||bt(V?.dob)||bt(ge?.parent2?.dob),Ae=W(H.age,t.age,ue?.age,[pe,Ue].filter(yt=>yt&&yt!=="0").join(" & "));return{...NN,...H,bio:ie||"",age:Ae||"",aboutUs:we||"",relationshipPreference:G||"",occupation:he||"",education:xe||"",hobbies:Ee||"",religion:Be||"",familyLifestyle:rt||""}},[t]);return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),x&&i.jsx(Ay,{message:x.message,type:x.type,onClose:()=>v(null)}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs(fe,{variant:"outline",onClick:()=>e("/parents"),children:[i.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to list"]})}),l?i.jsxs("div",{className:"grid gap-6",children:[i.jsx(ve,{className:"animate-pulse h-48",children:i.jsx("div",{className:"h-full w-full rounded-xl bg-gray-100 dark:bg-gray-800"})}),i.jsx(ve,{className:"animate-pulse h-48",children:i.jsx("div",{className:"h-full w-full rounded-xl bg-gray-100 dark:bg-gray-800"})})]}):d?i.jsx(ve,{className:"p-6 text-red-600 dark:text-red-400",children:d}):t?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-600 p-8 text-white shadow-2xl",children:[i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.28),_transparent_60%)] opacity-70"}),i.jsxs("div",{className:"relative flex flex-col gap-8 lg:flex-row lg:items-center lg:justify-between",children:[i.jsxs("div",{className:"flex items-start gap-6",children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-2xl border border-white/30 bg-white/10 text-3xl font-semibold backdrop-blur-xl overflow-hidden",children:t.profileImageUrl?i.jsx("img",{src:t.profileImageUrl,alt:q,className:"h-full w-full object-cover"}):K}),i.jsx("button",{onClick:()=>I.current?.click(),disabled:w,className:"absolute inset-0 flex items-center justify-center bg-black/40 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer disabled:cursor-not-allowed",title:"Change profile picture",children:w?i.jsx("i",{className:"ri-loader-4-line animate-spin text-white text-xl"}):i.jsx("i",{className:"ri-camera-line text-white text-xl"})}),i.jsx("input",{type:"file",ref:I,onChange:Te,accept:"image/*",className:"hidden"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-semibold leading-tight",children:q}),i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white/80",children:[i.jsx("i",{className:"ri-parent-line text-sm"}),"Intended Parent"]})]}),i.jsx("p",{className:"mt-3 text-sm text-white/80",children:"Building their family journey through the Family Matters program."}),i.jsx("div",{className:"mt-4 flex flex-wrap gap-3 text-sm font-medium text-white/90",children:j.map(H=>i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur-md",children:[i.jsx("i",{className:`${H.icon} text-base text-white/90`}),i.jsx("span",{children:H.value})]},H.label))})]})]}),i.jsxs("div",{className:"flex flex-col gap-3 text-sm text-white/80",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur",children:[i.jsx("i",{className:"ri-donut-chart-line text-base text-white/90"}),i.jsx("span",{className:"font-medium mr-1",children:"Status:"}),i.jsx("select",{value:t.status||"To be Matched",onChange:H=>me(H.target.value),disabled:g,className:"bg-transparent border-none text-white focus:ring-0 cursor-pointer py-0 pl-0 pr-8 font-semibold [&>option]:text-gray-900 [&>option]:bg-white",children:VP.map(H=>i.jsx("option",{value:H,children:H},H))})]}),i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur",children:[i.jsx("i",{className:"ri-hashtag text-base text-white/90"}),"ID: ",t.id]})]})]})]}),i.jsx("div",{className:"flex overflow-x-auto border-b border-gray-200 dark:border-gray-700 no-scrollbar",children:zP.map(H=>i.jsxs("button",{onClick:()=>U(H.id),className:`
                            flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap
                            ${D===H.id?"border-primary-500 text-primary-600 dark:border-primary-400 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
                        `,children:[i.jsx("i",{className:H.icon}),H.label]},H.id))}),i.jsxs("div",{className:"space-y-6",children:[D==="overview"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:C.map(H=>i.jsx(ve,{padding:"sm",className:`${H.className} border-none shadow-sm backdrop-blur`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide opacity-70",children:H.label}),i.jsx("p",{className:"mt-2 text-lg font-semibold",children:H.value})]}),i.jsx("span",{className:"text-xl opacity-70",children:i.jsx("i",{className:H.icon})})]})},H.label))}),i.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.jsx(ve,{className:"xl:col-span-2",children:i.jsx(ln,{title:"Core Profile",description:"Update top-level information such as role and completion status.",data:T,emptyMessage:"No core profile data available.",templateData:RS,onSave:M})})})]}),D==="about"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-12",children:[i.jsx("div",{className:"xl:col-span-5 space-y-4",children:i.jsxs("div",{className:"columns-1 gap-4 sm:columns-2 space-y-4",children:[t.profileImageUrl&&i.jsx("div",{className:"break-inside-avoid overflow-hidden rounded-2xl bg-gray-100 dark:bg-gray-800 shadow-md",children:i.jsx("img",{src:t.profileImageUrl,alt:q,className:"h-full w-full object-cover"})}),t.documents?.filter(H=>{const ue=H.type?.startsWith("image/"),ge=/\.(jpg|jpeg|png|gif|webp)$/i.test(H.name),ee=!H.type;return ue||ge||ee&&ge}).map((H,ue)=>i.jsxs("div",{className:"break-inside-avoid overflow-hidden rounded-2xl bg-gray-100 dark:bg-gray-800 shadow-md group relative",children:[i.jsx("img",{src:H.url,alt:H.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}),i.jsx("div",{className:"absolute inset-0 bg-black/0 transition-colors group-hover:bg-black/10"})]},`${H.url}-${ue}`)),!t.profileImageUrl&&(!t.documents||!t.documents.some(H=>H.type?.startsWith("image/")||/\.(jpg|jpeg|png|gif|webp)$/i.test(H.name)))&&i.jsx("div",{className:"break-inside-avoid flex aspect-[3/4] w-full items-center justify-center rounded-2xl bg-gray-100 dark:bg-gray-800 text-4xl text-gray-300 dark:text-gray-600",children:i.jsx("i",{className:"ri-image-line"})})]})}),i.jsx("div",{className:"xl:col-span-7 space-y-6",children:i.jsx(ve,{children:i.jsx(AS,{title:`About ${q}`,data:X,type:"parent",templateData:NN,onSave:H=>S("about",H)})})})]}),D==="personal"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[i.jsx(ve,{children:i.jsx(ln,{title:"Parent 1",description:"Edit details for Parent 1.",data:t.parent1??null,emptyMessage:"Parent 1 details not provided.",templateData:jN,onSave:H=>S("parent1",H)})}),i.jsx(ve,{children:i.jsx(ln,{title:"Parent 2",description:"Edit details for Parent 2.",data:t.parent2??null,emptyMessage:"Parent 2 details not provided.",templateData:jN,onSave:H=>S("parent2",H)})})]}),D==="medical"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[i.jsx(ve,{className:"xl:col-span-2",children:i.jsx(ln,{title:"Fertility Information",description:"Capture fertility clinic, embryo and related details.",data:t.form2Data?.fertility??null,emptyMessage:"No fertility information provided.",templateData:SP,onSave:H=>S("form2Data.fertility",H)})}),i.jsx(ve,{className:"xl:col-span-2",children:i.jsx(ln,{title:"Fertility & Reproductive Health Report",description:"IVF evaluation, ovarian reserve, and diagnosis.",data:t.form2Data?.fertilityReport??null,emptyMessage:"No fertility report available.",templateData:AP,onSave:H=>S("form2Data.fertilityReport",H)})}),i.jsx(ve,{children:i.jsx(ln,{title:"Infectious Disease Screening Report",description:"Screening results for HIV, HBsAg, HCV, VDRL, CMV.",data:t.form2Data?.infectiousDisease??null,emptyMessage:"No screening report available.",templateData:CP,onSave:H=>S("form2Data.infectiousDisease",H)})}),i.jsx(ve,{children:i.jsx(ln,{title:"Embryo / Gamete Medical Records",description:"Embryo freezing and donor screening reports.",data:t.form2Data?.embryoRecords??null,emptyMessage:"No embryo records available.",templateData:RP,onSave:H=>S("form2Data.embryoRecords",H)})})]}),D==="intake"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[i.jsx(ve,{children:i.jsx(ln,{title:"Form 1 Responses",description:"Update the intake details shared by the intended parents.",data:t.formData??null,emptyMessage:"No form data available.",templateData:IS,onSave:H=>S("formData",H)})}),i.jsx(ve,{children:i.jsx(ln,{title:"Form 2 Responses",description:"Modify the extended questionnaire answers for this family.",data:t.form2Data??null,emptyMessage:"Form 2 has not been completed.",templateData:kP,onSave:H=>S("form2Data",H)})}),i.jsx(ve,{className:"xl:col-span-2",children:i.jsx(ln,{title:"Surrogate Preferences",description:"Fine-tune the family's preferences for potential surrogates.",data:t.surrogateRelated??null,emptyMessage:"No surrogate preferences captured.",templateData:TP,onSave:H=>S("surrogateRelated",H)})})]}),D==="documents"&&i.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.jsx(ve,{children:i.jsx(CS,{title:"Documents & Media",description:"Upload legal contracts, receipts, medical reports, and other documents.",userId:t.id,files:t.documents??[],onFilesChange:H=>S("documents",H)})})})]})]}):i.jsx(ve,{className:"p-6 text-gray-600 dark:text-gray-300",children:"Parent profile not found."})]})]})]})},BP=()=>{const[n,e]=E.useState("all"),[t,s]=E.useState(null),[l,c]=E.useState([]),[d,f]=E.useState(!0);E.useEffect(()=>{g()},[]);const g=async()=>{f(!0);try{const k=(await tt(Ie(be,"cases"))).docs.map(D=>({id:D.id,surrogateId:D.data().surrogateId||"",surrogateName:D.data().surrogateName||"Unknown",parentId:D.data().parentId||"",parentName:D.data().parentName||"Unknown",status:D.data().currentStage||"Matching",createdAt:D.data().createdAt?.toDate()||new Date,currentStage:D.data().currentStage||"Matching"}));c(k)}catch(w){console.error("Error fetching matches:",w),c([])}finally{f(!1)}},p=n==="all"?l:l.filter(w=>w.status.toLowerCase()===n),x=w=>{switch(w.toLowerCase()){case"matching":return i.jsx(Ne,{color:"yellow",children:"Matching"});case"screening":case"medical":case"legal":return i.jsx(Ne,{color:"blue",children:w});case"pregnancy":return i.jsx(Ne,{color:"green",children:"Pregnancy"});case"completed":return i.jsx(Ne,{color:"green",children:"Completed"});default:return i.jsx(Ne,{children:w})}},v=[{id:"all",label:"All Matches",count:l.length},{id:"matching",label:"Matching",count:l.filter(w=>w.status.toLowerCase()==="matching").length},{id:"screening",label:"Screening",count:l.filter(w=>w.status.toLowerCase()==="screening").length},{id:"pregnancy",label:"Pregnancy",count:l.filter(w=>w.status.toLowerCase()==="pregnancy").length},{id:"completed",label:"Completed",count:l.filter(w=>w.status.toLowerCase()==="completed").length}];return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Matches Management"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track all surrogate-parent matches and their journey progress."})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit flex-wrap",children:v.map(w=>i.jsxs("button",{onClick:()=>e(w.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${n===w.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[w.label," (",w.count,")"]},w.id))})}),d?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):p.length===0?i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("i",{className:"ri-links-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No matches found."})]}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:p.map(w=>i.jsxs(ve,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(w),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-links-line text-green-600 dark:text-green-400 text-lg"})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["Match #",w.id.slice(0,8)]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Created ",w.createdAt.toLocaleDateString()]})]})]}),x(w.status)]}),i.jsxs("div",{className:"space-y-4 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[i.jsx("div",{className:"w-8 h-8 bg-pink-100 dark:bg-pink-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-user-heart-line text-pink-600 dark:text-pink-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:w.surrogateName}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Surrogate"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[i.jsx("div",{className:"w-8 h-8 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-parent-line text-purple-600 dark:text-purple-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:w.parentName}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Intended Parents"})]})]})]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs(fe,{size:"sm",className:"flex-1",children:[i.jsx("i",{className:"ri-eye-line mr-1"}),"View Details"]})})]},w.id))}),t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Match Details"}),i.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-links-line text-green-600 dark:text-green-400 text-2xl"})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Match #",t.id.slice(0,8)]}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Created on ",t.createdAt.toLocaleDateString()]}),x(t.status)]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{className:"p-4 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[i.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"ri-user-heart-line text-pink-600 dark:text-pink-400"}),"Surrogate Information"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:t.surrogateName}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",t.surrogateId.slice(0,8)]})]})]}),i.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[i.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"ri-parent-line text-purple-600 dark:text-purple-400"}),"Intended Parents"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:t.parentName}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",t.parentId.slice(0,8)]})]})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsx(fe,{color:"blue",className:"flex-1",onClick:()=>s(null),children:"Close"})})]})]})})})]})]})]})},Hc="appointments",Wi={getAllAppointments:async()=>{try{const n=Ze(Ie(be,Hc),kt("date","desc"),kt("time","asc"));return(await tt(n)).docs.map(t=>({id:t.id,...t.data()}))}catch(n){throw console.error("Error fetching appointments:",n),n}},createAppointment:async n=>{try{return(await Tr(Ie(be,Hc),{...n,createdAt:De.now(),updatedAt:De.now()})).id}catch(e){throw console.error("Error creating appointment:",e),e}},updateAppointment:async(n,e)=>{try{const t=ct(be,Hc,n);await Vt(t,{...e,updatedAt:De.now()})}catch(t){throw console.error("Error updating appointment:",t),t}},deleteAppointment:async n=>{try{await rl(ct(be,Hc,n))}catch(e){throw console.error("Error deleting appointment:",e),e}},getAppointmentsByType:async n=>{try{const e=Ze(Ie(be,Hc),bn("type","==",n),kt("date","desc"));return(await tt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("Error fetching appointments by type:",e),e}}},yf=({options:n,value:e,onChange:t,placeholder:s="Select an option...",label:l,className:c="",required:d=!1})=>{const[f,g]=E.useState(!1),[p,x]=E.useState(""),v=E.useRef(null),w=E.useRef(null),k=n.find(I=>I.id===e),D=n.filter(I=>I.name.toLowerCase().includes(p.toLowerCase()));E.useEffect(()=>{const I=z=>{v.current&&!v.current.contains(z.target)&&g(!1)};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]),E.useEffect(()=>{f&&w.current&&w.current.focus(),f||x("")},[f]);const U=I=>{t(I),g(!1)};return i.jsxs("div",{className:`relative ${c}`,ref:v,children:[l&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l}),i.jsxs("div",{onClick:()=>g(!f),className:`w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none cursor-pointer flex justify-between items-center ${f?"ring-2 ring-blue-500 border-transparent":""}`,children:[i.jsx("span",{className:k?"":"text-gray-500 dark:text-gray-400",children:k?k.name:s}),i.jsx("i",{className:`ri-arrow-down-s-line transition-transform ${f?"rotate-180":""}`})]}),f&&i.jsxs("div",{className:"absolute z-[60] mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[i.jsx("div",{className:"p-2 border-b border-gray-100 dark:border-gray-700",children:i.jsxs("div",{className:"relative",children:[i.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),i.jsx("input",{ref:w,type:"text",className:"w-full pl-9 pr-4 py-2 text-sm bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white",placeholder:"Search...",value:p,onChange:I=>x(I.target.value),autoFocus:!0})]})}),i.jsx("div",{className:"max-h-60 overflow-y-auto",children:D.length>0?D.map(I=>i.jsxs("div",{onClick:()=>U(I.id),className:`px-4 py-2 text-sm cursor-pointer transition-colors flex items-center justify-between ${I.id===e?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[i.jsx("span",{children:I.name}),I.id===e&&i.jsx("i",{className:"ri-check-line"})]},I.id)):i.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center italic",children:"No results found"})})]}),d&&!e&&i.jsx("input",{tabIndex:-1,autoComplete:"off",style:{opacity:0,height:0,width:0,position:"absolute"},required:!0,value:"",onChange:()=>{}})]})},Eu=({value:n,onChange:e,onSelect:t,role:s,label:l="Select User",placeholder:c="Search surrogate or parent...",required:d=!1})=>{const[f,g]=E.useState([]),[p,x]=E.useState(!0);return E.useEffect(()=>{(async()=>{try{const w=Ie(be,"users"),D=Ze(w,bn("role","in",s?[s]:["Surrogate","Intended Parent"])),I=(await tt(D)).docs.map(z=>{const A=z.data();let q="";return A.formData&&(q=[A.formData.firstName,A.formData.lastName].filter(Boolean).join(" ")),!q&&A.parent1?.name&&(q=A.parent1.name),q||(q=[A.firstName,A.lastName].filter(Boolean).join(" ")),q||(q=A.email||"Unknown User"),{id:z.id,name:`${q} (${A.role})`,role:A.role}});g(I.sort((z,A)=>z.name.localeCompare(A.name)))}catch(w){console.error("Error fetching users for selector:",w)}finally{x(!1)}})()},[]),p?i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-2"}),i.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded-lg w-full"})]}):i.jsx(yf,{label:l,placeholder:c,options:f,value:n,onChange:v=>{if(e(v),t){const w=f.find(k=>k.id===v);w&&t(w)}},required:d})},em=({isOpen:n,onClose:e,onSuccess:t,initialData:s={}})=>{const[l,c]=E.useState(!1),[d,f]=E.useState(!1),[g,p]=E.useState({title:"",type:"Screening",date:new Date().toISOString().split("T")[0],doctor:"",facility:"",summary:"",status:"Pending",sharedWithParents:!1,...s}),[x,v]=E.useState({name:"",dosage:"",frequency:"",startDate:new Date().toISOString().split("T")[0],status:"Active"}),w=async k=>{k.preventDefault(),c(!0);try{let D=g.id;if(D)await Mr.updateRecord(D,g);else{const U=await Mr.createRecord(g)}d&&x.name&&await Mr.addMedication(x),t&&t(),e()}catch(D){console.error("Error saving medical information:",D)}finally{c(!1)}};return n?i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[100] backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl animate-in fade-in zoom-in duration-200",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:g.id?"Edit Medical Record":"New Medical Record"}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer transition-colors",children:i.jsx("i",{className:"ri-close-line text-2xl text-gray-500"})})]}),i.jsxs("form",{onSubmit:w,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400 border-b border-blue-100 dark:border-blue-900 pb-2 flex items-center gap-2",children:[i.jsx("i",{className:"ri-file-list-3-line"})," Record Details"]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),i.jsx("input",{type:"text",placeholder:"e.g. Initial Screening",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:g.title||"",onChange:k=>p({...g,title:k.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),i.jsxs("select",{className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:g.type,onChange:k=>p({...g,type:k.target.value}),children:[i.jsx("option",{children:"Screening"}),i.jsx("option",{children:"Lab Result"}),i.jsx("option",{children:"Ultrasound"}),i.jsx("option",{children:"Vaccination"}),i.jsx("option",{children:"Examination"}),i.jsx("option",{children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date"}),i.jsx("input",{type:"date",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:g.date||"",onChange:k=>p({...g,date:k.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Doctor"}),i.jsx("input",{type:"text",placeholder:"Enter physician name",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:g.doctor||"",onChange:k=>p({...g,doctor:k.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Facility"}),i.jsx("input",{type:"text",placeholder:"Medical center/Clinic",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:g.facility||"",onChange:k=>p({...g,facility:k.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Summary / Notes"}),i.jsx("textarea",{placeholder:"Additional details about the visit or findings...",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none",rows:3,value:g.summary||"",onChange:k=>p({...g,summary:k.target.value})})]}),i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[i.jsx("input",{type:"checkbox",id:"share-parents",className:"w-5 h-5 rounded text-blue-600 focus:ring-blue-500 cursor-pointer",checked:g.sharedWithParents,onChange:k=>p({...g,sharedWithParents:k.target.checked})}),i.jsxs("label",{htmlFor:"share-parents",className:"text-sm text-gray-700 dark:text-gray-300 cursor-pointer flex items-center gap-2",children:[i.jsx("i",{className:"ri-eye-line text-green-500"}),"Automatically share this record with parents"]})]})]}),i.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700",children:[i.jsxs("button",{type:"button",onClick:()=>f(!d),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors font-semibold ${d?"text-red-600 bg-red-50 dark:bg-red-900/20":"text-purple-600 bg-purple-50 dark:bg-purple-900/20"}`,children:[i.jsx("i",{className:d?"ri-subtract-line":"ri-add-line"}),d?"Remove Medication Block":"Add Medication to this Record"]}),d&&i.jsxs("div",{className:"mt-4 p-4 bg-purple-50/50 dark:bg-purple-900/10 border border-purple-100 dark:border-purple-900/30 rounded-xl space-y-4 animate-in slide-in-from-top-2 duration-300",children:[i.jsxs("h3",{className:"text-purple-700 dark:text-purple-400 font-bold flex items-center gap-2",children:[i.jsx("i",{className:"ri-capsule-line"})," New Medication"]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Medication Name"}),i.jsx("input",{type:"text",placeholder:"e.g. Prenatal Vitamins",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none",value:x.name||"",onChange:k=>v({...x,name:k.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Dosage"}),i.jsx("input",{type:"text",placeholder:"e.g. 500mg",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none",value:x.dosage||"",onChange:k=>v({...x,dosage:k.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Frequency"}),i.jsx("input",{type:"text",placeholder:"e.g. Once daily",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none",value:x.frequency||"",onChange:k=>v({...x,frequency:k.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none",value:x.startDate||"",onChange:k=>v({...x,startDate:k.target.value})})]})]})]}),i.jsxs("div",{className:"flex gap-4 pt-4",children:[i.jsx(fe,{type:"button",variant:"outline",className:"flex-1 py-3 text-lg",onClick:e,children:"Cancel"}),i.jsx(fe,{type:"submit",color:"blue",className:"flex-1 py-3 text-lg shadow-lg shadow-blue-500/30",disabled:l,children:l?i.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[i.jsx("i",{className:"ri-loader-4-line animate-spin"})," Saving..."]}):"Save Records"})]})]})]})})}):null},SN=[{id:"all",label:"All Appointments"},{id:"consultation",label:"Consultations"},{id:"medical",label:"Medical"},{id:"legal",label:"Legal"},{id:"psychological",label:"Psychological"}],qP=()=>{const[n,e]=E.useState("all"),[t,s]=E.useState(null),[l,c]=E.useState("list"),[d,f]=E.useState([]),[g,p]=E.useState(!0),[x,v]=E.useState(null),[w,k]=E.useState(new Date),[D,U]=E.useState(!1),[I,z]=E.useState(!1),[A,q]=E.useState(!1),[K,F]=E.useState({title:"",type:"consultation",date:"",time:"",duration:"",participants:[],location:"",status:"scheduled",notes:"",userId:""}),[ne,O]=E.useState(""),L=async()=>{p(!0);try{const ee=await Wi.getAllAppointments();f(Array.isArray(ee)?ee:[]),v(null)}catch(ee){console.error(ee),v("Failed to load appointments"),f([])}finally{p(!1)}};E.useEffect(()=>{L()},[]);const j=E.useMemo(()=>Array.isArray(d)?n==="all"?d:d.filter(ee=>ee.type===n):[],[d,n]),C=ee=>{switch(ee?ee.toLowerCase():"unknown"){case"confirmed":return i.jsx(Ne,{color:"green",children:"Confirmed"});case"pending":return i.jsx(Ne,{color:"yellow",children:"Pending"});case"scheduled":return i.jsx(Ne,{color:"blue",children:"Scheduled"});case"completed":return i.jsx(Ne,{color:"gray",children:"Completed"});case"cancelled":return i.jsx(Ne,{color:"red",children:"Cancelled"});default:return i.jsx(Ne,{children:ee||"Unknown"})}},T=ee=>{switch(ee?ee.toLowerCase():"other"){case"consultation":return"ri-discuss-line";case"medical":return"ri-health-book-line";case"legal":return"ri-file-text-line";case"psychological":return"ri-mind-map";default:return"ri-calendar-line"}},S=ee=>{switch(ee?ee.toLowerCase():"other"){case"consultation":return"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400";case"medical":return"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400";case"legal":return"bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-400";case"psychological":return"bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}},M=ee=>{k(V=>{const W=new Date(V);return ee==="prev"?W.setMonth(V.getMonth()-1):W.setMonth(V.getMonth()+1),W})},me=ee=>{const V=ee.getFullYear(),W=ee.getMonth(),ie=new Date(V,W,1),G=new Date(V,W+1,0).getDate(),he=ie.getDay(),xe=[];for(let Ee=0;Ee<he;Ee++)xe.push(null);for(let Ee=1;Ee<=G;Ee++)xe.push(Ee);return xe},Te=()=>{q(!1),F({title:"",type:"consultation",date:new Date().toISOString().split("T")[0],time:"09:00",duration:"60 min",participants:[],location:"",status:"scheduled",notes:""}),O(""),U(!0)},X=ee=>{q(!0),F(ee),O(Array.isArray(ee.participants)?ee.participants.join(", "):""),U(!0),s(null)},H=async ee=>{ee.preventDefault(),p(!0);try{const V=ne.split(",").map(ie=>ie.trim()).filter(ie=>ie),W={...K,participants:V};A&&W.id?await Wi.updateAppointment(W.id,W):await Wi.createAppointment(W),await L(),U(!1)}catch(V){console.error(V),v("Failed to save appointment")}finally{p(!1)}},ue=async ee=>{if(window.confirm("Are you sure you want to delete this appointment?")){p(!0);try{await Wi.deleteAppointment(ee),await L(),s(null)}catch{v("Failed to delete appointment")}finally{p(!1)}}},ge=ee=>Array.isArray(ee.participants)?ee.participants.length:0;return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Appointments"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage all appointments and scheduling."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[i.jsxs("button",{onClick:()=>c("list"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors cursor-pointer ${l==="list"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400"}`,children:[i.jsx("i",{className:"ri-list-unordered mr-1"}),"List"]}),i.jsxs("button",{onClick:()=>c("calendar"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors cursor-pointer ${l==="calendar"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400"}`,children:[i.jsx("i",{className:"ri-calendar-line mr-1"}),"Calendar"]})]}),i.jsxs(fe,{color:"blue",onClick:Te,children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Appointment"]})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:SN.map(ee=>i.jsxs("button",{onClick:()=>e(ee.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${n===ee.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[ee.label," (",ee.id==="all"?d.length:d.filter(V=>V.type===ee.id).length,")"]},ee.id))})}),x&&i.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:x}),g&&!D?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):l==="list"?i.jsx("div",{className:"space-y-4",children:j.length===0?i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("i",{className:"ri-calendar-event-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No appointments found."})]}):j.map(ee=>i.jsx(ve,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(ee),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${S(ee.type)}`,children:i.jsx("i",{className:`${T(ee.type)} text-lg`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:ee.title}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[ee.date," at ",ee.time,"  ",ee.duration]}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ee.location})]})]}),i.jsxs("div",{className:"text-right",children:[C(ee.status),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[ge(ee)," participants"]})]})]})},ee.id))}):i.jsx(ve,{children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize",children:[w.toLocaleString("default",{month:"long"})," ",w.getFullYear()]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",onClick:()=>M("prev"),children:i.jsx("i",{className:"ri-arrow-left-line text-gray-600 dark:text-gray-400"})}),i.jsx("button",{onClick:()=>k(new Date),className:"px-3 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900 rounded-lg cursor-pointer",children:"Today"}),i.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",onClick:()=>M("next"),children:i.jsx("i",{className:"ri-arrow-right-line text-gray-600 dark:text-gray-400"})})]})]}),i.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ee=>i.jsx("div",{className:"p-4 text-center font-semibold text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0",children:ee},ee))}),i.jsx("div",{className:"grid grid-cols-7",children:me(w).map((V,W)=>{if(!V)return i.jsx("div",{className:"min-h-[120px] p-2 border-r border-b border-gray-200 dark:border-gray-700 last:border-r-0 bg-gray-50/50 dark:bg-gray-800/50"},`empty-${W}`);const ie=String(w.getMonth()+1).padStart(2,"0"),we=String(V).padStart(2,"0"),G=`${w.getFullYear()}-${ie}-${we}`,he=d.filter(Ee=>Ee.date===G),xe=V===new Date().getDate()&&w.getMonth()===new Date().getMonth()&&w.getFullYear()===new Date().getFullYear();return i.jsxs("div",{className:"min-h-[120px] p-2 border-r border-b border-gray-200 dark:border-gray-700 last:border-r-0 relative hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[i.jsx("div",{className:`font-semibold mb-2 w-7 h-7 flex items-center justify-center rounded-full ${xe?"bg-blue-600 text-white":"text-gray-900 dark:text-white"}`,children:V}),i.jsx("div",{className:"space-y-1",children:he.map(Ee=>{let Be="bg-gray-500";const rt=Ee.type?Ee.type.toLowerCase():"";return rt==="consultation"?Be="bg-blue-500":rt==="medical"?Be="bg-green-500":rt==="legal"?Be="bg-purple-500":rt==="psychological"&&(Be="bg-orange-500"),i.jsxs("div",{onClick:()=>s(Ee),className:`text-xs p-1 rounded cursor-pointer text-white truncate ${Be} hover:opacity-80 shadow-sm`,title:`${Ee.time} - ${Ee.title}`,children:[i.jsx("span",{className:"font-bold mr-1",children:Ee.time}),Ee.title]},Ee.id)})})]},V)})})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Appointment Details"}),i.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-16 h-16 rounded-xl flex items-center justify-center ${S(t.type)}`,children:i.jsx("i",{className:`${T(t.type)} text-3xl`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t.title}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono mt-1",children:["ID: ",t.id]}),i.jsx("div",{className:"mt-2",children:C(t.status)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-gray-50 dark:bg-gray-700/50 p-6 rounded-xl",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"ri-time-line text-blue-500"})," Schedule"]}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Date:"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.date})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Time:"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.time})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Duration:"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.duration})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Location:"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.location})]})]})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"ri-group-line text-purple-500"})," Participants"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:t.participants&&Array.isArray(t.participants)&&t.participants.length>0?t.participants.map((ee,V)=>i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-white dark:bg-gray-800 rounded-full border border-gray-200 dark:border-gray-600 shadow-sm",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500"}),i.jsx("span",{className:"text-gray-700 dark:text-gray-200 text-sm",children:ee})]},V)):i.jsx("span",{className:"text-gray-500 text-sm italic",children:"No participants listed"})})]})]}),t.notes&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Notes"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-100 dark:border-yellow-900/30 p-4 rounded-xl text-sm leading-relaxed",children:t.notes})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsxs(fe,{color:"blue",className:"flex-1",onClick:()=>X(t),children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",children:[i.jsx("i",{className:"ri-calendar-line mr-2"}),"Reschedule"]}),i.jsxs(fe,{color:"red",variant:"outline",className:"flex-1",onClick:()=>t.id&&ue(t.id),children:[i.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Delete"]})]})]})]})})}),D&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:i.jsxs("form",{onSubmit:H,className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:A?"Edit Appointment":"New Appointment"}),i.jsx("button",{type:"button",onClick:()=>U(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),i.jsx("input",{type:"text",required:!0,value:K.title,onChange:ee=>F({...K,title:ee.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Initial Consultation"})]}),i.jsx(Eu,{value:K.userId||"",onChange:ee=>F({...K,userId:ee}),label:"Associated User (Surrogate/Parent)"}),i.jsx("div",{className:"pt-1",children:i.jsxs("button",{type:"button",onClick:()=>z(!0),className:"w-full py-2 px-4 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600 text-gray-500 hover:border-blue-500 hover:text-blue-500 transition-all flex items-center justify-center gap-2",children:[i.jsx("i",{className:"ri-health-book-line"}),"New Medical Record"]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date"}),i.jsx("input",{type:"date",required:!0,value:K.date,onChange:ee=>F({...K,date:ee.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time"}),i.jsx("input",{type:"time",required:!0,value:K.time,onChange:ee=>F({...K,time:ee.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Duration"}),i.jsx("input",{type:"text",value:K.duration,onChange:ee=>F({...K,duration:ee.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. 60 min"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),i.jsx("select",{value:K.type,onChange:ee=>F({...K,type:ee.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:SN.filter(ee=>ee.id!=="all").map(ee=>i.jsx("option",{value:ee.id,children:ee.label},ee.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),i.jsx("input",{type:"text",value:K.location,onChange:ee=>F({...K,location:ee.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Clinic Room 1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Participants (comma separated)"}),i.jsx("input",{type:"text",value:ne||"",onChange:ee=>O(ee.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. John Doe, Jane Doe"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),i.jsxs("select",{value:K.status||"",onChange:ee=>F({...K,status:ee.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:[i.jsx("option",{value:"scheduled",children:"Scheduled"}),i.jsx("option",{value:"confirmed",children:"Confirmed"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),i.jsx("textarea",{value:K.notes||"",onChange:ee=>F({...K,notes:ee.target.value}),rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Add any detailed notes..."})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx(fe,{type:"button",variant:"outline",className:"flex-1",onClick:()=>U(!1),children:"Cancel"}),i.jsx(fe,{type:"submit",color:"blue",className:"flex-1",disabled:g,children:g?"Saving...":"Save Appointment"})]})]})})}),i.jsx(em,{isOpen:I,onClose:()=>z(!1)})]})]})]})},HP=()=>{const[n,e]=E.useState("6months"),[t,s]=E.useState("overview"),[l,c]=E.useState({totalMatches:0,activeJourneys:0,successfulBirths:0,totalRevenue:0}),[d,f]=E.useState(!0),g=[{id:"overview",label:"Overview",icon:"ri-dashboard-line"},{id:"financial",label:"Financial",icon:"ri-money-dollar-circle-line"},{id:"medical",label:"Medical",icon:"ri-health-book-line"},{id:"performance",label:"Performance",icon:"ri-bar-chart-line"}],p=[{id:"1month",label:"Last Month"},{id:"3months",label:"Last 3 Months"},{id:"6months",label:"Last 6 Months"},{id:"1year",label:"Last Year"}];E.useEffect(()=>{x()},[]);const x=async()=>{f(!0);try{const[w,k]=await Promise.all([tt(Ie(be,"cases")),tt(Ie(be,"invoices"))]),D=w.size,U=w.docs.filter(A=>A.data().currentStage!=="Completed").length,I=w.docs.filter(A=>A.data().currentStage==="Completed").length,z=k.docs.reduce((A,q)=>A+(q.data().amount||0),0);c({totalMatches:D,activeJourneys:U,successfulBirths:I,totalRevenue:z})}catch(w){console.error("Error fetching stats:",w)}finally{f(!1)}},v=[{id:"total-matches",title:"Total Matches",value:l.totalMatches.toString(),icon:"ri-links-line",color:"blue"},{id:"active-journeys",title:"Active Journeys",value:l.activeJourneys.toString(),icon:"ri-road-map-line",color:"green"},{id:"successful-births",title:"Successful Births",value:l.successfulBirths.toString(),icon:"ri-heart-3-line",color:"pink"},{id:"total-revenue",title:"Total Revenue",value:`$${(l.totalRevenue/1e3).toFixed(1)}K`,icon:"ri-money-dollar-circle-line",color:"purple"}];return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Reports & Analytics"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Comprehensive insights into your surrogacy program performance."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("select",{value:n,onChange:w=>e(w.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white pr-8",children:p.map(w=>i.jsx("option",{value:w.id,children:w.label},w.id))}),i.jsxs(fe,{color:"blue",children:[i.jsx("i",{className:"ri-download-line mr-2"}),"Export Report"]})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:g.map(w=>i.jsxs("button",{onClick:()=>s(w.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer flex items-center gap-2 ${t===w.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[i.jsx("i",{className:w.icon}),w.label]},w.id))})}),t==="overview"&&i.jsx("div",{className:"space-y-6",children:d?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:v.map(w=>i.jsx(ve,{className:"hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:w.title}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:w.value})]}),i.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${w.color==="blue"?"bg-blue-100 dark:bg-blue-900":w.color==="green"?"bg-green-100 dark:bg-green-900":w.color==="pink"?"bg-pink-100 dark:bg-pink-900":"bg-purple-100 dark:bg-purple-900"}`,children:i.jsx("i",{className:`${w.icon} text-xl ${w.color==="blue"?"text-blue-600 dark:text-blue-400":w.color==="green"?"text-green-600 dark:text-green-400":w.color==="pink"?"text-pink-600 dark:text-pink-400":"text-purple-600 dark:text-purple-400"}`})})]})},w.id))})}),t==="financial"&&i.jsx(ve,{children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"ri-money-dollar-circle-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Financial Reports"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Detailed financial analytics including revenue, expenses, and profit margins."}),i.jsxs(fe,{color:"blue",children:[i.jsx("i",{className:"ri-file-chart-line mr-2"}),"Generate Financial Report"]})]})})}),t==="medical"&&i.jsx(ve,{children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"ri-health-book-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Medical Reports"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Medical outcomes, success rates, and health statistics."}),i.jsxs(fe,{color:"blue",children:[i.jsx("i",{className:"ri-file-chart-line mr-2"}),"Generate Medical Report"]})]})})}),t==="performance"&&i.jsx(ve,{children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"ri-bar-chart-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Performance Reports"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Team performance metrics, efficiency ratings, and productivity analysis."}),i.jsxs(fe,{color:"blue",children:[i.jsx("i",{className:"ri-file-chart-line mr-2"}),"Generate Performance Report"]})]})})})]})]})]})},$P=()=>{const{user:n,profile:e,profileLoading:t}=Zf(),[s,l]=E.useState("general"),[c,d]=E.useState(null),[f,g]=E.useState({siteName:"Family Matters",adminEmail:"admin@familymatters.com",timezone:"UTC-5",language:"English",notifications:{email:!0,sms:!0,push:!0,newRequests:!0,appointments:!0,payments:!1},security:{twoFactor:!1,sessionTimeout:"30",passwordExpiry:"90"},matching:{autoMatch:!1,requireApproval:!0,maxMatches:"3"}});E.useEffect(()=>{e&&typeof e=="object"&&e.email&&g(F=>F.adminEmail===e.email?F:{...F,adminEmail:e.email})},[e]);const p=E.useMemo(()=>{if(n?.displayName&&n.displayName.trim().length>0)return n.displayName;if(n?.email){const[F]=n.email.split("@");return F.charAt(0).toUpperCase()+F.slice(1)}return"Administrator"},[n]),x=(e&&typeof e=="object"&&e.email)??n?.email??f.adminEmail,v=E.useMemo(()=>{const ne=(p||x||"FM").split(" ").filter(Boolean).map(O=>O[0]?.toUpperCase()??"").join("").slice(0,2);return ne.length>0?ne:"FM"},[p,x]),w=E.useMemo(()=>n?.metadata?.creationTime?new Date(n.metadata.creationTime).toLocaleDateString():null,[n]),k=E.useMemo(()=>n?.metadata?.lastSignInTime?new Date(n.metadata.lastSignInTime).toLocaleString():null,[n]),D=E.useMemo(()=>n?.providerData?.length?n.providerData.map(F=>{switch(F.providerId){case"password":return"Email & Password";case"google.com":return"Google";case"facebook.com":return"Facebook";case"apple.com":return"Apple";default:return F.providerId}}).join(", "):"Email & Password",[n]),U=[{id:"general",label:"General",icon:"ri-settings-3-line"},{id:"notifications",label:"Notifications",icon:"ri-notification-3-line"},{id:"security",label:"Security",icon:"ri-shield-check-line"},{id:"matching",label:"Matching Rules",icon:"ri-links-line"},{id:"billing",label:"Billing",icon:"ri-money-dollar-circle-line"},{id:"integrations",label:"Integrations",icon:"ri-plug-line"}],I=(F,ne,O)=>{g(L=>({...L,[F]:{...L[F],[ne]:O}}))},z=()=>i.jsxs("div",{className:"space-y-8",children:[t?i.jsxs("div",{className:"animate-pulse space-y-4",children:[i.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),i.jsx("div",{className:"h-48 bg-gray-100 dark:bg-gray-800 rounded"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsx(Ut,{title:"Profile Overview",data:{Name:p,Email:x,Role:e?.role??"","Profile Completed":e?.profileCompleted,"Form 2 Completed":e?.form2Completed,"Created At":e?.createdAt,"Updated At":e?.updatedAt}}),i.jsx(Ut,{title:"Form 1 Responses",data:e?.formData??null,emptyMessage:"No form data available."}),i.jsx(Ut,{title:"Form 2 Responses",data:e?.form2Data??null,emptyMessage:"Form 2 has not been completed yet."}),i.jsx(Ut,{title:"Fertility Information",data:e?.form2Data?.fertility??null,emptyMessage:"No fertility information provided."}),i.jsx(Ut,{title:"Parent 1",data:e?.parent1??null,emptyMessage:"Parent 1 details not provided."}),i.jsx(Ut,{title:"Parent 2",data:e?.parent2??null,emptyMessage:"Parent 2 details not provided."}),i.jsx(Ut,{title:"Surrogate Related Preferences",data:e?.surrogateRelated??null,emptyMessage:"No surrogate preferences provided."})]}),i.jsxs("div",{className:"space-y-6 border-t border-gray-200 dark:border-gray-700 pt-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Site Name"}),i.jsx("input",{type:"text",value:f.siteName,onChange:F=>g(ne=>({...ne,siteName:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Email"}),i.jsx("input",{type:"email",value:f.adminEmail,onChange:F=>g(ne=>({...ne,adminEmail:F.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Timezone"}),i.jsxs("select",{value:f.timezone,onChange:F=>g(ne=>({...ne,timezone:F.target.value})),className:"w-full px-3 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"UTC-5",children:"Eastern Time (UTC-5)"}),i.jsx("option",{value:"UTC-6",children:"Central Time (UTC-6)"}),i.jsx("option",{value:"UTC-7",children:"Mountain Time (UTC-7)"}),i.jsx("option",{value:"UTC-8",children:"Pacific Time (UTC-8)"})]})]})]})]}),A=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Notification Channels"}),i.jsx("div",{className:"space-y-4",children:Object.entries(f.notifications).slice(0,3).map(([F,ne])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-gray-700 dark:text-gray-300 capitalize",children:[F," Notifications"]}),i.jsx("button",{onClick:()=>I("notifications",F,!ne),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${ne?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ne?"translate-x-6":"translate-x-1"}`})})]},F))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Event Notifications"}),i.jsx("div",{className:"space-y-4",children:Object.entries(f.notifications).slice(3).map(([F,ne])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700 dark:text-gray-300 capitalize",children:F.replace(/([A-Z])/g," $1")}),i.jsx("button",{onClick:()=>I("notifications",F,!ne),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${ne?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ne?"translate-x-6":"translate-x-1"}`})})]},F))})]})]}),q=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Two-Factor Authentication"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add an extra layer of security to your account"})]}),i.jsx("button",{onClick:()=>I("security","twoFactor",!f.security.twoFactor),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${f.security.twoFactor?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f.security.twoFactor?"translate-x-6":"translate-x-1"}`})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Session Timeout (minutes)"}),i.jsxs("select",{value:f.security.sessionTimeout,onChange:F=>I("security","sessionTimeout",F.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"15",children:"15 minutes"}),i.jsx("option",{value:"30",children:"30 minutes"}),i.jsx("option",{value:"60",children:"1 hour"}),i.jsx("option",{value:"120",children:"2 hours"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password Expiry (days)"}),i.jsxs("select",{value:f.security.passwordExpiry,onChange:F=>I("security","passwordExpiry",F.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"30",children:"30 days"}),i.jsx("option",{value:"60",children:"60 days"}),i.jsx("option",{value:"90",children:"90 days"}),i.jsx("option",{value:"never",children:"Never"})]})]})]}),K=()=>{switch(s){case"general":return z();case"notifications":return A();case"security":return q();case"matching":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Auto-Matching"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automatically suggest matches based on criteria"})]}),i.jsx("button",{onClick:()=>I("matching","autoMatch",!f.matching.autoMatch),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${f.matching.autoMatch?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f.matching.autoMatch?"translate-x-6":"translate-x-1"}`})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Maximum Active Matches per Surrogate"}),i.jsxs("select",{value:f.matching.maxMatches,onChange:F=>I("matching","maxMatches",F.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"1",children:"1 Match"}),i.jsx("option",{value:"2",children:"2 Matches"}),i.jsx("option",{value:"3",children:"3 Matches"}),i.jsx("option",{value:"5",children:"5 Matches"})]})]})]});case"billing":return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"ri-money-dollar-circle-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Billing Settings"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Configure payment methods and billing preferences"}),i.jsxs(fe,{color:"blue",children:[i.jsx("i",{className:"ri-add-line mr-2"}),"Add Payment Method"]})]})});case"integrations":return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(ve,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:i.jsx("i",{className:"ri-mail-line text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Email Service"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"SMTP configuration"})]})]}),i.jsx(fe,{variant:"outline",children:"Configure"})]})}),i.jsx(ve,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center",children:i.jsx("i",{className:"ri-phone-line text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"SMS Service"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Twilio integration"})]})]}),i.jsx(fe,{variant:"outline",children:"Configure"})]})})]})});default:return null}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),c&&i.jsx(Ay,{message:c.message,type:c.type,onClose:()=>d(null)}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Settings"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your application preferences and configurations."})]}),i.jsx(ve,{className:"mb-8",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-14 h-14 rounded-full bg-blue-600 text-white flex items-center justify-center text-xl font-semibold",children:v}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t?"Loading...":p}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t?"Loading account...":x})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full md:w-auto",children:[w&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 tracking-wide",children:"Member Since"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:w})]}),k&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 tracking-wide",children:"Last Sign-in"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:k})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 tracking-wide",children:"Auth Provider"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:D})]})]})]})}),i.jsxs("div",{className:"flex gap-6",children:[i.jsx("div",{className:"w-64 flex-shrink-0",children:i.jsx(ve,{children:i.jsx("nav",{className:"space-y-1",children:U.map(F=>i.jsxs("button",{onClick:()=>l(F.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors cursor-pointer ${s===F.id?"bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[i.jsx("i",{className:`${F.icon} text-lg`}),i.jsx("span",{className:"font-medium",children:F.label})]},F.id))})})}),i.jsx("div",{className:"flex-1",children:i.jsxs(ve,{children:[i.jsx("div",{className:"mb-6",children:i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:U.find(F=>F.id===s)?.label})}),K(),i.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(fe,{color:"blue",children:[i.jsx("i",{className:"ri-save-line mr-2"}),"Save Changes"]}),i.jsxs(fe,{variant:"outline",children:[i.jsx("i",{className:"ri-refresh-line mr-2"}),"Reset to Default"]})]})})]})})]})]})]})]})},GP=()=>{const[n,e]=E.useState(new Date),[t,s]=E.useState("month"),[l,c]=E.useState(null),[d,f]=E.useState(!1),[g,p]=E.useState([]),[x,v]=E.useState(!0),[w,k]=E.useState(!1),[D,U]=E.useState({title:"",type:"consultation",date:new Date().toISOString().split("T")[0],time:"09:00",duration:"60 min",participants:[],location:"Clinic",status:"scheduled",notes:"",userId:""}),I=async()=>{v(!0);try{const S=await Wi.getAllAppointments();p(Array.isArray(S)?S:[])}catch(S){console.error("Failed to load events",S),p([])}finally{v(!1)}};E.useEffect(()=>{I()},[]);const z=["January","February","March","April","May","June","July","August","September","October","November","December"],A=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],q=S=>{const M=S.getFullYear(),me=S.getMonth(),Te=new Date(M,me,1),H=new Date(M,me+1,0).getDate(),ue=Te.getDay(),ge=[];for(let ee=0;ee<ue;ee++)ge.push(null);for(let ee=1;ee<=H;ee++)ge.push(ee);return ge},K=S=>{const M=n.getFullYear(),me=String(n.getMonth()+1).padStart(2,"0"),Te=String(S).padStart(2,"0"),X=`${M}-${me}-${Te}`;return g.filter(H=>H.date===X)},F=S=>{switch(S){case"consultation":return"bg-blue-500";case"medical":return"bg-green-500";case"legal":return"bg-purple-500";case"psychological":return"bg-orange-500";default:return"bg-gray-500"}},ne=S=>{switch(S){case"confirmed":return i.jsx(Ne,{color:"green",children:"Confirmed"});case"pending":return i.jsx(Ne,{color:"yellow",children:"Pending"});case"scheduled":return i.jsx(Ne,{color:"blue",children:"Scheduled"});case"completed":return i.jsx(Ne,{color:"gray",children:"Completed"});default:return i.jsx(Ne,{children:S})}},O=S=>{e(M=>{const me=new Date(M);return S==="prev"?me.setMonth(M.getMonth()-1):me.setMonth(M.getMonth()+1),me})},L=async()=>{try{await Wi.createAppointment(D),await I(),f(!1)}catch(S){console.error("Failed to create event",S)}},j=async S=>{if(confirm("Are you sure you want to delete this event?"))try{await Wi.deleteAppointment(S),await I(),c(null)}catch(M){console.error("Failed to delete event",M)}},C=()=>{const S=q(n);return i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700",children:A.map(M=>i.jsx("div",{className:"p-4 text-center font-semibold text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0",children:M},M))}),i.jsx("div",{className:"grid grid-cols-7",children:S.map((M,me)=>i.jsx("div",{className:"min-h-[120px] p-2 border-r border-b border-gray-200 dark:border-gray-700 last:border-r-0 relative hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:M&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`font-semibold mb-2 ${M===new Date().getDate()&&n.getMonth()===new Date().getMonth()&&n.getFullYear()===new Date().getFullYear()?"bg-blue-600 text-white w-7 h-7 rounded-full flex items-center justify-center":"text-gray-900 dark:text-white"}`,children:M}),i.jsx("div",{className:"space-y-1",children:K(M).map(Te=>i.jsxs("div",{onClick:()=>c(Te),className:`text-xs p-1 rounded cursor-pointer text-white ${F(Te.type)} hover:opacity-80 shadow-sm truncate`,children:[i.jsx("span",{className:"font-bold mr-1",children:Te.time}),Te.title]},Te.id))})]})},me))})]})},T=()=>i.jsxs(ve,{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Upcoming Events"}),i.jsxs("div",{className:"space-y-3",children:[g.slice(0,5).map(S=>i.jsxs("div",{onClick:()=>c(S),className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${F(S.type)}`}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-gray-900 dark:text-white line-clamp-1",children:S.title}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[S.date," at ",S.time]})]}),ne(S.status)]},S.id)),g.length===0&&i.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming events"})]})]});return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Calendar"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage appointments and schedule events."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:["month","week","day"].map(S=>i.jsx("button",{onClick:()=>s(S),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors cursor-pointer capitalize ${t===S?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400"}`,children:S},S))}),i.jsxs(fe,{color:"blue",onClick:()=>f(!0),children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Event"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"lg:col-span-3",children:i.jsxs(ve,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[z[n.getMonth()]," ",n.getFullYear()]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>O("prev"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-arrow-left-line text-gray-600 dark:text-gray-400"})}),i.jsx("button",{onClick:()=>e(new Date),className:"px-3 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900 rounded-lg cursor-pointer",children:"Today"}),i.jsx("button",{onClick:()=>O("next"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-arrow-right-line text-gray-600 dark:text-gray-400"})})]})]}),t==="month"&&C(),t==="week"&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"ri-calendar-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Week View"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Week view coming soon"})]}),t==="day"&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"ri-calendar-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Day View"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Day view coming soon"})]})]})}),i.jsxs("div",{className:"space-y-6",children:[T(),i.jsxs(ve,{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Event Types"}),i.jsx("div",{className:"space-y-2",children:[{type:"consultation",label:"Consultations",color:"bg-blue-500"},{type:"medical",label:"Medical",color:"bg-green-500"},{type:"legal",label:"Legal",color:"bg-purple-500"},{type:"psychological",label:"Psychological",color:"bg-orange-500"}].map(S=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S.color}`}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:S.label})]},S.type))})]})]})]}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-lg w-full shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Event Details"}),i.jsx("button",{onClick:()=>c(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:l.title}),i.jsx("div",{className:"mt-2",children:ne(l.status)})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Date:"}),i.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.date})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Time:"}),i.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.time})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Duration:"}),i.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.duration})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),i.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.location})]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Participants:"}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:l.participants&&Array.isArray(l.participants)&&l.participants.length>0?l.participants.map((S,M)=>i.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full text-xs",children:[i.jsx("i",{className:"ri-user-line text-gray-400"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:S})]},M)):i.jsx("span",{className:"text-gray-500 italic text-sm",children:"No participants"})})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsxs(fe,{color:"blue",className:"flex-1",children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",color:"red",onClick:()=>l.id&&j(l.id),children:[i.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Delete"]})]})]})]})})}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-lg w-full shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Event"}),i.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event Title"}),i.jsx("input",{type:"text",value:D.title||"",onChange:S=>U({...D,title:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white outline-none",placeholder:"Enter event title"})]}),i.jsx(Eu,{value:D.userId||"",onChange:S=>U({...D,userId:S}),label:"Associated User (Surrogate/Parent)"}),i.jsx("div",{className:"pt-2",children:i.jsxs(fe,{type:"button",variant:"outline",className:"w-full border-dashed border-2 hover:border-blue-500 hover:text-blue-500 transition-all py-3 flex items-center justify-center gap-2",onClick:()=>k(!0),children:[i.jsx("i",{className:"ri-health-book-line"}),"Add New Medical Record for this Event"]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date"}),i.jsx("input",{type:"date",value:D.date,onChange:S=>U({...D,date:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time"}),i.jsx("input",{type:"time",value:D.time,onChange:S=>U({...D,time:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white outline-none"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event Type"}),i.jsxs("select",{value:D.type,onChange:S=>U({...D,type:S.target.value}),className:"w-full px-3 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white outline-none",children:[i.jsx("option",{value:"consultation",children:"Consultation"}),i.jsx("option",{value:"medical",children:"Medical"}),i.jsx("option",{value:"legal",children:"Legal"}),i.jsx("option",{value:"psychological",children:"Psychological"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsxs(fe,{color:"blue",className:"flex-1",onClick:L,children:[i.jsx("i",{className:"ri-save-line mr-2"}),"Create Event"]}),i.jsx(fe,{variant:"outline",className:"flex-1",onClick:()=>f(!1),children:"Cancel"})]})]})]})})}),i.jsx(em,{isOpen:w,onClose:()=>k(!1)})]})]})]})},KP=()=>{const[n,e]=E.useState("all"),[t,s]=E.useState(null),[l,c]=E.useState(!1),[d,f]=E.useState([]),[g,p]=E.useState(!0),[x,v]=E.useState(!1),[w,k]=E.useState({surrogateId:"",surrogateName:"",amount:0,type:"Base Compensation",status:"Scheduled",dueDate:"",description:"",notes:""}),D=async()=>{p(!0);try{const F=await eu.getAllPayments();f(F)}catch(F){console.error("Error fetching payments:",F)}finally{p(!1)}};E.useEffect(()=>{D()},[]);const U={totalPaid:d.filter(F=>F.status==="Paid").reduce((F,ne)=>F+Number(ne.amount),0),pending:d.filter(F=>F.status==="Pending").reduce((F,ne)=>F+Number(ne.amount),0),upcoming:d.filter(F=>F.status==="Scheduled").reduce((F,ne)=>F+Number(ne.amount),0),overdue:d.filter(F=>F.status==="Overdue").reduce((F,ne)=>F+Number(ne.amount),0)},I={Paid:"green",Pending:"yellow",Scheduled:"blue",Overdue:"red",Cancelled:"gray",Rejected:"red"},z=async F=>{F.preventDefault();try{w.id?await eu.updatePayment(w.id,w):await eu.createPayment(w),await D(),c(!1),k({surrogateName:"",amount:0,type:"Base Compensation",status:"Scheduled",dueDate:"",description:"",notes:""})}catch(ne){console.error(ne)}},A=async F=>{confirm("Delete this payment record?")&&(await eu.deletePayment(F),await D(),s(null))},q=F=>{k(F),s(null),c(!0)},K=n==="all"?d:d.filter(F=>F.status.toLowerCase()===n);return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Compensation"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track surrogate compensation and expenses."})]}),i.jsxs(fe,{color:"blue",onClick:()=>{k({}),c(!0)},children:[i.jsx("i",{className:"ri-add-line mr-2"})," Record Payment"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsxs(ve,{className:"bg-gradient-to-br from-green-500 to-emerald-600 text-white border-none",children:[i.jsx("div",{className:"text-green-100 mb-1",children:"Total Paid"}),i.jsxs("div",{className:"text-3xl font-bold",children:["$",U.totalPaid.toLocaleString()]})]}),i.jsxs(ve,{className:"bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-1",children:"Pending Approval"}),i.jsxs("div",{className:"text-3xl font-bold text-yellow-600 dark:text-yellow-500",children:["$",U.pending.toLocaleString()]})]}),i.jsxs(ve,{className:"bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-1",children:"Upcomming (Scheduled)"}),i.jsxs("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-500",children:["$",U.upcoming.toLocaleString()]})]}),i.jsxs(ve,{className:"bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"text-red-500 mb-1",children:"Overdue"}),i.jsxs("div",{className:"text-3xl font-bold text-red-600",children:["$",U.overdue.toLocaleString()]})]})]}),i.jsx("div",{className:"mb-6 flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:["all","paid","pending","scheduled","overdue"].map(F=>i.jsx("button",{onClick:()=>e(F),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors capitalize ${n===F?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:F},F))}),i.jsx("div",{className:"space-y-4",children:g?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx("i",{className:"ri-loader-4-line text-3xl animate-spin text-blue-600"})}):K.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500 bg-white dark:bg-gray-800 rounded-lg",children:"No payments found."}):K.map(F=>i.jsx(ve,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>s(F),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${F.status==="Paid"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:i.jsx("i",{className:"ri-money-dollar-circle-line text-xl"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:F.surrogateName}),i.jsxs("p",{className:"text-sm text-gray-500",children:[F.type,"  ",F.dueDate]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:["$",Number(F.amount).toLocaleString()]}),i.jsx(Ne,{color:I[F.status]||"gray",children:F.status})]})]})},F.id))}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 shadow-xl",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:"Payment Details"}),i.jsx("button",{onClick:()=>s(null),children:i.jsx("i",{className:"ri-close-line text-2xl text-gray-500"})})]}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{className:"flex justify-between border-b dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Recipient"}),i.jsx("span",{className:"font-medium dark:text-white",children:t.surrogateName})]}),i.jsxs("div",{className:"flex justify-between border-b dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount"}),i.jsxs("span",{className:"font-bold text-xl text-green-600",children:["$",Number(t.amount).toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between border-b dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type"}),i.jsx("span",{className:"font-medium dark:text-white",children:t.type})]}),i.jsxs("div",{className:"flex justify-between border-b dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),i.jsx(Ne,{color:I[t.status],children:t.status})]}),i.jsxs("div",{className:"flex justify-between border-b dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Due Date"}),i.jsx("span",{className:"font-medium dark:text-white",children:t.dueDate})]}),t.paidDate&&i.jsxs("div",{className:"flex justify-between border-b dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Paid Date"}),i.jsx("span",{className:"font-medium dark:text-white",children:t.paidDate})]}),t.notes&&i.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-sm text-gray-600 dark:text-gray-300",children:t.notes})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(fe,{className:"flex-1",onClick:()=>q(t),children:"Edit"}),i.jsx(fe,{variant:"outline",color:"red",className:"flex-1",onClick:()=>t.id&&A(t.id),children:"Delete"})]})]})}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 shadow-xl",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:w.id?"Edit Payment":"New Payment"}),i.jsxs("form",{onSubmit:z,className:"space-y-4",children:[i.jsx(Eu,{value:w.surrogateId||"",onChange:F=>k({...w,surrogateId:F}),onSelect:F=>k({...w,surrogateId:F.id,surrogateName:F.name.split(" (")[0]}),label:"Recipient (Surrogate or Parent)",required:!0}),i.jsx("div",{className:"pt-1",children:i.jsxs("button",{type:"button",onClick:()=>v(!0),className:"w-full py-2 px-4 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600 text-gray-500 hover:border-blue-500 hover:text-blue-500 transition-all flex items-center justify-center gap-2",children:[i.jsx("i",{className:"ri-health-book-line"}),"Associated Medical Record"]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{type:"number",placeholder:"Amount",required:!0,className:"p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:w.amount,onChange:F=>k({...w,amount:Number(F.target.value)})}),i.jsxs("select",{className:"p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:w.type,onChange:F=>k({...w,type:F.target.value}),children:[i.jsx("option",{children:"Base Compensation"}),i.jsx("option",{children:"Allowance"}),i.jsx("option",{children:"Medical"}),i.jsx("option",{children:"Travel"}),i.jsx("option",{children:"Clothing"}),i.jsx("option",{children:"Legal"}),i.jsx("option",{children:"Other"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Due Date"}),i.jsx("input",{type:"date",required:!0,className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:w.dueDate,onChange:F=>k({...w,dueDate:F.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Status"}),i.jsxs("select",{className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:w.status,onChange:F=>k({...w,status:F.target.value}),children:[i.jsx("option",{children:"Scheduled"}),i.jsx("option",{children:"Pending"}),i.jsx("option",{children:"Paid"}),i.jsx("option",{children:"Overdue"}),i.jsx("option",{children:"Cancelled"})]})]})]}),w.status==="Paid"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Paid Date"}),i.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:w.paidDate||"",onChange:F=>k({...w,paidDate:F.target.value})})]}),i.jsx("textarea",{placeholder:"Description / Notes",className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:3,value:w.notes||"",onChange:F=>k({...w,notes:F.target.value})}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(fe,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),i.jsx(fe,{type:"submit",color:"blue",children:"Save Record"})]})]})]})}),i.jsx(em,{isOpen:x,onClose:()=>v(!1)})]})]})]})},YP=()=>{const[n,e]=E.useState("records"),[t,s]=E.useState(!0),[l,c]=E.useState([]),[d,f]=E.useState(null),[g,p]=E.useState(!1),[x,v]=E.useState({title:"",type:"Screening",date:"",doctor:"",facility:"",summary:"",status:"Pending",sharedWithParents:!1}),[w,k]=E.useState([]),[D,U]=E.useState(!1),[I,z]=E.useState({name:"",dosage:"",frequency:"",startDate:"",status:"Active"}),A=async()=>{s(!0);try{const[O,L]=await Promise.all([Mr.getAllRecords(),Mr.getAllMedications()]);c(O),k(L)}catch(O){console.error("Error loading medical data",O)}finally{s(!1)}};E.useEffect(()=>{A()},[]);const q=async O=>{confirm("Delete this record?")&&(await Mr.deleteRecord(O),await A(),f(null))},K=async O=>{O.preventDefault();try{I.id?await Mr.updateMedication(I.id,I):await Mr.addMedication(I),await A(),U(!1),z({name:"",dosage:"",frequency:"",startDate:"",status:"Active"})}catch(L){console.error(L)}},F=async O=>{confirm("Delete this medication?")&&(await Mr.deleteMedication(O),await A())},ne=O=>{switch(O){case"Verified":return i.jsx(Ne,{color:"green",children:"Verified"});case"Review Required":return i.jsx(Ne,{color:"yellow",children:"Review Required"});case"Active":return i.jsx(Ne,{color:"green",children:"Active"});case"Completed":return i.jsx(Ne,{color:"gray",children:"Completed"});case"Discontinued":return i.jsx(Ne,{color:"red",children:"Discontinued"});default:return i.jsx(Ne,{color:"gray",children:O})}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Medical"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage health records and medications."})]}),i.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>e("records"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="records"?"bg-white dark:bg-gray-700 shadow-sm text-blue-600":"text-gray-600"}`,children:"Records"}),i.jsx("button",{onClick:()=>e("medications"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="medications"?"bg-white dark:bg-gray-700 shadow-sm text-blue-600":"text-gray-600"}`,children:"Medications"})]})]}),!t&&n==="records"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex justify-end mb-4",children:i.jsxs(fe,{color:"blue",onClick:()=>{v({}),p(!0)},children:[i.jsx("i",{className:"ri-add-line mr-2"})," New Record"]})}),i.jsxs("div",{className:"space-y-4",children:[l.map(O=>i.jsx(ve,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>f(O),children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900 flex items-center justify-center text-blue-600 dark:text-blue-400",children:i.jsx("i",{className:"ri-file-list-3-line text-xl"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:O.title}),i.jsxs("p",{className:"text-sm text-gray-500",children:[O.type,"  ",O.date]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Dr. ",O.doctor," @ ",O.facility]})]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[ne(O.status),O.sharedWithParents&&i.jsxs("span",{className:"text-xs flex items-center gap-1 text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[i.jsx("i",{className:"ri-eye-line"})," Shared"]})]})]})},O.id)),l.length===0&&i.jsx("p",{className:"text-center text-gray-500 py-8",children:"No medical records found."})]})]}),!t&&n==="medications"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex justify-end mb-4",children:i.jsxs(fe,{color:"blue",onClick:()=>{z({}),U(!0)},children:[i.jsx("i",{className:"ri-add-line mr-2"})," Add Medication"]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[w.map(O=>i.jsxs(ve,{children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center text-purple-600",children:i.jsx("i",{className:"ri-capsule-line text-lg"})}),ne(O.status)]}),i.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-1",children:O.name}),i.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[O.dosage,"  ",O.frequency]}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg mb-4",children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{children:"Start:"}),i.jsx("span",{className:"font-medium",children:O.startDate})]}),O.endDate&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"End:"}),i.jsx("span",{className:"font-medium",children:O.endDate})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>{z(O),U(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:i.jsx("i",{className:"ri-edit-line"})}),i.jsx("button",{onClick:()=>O.id&&F(O.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:i.jsx("i",{className:"ri-delete-bin-line"})})]})]},O.id)),w.length===0&&i.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"No medications assigned."})]})]}),i.jsx(em,{isOpen:g,onClose:()=>p(!1),onSuccess:A,initialData:x}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 shadow-xl",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:d.title}),i.jsx("p",{className:"text-gray-500",children:d.date})]}),i.jsx("button",{onClick:()=>f(null),className:"text-gray-500 hover:text-gray-700",children:i.jsx("i",{className:"ri-close-line text-2xl"})})]}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-2 dark:text-white",children:"Details"}),i.jsxs("p",{className:"dark:text-gray-300",children:[i.jsx("span",{className:"font-medium",children:"Type:"})," ",d.type]}),i.jsxs("p",{className:"dark:text-gray-300",children:[i.jsx("span",{className:"font-medium",children:"Doctor:"})," ",d.doctor]}),i.jsxs("p",{className:"dark:text-gray-300",children:[i.jsx("span",{className:"font-medium",children:"Facility:"})," ",d.facility]}),i.jsxs("p",{className:"dark:text-gray-300",children:[i.jsx("span",{className:"font-medium",children:"Status:"})," ",d.status]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-2 dark:text-white",children:"Summary"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:d.summary})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(fe,{className:"flex-1",onClick:()=>{v(d),f(null),p(!0)},children:"Edit"}),i.jsx(fe,{variant:"outline",color:"red",className:"flex-1",onClick:()=>d.id&&q(d.id),children:"Delete"})]})]})}),D&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 shadow-xl",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:I.id?"Edit Medication":"Add Medication"}),i.jsxs("form",{onSubmit:K,className:"space-y-4",children:[i.jsx("input",{type:"text",placeholder:"Medication Name",required:!0,className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:I.name,onChange:O=>z({...I,name:O.target.value})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{type:"text",placeholder:"Dosage (e.g. 10mg)",required:!0,className:"p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:I.dosage,onChange:O=>z({...I,dosage:O.target.value})}),i.jsx("input",{type:"text",placeholder:"Frequency (e.g. Daily)",required:!0,className:"p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:I.frequency,onChange:O=>z({...I,frequency:O.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Start Date"}),i.jsx("input",{type:"date",required:!0,className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:I.startDate,onChange:O=>z({...I,startDate:O.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"End Date (Optional)"}),i.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:I.endDate||"",onChange:O=>z({...I,endDate:O.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Status"}),i.jsxs("select",{className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:I.status,onChange:O=>z({...I,status:O.target.value}),children:[i.jsx("option",{children:"Active"}),i.jsx("option",{children:"Completed"}),i.jsx("option",{children:"Discontinued"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(fe,{type:"button",variant:"outline",onClick:()=>U(!1),children:"Cancel"}),i.jsx(fe,{type:"submit",color:"blue",children:"Save"})]})]})]})})]})]})]})},QP=()=>{const[n,e]=E.useState("all"),[t,s]=E.useState(null),[l,c]=E.useState(!1),[d,f]=E.useState([]),[g,p]=E.useState(!0);E.useEffect(()=>{x()},[]);const x=async()=>{p(!0);try{const q=(await tt(Ie(be,"contracts"))).docs.map(K=>({id:K.id,title:K.data().title||"Untitled Contract",type:K.data().type||"general",surrogateName:K.data().surrogateName||"Unknown",parentName:K.data().parentName||"Unknown",status:K.data().status||"draft",createdAt:K.data().createdAt?.toDate()||new Date,value:K.data().value||0}));f(q)}catch(A){console.error("Error fetching contracts:",A),f([])}finally{p(!1)}},v=n==="all"?d:d.filter(A=>A.type===n),w=[{id:"all",label:"All Contracts",count:d.length},{id:"surrogacy_agreement",label:"Surrogacy Agreements",count:d.filter(A=>A.type==="surrogacy_agreement").length},{id:"medical_authorization",label:"Medical Authorization",count:d.filter(A=>A.type==="medical_authorization").length},{id:"compensation_agreement",label:"Compensation",count:d.filter(A=>A.type==="compensation_agreement").length},{id:"confidentiality_agreement",label:"Confidentiality",count:d.filter(A=>A.type==="confidentiality_agreement").length}],k=A=>{switch(A){case"active":return i.jsx(Ne,{color:"green",children:"Active"});case"pending_signature":return i.jsx(Ne,{color:"yellow",children:"Pending Signature"});case"under_review":return i.jsx(Ne,{color:"blue",children:"Under Review"});case"draft":return i.jsx(Ne,{children:"Draft"});case"expired":return i.jsx(Ne,{color:"red",children:"Expired"});default:return i.jsx(Ne,{children:A})}},D=A=>{switch(A){case"surrogacy_agreement":return"ri-file-text-line";case"medical_authorization":return"ri-health-book-line";case"compensation_agreement":return"ri-money-dollar-circle-line";case"confidentiality_agreement":return"ri-shield-check-line";default:return"ri-file-line"}},U=A=>{switch(A){case"surrogacy_agreement":return"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400";case"medical_authorization":return"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400";case"compensation_agreement":return"bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-400";case"confidentiality_agreement":return"bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}},I=A=>A===0?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(A),z=A=>A.split("_").map(q=>q.charAt(0).toUpperCase()+q.slice(1)).join(" ");return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Contracts"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage legal agreements and documentation."})]}),i.jsx("div",{className:"flex gap-3",children:i.jsxs(fe,{color:"blue",onClick:()=>c(!0),children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Contract"]})})]})}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit flex-wrap",children:w.map(A=>i.jsxs("button",{onClick:()=>e(A.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${n===A.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[A.label," (",A.count,")"]},A.id))})}),g?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):v.length===0?i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("i",{className:"ri-file-text-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No contracts found."})]}):i.jsx("div",{className:"space-y-4",children:v.map(A=>i.jsx(ve,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(A),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${U(A.type)}`,children:i.jsx("i",{className:`${D(A.type)} text-lg`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:A.title}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[A.surrogateName,"  ",A.parentName]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Created: ",A.createdAt.toLocaleDateString()]})]})]}),i.jsxs("div",{className:"text-right",children:[k(A.status),i.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:I(A.value)})]})]})},A.id))}),t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Contract Details"}),i.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-16 h-16 rounded-lg flex items-center justify-center ${U(t.type)}`,children:i.jsx("i",{className:`${D(t.type)} text-2xl`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.title}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Contract ID: ",t.id.slice(0,8)]}),k(t.status)]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Contract Information"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:z(t.type)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Value:"}),i.jsx("span",{className:"text-gray-900 dark:text-white font-semibold",children:I(t.value)})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Timeline"}),i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Created:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:t.createdAt.toLocaleDateString()})]})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Parties Involved"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("i",{className:"ri-user-heart-line text-blue-600 dark:text-blue-400"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Surrogate"})]}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.surrogateName})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("i",{className:"ri-parent-line text-green-600 dark:text-green-400"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Intended Parents"})]}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.parentName})]})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsx(fe,{color:"blue",className:"flex-1",onClick:()=>s(null),children:"Close"})})]})]})})}),l&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-lg w-full",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Contract"}),i.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"text-center py-8",children:[i.jsx("i",{className:"ri-file-add-line text-4xl text-gray-400 mb-4"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Contract creation form will be implemented here."}),i.jsx(fe,{variant:"outline",onClick:()=>c(!1),children:"Close"})]})]})})})]})]})]})},XP=()=>{const n=dr(),{login:e,initializing:t}=Zf(),[s,l]=E.useState({email:"",password:"",rememberMe:!1}),[c,d]=E.useState(!1),[f,g]=E.useState(null),p=v=>{const{name:w,value:k,type:D,checked:U}=v.target;l(I=>({...I,[w]:D==="checkbox"?U:k}))},x=async v=>{if(v.preventDefault(),g(null),!t){d(!0);try{await e({email:s.email.trim(),password:s.password,rememberMe:s.rememberMe}),n("/")}catch(w){if(w instanceof Xn)switch(w.code){case"auth/invalid-credential":case"auth/invalid-email":case"auth/user-not-found":case"auth/wrong-password":g("Invalid email or password. Please try again.");break;case"auth/user-disabled":g("This account has been disabled. Contact your administrator.");break;case"auth/too-many-requests":g("Too many failed attempts. Please wait a moment before trying again.");break;default:g("Unable to sign in. Please try again later.")}else g("Unable to sign in. Please try again later.")}finally{d(!1)}}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-16 h-16 bg-blue-600 dark:bg-blue-500 rounded-xl flex items-center justify-center",children:i.jsx("i",{className:"ri-heart-pulse-line text-2xl text-white"})})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Sign in to Family Matters"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Access your surrogacy admin portal"})]}),i.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow-xl rounded-xl sm:px-10 border border-gray-200 dark:border-gray-700",children:i.jsxs("form",{className:"space-y-6",onSubmit:x,children:[f&&i.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700 dark:border-red-900 dark:bg-red-950/60 dark:text-red-400",children:f}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email address"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s.email,onChange:p,className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"Enter your email"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("i",{className:"ri-mail-line text-gray-400 dark:text-gray-500 text-sm"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s.password,onChange:p,className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"Enter your password"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("i",{className:"ri-lock-line text-gray-400 dark:text-gray-500 text-sm"})})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"remember-me",name:"rememberMe",type:"checkbox",checked:s.rememberMe,onChange:p,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"}),i.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Remember me"})]}),i.jsx("div",{className:"text-sm",children:i.jsx(Ji,{to:"/auth/forgot-password",className:"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300",children:"Forgot your password?"})})]}),i.jsx("div",{children:i.jsx(fe,{type:"submit",disabled:c||t,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed dark:focus:ring-offset-gray-800",children:c?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Signing in..."]}):t?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-time-line mr-2"}),"Initializing..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-login-box-line mr-2"}),"Sign in"]})})}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"New to Family Matters?"})})]}),i.jsx("div",{className:"mt-6",children:i.jsxs(Ji,{to:"/auth/signup",className:"w-full flex justify-center py-2.5 px-4 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm bg-white dark:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",children:[i.jsx("i",{className:"ri-user-add-line mr-2"}),"Create new account"]})})]})]})})}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" 2024 Family Matters. All rights reserved."})})]})},WP=()=>{const n=dr(),{signup:e}=Zf(),[t,s]=E.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"admin",agreeToTerms:!1}),[l,c]=E.useState(!1),[d,f]=E.useState({}),[g,p]=E.useState(null),x=k=>{const{name:D,value:U,type:I}=k.target,z=I==="checkbox"?k.target.checked:!1;s(A=>({...A,[D]:I==="checkbox"?z:U})),d[D]&&f(A=>({...A,[D]:""}))},v=()=>{const k={};return t.firstName.trim()||(k.firstName="First name is required"),t.lastName.trim()||(k.lastName="Last name is required"),t.email.trim()||(k.email="Email is required"),t.password||(k.password="Password is required"),t.password.length<8&&(k.password="Password must be at least 8 characters"),t.password!==t.confirmPassword&&(k.confirmPassword="Passwords do not match"),t.agreeToTerms||(k.agreeToTerms="You must agree to the terms"),f(k),Object.keys(k).length===0},w=async k=>{if(k.preventDefault(),!!v()){c(!0),p(null);try{const D=await e({email:t.email.trim(),password:t.password}),U=`${t.firstName} ${t.lastName}`.trim();U&&await h6(D.user,{displayName:U}),n("/")}catch(D){if(D instanceof Xn)switch(D.code){case"auth/email-already-in-use":p("An account with this email already exists. Try signing in instead.");break;case"auth/invalid-email":p("The email address appears to be invalid.");break;case"auth/weak-password":p("Your password is too weak. Please choose a stronger password.");break;default:p("Unable to create your account right now. Please try again later.")}else p("Unable to create your account right now. Please try again later.")}finally{c(!1)}}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-16 h-16 bg-blue-600 dark:bg-blue-500 rounded-xl flex items-center justify-center",children:i.jsx("i",{className:"ri-heart-pulse-line text-2xl text-white"})})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Create your account"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Join the Family Matters admin portal"})]}),i.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow-xl rounded-xl sm:px-10 border border-gray-200 dark:border-gray-700",children:i.jsxs("form",{className:"space-y-6",onSubmit:w,children:[g&&i.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700 dark:border-red-900 dark:bg-red-950/60 dark:text-red-400",children:g}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"First name"}),i.jsxs("div",{className:"mt-1",children:[i.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:t.firstName,onChange:x,className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"First name"}),d.firstName&&i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:d.firstName})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Last name"}),i.jsxs("div",{className:"mt-1",children:[i.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:t.lastName,onChange:x,className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"Last name"}),d.lastName&&i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:d.lastName})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email address"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t.email,onChange:x,className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"Enter your email"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("i",{className:"ri-mail-line text-gray-400 dark:text-gray-500 text-sm"})}),d.email&&i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:d.email})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Role"}),i.jsx("div",{className:"mt-1",children:i.jsxs("select",{id:"role",name:"role",value:t.role,onChange:x,className:"appearance-none block w-full px-3 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[i.jsx("option",{value:"admin",children:"Administrator"}),i.jsx("option",{value:"coordinator",children:"Program Coordinator"}),i.jsx("option",{value:"medical",children:"Medical Staff"}),i.jsx("option",{value:"legal",children:"Legal Advisor"})]})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:t.password,onChange:x,className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"Create a password"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("i",{className:"ri-lock-line text-gray-400 dark:text-gray-500 text-sm"})}),d.password&&i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:d.password})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirm password"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:t.confirmPassword,onChange:x,className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"Confirm your password"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("i",{className:"ri-lock-line text-gray-400 dark:text-gray-500 text-sm"})}),d.confirmPassword&&i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:d.confirmPassword})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"agreeToTerms",name:"agreeToTerms",type:"checkbox",checked:t.agreeToTerms,onChange:x,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"}),i.jsxs("label",{htmlFor:"agreeToTerms",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:["I agree to the"," ",i.jsx(Ji,{to:"/terms",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300",children:"Terms of Service"})," ","and"," ",i.jsx(Ji,{to:"/privacy",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300",children:"Privacy Policy"})]})]}),d.agreeToTerms&&i.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:d.agreeToTerms}),i.jsx("div",{children:i.jsx(fe,{type:"submit",disabled:l,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed dark:focus:ring-offset-gray-800",children:l?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Creating account..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-user-add-line mr-2"}),"Create account"]})})}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Already have an account?"})})]}),i.jsx("div",{className:"mt-6",children:i.jsxs(Ji,{to:"/auth/login",className:"w-full flex justify-center py-2.5 px-4 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm bg-white dark:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",children:[i.jsx("i",{className:"ri-login-box-line mr-2"}),"Sign in instead"]})})]})]})})}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" 2024 Family Matters. All rights reserved."})})]})};function JP(){return i.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center px-4",children:[i.jsx("h1",{className:"text-5xl md:text-5xl font-semibold text-gray-100",children:"404"}),i.jsx("h1",{className:"text-2xl md:text-3xl font-semibold mt-6",children:"This page has not been generated"}),i.jsx("p",{className:"mt-4 text-xl md:text-2xl text-gray-500",children:"Tell me what you would like on this page"})]})}const Ka="tasks",$c={getAllTasks:async()=>{try{const n=Ze(Ie(be,Ka),kt("dueDate","asc"));return(await tt(n)).docs.map(t=>({id:t.id,...t.data()}))}catch(n){throw console.error("Error fetching tasks:",n),n}},createTask:async n=>{try{return(await Tr(Ie(be,Ka),{...n,createdAt:De.now(),updatedAt:De.now()})).id}catch(e){throw console.error("Error creating task:",e),e}},updateTask:async(n,e)=>{try{const t=ct(be,Ka,n);await Vt(t,{...e,updatedAt:De.now()})}catch(t){throw console.error("Error updating task:",t),t}},deleteTask:async n=>{try{await rl(ct(be,Ka,n))}catch(e){throw console.error("Error deleting task:",e),e}},getTasksByUserId:async n=>{try{const e=Ze(Ie(be,Ka),bn("assignee","==",n),kt("dueDate","asc"));return(await tt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.warn("Error fetching tasks by user (possibly missing index), trying simple fetch",e);try{const t=Ze(Ie(be,Ka));return(await tt(t)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.assignee===n).sort((l,c)=>l.dueDate.localeCompare(c.dueDate))}catch(t){return console.error("Fallback fetch also failed",t),[]}}},getTasksByStatus:async n=>{try{const e=Ze(Ie(be,Ka),bn("isCompleted","==",n),kt("dueDate","asc"));return(await tt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.warn("Error fetching tasks by status (possibly missing index), trying simple fetch",e);try{const t=Ze(Ie(be,Ka));return(await tt(t)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.isCompleted===n).sort((l,c)=>l.dueDate.localeCompare(c.dueDate))}catch(t){return console.error("Fallback fetch also failed",t),[]}}}},ZP=()=>{const[n,e]=E.useState("all"),[t,s]=E.useState([]),[l,c]=E.useState([]),[d,f]=E.useState("all"),[g,p]=E.useState(null),[x,v]=E.useState(!1),[w,k]=E.useState(!0),[D,U]=E.useState(null),[I,z]=E.useState({title:"",description:"",assignee:"",assigneeName:"",dueDate:"",isCompleted:!1}),A=async()=>{k(!0);try{const T=await $c.getAllTasks();s(Array.isArray(T)?T:[]),U(null)}catch(T){console.error(T),U("Failed to load tasks"),s([])}finally{k(!1)}},q=async()=>{try{const S=(await tt(Ie(be,"users"))).docs.map(M=>({id:M.id,name:M.data().firstName||M.data().email||"Unknown User"}));c(S)}catch(T){console.error("Error fetching users:",T)}};E.useEffect(()=>{A(),q()},[]);const K=E.useMemo(()=>{if(!Array.isArray(t))return[];let T=t;return n==="pending"?T=T.filter(S=>!S.isCompleted):n==="completed"&&(T=T.filter(S=>S.isCompleted)),d!=="all"&&(T=T.filter(S=>S.assignee===d)),T},[t,n,d]),F=()=>{z({title:"",description:"",assignee:"",assigneeName:"",dueDate:new Date().toISOString().split("T")[0],isCompleted:!1}),v(!0)},ne=T=>{z(T),v(!0),p(null)},O=async T=>{T.preventDefault(),k(!0);try{const S=l.find(me=>me.id===I.assignee),M={...I,assigneeName:S?.name||I.assigneeName||""};I.id?await $c.updateTask(I.id,M):await $c.createTask(M),await A(),v(!1)}catch(S){console.error(S),U("Failed to save task")}finally{k(!1)}},L=async T=>{if(window.confirm("Are you sure you want to delete this task?")){k(!0);try{await $c.deleteTask(T),await A(),p(null)}catch{U("Failed to delete task")}finally{k(!1)}}},j=async T=>{try{await $c.updateTask(T.id,{isCompleted:!T.isCompleted}),await A()}catch(S){console.error("Error toggling task completion:",S)}},C=(T,S)=>{if(S)return!1;const M=new Date().toISOString().split("T")[0];return T<M};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Tasks"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and track tasks for users."})]}),i.jsxs(fe,{color:"blue",onClick:F,children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Task"]})]})}),i.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-center",children:[i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:["all","pending","completed"].map(T=>i.jsxs("button",{onClick:()=>e(T),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors capitalize ${n===T?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[T," (",T==="all"?t.length:T==="pending"?t.filter(S=>!S.isCompleted).length:t.filter(S=>S.isCompleted).length,")"]},T))}),i.jsx(yf,{options:[{id:"all",name:"All Users"},...l],value:d,onChange:T=>f(T),placeholder:"Filter by user...",className:"w-64"})]}),D&&i.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:D}),w&&!x?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):i.jsx("div",{className:"space-y-4",children:K.length===0?i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("i",{className:"ri-task-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No tasks found."})]}):K.map(T=>i.jsx(ve,{className:`hover:shadow-lg transition-shadow cursor-pointer ${C(T.dueDate,T.isCompleted)?"border-l-4 border-red-500":""}`,onClick:()=>p(T),children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[i.jsx("button",{onClick:S=>{S.stopPropagation(),j(T)},className:`w-6 h-6 rounded border-2 flex items-center justify-center transition-colors ${T.isCompleted?"bg-green-500 border-green-500":"border-gray-300 dark:border-gray-600 hover:border-green-500"}`,children:T.isCompleted&&i.jsx("i",{className:"ri-check-line text-white text-sm"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:`font-semibold text-gray-900 dark:text-white ${T.isCompleted?"line-through opacity-60":""}`,children:T.title}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:T.description}),i.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-500 dark:text-gray-400",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"ri-user-line"}),T.assigneeName||"Unassigned"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"ri-calendar-line"}),T.dueDate]}),C(T.dueDate,T.isCompleted)&&i.jsx(Ne,{color:"red",children:"Overdue"})]})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:T.isCompleted?i.jsx(Ne,{color:"green",children:"Completed"}):i.jsx(Ne,{color:"yellow",children:"Pending"})})]})},T.id))}),g&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Task Details"}),i.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:g.title}),g.isCompleted?i.jsx(Ne,{color:"green",className:"mt-2",children:"Completed"}):i.jsx(Ne,{color:"yellow",className:"mt-2",children:"Pending"})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-6 rounded-xl space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Description"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:g.description})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Assigned To"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:g.assigneeName||"Unassigned"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Due Date"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:g.dueDate})]})]}),C(g.dueDate,g.isCompleted)&&i.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 p-3 rounded-lg",children:i.jsxs("p",{className:"text-red-600 dark:text-red-400 font-medium",children:[i.jsx("i",{className:"ri-error-warning-line mr-2"}),"This task is overdue"]})})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsxs(fe,{color:"blue",className:"flex-1",onClick:()=>ne(g),children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit"]}),i.jsxs(fe,{color:g.isCompleted?"blue":"green",variant:"outline",className:"flex-1",onClick:()=>{j(g),p(null)},children:[i.jsx("i",{className:`${g.isCompleted?"ri-close-circle-line":"ri-check-line"} mr-2`}),g.isCompleted?"Mark Incomplete":"Mark Complete"]}),i.jsxs(fe,{color:"red",variant:"outline",className:"flex-1",onClick:()=>g.id&&L(g.id),children:[i.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Delete"]})]})]})]})})}),x&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:i.jsxs("form",{onSubmit:O,className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:I.id?"Edit Task":"New Task"}),i.jsx("button",{type:"button",onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),i.jsx("input",{type:"text",required:!0,value:I.title,onChange:T=>z({...I,title:T.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Upload Medical Records"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),i.jsx("textarea",{required:!0,value:I.description,onChange:T=>z({...I,description:T.target.value}),rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Please upload your vaccination records..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{children:i.jsx(yf,{label:"Assign To",options:l,value:I.assignee||"",onChange:T=>z({...I,assignee:T}),placeholder:"Select User",required:!0})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date"}),i.jsx("input",{type:"date",required:!0,value:I.dueDate,onChange:T=>z({...I,dueDate:T.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),I.id&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"completed",checked:I.isCompleted,onChange:T=>z({...I,isCompleted:T.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"completed",className:"text-sm text-gray-700 dark:text-gray-300",children:"Mark as completed"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx(fe,{type:"button",variant:"outline",className:"flex-1",onClick:()=>v(!1),children:"Cancel"}),i.jsx(fe,{type:"submit",color:"blue",className:"flex-1",disabled:w,children:w?"Saving...":"Save Task"})]})]})})})]})]})]})},co="baby_watch",yo={getAllUpdates:async()=>{try{const n=Ze(Ie(be,co),kt("date","desc"));return(await tt(n)).docs.map(t=>({id:t.id,...t.data()}))}catch(n){throw console.error("Error fetching baby watch updates:",n),n}},uploadImage:async(n,e)=>{try{const t=Date.now(),s=`${e}_${t}_${n.name}`,l=cl(ul,`baby_watch/${s}`);return await NS(l,n),{url:await Ku(l),path:`baby_watch/${s}`}}catch(t){throw console.error("Error uploading image:",t),t}},createUpdate:async(n,e)=>{try{let t=n.imageUrl,s=n.imagePath;if(e){const{url:c,path:d}=await yo.uploadImage(e,n.caseId);t=c,s=d}return(await Tr(Ie(be,co),{...n,imageUrl:t,imagePath:s,createdAt:De.now(),updatedAt:De.now()})).id}catch(t){throw console.error("Error creating baby watch update:",t),t}},updateUpdate:async(n,e,t)=>{try{const s=ct(be,co,n);let l={...e,updatedAt:De.now()};if(t&&e.caseId){const{url:c,path:d}=await yo.uploadImage(t,e.caseId);l.imageUrl=c,l.imagePath=d}await Vt(s,l)}catch(s){throw console.error("Error updating baby watch update:",s),s}},deleteUpdate:async(n,e)=>{try{if(e)try{const t=cl(ul,e);await jS(t)}catch(t){console.warn("Error deleting image from storage:",t)}await rl(ct(be,co,n))}catch(t){throw console.error("Error deleting baby watch update:",t),t}},getUpdatesByCaseId:async n=>{try{const e=Ze(Ie(be,co),bn("caseId","==",n),kt("date","desc"));return(await tt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.warn("Error fetching updates by case (possibly missing index), trying simple fetch",e);try{const t=Ze(Ie(be,co));return(await tt(t)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.caseId===n).sort((l,c)=>c.date.localeCompare(l.date))}catch(t){return console.error("Fallback fetch also failed",t),[]}}}},e5=()=>{const[n,e]=E.useState([]),[t,s]=E.useState([]),[l,c]=E.useState("all"),[d,f]=E.useState(null),[g,p]=E.useState(!1),[x,v]=E.useState(!0),[w,k]=E.useState(null),[D,U]=E.useState(null),[I,z]=E.useState(null),[A,q]=E.useState({caseId:"",date:new Date().toISOString().split("T")[0],gestationalAge:"",weight:"",heartRate:"",medicalNotes:"",sharedWithParents:!0}),K=async()=>{v(!0);try{const S=await yo.getAllUpdates();e(Array.isArray(S)?S:[]),k(null)}catch(S){console.error(S),k("Failed to load updates"),e([])}finally{v(!1)}},F=async()=>{try{const M=(await tt(Ie(be,"cases"))).docs.map(me=>({id:me.id,name:`${me.data().surrogateName} & ${me.data().parentName}`}));s(M)}catch(S){console.error("Error fetching cases:",S)}};E.useEffect(()=>{K(),F()},[]);const ne=l==="all"?n:n.filter(S=>S.caseId===l),O=()=>{q({caseId:"",date:new Date().toISOString().split("T")[0],gestationalAge:"",weight:"",heartRate:"",medicalNotes:"",sharedWithParents:!0}),U(null),z(null),p(!0)},L=S=>{q(S),z(S.imageUrl||null),U(null),p(!0),f(null)},j=S=>{const M=S.target.files?.[0];if(M){U(M);const me=new FileReader;me.onloadend=()=>{z(me.result)},me.readAsDataURL(M)}},C=async S=>{S.preventDefault(),v(!0);try{A.id?await yo.updateUpdate(A.id,A,D||void 0):await yo.createUpdate(A,D||void 0),await K(),p(!1)}catch(M){console.error(M),k("Failed to save update")}finally{v(!1)}},T=async(S,M)=>{if(window.confirm("Are you sure you want to delete this update?")){v(!0);try{await yo.deleteUpdate(S,M),await K(),f(null)}catch{k("Failed to delete update")}finally{v(!1)}}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Baby Watch"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Medical updates and ultrasound tracking."})]}),i.jsxs(fe,{color:"blue",onClick:O,children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Update"]})]})}),i.jsx("div",{className:"mb-6",children:i.jsxs("select",{value:l,onChange:S=>c(S.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:[i.jsxs("option",{value:"all",children:["All Cases (",n.length,")"]}),t.map(S=>i.jsxs("option",{value:S.id,children:[S.name," (",n.filter(M=>M.caseId===S.id).length,")"]},S.id))]})}),w&&i.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:w}),x&&!g?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ne.length===0?i.jsxs("div",{className:"col-span-full text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("i",{className:"ri-heart-pulse-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No updates found."})]}):ne.map(S=>i.jsxs(ve,{className:"hover:shadow-lg transition-shadow cursor-pointer overflow-hidden",onClick:()=>f(S),children:[S.imageUrl&&i.jsx("div",{className:"w-full h-48 bg-gray-100 dark:bg-gray-700 mb-4 -mt-6 -mx-6 overflow-hidden",children:i.jsx("img",{src:S.imageUrl,alt:"Ultrasound",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:S.gestationalAge}),S.sharedWithParents&&i.jsx(Ne,{color:"green",children:"Shared"})]}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("i",{className:"ri-calendar-line"}),i.jsx("span",{children:S.date})]}),S.weight&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("i",{className:"ri-scales-line"}),i.jsx("span",{children:S.weight})]}),S.heartRate&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("i",{className:"ri-heart-pulse-line"}),i.jsx("span",{children:S.heartRate})]})]}),i.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2",children:S.medicalNotes})]})]},S.id))}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Update Details"}),i.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),d.imageUrl&&i.jsx("div",{className:"mb-6 rounded-lg overflow-hidden",children:i.jsx("img",{src:d.imageUrl,alt:"Ultrasound",className:"w-full h-auto"})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:d.gestationalAge}),d.sharedWithParents&&i.jsx(Ne,{color:"green",children:"Shared with Parents"})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-6 rounded-xl space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Date"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:d.date})]}),d.weight&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Weight"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:d.weight})]}),d.heartRate&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Heart Rate"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:d.heartRate})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Medical Notes"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:d.medicalNotes})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsxs(fe,{color:"blue",className:"flex-1",onClick:()=>L(d),children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit"]}),i.jsxs(fe,{color:"red",variant:"outline",className:"flex-1",onClick:()=>d.id&&T(d.id,d.imagePath),children:[i.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Delete"]})]})]})]})})}),g&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:i.jsxs("form",{onSubmit:C,className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:A.id?"Edit Update":"New Update"}),i.jsx("button",{type:"button",onClick:()=>p(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ultrasound Image"}),i.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:I?i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:I,alt:"Preview",className:"max-h-64 mx-auto rounded-lg"}),i.jsx("button",{type:"button",onClick:()=>{U(null),z(null)},className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:i.jsx("i",{className:"ri-delete-bin-line"})})]}):i.jsxs("div",{children:[i.jsx("i",{className:"ri-image-add-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Click to upload or drag and drop"}),i.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"hidden",id:"image-upload"}),i.jsx("label",{htmlFor:"image-upload",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg cursor-pointer hover:bg-blue-700",children:"Choose File"})]})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Case"}),i.jsxs("select",{required:!0,value:A.caseId,onChange:S=>q({...A,caseId:S.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:[i.jsx("option",{value:"",children:"Select Case"}),t.map(S=>i.jsx("option",{value:S.id,children:S.name},S.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date"}),i.jsx("input",{type:"date",required:!0,value:A.date,onChange:S=>q({...A,date:S.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Gestational Age"}),i.jsx("input",{type:"text",required:!0,value:A.gestationalAge,onChange:S=>q({...A,gestationalAge:S.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. 12 Weeks"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Weight"}),i.jsx("input",{type:"text",value:A.weight,onChange:S=>q({...A,weight:S.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. 50g"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Heart Rate"}),i.jsx("input",{type:"text",value:A.heartRate,onChange:S=>q({...A,heartRate:S.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. 150 bpm"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Medical Notes"}),i.jsx("textarea",{required:!0,value:A.medicalNotes,onChange:S=>q({...A,medicalNotes:S.target.value}),rows:4,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Everything looks great! Baby is developing well..."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"shared",checked:A.sharedWithParents,onChange:S=>q({...A,sharedWithParents:S.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"shared",className:"text-sm text-gray-700 dark:text-gray-300",children:"Share with parents"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx(fe,{type:"button",variant:"outline",className:"flex-1",onClick:()=>p(!1),children:"Cancel"}),i.jsx(fe,{type:"submit",color:"blue",className:"flex-1",disabled:x,children:x?"Saving...":"Save Update"})]})]})})})]})]})]})},t5="modulepreload",n5=function(n){return"/"+n},TN={},Dp=function(e,t,s){let l=Promise.resolve();if(t&&t.length>0){let p=function(x){return Promise.all(x.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};var d=p;document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=f?.nonce||f?.getAttribute("nonce");l=p(t.map(x=>{if(x=n5(x),x in TN)return;TN[x]=!0;const v=x.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${w}`))return;const k=document.createElement("link");if(k.rel=v?"stylesheet":t5,v||(k.as="script"),k.crossOrigin="",k.href=x,g&&k.setAttribute("nonce",g),document.head.appendChild(k),v)return new Promise((D,U)=>{k.addEventListener("load",D),k.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${x}`)))})}))}function c(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return l.then(f=>{for(const g of f||[])g.status==="rejected"&&c(g.reason);return e().catch(c)})},On="conversations",Ki="messages",Ya={getConversations:async n=>{try{const e=Ze(Ie(be,On),bn("participants","array-contains",n),kt("lastMessageTime","desc"));return(await tt(e)).docs.map(s=>({id:s.id,...s.data(),lastMessageTime:s.data().lastMessageTime?.toDate?.()||new Date(s.data().lastMessageTime)}))}catch(e){throw console.error("Error fetching conversations:",e),e}},getConversationById:async n=>{try{const e=await cu(ct(be,On,n));if(!e.exists())throw new Error("Conversation not found");const t={id:e.id,...e.data(),lastMessageTime:e.data().lastMessageTime?.toDate?.()||new Date(e.data().lastMessageTime)},s=Ze(Ie(be,On,n,Ki),kt("timestamp","asc")),c=(await tt(s)).docs.map(d=>({id:d.id,...d.data(),timestamp:d.data().timestamp?.toDate?.()||new Date(d.data().timestamp)}));return{conversation:t,messages:c}}catch(e){throw console.error("Error fetching conversation:",e),e}},createConversation:async(n,e,t,s)=>{try{const l=Ze(Ie(be,On),bn("participants","array-contains",n)),d=(await tt(l)).docs.find(g=>{const p=g.data().participants;return p.includes(t)&&p.length===2});return d?d.id:(await Tr(Ie(be,On),{participants:[n,t],participantNames:{[n]:e,[t]:s},lastMessage:"",lastMessageTime:De.now(),unreadCount:{[n]:0,[t]:0},createdAt:De.now()})).id}catch(l){throw console.error("Error creating conversation:",l),l}},sendMessage:async(n,e,t,s,l,c)=>{try{await Tr(Ie(be,On,n,Ki),{senderId:e,senderName:t,text:s,mediaUrl:l?.url||null,mediaType:l?.type||null,replyTo:c||null,timestamp:De.now(),read:!1});const d=ct(be,On,n),f=await cu(d);if(f.exists()){const g=f.data().participants,x={...f.data().unreadCount};g.forEach(v=>{v!==e&&(x[v]=(x[v]||0)+1)}),await Vt(d,{lastMessage:l?`Sent a ${l.type}`:s.substring(0,100),lastMessageTime:De.now(),unreadCount:x})}}catch(d){throw console.error("Error sending message:",d),d}},markAsRead:async(n,e)=>{try{const t=ct(be,On,n),s=await cu(t);if(s.exists()){const c={...s.data().unreadCount,[e]:0};await Vt(t,{unreadCount:c})}}catch(t){throw console.error("Error marking as read:",t),t}},deleteMessage:async(n,e)=>{try{const{deleteDoc:t}=await Dp(async()=>{const{deleteDoc:s}=await Promise.resolve().then(()=>_p);return{deleteDoc:s}},[]);await t(ct(be,On,n,Ki,e))}catch(t){throw console.error("Error deleting message:",t),t}},clearChat:async n=>{try{const e=Ze(Ie(be,On,n,Ki)),t=await tt(e),{deleteDoc:s}=await Dp(async()=>{const{deleteDoc:d}=await Promise.resolve().then(()=>_p);return{deleteDoc:d}},void 0),l=t.docs.map(d=>s(ct(be,On,n,Ki,d.id)));await Promise.all(l);const c=ct(be,On,n);await Vt(c,{lastMessage:"Chat cleared",lastMessageTime:De.now()})}catch(e){throw console.error("Error clearing chat:",e),e}},deleteConversation:async n=>{try{const e=Ze(Ie(be,On,n,Ki)),t=await tt(e),{deleteDoc:s}=await Dp(async()=>{const{deleteDoc:c}=await Promise.resolve().then(()=>_p);return{deleteDoc:c}},void 0),l=t.docs.map(c=>s(ct(be,On,n,Ki,c.id)));await Promise.all(l),await s(ct(be,On,n))}catch(e){throw console.error("Error deleting conversation:",e),e}}};const r5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),DS=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();var s5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const a5=E.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...f},g)=>E.createElement("svg",{ref:g,...s5,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:DS("lucide",l),...f},[...d.map(([p,x])=>E.createElement(p,x)),...Array.isArray(c)?c:[c]]));const ta=(n,e)=>{const t=E.forwardRef(({className:s,...l},c)=>E.createElement(a5,{ref:c,iconNode:e,className:DS(`lucide-${r5(n)}`,s),...l}));return t.displayName=`${n}`,t};const i5=ta("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const AN=ta("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const l5=ta("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const o5=ta("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);const CN=ta("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);const c5=ta("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const u5=ta("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);const d5=ta("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const RN=ta("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),IN=n=>n.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),DN=n=>{const e=["bg-blue-500","bg-purple-500","bg-indigo-500","bg-pink-500","bg-teal-500","bg-orange-500"];let t=0;for(let s=0;s<n.length;s++)t=n.charCodeAt(s)+((t<<5)-t);return e[Math.abs(t)%e.length]},h5=()=>{const[n,e]=E.useState([]),[t,s]=E.useState(null),[l,c]=E.useState([]),[d,f]=E.useState([]),[g,p]=E.useState(!1),[x,v]=E.useState(""),[w,k]=E.useState(""),[D,U]=E.useState(!0),[I,z]=E.useState(null),[A,q]=E.useState(!1),[K,F]=E.useState(!1),[ne,O]=E.useState(null),[L,j]=E.useState(null),[C,T]=E.useState(!1),[S,M]=E.useState(null),me=E.useRef(null),Te=E.useRef(null),X=E.useRef(null),H="admin123",ue="Admin",ge=async()=>{U(!0);try{const pe=await Ya.getConversations(H);e(Array.isArray(pe)?pe:[]),z(null)}catch(pe){console.error(pe),z("Failed to load conversations"),e([])}finally{U(!1)}},ee=async()=>{try{const Ue=(await tt(Ie(be,"users"))).docs.map(Ae=>({id:Ae.id,name:Ae.data().firstName||Ae.data().email||"Unknown User"}));f(Ue)}catch(pe){console.error("Error fetching users:",pe)}},V=async pe=>{try{const{messages:Ue}=await Ya.getConversationById(pe.id);if(c(Ue),s(pe),await Ya.markAsRead(pe.id,H),await ge(),Te.current){const Ae=Te.current;setTimeout(()=>{Ae.scrollTo({top:Ae.scrollHeight,behavior:"smooth"})},100)}}catch(Ue){console.error("Error loading conversation:",Ue)}},W=async pe=>{if(pe.preventDefault(),!(!w.trim()&&!ne||!t))try{let Ue;if(ne){q(!0);const Ae=cl(ul,`messages/${t.id}/${Date.now()}_${ne.file.name}`);await NS(Ae,ne.file),Ue={url:await Ku(Ae),type:ne.type}}await Ya.sendMessage(t.id,H,ue,w.trim(),Ue,S?.id),k(""),O(null),M(null),F(!1),await V(t),await ge()}catch(Ue){console.error("Error sending message:",Ue),z("Failed to send message")}finally{q(!1)}},ie=pe=>{const Ue=pe.target.files?.[0];if(Ue){const Ae=Ue.type.startsWith("image/")?"image":"file";O({file:Ue,type:Ae})}},we=async pe=>{if(t)try{await Ya.deleteMessage(t.id,pe),await V(t),j(null)}catch(Ue){console.error("Error deleting message:",Ue),z("Failed to delete message")}},G=pe=>{k(Ue=>Ue+pe)},he=["","","","","","","","","","","","","",""],xe=async()=>{if(x)try{const pe=d.find(yt=>yt.id===x);if(!pe)return;const Ue=await Ya.createConversation(H,ue,x,pe.name);await ge(),p(!1),v("");const Ae=n.find(yt=>yt.id===Ue);Ae&&await V(Ae)}catch(pe){console.error("Error creating conversation:",pe),z("Failed to create conversation")}},Ee=async()=>{if(t&&window.confirm("Are you sure you want to clear all messages? This cannot be undone."))try{await Ya.clearChat(t.id),await V(t),T(!1)}catch(pe){console.error("Error clearing chat:",pe),z("Failed to clear chat")}},Be=async()=>{if(t&&window.confirm("Delete this entire conversation? All messages will be lost."))try{await Ya.deleteConversation(t.id),s(null),await ge(),T(!1)}catch(pe){console.error("Error deleting conversation:",pe),z("Failed to delete conversation")}};E.useEffect(()=>{ge(),ee();const pe=Ue=>{const Ae=Ue.target;!Ae.closest(".emoji-trigger")&&!Ae.closest(".emoji-picker")&&F(!1),!Ae.closest(".message-options-trigger")&&!Ae.closest(".message-options-menu")&&j(null),!Ae.closest(".header-menu-trigger")&&!Ae.closest(".header-menu")&&T(!1)};return document.addEventListener("mousedown",pe),()=>document.removeEventListener("mousedown",pe)},[]);const rt=pe=>{const Ue=pe.participants.find(Ae=>Ae!==H);return Ue?pe.participantNames[Ue]:"Unknown"},bt=pe=>{const Ae=new Date().getTime()-new Date(pe).getTime(),yt=Math.floor(Ae/(1e3*60*60));return yt<24?new Date(pe).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):yt<48?"Yesterday":new Date(pe).toLocaleDateString("en-US",{month:"short",day:"numeric"})};return i.jsxs("div",{className:"flex h-screen bg-[#f8fafc] dark:bg-[#0f172a] overflow-hidden relative",children:[i.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-400/10 dark:bg-blue-600/5 blur-[120px] rounded-full pointer-events-none"}),i.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-indigo-400/10 dark:bg-indigo-600/5 blur-[120px] rounded-full pointer-events-none"}),i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative z-10",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-hidden p-4 md:p-6 lg:p-8",children:[i.jsxs("div",{className:"h-full flex flex-col max-w-7xl mx-auto w-full",children:[i.jsxs("div",{className:"mb-8 flex items-end justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 dark:text-white tracking-tight mb-2",children:"Messages"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),i.jsx("p",{className:"text-sm font-medium",children:"Secure Communication Hub"})]})]}),i.jsxs(fe,{color:"blue",onClick:()=>p(!0),className:"shadow-lg shadow-blue-500/20 hover:shadow-blue-500/40 transition-all duration-300 scale-105 active:scale-95",children:[i.jsx("i",{className:"ri-add-line mr-2 text-lg"}),i.jsx("span",{className:"font-semibold",children:"Start Chat"})]})]}),I&&i.jsxs("div",{className:"mb-6 p-4 bg-red-50/80 dark:bg-red-900/20 backdrop-blur-md border border-red-100 dark:border-red-900/30 text-red-600 dark:text-red-400 rounded-2xl flex items-center gap-3 animate-in slide-in-from-top duration-300",children:[i.jsx("i",{className:"ri-error-warning-line text-xl"}),i.jsx("span",{className:"font-medium",children:I})]}),i.jsxs("div",{className:"flex-1 flex gap-6 overflow-hidden",children:[i.jsxs("div",{className:"w-80 lg:w-96 flex-shrink-0 bg-white/70 dark:bg-slate-800/50 backdrop-blur-xl rounded-[2rem] border border-white/20 dark:border-slate-700/50 shadow-2xl flex flex-col overflow-hidden transition-all duration-500 hover:shadow-blue-500/5",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700/50 flex items-center justify-between",children:[i.jsxs("h2",{className:"font-bold text-slate-900 dark:text-white text-lg flex items-center gap-2",children:[i.jsx("i",{className:"ri-chat-history-line text-blue-500"}),"Conversations"]}),i.jsx("span",{className:"text-xs font-bold px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-full text-slate-500",children:n.length})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-2",children:D?i.jsxs("div",{className:"flex flex-col items-center justify-center h-48 gap-3",children:[i.jsx("div",{className:"w-8 h-8 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"}),i.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-widest",children:"Loading Chats"})]}):n.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center bg-slate-50/50 dark:bg-slate-900/20 rounded-3xl border border-dashed border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-2xl flex items-center justify-center mb-4",children:i.jsx("i",{className:"ri-chat-smile-2-line text-3xl text-slate-300"})}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"No active connections"}),i.jsx("button",{onClick:()=>p(!0),className:"mt-4 text-blue-500 text-sm font-bold hover:underline",children:"Start your first chat"})]}):n.map(pe=>{const Ue=rt(pe),Ae=t?.id===pe.id;return i.jsxs("button",{onClick:()=>V(pe),className:`w-full p-4 rounded-2xl transition-all duration-300 text-left group relative overflow-hidden ${Ae?"bg-blue-500 dark:bg-blue-600 shadow-lg shadow-blue-500/20":"hover:bg-white dark:hover:bg-slate-700/50"}`,children:[Ae&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent"}),i.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex-shrink-0 flex items-center justify-center font-bold text-white shadow-md ${Ae?"bg-white/20":DN(Ue)}`,children:IN(Ue)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[i.jsx("span",{className:`font-bold truncate ${Ae?"text-white":"text-slate-900 dark:text-white"}`,children:Ue}),i.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${Ae?"text-blue-100":"text-slate-400"}`,children:bt(pe.lastMessageTime)})]}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("p",{className:`text-xs truncate ${Ae?"text-blue-50":"text-slate-500 dark:text-slate-400"}`,children:pe.lastMessage||"Sent a secure message"}),pe.unreadCount[H]>0&&i.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-[10px] font-bold ring-2 ring-white dark:ring-slate-800 animate-bounce",children:pe.unreadCount[H]})]})]})]})]},pe.id)})})]}),i.jsx("div",{className:"flex-1 bg-white/70 dark:bg-slate-800/50 backdrop-blur-xl rounded-[2rem] border border-white/20 dark:border-slate-700/50 shadow-2xl flex flex-col overflow-hidden relative",children:t?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 dark:border-slate-700/50 flex items-center justify-between bg-white/30 dark:bg-slate-800/30",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-white ${DN(rt(t))}`,children:IN(rt(t))}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-slate-900 dark:text-white leading-tight",children:rt(t)}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Active Member"})]})]})]}),i.jsxs("div",{className:"flex gap-2 relative",children:[i.jsx("button",{className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors text-slate-400",children:i.jsx("i",{className:"ri-phone-line text-lg"})}),i.jsx("button",{onClick:()=>T(!C),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors text-slate-400 header-menu-trigger",children:i.jsx("i",{className:"ri-more-2-fill text-lg"})}),C&&i.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-2xl p-2 z-30 animate-in zoom-in-95 duration-200 header-menu",children:[i.jsxs("button",{onClick:()=>{},className:"w-full text-left px-4 py-2.5 text-sm font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-xl flex items-center gap-3 transition-colors",children:[i.jsx("i",{className:"ri-user-settings-line text-lg text-blue-500"})," View Profile"]}),i.jsxs("button",{onClick:Ee,className:"w-full text-left px-4 py-2.5 text-sm font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-xl flex items-center gap-3 transition-colors",children:[i.jsx("i",{className:"ri-delete-bin-line text-lg text-orange-500"})," Clear Chat"]}),i.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-700 my-1 mx-2"}),i.jsxs("button",{onClick:Be,className:"w-full text-left px-4 py-2.5 text-sm font-bold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl flex items-center gap-3 transition-colors",children:[i.jsx("i",{className:"ri-chat-delete-line text-lg"})," Delete Chat"]})]})]})]}),i.jsxs("div",{ref:Te,className:"flex-1 overflow-y-auto p-8 space-y-6 custom-scrollbar bg-slate-50/30 dark:bg-slate-900/10",children:[l.map((pe,Ue)=>{const Ae=pe.senderId===H,yt=Ue===0||new Date(pe.timestamp).getTime()-new Date(l[Ue-1].timestamp).getTime()>3e5,Yt=pe.replyTo?l.find(fs=>fs.id===pe.replyTo):null;return i.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-bottom-2 duration-300 group",children:[yt&&i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest bg-slate-100 dark:bg-slate-800/80 px-3 py-1 rounded-full backdrop-blur-sm",children:bt(pe.timestamp)})}),i.jsx("div",{className:`flex ${Ae?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`group relative max-w-[80%] md:max-w-[70%] ${Ae?"items-end":"items-start"}`,children:[Yt&&i.jsxs("div",{className:"mb-1 px-3 py-1.5 rounded-xl text-[11px] border-l-4 border-blue-500 bg-slate-100 dark:bg-slate-800 text-slate-500 max-w-full truncate",children:[i.jsx("span",{className:"font-bold block text-blue-500 mb-0.5",children:Yt.senderName}),Yt.text||"Media attachment"]}),i.jsxs("div",{className:`rounded-2xl shadow-sm transition-all duration-300 relative ${Ae?"bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-tr-none shadow-blue-500/10 hover:shadow-blue-500/20":"bg-white dark:bg-slate-700 text-slate-900 dark:text-white rounded-tl-none border border-white/50 dark:border-slate-600/50 hover:border-blue-200 dark:hover:border-blue-900"}`,children:[pe.mediaUrl&&i.jsx("div",{className:"mb-2 overflow-hidden rounded-xl",children:pe.mediaType==="image"?i.jsx("img",{src:pe.mediaUrl,alt:"attachment",className:"max-w-full rounded-lg hover:scale-[1.02] transition-transform cursor-pointer",onClick:()=>window.open(pe.mediaUrl,"_blank")}):i.jsxs("a",{href:pe.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[i.jsx(AN,{size:20}),i.jsx("span",{className:"text-sm font-medium",children:"Download Attachment"})]})}),pe.text&&i.jsx("p",{className:"text-[15px] leading-relaxed font-medium px-5 py-3",children:pe.text}),i.jsxs("div",{className:`absolute top-0 ${Ae?"right-full mr-2":"left-full ml-2"} opacity-0 group-hover:opacity-100 transition-opacity flex items-center`,children:[i.jsx("button",{onClick:()=>j(L===pe.id?null:pe.id),className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg text-slate-400 message-options-trigger",children:i.jsx(i5,{size:16})}),L===pe.id&&i.jsxs("div",{className:`absolute top-full z-20 mt-1 w-32 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-xl p-1 overflow-hidden animate-in zoom-in-95 duration-200 message-options-menu ${Ae?"right-0":"left-0"}`,children:[i.jsxs("button",{onClick:()=>{M(pe),j(null)},className:"w-full text-left px-3 py-2 text-xs font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg flex items-center gap-2",children:[i.jsx(CN,{size:14})," Reply"]}),Ae&&i.jsxs("button",{onClick:()=>we(pe.id),className:"w-full text-left px-3 py-2 text-xs font-bold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg flex items-center gap-2",children:[i.jsx(d5,{size:14})," Delete"]})]})]})]}),i.jsx("div",{className:`flex items-center gap-2 mt-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${Ae?"flex-row-reverse":"flex-row"}`,children:i.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-tighter",children:Ae?"Delivered":rt(t)})})]})})]},Ue)}),i.jsx("div",{ref:me})]}),i.jsxs("div",{className:"p-6 bg-white/30 dark:bg-slate-800/30 backdrop-blur-md border-t border-slate-100 dark:border-slate-700/50",children:[i.jsxs("div",{className:"max-w-4xl mx-auto mb-3 space-y-2",children:[S&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 animate-in slide-in-from-bottom-2 duration-200",children:[i.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[i.jsx(CN,{size:16,className:"text-blue-500 flex-shrink-0"}),i.jsxs("div",{className:"min-w-0",children:[i.jsxs("span",{className:"text-[10px] font-bold text-blue-500 uppercase block",children:["Replying to ",S.senderName]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 truncate",children:S.text||"Media"})]})]}),i.jsx("button",{onClick:()=>M(null),className:"text-slate-400 hover:text-red-500 p-1",children:i.jsx(RN,{size:16})})]}),ne&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-teal-50 dark:bg-teal-900/20 rounded-xl border border-teal-200 dark:border-teal-800 animate-in slide-in-from-bottom-2 duration-200",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[ne.type==="image"?i.jsx(l5,{size:20,className:"text-teal-500"}):i.jsx(AN,{size:20,className:"text-teal-500"}),i.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:ne.file.name})]}),i.jsx("button",{onClick:()=>O(null),className:"text-slate-400 hover:text-red-500 p-1",children:i.jsx(RN,{size:16})})]})]}),i.jsxs("form",{onSubmit:W,className:"relative max-w-4xl mx-auto flex items-center gap-3",children:[i.jsxs("div",{className:"flex-1 relative group",children:[i.jsx("input",{type:"text",value:w,onChange:pe=>k(pe.target.value),placeholder:A?"Uploading media...":"Type a message...",disabled:A,className:"w-full pl-6 pr-14 py-4 rounded-[1.5rem] bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all duration-300 shadow-inner"}),i.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2 text-slate-400",children:[i.jsx("button",{type:"button",onClick:()=>X.current?.click(),className:"hover:text-blue-500 transition-colors p-1",children:i.jsx(o5,{size:20})}),i.jsx("input",{type:"file",ref:X,className:"hidden",onChange:ie}),i.jsx("button",{type:"button",onClick:()=>F(!K),className:`hover:text-blue-500 transition-colors p-1 emoji-trigger ${K?"text-blue-500":""}`,children:i.jsx(u5,{size:20})})]}),K&&i.jsx("div",{className:"absolute bottom-full right-0 mb-4 p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-2xl z-20 grid grid-cols-7 gap-2 animate-in zoom-in-95 duration-200 emoji-picker",children:he.map(pe=>i.jsx("button",{type:"button",onClick:()=>G(pe),className:"text-xl hover:scale-125 transition-transform p-1",children:pe},pe))})]}),i.jsx("button",{type:"submit",disabled:!w.trim()&&!ne||A,className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-all duration-300 ${(w.trim()||ne)&&!A?"bg-blue-500 text-white shadow-lg shadow-blue-500/30 scale-100 border-none":"bg-slate-100 dark:bg-slate-800 text-slate-400 scale-95 border border-slate-200 dark:border-slate-700 cursor-not-allowed"}`,children:A?i.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-slate-500 rounded-full animate-spin"}):i.jsx(c5,{size:24,className:`transition-transform ${w.trim()||ne?"translate-x-0.5 -translate-y-0.5":""}`})})]})]})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-50/30 dark:bg-slate-900/10",children:i.jsxs("div",{className:"max-w-xs text-center animate-in fade-in zoom-in duration-700",children:[i.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 shadow-2xl shadow-blue-500/20 rotate-12",children:i.jsx("i",{className:"ri-message-3-fill text-5xl text-white -rotate-12"})}),i.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white mb-2 tracking-tight",children:"Select Chat"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium leading-relaxed",children:"Stay connected with your community. Select a conversation to start messaging."}),i.jsx("button",{onClick:()=>p(!0),className:"mt-8 px-6 py-3 bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 text-sm font-bold text-blue-500 hover:shadow-md transition-all active:scale-95",children:"Start New Journey"})]})})})]})]}),g&&i.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-in fade-in duration-300",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-[2.5rem] max-w-md w-full shadow-2xl border border-white/20 overflow-hidden animate-in zoom-in-95 duration-300",children:i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"New Chat"}),i.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Connect with a community member"})]}),i.jsx("button",{onClick:()=>p(!1),className:"w-10 h-10 flex items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-xl hover:bg-slate-200 transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-slate-600 dark:text-gray-300"})})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-3xl border border-slate-100 dark:border-slate-700",children:i.jsx(yf,{label:"Select Resident",options:d,value:x,onChange:pe=>v(pe),placeholder:"Search by name...",className:"searchable-dropdown-custom"})}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(fe,{variant:"outline",className:"flex-1 h-14 rounded-2xl font-bold border-2 hover:bg-slate-50",onClick:()=>p(!1),children:"Maybe Later"}),i.jsx(fe,{color:"blue",className:"flex-1 h-14 rounded-2xl font-bold shadow-lg shadow-blue-500/20",onClick:xe,disabled:!x,children:"Connect Now"})]})]})]})})})]})]})]})},Gc="cases",Kc=["Matching","Screening","Medical","Legal","Pregnancy","Completed"],zs={getAllCases:async()=>{try{const n=Ze(Ie(be,Gc),kt("updatedAt","desc"));return(await tt(n)).docs.map(t=>{const s=t.data();return{id:t.id,...s,createdAt:s.createdAt?.toDate?.()||new Date(s.createdAt),updatedAt:s.updatedAt?.toDate?.()||new Date(s.updatedAt),stageHistory:(s.stageHistory||[]).map(l=>({...l,completedAt:l.completedAt?.toDate?.()||new Date(l.completedAt)}))}})}catch(n){throw console.error("Error fetching cases:",n),n}},getCaseById:async n=>{try{const e=ct(be,Gc,n),t=await cu(e);if(!t.exists())return null;const s=t.data();return{id:t.id,...s,createdAt:s.createdAt?.toDate?.()||new Date(s.createdAt),updatedAt:s.updatedAt?.toDate?.()||new Date(s.updatedAt),stageHistory:(s.stageHistory||[]).map(l=>({...l,completedAt:l.completedAt?.toDate?.()||new Date(l.completedAt)}))}}catch(e){throw console.error("Error fetching case:",e),e}},createCase:async n=>{try{return(await Tr(Ie(be,Gc),{...n,stageHistory:[],createdAt:De.now(),updatedAt:De.now()})).id}catch(e){throw console.error("Error creating case:",e),e}},updateCaseStage:async(n,e,t,s)=>{try{const l=await zs.getCaseById(n);if(!l)throw new Error("Case not found");const c=Kc.indexOf(l.currentStage);if(Kc.indexOf(e)<=c&&e!=="Completed")throw new Error("Cannot move to a previous stage");const f={stage:l.currentStage,completedAt:new Date,completedBy:t,notes:s},g=[...l.stageHistory,f],p=ct(be,Gc,n);await Vt(p,{currentStage:e,stageHistory:g.map(x=>({...x,completedAt:De.fromDate(x.completedAt)})),updatedAt:De.now()})}catch(l){throw console.error("Error updating case stage:",l),l}},getCasesByStage:async n=>{try{const e=Ze(Ie(be,Gc),bn("currentStage","==",n),kt("updatedAt","desc"));return(await tt(e)).docs.map(s=>{const l=s.data();return{id:s.id,...l,createdAt:l.createdAt?.toDate?.()||new Date(l.createdAt),updatedAt:l.updatedAt?.toDate?.()||new Date(l.updatedAt),stageHistory:(l.stageHistory||[]).map(c=>({...c,completedAt:c.completedAt?.toDate?.()||new Date(c.completedAt)}))}})}catch(e){console.warn("Error fetching cases by stage (possibly missing index), trying simple fetch",e);try{return(await zs.getAllCases()).filter(s=>s.currentStage===n)}catch(t){return console.error("Fallback fetch also failed",t),[]}}},getNextStage:n=>{const e=Kc.indexOf(n);return e===-1||e===Kc.length-1?null:Kc[e+1]}},f5=()=>{const[n,e]=E.useState([]),[t,s]=E.useState("all"),[l,c]=E.useState(null),[d,f]=E.useState(!1),[g,p]=E.useState(!1),[x,v]=E.useState(""),[w,k]=E.useState(!0),[D,U]=E.useState(null),[I,z]=E.useState({surrogateId:"",surrogateName:"",parentId:"",parentName:"",notes:""}),A="admin123",q=["Matching","Screening","Medical","Legal","Pregnancy","Completed"],K=async()=>{k(!0);try{const T=await zs.getAllCases();e(Array.isArray(T)?T:[]),U(null)}catch(T){console.error(T),U("Failed to load cases"),e([])}finally{k(!1)}};E.useEffect(()=>{K()},[]);const F=async()=>{if(!I.surrogateId||!I.parentId){U("Please select both surrogate and parent");return}try{await zs.createCase({surrogateId:I.surrogateId,surrogateName:I.surrogateName,parentId:I.parentId,parentName:I.parentName,currentStage:"Matching",notes:I.notes}),await K(),p(!1),z({surrogateId:"",surrogateName:"",parentId:"",parentName:"",notes:""}),U(null)}catch(T){console.error(T),U("Failed to create case")}},ne=t==="all"?n:n.filter(T=>T.currentStage===t),O=T=>{switch(T){case"Matching":case"Screening":return"blue";case"Medical":case"Legal":case"Pregnancy":return"green";case"Completed":return"green";default:return"blue"}},L=T=>(q.indexOf(T)+1)/q.length*100,j=async()=>{if(l)try{const T=zs.getNextStage(l.currentStage);if(!T){U("Case is already at the final stage");return}await zs.updateCaseStage(l.id,T,A,x),await K(),f(!1),c(null),v("")}catch(T){console.error(T),U("Failed to progress case")}},C=T=>new Date(T).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(en,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Milestones"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Journey stage management and tracking."})]}),i.jsxs(fe,{color:"blue",onClick:()=>p(!0),children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Case"]})]})}),i.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:()=>s("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t==="all"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:["All (",n.length,")"]}),q.map(T=>i.jsxs("button",{onClick:()=>s(T),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===T?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[T," (",n.filter(S=>S.currentStage===T).length,")"]},T))]}),D&&i.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:D}),w?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):i.jsx("div",{className:"space-y-4",children:ne.length===0?i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("i",{className:"ri-roadmap-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No cases found."})]}):ne.map(T=>i.jsx(ve,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>c(T),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[T.surrogateName," & ",T.parentName]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Started ",C(T.createdAt)]})]}),i.jsx(Ne,{color:O(T.currentStage),children:T.currentStage})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Journey Progress"}),i.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Math.round(L(T.currentStage)),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:`${L(T.currentStage)}%`}})})]}),i.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:q.map((S,M)=>{const me=q.indexOf(T.currentStage),Te=M<me,X=M===me;return i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-xs font-medium ${Te?"bg-green-500 text-white":X?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:Te?i.jsx("i",{className:"ri-check-line"}):M+1}),M<q.length-1&&i.jsx("div",{className:`w-8 h-0.5 ${Te?"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`})]},S)})}),T.notes&&i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:["Note: ",T.notes]})]})},T.id))}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Case Details"}),i.jsx("button",{onClick:()=>c(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-6 rounded-xl space-y-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Surrogate"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:l.surrogateName})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Parent"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:l.parentName})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Current Stage"}),i.jsx(Ne,{color:O(l.currentStage),children:l.currentStage})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Started"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:C(l.createdAt)})]})]})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Stage History"}),l.stageHistory.length===0?i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No completed stages yet"}):i.jsx("div",{className:"space-y-3",children:l.stageHistory.map((T,S)=>i.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0",children:i.jsx("i",{className:"ri-check-line text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:T.stage}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:C(T.completedAt)})]}),T.notes&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:T.notes})]})]},S))})]}),i.jsx("div",{className:"flex gap-3 pt-2",children:zs.getNextStage(l.currentStage)?i.jsxs(fe,{color:"blue",className:"flex-1",onClick:()=>{f(!0)},children:[i.jsx("i",{className:"ri-arrow-right-line mr-2"}),"Progress to ",zs.getNextStage(l.currentStage)]}):i.jsxs("div",{className:"flex-1 p-3 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg text-center font-medium",children:[i.jsx("i",{className:"ri-check-double-line mr-2"}),"Journey Completed"]})})]})]})})}),d&&l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60] backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-md w-full shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Progress Stage"}),i.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:i.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Progress case from"," ",i.jsx("span",{className:"font-semibold",children:l.currentStage})," to"," ",i.jsx("span",{className:"font-semibold",children:zs.getNextStage(l.currentStage)}),"?"]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Completion Notes (Optional)"}),i.jsx("textarea",{value:x,onChange:T=>v(T.target.value),rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Add any notes about this stage completion..."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(fe,{variant:"outline",className:"flex-1",onClick:()=>f(!1),children:"Cancel"}),i.jsx(fe,{color:"blue",className:"flex-1",onClick:j,children:"Confirm Progress"})]})]})]})})}),g&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-md w-full shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Create New Case"}),i.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{children:i.jsx(Eu,{value:I.surrogateId,onChange:T=>z({...I,surrogateId:T}),onSelect:T=>z({...I,surrogateId:T.id,surrogateName:T.name.split(" (")[0]}),role:"Surrogate",label:"Select Surrogate",placeholder:"Choose a surrogate...",required:!0})}),i.jsx("div",{children:i.jsx(Eu,{value:I.parentId,onChange:T=>z({...I,parentId:T}),onSelect:T=>z({...I,parentId:T.id,parentName:T.name.split(" (")[0]}),role:"Intended Parent",label:"Select Parent",placeholder:"Choose a parent...",required:!0})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Initial Notes (Optional)"}),i.jsx("textarea",{value:I.notes,onChange:T=>z({...I,notes:T.target.value}),rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Add any initial notes about this case..."})]}),i.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:i.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[i.jsx("i",{className:"ri-information-line mr-1"}),"The case will start at the ",i.jsx("span",{className:"font-semibold",children:"Matching"})," stage."]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(fe,{variant:"outline",className:"flex-1",onClick:()=>p(!1),children:"Cancel"}),i.jsx(fe,{color:"blue",className:"flex-1",onClick:F,disabled:!I.surrogateId||!I.parentId,children:"Create Case"})]})]})]})})})]})]})]})},m5=()=>{const n=dr();return i.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 overflow-x-hidden",children:[i.jsx("nav",{className:"fixed w-full z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-800",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between h-16 items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:i.jsx("i",{className:"ri-heart-line text-white text-xl"})}),i.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Family Matters"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>n("/auth/login"),className:"text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Log In"}),i.jsx("button",{onClick:()=>n("/"),className:"px-4 py-2 rounded-full bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition-colors shadow-lg shadow-blue-600/20",children:"Dashboard"})]})]})})}),i.jsxs("section",{className:"relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("div",{className:"absolute top-0 right-0 w-[800px] h-[800px] bg-purple-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-[600px] h-[600px] bg-blue-500/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/4"})]}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center",children:[i.jsx("span",{className:"inline-block px-4 py-1.5 rounded-full bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm font-medium mb-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:"Reimagining Surrogacy Management"}),i.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold text-gray-900 dark:text-white mb-6 tracking-tight animate-in fade-in slide-in-from-bottom-8 duration-700 delay-100",children:["Making Family",i.jsx("br",{}),i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Actually Matters"})]}),i.jsx("p",{className:"max-w-2xl mx-auto text-xl text-gray-600 dark:text-gray-300 mb-10 animate-in fade-in slide-in-from-bottom-8 duration-700 delay-200",children:"A comprehensive, modern platform designed to streamline the journey for agencies, surrogates, and intended parents."}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 animate-in fade-in slide-in-from-bottom-8 duration-700 delay-300",children:[i.jsx("button",{onClick:()=>n("/"),className:"w-full sm:w-auto px-8 py-4 rounded-full bg-blue-600 hover:bg-blue-700 text-white font-semibold text-lg transition-transform hover:scale-105 shadow-xl shadow-blue-600/20",children:"Enter Dashboard"}),i.jsx("button",{className:"w-full sm:w-auto px-8 py-4 rounded-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Learn More"})]})]})]}),i.jsx("section",{className:"py-20 bg-gray-50 dark:bg-gray-800/50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:[{label:"Families Created",value:"500+"},{label:"Active Surrogates",value:"1,200+"},{label:"Success Rate",value:"98%"},{label:"Global Reach",value:"30+ Countries"}].map((e,t)=>i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:e.value}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e.label})]},t))})})}),i.jsx("section",{className:"py-24 relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Everything you need"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Powerful tools built specifically for the nuances of surrogacy program management."})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[{icon:"ri-dashboard-3-line",title:"Centralized Dashboard",desc:"Get a bird's eye view of all active cases, pending applications, and critical alerts in one place."},{icon:"ri-user-heart-line",title:"Smart Matching",desc:"AI-assisted matching tools to help find the perfect connection between surrogates and intended parents."},{icon:"ri-secure-payment-line",title:"Secure & Compliant",desc:"Enterprise-grade security ensuring all sensitive medical and personal data remains protected."},{icon:"ri-chat-smile-3-line",title:"Real-time Communication",desc:"Integrated messaging system keeping agencies, parents, and surrogates connected effortlessly."},{icon:"ri-calendar-event-line",title:"Journey Tracking",desc:"Detailed milestone tracking from initial application through to post-birth legalities."},{icon:"ri-file-text-line",title:"Doc Management",desc:"Streamlined document collection, verification, and storage workflows."}].map((e,t)=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl border border-gray-100 dark:border-gray-700 hover:shadow-xl transition-shadow group",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:i.jsx("i",{className:`${e.icon} text-2xl text-blue-600 dark:text-blue-400`})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:e.title}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:e.desc})]},t))})]})}),i.jsxs("section",{className:"py-24 bg-blue-600 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1549420042-2d109bb333e2?q=80&w=2670&auto=format&fit=crop')] bg-cover bg-center opacity-10 mix-blend-overlay"}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center relative z-10",children:[i.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-8",children:"Ready to modernize your agency?"}),i.jsx("button",{onClick:()=>n("/auth/register"),className:"px-8 py-4 bg-white text-blue-600 rounded-full font-bold text-lg hover:bg-gray-100 transition-colors shadow-xl",children:"Get Started Now"})]})]}),i.jsx("footer",{className:"bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 py-12",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center gap-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-lg flex items-center justify-center",children:i.jsx("i",{className:"ri-heart-line text-white text-xs"})}),i.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Family Matters"})]}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:" 2026 Family Matters. All rights reserved."}),i.jsxs("div",{className:"flex gap-6",children:[i.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx("i",{className:"ri-twitter-line text-xl"})}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx("i",{className:"ri-linkedin-fill text-xl"})}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx("i",{className:"ri-instagram-line text-xl"})})]})]})})]})},g5=[{path:"/landing",element:i.jsx(m5,{})},{path:"/",element:i.jsx(xP,{})},{path:"/auth/login",element:i.jsx(XP,{})},{path:"/auth/signup",element:i.jsx(WP,{})},{path:"/requests",element:i.jsx(bP,{})},{path:"/inquiries",element:i.jsx(vP,{})},{path:"/surrogates",element:i.jsx(wP,{})},{path:"/surrogates/:id",element:i.jsx(LP,{})},{path:"/parents",element:i.jsx(UP,{})},{path:"/parents/:id",element:i.jsx(FP,{})},{path:"/matches",element:i.jsx(BP,{})},{path:"/appointments",element:i.jsx(qP,{})},{path:"/calendar",element:i.jsx(GP,{})},{path:"/payments",element:i.jsx(KP,{})},{path:"/medical",element:i.jsx(YP,{})},{path:"/contracts",element:i.jsx(QP,{})},{path:"/reports",element:i.jsx(HP,{})},{path:"/settings",element:i.jsx($P,{})},{path:"/tasks",element:i.jsx(ZP,{})},{path:"/baby-watch",element:i.jsx(e5,{})},{path:"/messages",element:i.jsx(h5,{})},{path:"/milestones",element:i.jsx(f5,{})},{path:"*",element:i.jsx(JP,{})}];function p5(){return PA(g5)}function y5(){return i.jsx(hP,{children:i.jsx(dP,{children:i.jsx(xC,{basename:"/",children:i.jsx(p5,{})})})})}aA.createRoot(document.getElementById("root")).render(i.jsx(E.StrictMode,{children:i.jsx(y5,{})}));
//# sourceMappingURL=index-CosxyDVP.js.map
