(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=t(l);fetch(l.href,c)}})();function o1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var rp={exports:{}},zc={};var Yv;function c1(){if(Yv)return zc;Yv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var h in l)h!=="key"&&(c[h]=l[h])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return zc.Fragment=e,zc.jsx=t,zc.jsxs=t,zc}var Qv;function u1(){return Qv||(Qv=1,rp.exports=c1()),rp.exports}var i=u1(),np={exports:{}},Fe={};var Xv;function d1(){if(Xv)return Fe;Xv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,T={};function V(D,Q,ae){this.props=D,this.context=Q,this.refs=T,this.updater=ae||C}V.prototype.isReactComponent={},V.prototype.setState=function(D,Q){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Q,"setState")},V.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function E(){}E.prototype=V.prototype;function B(D,Q,ae){this.props=D,this.context=Q,this.refs=T,this.updater=ae||C}var Y=B.prototype=new E;Y.constructor=B,F(Y,V.prototype),Y.isPureReactComponent=!0;var W=Array.isArray;function $(){}var I={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function j(D,Q,ae){var ge=ae.ref;return{$$typeof:r,type:D,key:Q,ref:ge!==void 0?ge:null,props:ae}}function A(D,Q){return j(D.type,Q,D.props)}function P(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function M(D){var Q={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ae){return Q[ae]})}var z=/\/+/g;function me(D,Q){return typeof D=="object"&&D!==null&&D.key!=null?M(""+D.key):Q.toString(36)}function Oe(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then($,$):(D.status="pending",D.then(function(Q){D.status==="pending"&&(D.status="fulfilled",D.value=Q)},function(Q){D.status==="pending"&&(D.status="rejected",D.reason=Q)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function H(D,Q,ae,ge,G){var ce=typeof D;(ce==="undefined"||ce==="boolean")&&(D=null);var xe=!1;if(D===null)xe=!0;else switch(ce){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(D.$$typeof){case r:case e:xe=!0;break;case y:return xe=D._init,H(xe(D._payload),Q,ae,ge,G)}}if(xe)return G=G(D),xe=ge===""?"."+me(D,0):ge,W(G)?(ae="",xe!=null&&(ae=xe.replace(z,"$&/")+"/"),H(G,Q,ae,"",function(He){return He})):G!=null&&(P(G)&&(G=A(G,ae+(G.key==null||D&&D.key===G.key?"":(""+G.key).replace(z,"$&/")+"/")+xe)),Q.push(G)),1;xe=0;var Te=ge===""?".":ge+":";if(W(D))for(var Se=0;Se<D.length;Se++)ge=D[Se],ce=Te+me(ge,Se),xe+=H(ge,Q,ae,ce,G);else if(Se=S(D),typeof Se=="function")for(D=Se.call(D),Se=0;!(ge=D.next()).done;)ge=ge.value,ce=Te+me(ge,Se++),xe+=H(ge,Q,ae,ce,G);else if(ce==="object"){if(typeof D.then=="function")return H(Oe(D),Q,ae,ge,G);throw Q=String(D),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return xe}function U(D,Q,ae){if(D==null)return D;var ge=[],G=0;return H(D,ge,"","",function(ce){return Q.call(ae,ce,G++)}),ge}function re(D){if(D._status===-1){var Q=D._result;Q=Q(),Q.then(function(ae){(D._status===0||D._status===-1)&&(D._status=1,D._result=ae)},function(ae){(D._status===0||D._status===-1)&&(D._status=2,D._result=ae)}),D._status===-1&&(D._status=0,D._result=Q)}if(D._status===1)return D._result.default;throw D._result}var le=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},pe={map:U,forEach:function(D,Q,ae){U(D,function(){Q.apply(this,arguments)},ae)},count:function(D){var Q=0;return U(D,function(){Q++}),Q},toArray:function(D){return U(D,function(Q){return Q})||[]},only:function(D){if(!P(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Fe.Activity=v,Fe.Children=pe,Fe.Component=V,Fe.Fragment=t,Fe.Profiler=l,Fe.PureComponent=B,Fe.StrictMode=s,Fe.Suspense=g,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(D){return I.H.useMemoCache(D)}},Fe.cache=function(D){return function(){return D.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(D,Q,ae){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ge=F({},D.props),G=D.key;if(Q!=null)for(ce in Q.key!==void 0&&(G=""+Q.key),Q)!L.call(Q,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&Q.ref===void 0||(ge[ce]=Q[ce]);var ce=arguments.length-2;if(ce===1)ge.children=ae;else if(1<ce){for(var xe=Array(ce),Te=0;Te<ce;Te++)xe[Te]=arguments[Te+2];ge.children=xe}return j(D.type,G,ge)},Fe.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Fe.createElement=function(D,Q,ae){var ge,G={},ce=null;if(Q!=null)for(ge in Q.key!==void 0&&(ce=""+Q.key),Q)L.call(Q,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(G[ge]=Q[ge]);var xe=arguments.length-2;if(xe===1)G.children=ae;else if(1<xe){for(var Te=Array(xe),Se=0;Se<xe;Se++)Te[Se]=arguments[Se+2];G.children=Te}if(D&&D.defaultProps)for(ge in xe=D.defaultProps,xe)G[ge]===void 0&&(G[ge]=xe[ge]);return j(D,ce,G)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(D){return{$$typeof:h,render:D}},Fe.isValidElement=P,Fe.lazy=function(D){return{$$typeof:y,_payload:{_status:-1,_result:D},_init:re}},Fe.memo=function(D,Q){return{$$typeof:p,type:D,compare:Q===void 0?null:Q}},Fe.startTransition=function(D){var Q=I.T,ae={};I.T=ae;try{var ge=D(),G=I.S;G!==null&&G(ae,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then($,le)}catch(ce){le(ce)}finally{Q!==null&&ae.types!==null&&(Q.types=ae.types),I.T=Q}},Fe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Fe.use=function(D){return I.H.use(D)},Fe.useActionState=function(D,Q,ae){return I.H.useActionState(D,Q,ae)},Fe.useCallback=function(D,Q){return I.H.useCallback(D,Q)},Fe.useContext=function(D){return I.H.useContext(D)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(D,Q){return I.H.useDeferredValue(D,Q)},Fe.useEffect=function(D,Q){return I.H.useEffect(D,Q)},Fe.useEffectEvent=function(D){return I.H.useEffectEvent(D)},Fe.useId=function(){return I.H.useId()},Fe.useImperativeHandle=function(D,Q,ae){return I.H.useImperativeHandle(D,Q,ae)},Fe.useInsertionEffect=function(D,Q){return I.H.useInsertionEffect(D,Q)},Fe.useLayoutEffect=function(D,Q){return I.H.useLayoutEffect(D,Q)},Fe.useMemo=function(D,Q){return I.H.useMemo(D,Q)},Fe.useOptimistic=function(D,Q){return I.H.useOptimistic(D,Q)},Fe.useReducer=function(D,Q,ae){return I.H.useReducer(D,Q,ae)},Fe.useRef=function(D){return I.H.useRef(D)},Fe.useState=function(D){return I.H.useState(D)},Fe.useSyncExternalStore=function(D,Q,ae){return I.H.useSyncExternalStore(D,Q,ae)},Fe.useTransition=function(){return I.H.useTransition()},Fe.version="19.2.0",Fe}var Wv;function m0(){return Wv||(Wv=1,np.exports=d1()),np.exports}var k=m0();const Hh=o1(k),Ue=r=>typeof r=="string",Fc=()=>{let r,e;const t=new Promise((s,l)=>{r=s,e=l});return t.resolve=r,t.reject=e,t},Jv=r=>r==null?"":""+r,h1=(r,e,t)=>{r.forEach(s=>{e[s]&&(t[s]=e[s])})},f1=/###/g,Zv=r=>r&&r.indexOf("###")>-1?r.replace(f1,"."):r,ew=r=>!r||Ue(r),ru=(r,e,t)=>{const s=Ue(e)?e.split("."):e;let l=0;for(;l<s.length-1;){if(ew(r))return{};const c=Zv(s[l]);!r[c]&&t&&(r[c]=new t),Object.prototype.hasOwnProperty.call(r,c)?r=r[c]:r={},++l}return ew(r)?{}:{obj:r,k:Zv(s[l])}},tw=(r,e,t)=>{const{obj:s,k:l}=ru(r,e,Object);if(s!==void 0||e.length===1){s[l]=t;return}let c=e[e.length-1],d=e.slice(0,e.length-1),h=ru(r,d,Object);for(;h.obj===void 0&&d.length;)c=`${d[d.length-1]}.${c}`,d=d.slice(0,d.length-1),h=ru(r,d,Object),h?.obj&&typeof h.obj[`${h.k}.${c}`]<"u"&&(h.obj=void 0);h.obj[`${h.k}.${c}`]=t},m1=(r,e,t,s)=>{const{obj:l,k:c}=ru(r,e,Object);l[c]=l[c]||[],l[c].push(t)},$h=(r,e)=>{const{obj:t,k:s}=ru(r,e);if(t&&Object.prototype.hasOwnProperty.call(t,s))return t[s]},g1=(r,e,t)=>{const s=$h(r,t);return s!==void 0?s:$h(e,t)},ON=(r,e,t)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in r?Ue(r[s])||r[s]instanceof String||Ue(e[s])||e[s]instanceof String?t&&(r[s]=e[s]):ON(r[s],e[s],t):r[s]=e[s]);return r},no=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var p1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const x1=r=>Ue(r)?r.replace(/[&<>"'\/]/g,e=>p1[e]):r;class y1{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const b1=[" ",",","?","!",";"],v1=new y1(20),w1=(r,e,t)=>{e=e||"",t=t||"";const s=b1.filter(d=>e.indexOf(d)<0&&t.indexOf(d)<0);if(s.length===0)return!0;const l=v1.getRegExp(`(${s.map(d=>d==="?"?"\\?":d).join("|")})`);let c=!l.test(r);if(!c){const d=r.indexOf(t);d>0&&!l.test(r.substring(0,d))&&(c=!0)}return c},Op=(r,e,t=".")=>{if(!r)return;if(r[e])return Object.prototype.hasOwnProperty.call(r,e)?r[e]:void 0;const s=e.split(t);let l=r;for(let c=0;c<s.length;){if(!l||typeof l!="object")return;let d,h="";for(let g=c;g<s.length;++g)if(g!==c&&(h+=t),h+=s[g],d=l[h],d!==void 0){if(["string","number","boolean"].indexOf(typeof d)>-1&&g<s.length-1)continue;c+=g-c+1;break}l=d}return l},fu=r=>r?.replace("_","-"),_1={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,e){console?.[r]?.apply?.(console,e)}};let N1=class Mp{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||_1,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,l){return l&&!this.debug?null:(Ue(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Mp(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Mp(this.logger,e)}};var rs=new N1;class yf{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const l=this.observers[s].get(t)||0;this.observers[s].set(t,l+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([l,c])=>{for(let d=0;d<c;d++)l(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([l,c])=>{for(let d=0;d<c;d++)l.apply(l,[e,...t])})}}class rw extends yf{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s,l={}){const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,d=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure;let h;e.indexOf(".")>-1?h=e.split("."):(h=[e,t],s&&(Array.isArray(s)?h.push(...s):Ue(s)&&c?h.push(...s.split(c)):h.push(s)));const g=$h(this.data,h);return!g&&!t&&!s&&e.indexOf(".")>-1&&(e=h[0],t=h[1],s=h.slice(2).join(".")),g||!d||!Ue(s)?g:Op(this.data?.[e]?.[t],s,c)}addResource(e,t,s,l,c={silent:!1}){const d=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator;let h=[e,t];s&&(h=h.concat(d?s.split(d):s)),e.indexOf(".")>-1&&(h=e.split("."),l=t,t=h[1]),this.addNamespaces(t),tw(this.data,h,l),c.silent||this.emit("added",e,t,s,l)}addResources(e,t,s,l={silent:!1}){for(const c in s)(Ue(s[c])||Array.isArray(s[c]))&&this.addResource(e,t,c,s[c],{silent:!0});l.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,l,c,d={silent:!1,skipCopy:!1}){let h=[e,t];e.indexOf(".")>-1&&(h=e.split("."),l=s,s=t,t=h[1]),this.addNamespaces(t);let g=$h(this.data,h)||{};d.skipCopy||(s=JSON.parse(JSON.stringify(s))),l?ON(g,s,c):g={...g,...s},tw(this.data,h,g),d.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(l=>t[l]&&Object.keys(t[l]).length>0)}toJSON(){return this.data}}var MN={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,e,t,s,l){return r.forEach(c=>{e=this.processors[c]?.process(e,t,s,l)??e}),e}};const PN=Symbol("i18next/PATH_KEY");function j1(){const r=[],e=Object.create(null);let t;return e.get=(s,l)=>(t?.revoke?.(),l===PN?r:(r.push(l),t=Proxy.revocable(s,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Pp(r,e){const{[PN]:t}=r(j1());return t.join(e?.keySeparator??".")}const nw={},sp=r=>!Ue(r)&&typeof r!="boolean"&&typeof r!="number";class Gh extends yf{constructor(e,t={}){super(),h1(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=rs.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const s={...t};if(e==null)return!1;const l=this.resolve(e,s);if(l?.res===void 0)return!1;const c=sp(l.res);return!(s.returnObjects===!1&&c)}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const l=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let c=t.ns||this.options.defaultNS||[];const d=s&&e.indexOf(s)>-1,h=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!w1(e,s,l);if(d&&!h){const g=e.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:e,namespaces:Ue(c)?[c]:c};const p=e.split(s);(s!==l||s===l&&this.options.ns.indexOf(p[0])>-1)&&(c=p.shift()),e=p.join(l)}return{key:e,namespaces:Ue(c)?[c]:c}}translate(e,t,s){let l=typeof t=="object"?{...t}:t;if(typeof l!="object"&&this.options.overloadTranslationOptionHandler&&(l=this.options.overloadTranslationOptionHandler(arguments)),typeof l=="object"&&(l={...l}),l||(l={}),e==null)return"";typeof e=="function"&&(e=Pp(e,{...this.options,...l})),Array.isArray(e)||(e=[String(e)]);const c=l.returnDetails!==void 0?l.returnDetails:this.options.returnDetails,d=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,{key:h,namespaces:g}=this.extractFromKey(e[e.length-1],l),p=g[g.length-1];let y=l.nsSeparator!==void 0?l.nsSeparator:this.options.nsSeparator;y===void 0&&(y=":");const v=l.lng||this.language,w=l.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v?.toLowerCase()==="cimode")return w?c?{res:`${p}${y}${h}`,usedKey:h,exactUsedKey:h,usedLng:v,usedNS:p,usedParams:this.getUsedParamsDetails(l)}:`${p}${y}${h}`:c?{res:h,usedKey:h,exactUsedKey:h,usedLng:v,usedNS:p,usedParams:this.getUsedParamsDetails(l)}:h;const S=this.resolve(e,l);let C=S?.res;const F=S?.usedKey||h,T=S?.exactUsedKey||h,V=["[object Number]","[object Function]","[object RegExp]"],E=l.joinArrays!==void 0?l.joinArrays:this.options.joinArrays,B=!this.i18nFormat||this.i18nFormat.handleAsObject,Y=l.count!==void 0&&!Ue(l.count),W=Gh.hasDefaultValue(l),$=Y?this.pluralResolver.getSuffix(v,l.count,l):"",I=l.ordinal&&Y?this.pluralResolver.getSuffix(v,l.count,{ordinal:!1}):"",L=Y&&!l.ordinal&&l.count===0,j=L&&l[`defaultValue${this.options.pluralSeparator}zero`]||l[`defaultValue${$}`]||l[`defaultValue${I}`]||l.defaultValue;let A=C;B&&!C&&W&&(A=j);const P=sp(A),M=Object.prototype.toString.apply(A);if(B&&A&&P&&V.indexOf(M)<0&&!(Ue(E)&&Array.isArray(A))){if(!l.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const z=this.options.returnedObjectHandler?this.options.returnedObjectHandler(F,A,{...l,ns:g}):`key '${h} (${this.language})' returned an object instead of string.`;return c?(S.res=z,S.usedParams=this.getUsedParamsDetails(l),S):z}if(d){const z=Array.isArray(A),me=z?[]:{},Oe=z?T:F;for(const H in A)if(Object.prototype.hasOwnProperty.call(A,H)){const U=`${Oe}${d}${H}`;W&&!C?me[H]=this.translate(U,{...l,defaultValue:sp(j)?j[H]:void 0,joinArrays:!1,ns:g}):me[H]=this.translate(U,{...l,joinArrays:!1,ns:g}),me[H]===U&&(me[H]=A[H])}C=me}}else if(B&&Ue(E)&&Array.isArray(C))C=C.join(E),C&&(C=this.extendTranslation(C,e,l,s));else{let z=!1,me=!1;!this.isValidLookup(C)&&W&&(z=!0,C=j),this.isValidLookup(C)||(me=!0,C=h);const H=(l.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&me?void 0:C,U=W&&j!==C&&this.options.updateMissing;if(me||z||U){if(this.logger.log(U?"updateKey":"missingKey",v,p,h,U?j:C),d){const D=this.resolve(h,{...l,keySeparator:!1});D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let re=[];const le=this.languageUtils.getFallbackCodes(this.options.fallbackLng,l.lng||this.language);if(this.options.saveMissingTo==="fallback"&&le&&le[0])for(let D=0;D<le.length;D++)re.push(le[D]);else this.options.saveMissingTo==="all"?re=this.languageUtils.toResolveHierarchy(l.lng||this.language):re.push(l.lng||this.language);const pe=(D,Q,ae)=>{const ge=W&&ae!==C?ae:H;this.options.missingKeyHandler?this.options.missingKeyHandler(D,p,Q,ge,U,l):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(D,p,Q,ge,U,l),this.emit("missingKey",D,p,Q,C)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Y?re.forEach(D=>{const Q=this.pluralResolver.getSuffixes(D,l);L&&l[`defaultValue${this.options.pluralSeparator}zero`]&&Q.indexOf(`${this.options.pluralSeparator}zero`)<0&&Q.push(`${this.options.pluralSeparator}zero`),Q.forEach(ae=>{pe([D],h+ae,l[`defaultValue${ae}`]||j)})}):pe(re,h,j))}C=this.extendTranslation(C,e,l,S,s),me&&C===h&&this.options.appendNamespaceToMissingKey&&(C=`${p}${y}${h}`),(me||z)&&this.options.parseMissingKeyHandler&&(C=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${p}${y}${h}`:h,z?C:void 0,l))}return c?(S.res=C,S.usedParams=this.getUsedParamsDetails(l),S):C}extendTranslation(e,t,s,l,c){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const g=Ue(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let p;if(g){const v=e.match(this.interpolator.nestingRegexp);p=v&&v.length}let y=s.replace&&!Ue(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(y={...this.options.interpolation.defaultVariables,...y}),e=this.interpolator.interpolate(e,y,s.lng||this.language||l.usedLng,s),g){const v=e.match(this.interpolator.nestingRegexp),w=v&&v.length;p<w&&(s.nest=!1)}!s.lng&&l&&l.res&&(s.lng=this.language||l.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...v)=>c?.[0]===v[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${t[0]}`),null):this.translate(...v,t),s)),s.interpolation&&this.interpolator.reset()}const d=s.postProcess||this.options.postProcess,h=Ue(d)?[d]:d;return e!=null&&h?.length&&s.applyPostProcessor!==!1&&(e=MN.handle(h,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...l,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,t={}){let s,l,c,d,h;return Ue(e)&&(e=[e]),e.forEach(g=>{if(this.isValidLookup(s))return;const p=this.extractFromKey(g,t),y=p.key;l=y;let v=p.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const w=t.count!==void 0&&!Ue(t.count),S=w&&!t.ordinal&&t.count===0,C=t.context!==void 0&&(Ue(t.context)||typeof t.context=="number")&&t.context!=="",F=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);v.forEach(T=>{this.isValidLookup(s)||(h=T,!nw[`${F[0]}-${T}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(h)&&(nw[`${F[0]}-${T}`]=!0,this.logger.warn(`key "${l}" for languages "${F.join(", ")}" won't get resolved as namespace "${h}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),F.forEach(V=>{if(this.isValidLookup(s))return;d=V;const E=[y];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(E,y,V,T,t);else{let Y;w&&(Y=this.pluralResolver.getSuffix(V,t.count,t));const W=`${this.options.pluralSeparator}zero`,$=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(w&&(t.ordinal&&Y.indexOf($)===0&&E.push(y+Y.replace($,this.options.pluralSeparator)),E.push(y+Y),S&&E.push(y+W)),C){const I=`${y}${this.options.contextSeparator||"_"}${t.context}`;E.push(I),w&&(t.ordinal&&Y.indexOf($)===0&&E.push(I+Y.replace($,this.options.pluralSeparator)),E.push(I+Y),S&&E.push(I+W))}}let B;for(;B=E.pop();)this.isValidLookup(s)||(c=B,s=this.getResource(V,T,B,t))}))})}),{res:s,usedKey:l,exactUsedKey:c,usedLng:d,usedNS:h}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s,l={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,s,l):this.resourceStore.getResource(e,t,s,l)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!Ue(e.replace);let l=s?e.replace:e;if(s&&typeof e.count<"u"&&(l.count=e.count),this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),!s){l={...l};for(const c of t)delete l[c]}return l}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}class sw{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=rs.create("languageUtils")}getScriptPartFromCode(e){if(e=fu(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=fu(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ue(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const l=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(l))&&(t=l)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const l=this.getScriptPartFromCode(s);if(this.isSupportedCode(l))return t=l;const c=this.getLanguagePartFromCode(s);if(this.isSupportedCode(c))return t=c;t=this.options.supportedLngs.find(d=>{if(d===c)return d;if(!(d.indexOf("-")<0&&c.indexOf("-")<0)&&(d.indexOf("-")>0&&c.indexOf("-")<0&&d.substring(0,d.indexOf("-"))===c||d.indexOf(c)===0&&c.length>1))return d})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ue(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),l=[],c=d=>{d&&(this.isSupportedCode(d)?l.push(d):this.logger.warn(`rejecting language code not found in supportedLngs: ${d}`))};return Ue(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&c(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&c(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&c(this.getLanguagePartFromCode(e))):Ue(e)&&c(this.formatLanguageCode(e)),s.forEach(d=>{l.indexOf(d)<0&&c(this.formatLanguageCode(d))}),l}}const aw={zero:0,one:1,two:2,few:3,many:4,other:5},iw={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class k1{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=rs.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const s=fu(e==="dev"?"en":e),l=t.ordinal?"ordinal":"cardinal",c=JSON.stringify({cleanedCode:s,type:l});if(c in this.pluralRulesCache)return this.pluralRulesCache[c];let d;try{d=new Intl.PluralRules(s,{type:l})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),iw;if(!e.match(/-|_/))return iw;const g=this.languageUtils.getLanguagePartFromCode(e);d=this.getRule(g,t)}return this.pluralRulesCache[c]=d,d}needsPlural(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,s={}){return this.getSuffixes(e,s).map(l=>`${t}${l}`)}getSuffixes(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((l,c)=>aw[l]-aw[c]).map(l=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${l}`):[]}getSuffix(e,t,s={}){const l=this.getRule(e,s);return l?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${l.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,s))}}const lw=(r,e,t,s=".",l=!0)=>{let c=g1(r,e,t);return!c&&l&&Ue(t)&&(c=Op(r,t,s),c===void 0&&(c=Op(e,t,s))),c},ap=r=>r.replace(/\$/g,"$$$$");class E1{constructor(e={}){this.logger=rs.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:l,prefix:c,prefixEscaped:d,suffix:h,suffixEscaped:g,formatSeparator:p,unescapeSuffix:y,unescapePrefix:v,nestingPrefix:w,nestingPrefixEscaped:S,nestingSuffix:C,nestingSuffixEscaped:F,nestingOptionsSeparator:T,maxReplaces:V,alwaysFormat:E}=e.interpolation;this.escape=t!==void 0?t:x1,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=l!==void 0?l:!1,this.prefix=c?no(c):d||"{{",this.suffix=h?no(h):g||"}}",this.formatSeparator=p||",",this.unescapePrefix=y?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=w?no(w):S||no("$t("),this.nestingSuffix=C?no(C):F||no(")"),this.nestingOptionsSeparator=T||",",this.maxReplaces=V||1e3,this.alwaysFormat=E!==void 0?E:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>t?.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,s,l){let c,d,h;const g=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},p=S=>{if(S.indexOf(this.formatSeparator)<0){const V=lw(t,g,S,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(V,void 0,s,{...l,...t,interpolationkey:S}):V}const C=S.split(this.formatSeparator),F=C.shift().trim(),T=C.join(this.formatSeparator).trim();return this.format(lw(t,g,F,this.options.keySeparator,this.options.ignoreJSONStructure),T,s,{...l,...t,interpolationkey:F})};this.resetRegExp();const y=l?.missingInterpolationHandler||this.options.missingInterpolationHandler,v=l?.interpolation?.skipOnVariables!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:S=>ap(S)},{regex:this.regexp,safeValue:S=>this.escapeValue?ap(this.escape(S)):ap(S)}].forEach(S=>{for(h=0;c=S.regex.exec(e);){const C=c[1].trim();if(d=p(C),d===void 0)if(typeof y=="function"){const T=y(e,c,l);d=Ue(T)?T:""}else if(l&&Object.prototype.hasOwnProperty.call(l,C))d="";else if(v){d=c[0];continue}else this.logger.warn(`missed to pass in variable ${C} for interpolating ${e}`),d="";else!Ue(d)&&!this.useRawValueToEscape&&(d=Jv(d));const F=S.safeValue(d);if(e=e.replace(c[0],F),v?(S.regex.lastIndex+=d.length,S.regex.lastIndex-=c[0].length):S.regex.lastIndex=0,h++,h>=this.maxReplaces)break}}),e}nest(e,t,s={}){let l,c,d;const h=(g,p)=>{const y=this.nestingOptionsSeparator;if(g.indexOf(y)<0)return g;const v=g.split(new RegExp(`${y}[ ]*{`));let w=`{${v[1]}`;g=v[0],w=this.interpolate(w,d);const S=w.match(/'/g),C=w.match(/"/g);((S?.length??0)%2===0&&!C||C.length%2!==0)&&(w=w.replace(/'/g,'"'));try{d=JSON.parse(w),p&&(d={...p,...d})}catch(F){return this.logger.warn(`failed parsing options string in nesting for key ${g}`,F),`${g}${y}${w}`}return d.defaultValue&&d.defaultValue.indexOf(this.prefix)>-1&&delete d.defaultValue,g};for(;l=this.nestingRegexp.exec(e);){let g=[];d={...s},d=d.replace&&!Ue(d.replace)?d.replace:d,d.applyPostProcessor=!1,delete d.defaultValue;const p=/{.*}/.test(l[1])?l[1].lastIndexOf("}")+1:l[1].indexOf(this.formatSeparator);if(p!==-1&&(g=l[1].slice(p).split(this.formatSeparator).map(y=>y.trim()).filter(Boolean),l[1]=l[1].slice(0,p)),c=t(h.call(this,l[1].trim(),d),d),c&&l[0]===e&&!Ue(c))return c;Ue(c)||(c=Jv(c)),c||(this.logger.warn(`missed to resolve ${l[1]} for nesting ${e}`),c=""),g.length&&(c=g.reduce((y,v)=>this.format(y,v,s.lng,{...s,interpolationkey:l[1].trim()}),c.trim())),e=e.replace(l[0],c),this.regexp.lastIndex=0}return e}}const S1=r=>{let e=r.toLowerCase().trim();const t={};if(r.indexOf("(")>-1){const s=r.split("(");e=s[0].toLowerCase().trim();const l=s[1].substring(0,s[1].length-1);e==="currency"&&l.indexOf(":")<0?t.currency||(t.currency=l.trim()):e==="relativetime"&&l.indexOf(":")<0?t.range||(t.range=l.trim()):l.split(";").forEach(d=>{if(d){const[h,...g]=d.split(":"),p=g.join(":").trim().replace(/^'+|'+$/g,""),y=h.trim();t[y]||(t[y]=p),p==="false"&&(t[y]=!1),p==="true"&&(t[y]=!0),isNaN(p)||(t[y]=parseInt(p,10))}})}return{formatName:e,formatOptions:t}},ow=r=>{const e={};return(t,s,l)=>{let c=l;l&&l.interpolationkey&&l.formatParams&&l.formatParams[l.interpolationkey]&&l[l.interpolationkey]&&(c={...c,[l.interpolationkey]:void 0});const d=s+JSON.stringify(c);let h=e[d];return h||(h=r(fu(s),l),e[d]=h),h(t)}},T1=r=>(e,t,s)=>r(fu(t),s)(e);class A1{constructor(e={}){this.logger=rs.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const s=t.cacheInBuiltFormats?ow:T1;this.formats={number:s((l,c)=>{const d=new Intl.NumberFormat(l,{...c});return h=>d.format(h)}),currency:s((l,c)=>{const d=new Intl.NumberFormat(l,{...c,style:"currency"});return h=>d.format(h)}),datetime:s((l,c)=>{const d=new Intl.DateTimeFormat(l,{...c});return h=>d.format(h)}),relativetime:s((l,c)=>{const d=new Intl.RelativeTimeFormat(l,{...c});return h=>d.format(h,c.range||"day")}),list:s((l,c)=>{const d=new Intl.ListFormat(l,{...c});return h=>d.format(h)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=ow(t)}format(e,t,s,l={}){const c=t.split(this.formatSeparator);if(c.length>1&&c[0].indexOf("(")>1&&c[0].indexOf(")")<0&&c.find(h=>h.indexOf(")")>-1)){const h=c.findIndex(g=>g.indexOf(")")>-1);c[0]=[c[0],...c.splice(1,h)].join(this.formatSeparator)}return c.reduce((h,g)=>{const{formatName:p,formatOptions:y}=S1(g);if(this.formats[p]){let v=h;try{const w=l?.formatParams?.[l.interpolationkey]||{},S=w.locale||w.lng||l.locale||l.lng||s;v=this.formats[p](h,S,{...y,...l,...w})}catch(w){this.logger.warn(w)}return v}else this.logger.warn(`there was no format function for ${p}`);return h},e)}}const C1=(r,e)=>{r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)};class R1 extends yf{constructor(e,t,s,l={}){super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=l,this.logger=rs.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=l.maxParallelReads||10,this.readingCalls=0,this.maxRetries=l.maxRetries>=0?l.maxRetries:5,this.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,l.backend,l)}queueLoad(e,t,s,l){const c={},d={},h={},g={};return e.forEach(p=>{let y=!0;t.forEach(v=>{const w=`${p}|${v}`;!s.reload&&this.store.hasResourceBundle(p,v)?this.state[w]=2:this.state[w]<0||(this.state[w]===1?d[w]===void 0&&(d[w]=!0):(this.state[w]=1,y=!1,d[w]===void 0&&(d[w]=!0),c[w]===void 0&&(c[w]=!0),g[v]===void 0&&(g[v]=!0)))}),y||(h[p]=!0)}),(Object.keys(c).length||Object.keys(d).length)&&this.queue.push({pending:d,pendingCount:Object.keys(d).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(c),pending:Object.keys(d),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(g)}}loaded(e,t,s){const l=e.split("|"),c=l[0],d=l[1];t&&this.emit("failedLoading",c,d,t),!t&&s&&this.store.addResourceBundle(c,d,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const h={};this.queue.forEach(g=>{m1(g.loaded,[c],d),C1(g,e),t&&g.errors.push(t),g.pendingCount===0&&!g.done&&(Object.keys(g.loaded).forEach(p=>{h[p]||(h[p]={});const y=g.loaded[p];y.length&&y.forEach(v=>{h[p][v]===void 0&&(h[p][v]=!0)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(g=>!g.done)}read(e,t,s,l=0,c=this.retryTimeout,d){if(!e.length)return d(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:l,wait:c,callback:d});return}this.readingCalls++;const h=(p,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(p&&y&&l<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,l+1,c*2,d)},c);return}d(p,y)},g=this.backend[s].bind(this.backend);if(g.length===2){try{const p=g(e,t);p&&typeof p.then=="function"?p.then(y=>h(null,y)).catch(h):h(null,p)}catch(p){h(p)}return}return g(e,t,h)}prepareLoading(e,t,s={},l){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();Ue(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ue(t)&&(t=[t]);const c=this.queueLoad(e,t,s,l);if(!c.toLoad.length)return c.pending.length||l(),null;c.toLoad.forEach(d=>{this.loadOne(d)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e,t=""){const s=e.split("|"),l=s[0],c=s[1];this.read(l,c,"read",void 0,void 0,(d,h)=>{d&&this.logger.warn(`${t}loading namespace ${c} for language ${l} failed`,d),!d&&h&&this.logger.log(`${t}loaded namespace ${c} for language ${l}`,h),this.loaded(e,d,h)})}saveMissing(e,t,s,l,c,d={},h=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const g={...d,isUpdate:c},p=this.backend.create.bind(this.backend);if(p.length<6)try{let y;p.length===5?y=p(e,t,s,l,g):y=p(e,t,s,l),y&&typeof y.then=="function"?y.then(v=>h(null,v)).catch(h):h(null,y)}catch(y){h(y)}else p(e,t,s,l,h,g)}!e||!e[0]||this.store.addResource(e[0],t,s,l)}}}const cw=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let e={};if(typeof r[1]=="object"&&(e=r[1]),Ue(r[1])&&(e.defaultValue=r[1]),Ue(r[2])&&(e.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const t=r[3]||r[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),uw=r=>(Ue(r.ns)&&(r.ns=[r.ns]),Ue(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Ue(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs?.indexOf?.("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r),wh=()=>{},I1=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(t=>{typeof r[t]=="function"&&(r[t]=r[t].bind(r))})};class nu extends yf{constructor(e={},t){if(super(),this.options=uw(e),this.services={},this.logger=rs,this.modules={external:[]},I1(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Ue(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=cw();this.options={...s,...this.options,...uw(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const l=p=>p?typeof p=="function"?new p:p:null;if(!this.options.isClone){this.modules.logger?rs.init(l(this.modules.logger),this.options):rs.init(null,this.options);let p;this.modules.formatter?p=this.modules.formatter:p=A1;const y=new sw(this.options);this.store=new rw(this.options.resources,this.options);const v=this.services;v.logger=rs,v.resourceStore=this.store,v.languageUtils=y,v.pluralResolver=new k1(y,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),p&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(v.formatter=l(p),v.formatter.init&&v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new E1(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new R1(l(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",(S,...C)=>{this.emit(S,...C)}),this.modules.languageDetector&&(v.languageDetector=l(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=l(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new Gh(this.services,this.options),this.translator.on("*",(S,...C)=>{this.emit(S,...C)}),this.modules.external.forEach(S=>{S.init&&S.init(this)})}if(this.format=this.options.interpolation.format,t||(t=wh),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(p=>{this[p]=(...y)=>this.store[p](...y)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(p=>{this[p]=(...y)=>(this.store[p](...y),this)});const h=Fc(),g=()=>{const p=(y,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(v),t(y,v)};if(this.languages&&!this.isInitialized)return p(null,this.t.bind(this));this.changeLanguage(this.options.lng,p)};return this.options.resources||!this.options.initAsync?g():setTimeout(g,0),h}loadResources(e,t=wh){let s=t;const l=Ue(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(l?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const c=[],d=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(p=>{p!=="cimode"&&c.indexOf(p)<0&&c.push(p)})};l?d(l):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(g=>d(g)),this.options.preload?.forEach?.(h=>d(h)),this.services.backendConnector.load(c,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(h)})}else s(null)}reloadResources(e,t,s){const l=Fc();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=wh),this.services.backendConnector.reload(e,t,c=>{l.resolve(),s(c)}),l}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&MN.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const s=Fc();this.emit("languageChanging",e);const l=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},c=(h,g)=>{g?this.isLanguageChangingTo===e&&(l(g),this.translator.changeLanguage(g),this.isLanguageChangingTo=void 0,this.emit("languageChanged",g),this.logger.log("languageChanged",g)):this.isLanguageChangingTo=void 0,s.resolve((...p)=>this.t(...p)),t&&t(h,(...p)=>this.t(...p))},d=h=>{!e&&!h&&this.services.languageDetector&&(h=[]);const g=Ue(h)?h:h&&h[0],p=this.store.hasLanguageSomeTranslations(g)?g:this.services.languageUtils.getBestMatchFromCodes(Ue(h)?[h]:h);p&&(this.language||l(p),this.translator.language||this.translator.changeLanguage(p),this.services.languageDetector?.cacheUserLanguage?.(p)),this.loadResources(p,y=>{c(y,p)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(e),s}getFixedT(e,t,s){const l=(c,d,...h)=>{let g;typeof d!="object"?g=this.options.overloadTranslationOptionHandler([c,d].concat(h)):g={...d},g.lng=g.lng||l.lng,g.lngs=g.lngs||l.lngs,g.ns=g.ns||l.ns,g.keyPrefix!==""&&(g.keyPrefix=g.keyPrefix||s||l.keyPrefix);const p=this.options.keySeparator||".";let y;return g.keyPrefix&&Array.isArray(c)?y=c.map(v=>(typeof v=="function"&&(v=Pp(v,{...this.options,...d})),`${g.keyPrefix}${p}${v}`)):(typeof c=="function"&&(c=Pp(c,{...this.options,...d})),y=g.keyPrefix?`${g.keyPrefix}${p}${c}`:c),this.t(y,g)};return Ue(e)?l.lng=e:l.lngs=e,l.ns=t,l.keyPrefix=s,l}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,c=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const d=(h,g)=>{const p=this.services.backendConnector.state[`${h}|${g}`];return p===-1||p===0||p===2};if(t.precheck){const h=t.precheck(this,d);if(h!==void 0)return h}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||d(s,e)&&(!l||d(c,e)))}loadNamespaces(e,t){const s=Fc();return this.options.ns?(Ue(e)&&(e=[e]),e.forEach(l=>{this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}),this.loadResources(l=>{s.resolve(),t&&t(l)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=Fc();Ue(e)&&(e=[e]);const l=this.options.preload||[],c=e.filter(d=>l.indexOf(d)<0&&this.services.languageUtils.isSupportedCode(d));return c.length?(this.options.preload=l.concat(c),this.loadResources(d=>{s.resolve(),t&&t(d)}),s):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const l=new Intl.Locale(e);if(l&&l.getTextInfo){const c=l.getTextInfo();if(c&&c.direction)return c.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new sw(cw());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const s=new nu(e,t);return s.createInstance=nu.createInstance,s}cloneInstance(e={},t=wh){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const l={...this.options,...e,isClone:!0},c=new nu(l);if((e.debug!==void 0||e.prefix!==void 0)&&(c.logger=c.logger.clone(e)),["store","services","language"].forEach(h=>{c[h]=this[h]}),c.services={...this.services},c.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},s){const h=Object.keys(this.store.data).reduce((g,p)=>(g[p]={...this.store.data[p]},g[p]=Object.keys(g[p]).reduce((y,v)=>(y[v]={...g[p][v]},y),g[p]),g),{});c.store=new rw(h,l),c.services.resourceStore=c.store}return c.translator=new Gh(c.services,l),c.translator.on("*",(h,...g)=>{c.emit(h,...g)}),c.init(l,t),c.translator.options=l,c.translator.backendConnector.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Mr=nu.createInstance();Mr.createInstance;Mr.dir;Mr.init;Mr.loadResources;Mr.reloadResources;Mr.use;Mr.changeLanguage;Mr.getFixedT;Mr.t;Mr.exists;Mr.setDefaultNamespace;Mr.hasLoadedNamespace;Mr.loadNamespaces;Mr.loadLanguages;const D1=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,O1={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},M1=r=>O1[r],P1=r=>r.replace(D1,M1);let dw={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:P1};const L1=(r={})=>{dw={...dw,...r}},U1={type:"3rdParty",init(r){L1(r.options.react)}},{slice:V1,forEach:z1}=[];function F1(r){return z1.call(V1.call(arguments,1),e=>{if(e)for(const t in e)r[t]===void 0&&(r[t]=e[t])}),r}function B1(r){return typeof r!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(t=>t.test(r))}const hw=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,q1=function(r,e){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},l=encodeURIComponent(e);let c=`${r}=${l}`;if(s.maxAge>0){const d=s.maxAge-0;if(Number.isNaN(d))throw new Error("maxAge should be a Number");c+=`; Max-Age=${Math.floor(d)}`}if(s.domain){if(!hw.test(s.domain))throw new TypeError("option domain is invalid");c+=`; Domain=${s.domain}`}if(s.path){if(!hw.test(s.path))throw new TypeError("option path is invalid");c+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");c+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(c+="; HttpOnly"),s.secure&&(c+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(c+="; Partitioned"),c},fw={create(r,e,t,s){let l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};t&&(l.expires=new Date,l.expires.setTime(l.expires.getTime()+t*60*1e3)),s&&(l.domain=s),document.cookie=q1(r,e,l)},read(r){const e=`${r}=`,t=document.cookie.split(";");for(let s=0;s<t.length;s++){let l=t[s];for(;l.charAt(0)===" ";)l=l.substring(1,l.length);if(l.indexOf(e)===0)return l.substring(e.length,l.length)}return null},remove(r,e){this.create(r,"",-1,e)}};var H1={name:"cookie",lookup(r){let{lookupCookie:e}=r;if(e&&typeof document<"u")return fw.read(e)||void 0},cacheUserLanguage(r,e){let{lookupCookie:t,cookieMinutes:s,cookieDomain:l,cookieOptions:c}=e;t&&typeof document<"u"&&fw.create(t,r,s,l,c)}},$1={name:"querystring",lookup(r){let{lookupQuerystring:e}=r,t;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const c=s.substring(1).split("&");for(let d=0;d<c.length;d++){const h=c[d].indexOf("=");h>0&&c[d].substring(0,h)===e&&(t=c[d].substring(h+1))}}return t}},G1={name:"hash",lookup(r){let{lookupHash:e,lookupFromHashIndex:t}=r,s;if(typeof window<"u"){const{hash:l}=window.location;if(l&&l.length>2){const c=l.substring(1);if(e){const d=c.split("&");for(let h=0;h<d.length;h++){const g=d[h].indexOf("=");g>0&&d[h].substring(0,g)===e&&(s=d[h].substring(g+1))}}if(s)return s;if(!s&&t>-1){const d=l.match(/\/([a-zA-Z-]*)/g);return Array.isArray(d)?d[typeof t=="number"?t:0]?.replace("/",""):void 0}}}return s}};let so=null;const mw=()=>{if(so!==null)return so;try{if(so=typeof window<"u"&&window.localStorage!==null,!so)return!1;const r="i18next.translate.boo";window.localStorage.setItem(r,"foo"),window.localStorage.removeItem(r)}catch{so=!1}return so};var K1={name:"localStorage",lookup(r){let{lookupLocalStorage:e}=r;if(e&&mw())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(r,e){let{lookupLocalStorage:t}=e;t&&mw()&&window.localStorage.setItem(t,r)}};let ao=null;const gw=()=>{if(ao!==null)return ao;try{if(ao=typeof window<"u"&&window.sessionStorage!==null,!ao)return!1;const r="i18next.translate.boo";window.sessionStorage.setItem(r,"foo"),window.sessionStorage.removeItem(r)}catch{ao=!1}return ao};var Y1={name:"sessionStorage",lookup(r){let{lookupSessionStorage:e}=r;if(e&&gw())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(r,e){let{lookupSessionStorage:t}=e;t&&gw()&&window.sessionStorage.setItem(t,r)}},Q1={name:"navigator",lookup(r){const e=[];if(typeof navigator<"u"){const{languages:t,userLanguage:s,language:l}=navigator;if(t)for(let c=0;c<t.length;c++)e.push(t[c]);s&&e.push(s),l&&e.push(l)}return e.length>0?e:void 0}},X1={name:"htmlTag",lookup(r){let{htmlTag:e}=r,t;const s=e||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(t=s.getAttribute("lang")),t}},W1={name:"path",lookup(r){let{lookupFromPathIndex:e}=r;if(typeof window>"u")return;const t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(t)?t[typeof e=="number"?e:0]?.replace("/",""):void 0}},J1={name:"subdomain",lookup(r){let{lookupFromSubdomainIndex:e}=r;const t=typeof e=="number"?e+1:1,s=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[t]}};let LN=!1;try{document.cookie,LN=!0}catch{}const UN=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];LN||UN.splice(1,1);const Z1=()=>({order:UN,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:r=>r});class VN{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=F1(t,this.options||{},Z1()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=l=>l.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(H1),this.addDetector($1),this.addDetector(K1),this.addDetector(Y1),this.addDetector(Q1),this.addDetector(X1),this.addDetector(W1),this.addDetector(J1),this.addDetector(G1)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,t=[];return e.forEach(s=>{if(this.detectors[s]){let l=this.detectors[s].lookup(this.options);l&&typeof l=="string"&&(l=[l]),l&&(t=t.concat(l))}}),t=t.filter(s=>s!=null&&!B1(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(e,this.options)}))}}VN.type="languageDetector";const pw=Object.assign({}),Qc={};Object.keys(pw).forEach(r=>{const e=r.match(/\.\/([^/]+)\/([^/]+)\.ts$/);if(e){const[,t]=e,s=pw[r];Qc[t]||(Qc[t]={translation:{}}),s.default&&(Qc[t].translation={...Qc[t].translation,...s.default})}});Mr.use(VN).use(U1).init({lng:"en",fallbackLng:"en",debug:!1,resources:Qc,interpolation:{escapeValue:!1}});var ip={exports:{}},Bc={},lp={exports:{}},op={};var xw;function eA(){return xw||(xw=1,(function(r){function e(H,U){var re=H.length;H.push(U);e:for(;0<re;){var le=re-1>>>1,pe=H[le];if(0<l(pe,U))H[le]=U,H[re]=pe,re=le;else break e}}function t(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var U=H[0],re=H.pop();if(re!==U){H[0]=re;e:for(var le=0,pe=H.length,D=pe>>>1;le<D;){var Q=2*(le+1)-1,ae=H[Q],ge=Q+1,G=H[ge];if(0>l(ae,re))ge<pe&&0>l(G,ae)?(H[le]=G,H[ge]=re,le=ge):(H[le]=ae,H[Q]=re,le=Q);else if(ge<pe&&0>l(G,re))H[le]=G,H[ge]=re,le=ge;else break e}}return U}function l(H,U){var re=H.sortIndex-U.sortIndex;return re!==0?re:H.id-U.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();r.unstable_now=function(){return d.now()-h}}var g=[],p=[],y=1,v=null,w=3,S=!1,C=!1,F=!1,T=!1,V=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function Y(H){for(var U=t(p);U!==null;){if(U.callback===null)s(p);else if(U.startTime<=H)s(p),U.sortIndex=U.expirationTime,e(g,U);else break;U=t(p)}}function W(H){if(F=!1,Y(H),!C)if(t(g)!==null)C=!0,$||($=!0,M());else{var U=t(p);U!==null&&Oe(W,U.startTime-H)}}var $=!1,I=-1,L=5,j=-1;function A(){return T?!0:!(r.unstable_now()-j<L)}function P(){if(T=!1,$){var H=r.unstable_now();j=H;var U=!0;try{e:{C=!1,F&&(F=!1,E(I),I=-1),S=!0;var re=w;try{t:{for(Y(H),v=t(g);v!==null&&!(v.expirationTime>H&&A());){var le=v.callback;if(typeof le=="function"){v.callback=null,w=v.priorityLevel;var pe=le(v.expirationTime<=H);if(H=r.unstable_now(),typeof pe=="function"){v.callback=pe,Y(H),U=!0;break t}v===t(g)&&s(g),Y(H)}else s(g);v=t(g)}if(v!==null)U=!0;else{var D=t(p);D!==null&&Oe(W,D.startTime-H),U=!1}}break e}finally{v=null,w=re,S=!1}U=void 0}}finally{U?M():$=!1}}}var M;if(typeof B=="function")M=function(){B(P)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,me=z.port2;z.port1.onmessage=P,M=function(){me.postMessage(null)}}else M=function(){V(P,0)};function Oe(H,U){I=V(function(){H(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function(H){switch(w){case 1:case 2:case 3:var U=3;break;default:U=w}var re=w;w=U;try{return H()}finally{w=re}},r.unstable_requestPaint=function(){T=!0},r.unstable_runWithPriority=function(H,U){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var re=w;w=H;try{return U()}finally{w=re}},r.unstable_scheduleCallback=function(H,U,re){var le=r.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?le+re:le):re=le,H){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=re+pe,H={id:y++,callback:U,priorityLevel:H,startTime:re,expirationTime:pe,sortIndex:-1},re>le?(H.sortIndex=re,e(p,H),t(g)===null&&H===t(p)&&(F?(E(I),I=-1):F=!0,Oe(W,re-le))):(H.sortIndex=pe,e(g,H),C||S||(C=!0,$||($=!0,M()))),H},r.unstable_shouldYield=A,r.unstable_wrapCallback=function(H){var U=w;return function(){var re=w;w=U;try{return H.apply(this,arguments)}finally{w=re}}}})(op)),op}var yw;function tA(){return yw||(yw=1,lp.exports=eA()),lp.exports}var cp={exports:{}},wr={};var bw;function rA(){if(bw)return wr;bw=1;var r=m0();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:g,containerInfo:p,implementation:y}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return wr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,wr.createPortal=function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return c(g,p,null,y)},wr.flushSync=function(g){var p=d.T,y=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=p,s.p=y,s.d.f()}},wr.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},wr.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},wr.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:S}):y==="script"&&s.d.X(g,{crossOrigin:v,integrity:w,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},wr.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},wr.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin);s.d.L(g,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},wr.preloadModule=function(g,p){if(typeof g=="string")if(p){var y=h(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},wr.requestFormReset=function(g){s.d.r(g)},wr.unstable_batchedUpdates=function(g,p){return g(p)},wr.useFormState=function(g,p,y){return d.H.useFormState(g,p,y)},wr.useFormStatus=function(){return d.H.useHostTransitionStatus()},wr.version="19.2.0",wr}var vw;function nA(){if(vw)return cp.exports;vw=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),cp.exports=rA(),cp.exports}var ww;function sA(){if(ww)return Bc;ww=1;var r=tA(),e=m0(),t=nA();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var a=n,o=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(o=a.return),n=a.return;while(n)}return a.tag===3?o:null}function d(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function h(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function g(n){if(c(n)!==n)throw Error(s(188))}function p(n){var a=n.alternate;if(!a){if(a=c(n),a===null)throw Error(s(188));return a!==n?null:n}for(var o=n,u=a;;){var m=o.return;if(m===null)break;var x=m.alternate;if(x===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===x.child){for(x=m.child;x;){if(x===o)return g(m),n;if(x===u)return g(m),a;x=x.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=x;else{for(var _=!1,R=m.child;R;){if(R===o){_=!0,o=m,u=x;break}if(R===u){_=!0,u=m,o=x;break}R=R.sibling}if(!_){for(R=x.child;R;){if(R===o){_=!0,o=x,u=m;break}if(R===u){_=!0,u=x,o=m;break}R=R.sibling}if(!_)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:a}function y(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=y(n),a!==null)return a;n=n.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),B=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),A=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function M(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var z=Symbol.for("react.client.reference");function me(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===z?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case V:return"Profiler";case T:return"StrictMode";case W:return"Suspense";case $:return"SuspenseList";case j:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case C:return"Portal";case B:return n.displayName||"Context";case E:return(n._context.displayName||"Context")+".Consumer";case Y:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return a=n.displayName||null,a!==null?a:me(n.type)||"Memo";case L:a=n._payload,n=n._init;try{return me(n(a))}catch{}}return null}var Oe=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},le=[],pe=-1;function D(n){return{current:n}}function Q(n){0>pe||(n.current=le[pe],le[pe]=null,pe--)}function ae(n,a){pe++,le[pe]=n.current,n.current=a}var ge=D(null),G=D(null),ce=D(null),xe=D(null);function Te(n,a){switch(ae(ce,a),ae(G,n),ae(ge,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?xv(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=xv(a),n=yv(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Q(ge),ae(ge,n)}function Se(){Q(ge),Q(G),Q(ce)}function He(n){n.memoizedState!==null&&ae(xe,n);var a=ge.current,o=yv(a,n.type);a!==o&&(ae(G,n),ae(ge,o))}function Ge(n){G.current===n&&(Q(ge),Q(G)),xe.current===n&&(Q(xe),Pc._currentValue=re)}var ye,Ve;function Ae(n){if(ye===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);ye=a&&a[1]||"",Ve=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+n+Ve}var yt=!1;function Yt(n,a){if(!n||yt)return"";yt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(a){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ne){var te=ne}Reflect.construct(n,[],de)}else{try{de.call()}catch(ne){te=ne}n.call(de.prototype)}}else{try{throw Error()}catch(ne){te=ne}(de=n())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=u.DetermineComponentFrameRoot(),_=x[0],R=x[1];if(_&&R){var q=_.split(`
`),ee=R.split(`
`);for(m=u=0;u<q.length&&!q[u].includes("DetermineComponentFrameRoot");)u++;for(;m<ee.length&&!ee[m].includes("DetermineComponentFrameRoot");)m++;if(u===q.length||m===ee.length)for(u=q.length-1,m=ee.length-1;1<=u&&0<=m&&q[u]!==ee[m];)m--;for(;1<=u&&0<=m;u--,m--)if(q[u]!==ee[m]){if(u!==1||m!==1)do if(u--,m--,0>m||q[u]!==ee[m]){var ie=`
`+q[u].replace(" at new "," at ");return n.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",n.displayName)),ie}while(1<=u&&0<=m);break}}}finally{yt=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ae(o):""}function fs(n,a){switch(n.tag){case 26:case 27:case 5:return Ae(n.type);case 16:return Ae("Lazy");case 13:return n.child!==a&&a!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return Yt(n.type,!1);case 11:return Yt(n.type.render,!1);case 1:return Yt(n.type,!0);case 31:return Ae("Activity");default:return""}}function ra(n){try{var a="",o=null;do a+=fs(n,o),o=n,n=n.return;while(n);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var na=Object.prototype.hasOwnProperty,Pr=r.unstable_scheduleCallback,hn=r.unstable_cancelCallback,Uo=r.unstable_shouldYield,Vo=r.unstable_requestPaint,dr=r.unstable_now,Yu=r.unstable_getCurrentPriorityLevel,Qt=r.unstable_ImmediatePriority,tr=r.unstable_UserBlockingPriority,ms=r.unstable_NormalPriority,Qu=r.unstable_LowPriority,zo=r.unstable_IdlePriority,tm=r.log,_i=r.unstable_setDisableYieldValue,sa=null,br=null;function fn(n){if(typeof tm=="function"&&_i(n),br&&typeof br.setStrictMode=="function")try{br.setStrictMode(sa,n)}catch{}}var Er=Math.clz32?Math.clz32:Xu,rm=Math.log,Fo=Math.LN2;function Xu(n){return n>>>=0,n===0?32:31-(rm(n)/Fo|0)|0}var Ni=256,qn=262144,aa=4194304;function An(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function mn(n,a,o){var u=n.pendingLanes;if(u===0)return 0;var m=0,x=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var R=u&134217727;return R!==0?(u=R&~x,u!==0?m=An(u):(_&=R,_!==0?m=An(_):o||(o=R&~n,o!==0&&(m=An(o))))):(R=u&~x,R!==0?m=An(R):_!==0?m=An(_):o||(o=u&~n,o!==0&&(m=An(o)))),m===0?0:a!==0&&a!==m&&(a&x)===0&&(x=m&-m,o=a&-a,x>=o||x===32&&(o&4194048)!==0)?a:m}function ia(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function yl(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bo(){var n=aa;return aa<<=1,(aa&62914560)===0&&(aa=4194304),n}function gs(n){for(var a=[],o=0;31>o;o++)a.push(n);return a}function la(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function hr(n,a,o,u,m,x){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var R=n.entanglements,q=n.expirationTimes,ee=n.hiddenUpdates;for(o=_&~o;0<o;){var ie=31-Er(o),de=1<<ie;R[ie]=0,q[ie]=-1;var te=ee[ie];if(te!==null)for(ee[ie]=null,ie=0;ie<te.length;ie++){var ne=te[ie];ne!==null&&(ne.lane&=-536870913)}o&=~de}u!==0&&qo(n,u,0),x!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=x&~(_&~a))}function qo(n,a,o){n.pendingLanes|=a,n.suspendedLanes&=~a;var u=31-Er(a);n.entangledLanes|=a,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function oa(n,a){var o=n.entangledLanes|=a;for(n=n.entanglements;o;){var u=31-Er(o),m=1<<u;m&a|n[u]&a&&(n[u]|=a),o&=~m}}function ca(n,a){var o=a&-a;return o=(o&42)!==0?1:Ho(o),(o&(n.suspendedLanes|a))!==0?0:o}function Ho(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function $o(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ps(){var n=U.p;return n!==0?n:(n=window.event,n===void 0?32:Fv(n.type))}function Wu(n,a){var o=U.p;try{return U.p=n,a()}finally{U.p=o}}var Hn=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Hn,fr="__reactProps$"+Hn,$n="__reactContainer$"+Hn,ua="__reactEvents$"+Hn,Gn="__reactListeners$"+Hn,Ju="__reactHandles$"+Hn,Go="__reactResources$"+Hn,xs="__reactMarker$"+Hn;function ji(n){delete n[Ct],delete n[fr],delete n[ua],delete n[Gn],delete n[Ju]}function ys(n){var a=n[Ct];if(a)return a;for(var o=n.parentNode;o;){if(a=o[$n]||o[Ct]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(n=kv(n);n!==null;){if(o=n[Ct])return o;n=kv(n)}return a}n=o,o=n.parentNode}return null}function bs(n){if(n=n[Ct]||n[$n]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function ki(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function Cn(n){var a=n[Go];return a||(a=n[Go]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ot(n){n[xs]=!0}var bl=new Set,da={};function Sr(n,a){Kn(n,a),Kn(n+"Capture",a)}function Kn(n,a){for(da[n]=a,n=0;n<a.length;n++)bl.add(a[n])}var nm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ko={},Yo={};function Zu(n){return na.call(Yo,n)?!0:na.call(Ko,n)?!1:nm.test(n)?Yo[n]=!0:(Ko[n]=!0,!1)}function ha(n,a,o){if(Zu(a))if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var u=a.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+o)}}function fa(n,a,o){if(o===null)n.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+o)}}function gn(n,a,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(a,o,""+u)}}function Tr(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ed(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function sm(n,a,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,x=u.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return m.call(this)},set:function(_){o=""+_,x.call(this,_)}}),Object.defineProperty(n,a,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function vl(n){if(!n._valueTracker){var a=ed(n)?"checked":"value";n._valueTracker=sm(n,a,""+n[a])}}function Qo(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var o=a.getValue(),u="";return n&&(u=ed(n)?n.checked?"true":"false":n.value),n=u,n!==o?(a.setValue(n),!0):!1}function wl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var vs=/[\n"\\]/g;function Rt(n){return n.replace(vs,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function ma(n,a,o,u,m,x,_,R){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),a!=null?_==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+Tr(a)):n.value!==""+Tr(a)&&(n.value=""+Tr(a)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),a!=null?_l(n,_,Tr(a)):o!=null?_l(n,_,Tr(o)):u!=null&&n.removeAttribute("value"),m==null&&x!=null&&(n.defaultChecked=!!x),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?n.name=""+Tr(R):n.removeAttribute("name")}function Ei(n,a,o,u,m,x,_,R){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.type=x),a!=null||o!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){vl(n);return}o=o!=null?""+Tr(o):"",a=a!=null?""+Tr(a):o,R||a===n.value||(n.value=a),n.defaultValue=a}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=R?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),vl(n)}function _l(n,a,o){a==="number"&&wl(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function it(n,a,o,u){if(n=n.options,a){a={};for(var m=0;m<o.length;m++)a["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=a.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Tr(o),a=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}a!==null||n[m].disabled||(a=n[m])}a!==null&&(a.selected=!0)}}function Si(n,a,o){if(a!=null&&(a=""+Tr(a),a!==n.value&&(n.value=a),o==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=o!=null?""+Tr(o):""}function ga(n,a,o,u){if(a==null){if(u!=null){if(o!=null)throw Error(s(92));if(Oe(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),a=o}o=Tr(a),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),vl(n)}function pn(n,a){if(a){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=a;return}}n.textContent=a}var am=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xo(n,a,o){var u=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":u?n.setProperty(a,o):typeof o!="number"||o===0||am.has(a)?a==="float"?n.cssFloat=o:n[a]=(""+o).trim():n[a]=o+"px"}function td(n,a,o){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||a!=null&&a.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in a)u=a[m],a.hasOwnProperty(m)&&o[m]!==u&&Xo(n,m,u)}else for(var x in a)a.hasOwnProperty(x)&&Xo(n,x,a[x])}function Wo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var im=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yn(n){return lm.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function rr(){}var Nl=null;function jl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ws=null,Xr=null;function rd(n){var a=bs(n);if(a&&(n=a.stateNode)){var o=n[fr]||null;e:switch(n=a.stateNode,a.type){case"input":if(ma(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Rt(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var u=o[a];if(u!==n&&u.form===n.form){var m=u[fr]||null;if(!m)throw Error(s(90));ma(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<o.length;a++)u=o[a],u.form===n.form&&Qo(u)}break e;case"textarea":Si(n,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&it(n,!!o.multiple,a,!1)}}}var Jo=!1;function nd(n,a,o){if(Jo)return n(a,o);Jo=!0;try{var u=n(a);return u}finally{if(Jo=!1,(ws!==null||Xr!==null)&&(Zd(),ws&&(a=ws,n=Xr,Xr=ws=null,rd(a),n)))for(a=0;a<n.length;a++)rd(n[a])}}function Lr(n,a){var o=n.stateNode;if(o===null)return null;var u=o[fr]||null;if(u===null)return null;o=u[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,a,typeof o));return o}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zo=!1;if(Rn)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){Zo=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{Zo=!1}var Wr=null,kl=null,Xn=null;function pa(){if(Xn)return Xn;var n,a=kl,o=a.length,u,m="value"in Wr?Wr.value:Wr.textContent,x=m.length;for(n=0;n<o&&a[n]===m[n];n++);var _=o-n;for(u=1;u<=_&&a[o-u]===m[x-u];u++);return Xn=m.slice(n,1<u?1-u:void 0)}function Ti(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function xa(){return!0}function wt(){return!1}function vr(n){function a(o,u,m,x,_){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=x,this.target=_,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(o=n[R],this[R]=o?o(x):x[R]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?xa:wt,this.isPropagationStopped=wt,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=xa)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=xa)},persist:function(){},isPersistent:xa}),a}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=vr(_s),ya=v({},_s,{view:0,detail:0}),sd=vr(ya),ba,El,Ar,Ci=v({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ar&&(Ar&&n.type==="mousemove"?(ba=n.screenX-Ar.screenX,El=n.screenY-Ar.screenY):El=ba=0,Ar=n),ba)},movementY:function(n){return"movementY"in n?n.movementY:El}}),ad=vr(Ci),Ri=v({},Ci,{dataTransfer:0}),id=vr(Ri),ec=v({},ya,{relatedTarget:0}),va=vr(ec),ld=v({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),Sl=vr(ld),om=v({},_s,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),od=vr(om),Ii=v({},_s,{data:0}),tc=vr(Ii),cd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ud(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=nc[n])?!!a[n]:!1}function wa(){return ud}var dd=v({},ya,{key:function(n){if(n.key){var a=cd[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Ti(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wa,charCode:function(n){return n.type==="keypress"?Ti(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ti(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hd=vr(dd),Ns=v({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sc=vr(Ns),fd=v({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wa}),md=vr(fd),gd=v({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tl=vr(gd),Cr=v({},Ci,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),pd=vr(Cr),xd=v({},_s,{newState:0,oldState:0}),_a=vr(xd),f=[9,13,27,32],b=Rn&&"CompositionEvent"in window,N=null;Rn&&"documentMode"in document&&(N=document.documentMode);var O=Rn&&"TextEvent"in window&&!N,J=Rn&&(!b||N&&8<N&&11>=N),se=" ",ve=!1;function ut(n,a){switch(n){case"keyup":return f.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zt(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ke=!1;function nr(n,a){switch(n){case"compositionend":return zt(a);case"keypress":return a.which!==32?null:(ve=!0,se);case"textInput":return n=a.data,n===se&&ve?null:n;default:return null}}function sr(n,a){if(Ke)return n==="compositionend"||!b&&ut(n,a)?(n=pa(),Xn=kl=Wr=null,Ke=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return J&&a.locale!=="ko"?null:a.data;default:return null}}var Na={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ur(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!Na[n.type]:a==="textarea"}function Di(n,a,o,u){ws?Xr?Xr.push(u):Xr=[u]:ws=u,a=ih(a,"onChange"),0<a.length&&(o=new Ai("onChange","change",null,o,u),n.push({event:o,listeners:a}))}var js=null,ac=null;function MS(n){dv(n,0)}function yd(n){var a=ki(n);if(Qo(a))return n}function Cx(n,a){if(n==="change")return a}var Rx=!1;if(Rn){var cm;if(Rn){var um="oninput"in document;if(!um){var Ix=document.createElement("div");Ix.setAttribute("oninput","return;"),um=typeof Ix.oninput=="function"}cm=um}else cm=!1;Rx=cm&&(!document.documentMode||9<document.documentMode)}function Dx(){js&&(js.detachEvent("onpropertychange",Ox),ac=js=null)}function Ox(n){if(n.propertyName==="value"&&yd(ac)){var a=[];Di(a,ac,n,jl(n)),nd(MS,a)}}function PS(n,a,o){n==="focusin"?(Dx(),js=a,ac=o,js.attachEvent("onpropertychange",Ox)):n==="focusout"&&Dx()}function LS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return yd(ac)}function US(n,a){if(n==="click")return yd(a)}function VS(n,a){if(n==="input"||n==="change")return yd(a)}function zS(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var Jr=typeof Object.is=="function"?Object.is:zS;function ic(n,a){if(Jr(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var o=Object.keys(n),u=Object.keys(a);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!na.call(a,m)||!Jr(n[m],a[m]))return!1}return!0}function Mx(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Px(n,a){var o=Mx(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=a&&u>=a)return{node:o,offset:a-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Mx(o)}}function Lx(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?Lx(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function Ux(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=wl(n.document);a instanceof n.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)n=a.contentWindow;else break;a=wl(n.document)}return a}function dm(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var FS=Rn&&"documentMode"in document&&11>=document.documentMode,Al=null,hm=null,lc=null,fm=!1;function Vx(n,a,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;fm||Al==null||Al!==wl(u)||(u=Al,"selectionStart"in u&&dm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),lc&&ic(lc,u)||(lc=u,u=ih(hm,"onSelect"),0<u.length&&(a=new Ai("onSelect","select",null,a,o),n.push({event:a,listeners:u}),a.target=Al)))}function Oi(n,a){var o={};return o[n.toLowerCase()]=a.toLowerCase(),o["Webkit"+n]="webkit"+a,o["Moz"+n]="moz"+a,o}var Cl={animationend:Oi("Animation","AnimationEnd"),animationiteration:Oi("Animation","AnimationIteration"),animationstart:Oi("Animation","AnimationStart"),transitionrun:Oi("Transition","TransitionRun"),transitionstart:Oi("Transition","TransitionStart"),transitioncancel:Oi("Transition","TransitionCancel"),transitionend:Oi("Transition","TransitionEnd")},mm={},zx={};Rn&&(zx=document.createElement("div").style,"AnimationEvent"in window||(delete Cl.animationend.animation,delete Cl.animationiteration.animation,delete Cl.animationstart.animation),"TransitionEvent"in window||delete Cl.transitionend.transition);function Mi(n){if(mm[n])return mm[n];if(!Cl[n])return n;var a=Cl[n],o;for(o in a)if(a.hasOwnProperty(o)&&o in zx)return mm[n]=a[o];return n}var Fx=Mi("animationend"),Bx=Mi("animationiteration"),qx=Mi("animationstart"),BS=Mi("transitionrun"),qS=Mi("transitionstart"),HS=Mi("transitioncancel"),Hx=Mi("transitionend"),$x=new Map,gm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gm.push("scrollEnd");function In(n,a){$x.set(n,a),Sr(a,[n])}var bd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},xn=[],Rl=0,pm=0;function vd(){for(var n=Rl,a=pm=Rl=0;a<n;){var o=xn[a];xn[a++]=null;var u=xn[a];xn[a++]=null;var m=xn[a];xn[a++]=null;var x=xn[a];if(xn[a++]=null,u!==null&&m!==null){var _=u.pending;_===null?m.next=m:(m.next=_.next,_.next=m),u.pending=m}x!==0&&Gx(o,m,x)}}function wd(n,a,o,u){xn[Rl++]=n,xn[Rl++]=a,xn[Rl++]=o,xn[Rl++]=u,pm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function xm(n,a,o,u){return wd(n,a,o,u),_d(n)}function Pi(n,a){return wd(n,null,null,a),_d(n)}function Gx(n,a,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var m=!1,x=n.return;x!==null;)x.childLanes|=o,u=x.alternate,u!==null&&(u.childLanes|=o),x.tag===22&&(n=x.stateNode,n===null||n._visibility&1||(m=!0)),n=x,x=x.return;return n.tag===3?(x=n.stateNode,m&&a!==null&&(m=31-Er(o),n=x.hiddenUpdates,u=n[m],u===null?n[m]=[a]:u.push(a),a.lane=o|536870912),x):null}function _d(n){if(50<Ac)throw Ac=0,Eg=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Il={};function $S(n,a,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(n,a,o,u){return new $S(n,a,o,u)}function ym(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ks(n,a){var o=n.alternate;return o===null?(o=Zr(n.tag,a,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=a,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,a=n.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Kx(n,a){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,a=o.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function Nd(n,a,o,u,m,x){var _=0;if(u=n,typeof n=="function")ym(n)&&(_=1);else if(typeof n=="string")_=XT(n,o,ge.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case j:return n=Zr(31,o,a,m),n.elementType=j,n.lanes=x,n;case F:return Li(o.children,m,x,a);case T:_=8,m|=24;break;case V:return n=Zr(12,o,a,m|2),n.elementType=V,n.lanes=x,n;case W:return n=Zr(13,o,a,m),n.elementType=W,n.lanes=x,n;case $:return n=Zr(19,o,a,m),n.elementType=$,n.lanes=x,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:_=10;break e;case E:_=9;break e;case Y:_=11;break e;case I:_=14;break e;case L:_=16,u=null;break e}_=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return a=Zr(_,o,a,m),a.elementType=n,a.type=u,a.lanes=x,a}function Li(n,a,o,u){return n=Zr(7,n,u,a),n.lanes=o,n}function bm(n,a,o){return n=Zr(6,n,null,a),n.lanes=o,n}function Yx(n){var a=Zr(18,null,null,0);return a.stateNode=n,a}function vm(n,a,o){return a=Zr(4,n.children!==null?n.children:[],n.key,a),a.lanes=o,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var Qx=new WeakMap;function yn(n,a){if(typeof n=="object"&&n!==null){var o=Qx.get(n);return o!==void 0?o:(a={value:n,source:a,stack:ra(a)},Qx.set(n,a),a)}return{value:n,source:a,stack:ra(a)}}var Dl=[],Ol=0,jd=null,oc=0,bn=[],vn=0,ja=null,Wn=1,Jn="";function Es(n,a){Dl[Ol++]=oc,Dl[Ol++]=jd,jd=n,oc=a}function Xx(n,a,o){bn[vn++]=Wn,bn[vn++]=Jn,bn[vn++]=ja,ja=n;var u=Wn;n=Jn;var m=32-Er(u)-1;u&=~(1<<m),o+=1;var x=32-Er(a)+m;if(30<x){var _=m-m%5;x=(u&(1<<_)-1).toString(32),u>>=_,m-=_,Wn=1<<32-Er(a)+m|o<<m|u,Jn=x+n}else Wn=1<<x|o<<m|u,Jn=n}function wm(n){n.return!==null&&(Es(n,1),Xx(n,1,0))}function _m(n){for(;n===jd;)jd=Dl[--Ol],Dl[Ol]=null,oc=Dl[--Ol],Dl[Ol]=null;for(;n===ja;)ja=bn[--vn],bn[vn]=null,Jn=bn[--vn],bn[vn]=null,Wn=bn[--vn],bn[vn]=null}function Wx(n,a){bn[vn++]=Wn,bn[vn++]=Jn,bn[vn++]=ja,Wn=a.id,Jn=a.overflow,ja=n}var mr=null,_t=null,nt=!1,ka=null,wn=!1,Nm=Error(s(519));function Ea(n){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cc(yn(a,n)),Nm}function Jx(n){var a=n.stateNode,o=n.type,u=n.memoizedProps;switch(a[Ct]=n,a[fr]=u,o){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(o=0;o<Rc.length;o++)Qe(Rc[o],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Qe("invalid",a),Ei(a,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Qe("invalid",a);break;case"textarea":Qe("invalid",a),ga(a,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||u.suppressHydrationWarning===!0||gv(a.textContent,o)?(u.popover!=null&&(Qe("beforetoggle",a),Qe("toggle",a)),u.onScroll!=null&&Qe("scroll",a),u.onScrollEnd!=null&&Qe("scrollend",a),u.onClick!=null&&(a.onclick=rr),a=!0):a=!1,a||Ea(n,!0)}function Zx(n){for(mr=n.return;mr;)switch(mr.tag){case 5:case 31:case 13:wn=!1;return;case 27:case 3:wn=!0;return;default:mr=mr.return}}function Ml(n){if(n!==mr)return!1;if(!nt)return Zx(n),nt=!0,!1;var a=n.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Fg(n.type,n.memoizedProps)),o=!o),o&&_t&&Ea(n),Zx(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));_t=jv(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));_t=jv(n)}else a===27?(a=_t,za(n.type)?(n=Gg,Gg=null,_t=n):_t=a):_t=mr?Nn(n.stateNode.nextSibling):null;return!0}function Ui(){_t=mr=null,nt=!1}function jm(){var n=ka;return n!==null&&(Br===null?Br=n:Br.push.apply(Br,n),ka=null),n}function cc(n){ka===null?ka=[n]:ka.push(n)}var km=D(null),Vi=null,Ss=null;function Sa(n,a,o){ae(km,a._currentValue),a._currentValue=o}function Ts(n){n._currentValue=km.current,Q(km)}function Em(n,a,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,u!==null&&(u.childLanes|=a)):u!==null&&(u.childLanes&a)!==a&&(u.childLanes|=a),n===o)break;n=n.return}}function Sm(n,a,o,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var x=m.dependencies;if(x!==null){var _=m.child;x=x.firstContext;e:for(;x!==null;){var R=x;x=m;for(var q=0;q<a.length;q++)if(R.context===a[q]){x.lanes|=o,R=x.alternate,R!==null&&(R.lanes|=o),Em(x.return,o,n),u||(_=null);break e}x=R.next}}else if(m.tag===18){if(_=m.return,_===null)throw Error(s(341));_.lanes|=o,x=_.alternate,x!==null&&(x.lanes|=o),Em(_,o,n),_=null}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===n){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}}function Pl(n,a,o,u){n=null;for(var m=a,x=!1;m!==null;){if(!x){if((m.flags&524288)!==0)x=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var _=m.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var R=m.type;Jr(m.pendingProps.value,_.value)||(n!==null?n.push(R):n=[R])}}else if(m===xe.current){if(_=m.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Pc):n=[Pc])}m=m.return}n!==null&&Sm(a,n,o,u),a.flags|=262144}function kd(n){for(n=n.firstContext;n!==null;){if(!Jr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function zi(n){Vi=n,Ss=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function gr(n){return ey(Vi,n)}function Ed(n,a){return Vi===null&&zi(n),ey(n,a)}function ey(n,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Ss===null){if(n===null)throw Error(s(308));Ss=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Ss=Ss.next=a;return o}var GS=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){a.aborted=!0,n.forEach(function(o){return o()})}},KS=r.unstable_scheduleCallback,YS=r.unstable_NormalPriority,Ft={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tm(){return{controller:new GS,data:new Map,refCount:0}}function uc(n){n.refCount--,n.refCount===0&&KS(YS,function(){n.controller.abort()})}var dc=null,Am=0,Ll=0,Ul=null;function QS(n,a){if(dc===null){var o=dc=[];Am=0,Ll=Ig(),Ul={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Am++,a.then(ty,ty),a}function ty(){if(--Am===0&&dc!==null){Ul!==null&&(Ul.status="fulfilled");var n=dc;dc=null,Ll=0,Ul=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function XS(n,a){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){u.status="fulfilled",u.value=a;for(var m=0;m<o.length;m++)(0,o[m])(a)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var ry=H.S;H.S=function(n,a){Vb=dr(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&QS(n,a),ry!==null&&ry(n,a)};var Fi=D(null);function Cm(){var n=Fi.current;return n!==null?n:bt.pooledCache}function Sd(n,a){a===null?ae(Fi,Fi.current):ae(Fi,a.pool)}function ny(){var n=Cm();return n===null?null:{parent:Ft._currentValue,pool:n}}var Vl=Error(s(460)),Rm=Error(s(474)),Td=Error(s(542)),Ad={then:function(){}};function sy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ay(n,a,o){switch(o=n[o],o===void 0?n.push(a):o!==a&&(a.then(rr,rr),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,ly(n),n;default:if(typeof a.status=="string")a.then(rr,rr);else{if(n=bt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(u){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=u}},function(u){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=u}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,ly(n),n}throw qi=a,Vl}}function Bi(n){try{var a=n._init;return a(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(qi=o,Vl):o}}var qi=null;function iy(){if(qi===null)throw Error(s(459));var n=qi;return qi=null,n}function ly(n){if(n===Vl||n===Td)throw Error(s(483))}var zl=null,hc=0;function Cd(n){var a=hc;return hc+=1,zl===null&&(zl=[]),ay(zl,n,a)}function fc(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function Rd(n,a){throw a.$$typeof===w?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function oy(n){function a(X,K){if(n){var Z=X.deletions;Z===null?(X.deletions=[K],X.flags|=16):Z.push(K)}}function o(X,K){if(!n)return null;for(;K!==null;)a(X,K),K=K.sibling;return null}function u(X){for(var K=new Map;X!==null;)X.key!==null?K.set(X.key,X):K.set(X.index,X),X=X.sibling;return K}function m(X,K){return X=ks(X,K),X.index=0,X.sibling=null,X}function x(X,K,Z){return X.index=Z,n?(Z=X.alternate,Z!==null?(Z=Z.index,Z<K?(X.flags|=67108866,K):Z):(X.flags|=67108866,K)):(X.flags|=1048576,K)}function _(X){return n&&X.alternate===null&&(X.flags|=67108866),X}function R(X,K,Z,oe){return K===null||K.tag!==6?(K=bm(Z,X.mode,oe),K.return=X,K):(K=m(K,Z),K.return=X,K)}function q(X,K,Z,oe){var Re=Z.type;return Re===F?ie(X,K,Z.props.children,oe,Z.key):K!==null&&(K.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===L&&Bi(Re)===K.type)?(K=m(K,Z.props),fc(K,Z),K.return=X,K):(K=Nd(Z.type,Z.key,Z.props,null,X.mode,oe),fc(K,Z),K.return=X,K)}function ee(X,K,Z,oe){return K===null||K.tag!==4||K.stateNode.containerInfo!==Z.containerInfo||K.stateNode.implementation!==Z.implementation?(K=vm(Z,X.mode,oe),K.return=X,K):(K=m(K,Z.children||[]),K.return=X,K)}function ie(X,K,Z,oe,Re){return K===null||K.tag!==7?(K=Li(Z,X.mode,oe,Re),K.return=X,K):(K=m(K,Z),K.return=X,K)}function de(X,K,Z){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=bm(""+K,X.mode,Z),K.return=X,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case S:return Z=Nd(K.type,K.key,K.props,null,X.mode,Z),fc(Z,K),Z.return=X,Z;case C:return K=vm(K,X.mode,Z),K.return=X,K;case L:return K=Bi(K),de(X,K,Z)}if(Oe(K)||M(K))return K=Li(K,X.mode,Z,null),K.return=X,K;if(typeof K.then=="function")return de(X,Cd(K),Z);if(K.$$typeof===B)return de(X,Ed(X,K),Z);Rd(X,K)}return null}function te(X,K,Z,oe){var Re=K!==null?K.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Re!==null?null:R(X,K,""+Z,oe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:return Z.key===Re?q(X,K,Z,oe):null;case C:return Z.key===Re?ee(X,K,Z,oe):null;case L:return Z=Bi(Z),te(X,K,Z,oe)}if(Oe(Z)||M(Z))return Re!==null?null:ie(X,K,Z,oe,null);if(typeof Z.then=="function")return te(X,K,Cd(Z),oe);if(Z.$$typeof===B)return te(X,K,Ed(X,Z),oe);Rd(X,Z)}return null}function ne(X,K,Z,oe,Re){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return X=X.get(Z)||null,R(K,X,""+oe,Re);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case S:return X=X.get(oe.key===null?Z:oe.key)||null,q(K,X,oe,Re);case C:return X=X.get(oe.key===null?Z:oe.key)||null,ee(K,X,oe,Re);case L:return oe=Bi(oe),ne(X,K,Z,oe,Re)}if(Oe(oe)||M(oe))return X=X.get(Z)||null,ie(K,X,oe,Re,null);if(typeof oe.then=="function")return ne(X,K,Z,Cd(oe),Re);if(oe.$$typeof===B)return ne(X,K,Z,Ed(K,oe),Re);Rd(K,oe)}return null}function ke(X,K,Z,oe){for(var Re=null,lt=null,Ee=K,$e=K=0,Je=null;Ee!==null&&$e<Z.length;$e++){Ee.index>$e?(Je=Ee,Ee=null):Je=Ee.sibling;var ot=te(X,Ee,Z[$e],oe);if(ot===null){Ee===null&&(Ee=Je);break}n&&Ee&&ot.alternate===null&&a(X,Ee),K=x(ot,K,$e),lt===null?Re=ot:lt.sibling=ot,lt=ot,Ee=Je}if($e===Z.length)return o(X,Ee),nt&&Es(X,$e),Re;if(Ee===null){for(;$e<Z.length;$e++)Ee=de(X,Z[$e],oe),Ee!==null&&(K=x(Ee,K,$e),lt===null?Re=Ee:lt.sibling=Ee,lt=Ee);return nt&&Es(X,$e),Re}for(Ee=u(Ee);$e<Z.length;$e++)Je=ne(Ee,X,$e,Z[$e],oe),Je!==null&&(n&&Je.alternate!==null&&Ee.delete(Je.key===null?$e:Je.key),K=x(Je,K,$e),lt===null?Re=Je:lt.sibling=Je,lt=Je);return n&&Ee.forEach(function($a){return a(X,$a)}),nt&&Es(X,$e),Re}function Me(X,K,Z,oe){if(Z==null)throw Error(s(151));for(var Re=null,lt=null,Ee=K,$e=K=0,Je=null,ot=Z.next();Ee!==null&&!ot.done;$e++,ot=Z.next()){Ee.index>$e?(Je=Ee,Ee=null):Je=Ee.sibling;var $a=te(X,Ee,ot.value,oe);if($a===null){Ee===null&&(Ee=Je);break}n&&Ee&&$a.alternate===null&&a(X,Ee),K=x($a,K,$e),lt===null?Re=$a:lt.sibling=$a,lt=$a,Ee=Je}if(ot.done)return o(X,Ee),nt&&Es(X,$e),Re;if(Ee===null){for(;!ot.done;$e++,ot=Z.next())ot=de(X,ot.value,oe),ot!==null&&(K=x(ot,K,$e),lt===null?Re=ot:lt.sibling=ot,lt=ot);return nt&&Es(X,$e),Re}for(Ee=u(Ee);!ot.done;$e++,ot=Z.next())ot=ne(Ee,X,$e,ot.value,oe),ot!==null&&(n&&ot.alternate!==null&&Ee.delete(ot.key===null?$e:ot.key),K=x(ot,K,$e),lt===null?Re=ot:lt.sibling=ot,lt=ot);return n&&Ee.forEach(function(l1){return a(X,l1)}),nt&&Es(X,$e),Re}function xt(X,K,Z,oe){if(typeof Z=="object"&&Z!==null&&Z.type===F&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:e:{for(var Re=Z.key;K!==null;){if(K.key===Re){if(Re=Z.type,Re===F){if(K.tag===7){o(X,K.sibling),oe=m(K,Z.props.children),oe.return=X,X=oe;break e}}else if(K.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===L&&Bi(Re)===K.type){o(X,K.sibling),oe=m(K,Z.props),fc(oe,Z),oe.return=X,X=oe;break e}o(X,K);break}else a(X,K);K=K.sibling}Z.type===F?(oe=Li(Z.props.children,X.mode,oe,Z.key),oe.return=X,X=oe):(oe=Nd(Z.type,Z.key,Z.props,null,X.mode,oe),fc(oe,Z),oe.return=X,X=oe)}return _(X);case C:e:{for(Re=Z.key;K!==null;){if(K.key===Re)if(K.tag===4&&K.stateNode.containerInfo===Z.containerInfo&&K.stateNode.implementation===Z.implementation){o(X,K.sibling),oe=m(K,Z.children||[]),oe.return=X,X=oe;break e}else{o(X,K);break}else a(X,K);K=K.sibling}oe=vm(Z,X.mode,oe),oe.return=X,X=oe}return _(X);case L:return Z=Bi(Z),xt(X,K,Z,oe)}if(Oe(Z))return ke(X,K,Z,oe);if(M(Z)){if(Re=M(Z),typeof Re!="function")throw Error(s(150));return Z=Re.call(Z),Me(X,K,Z,oe)}if(typeof Z.then=="function")return xt(X,K,Cd(Z),oe);if(Z.$$typeof===B)return xt(X,K,Ed(X,Z),oe);Rd(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,K!==null&&K.tag===6?(o(X,K.sibling),oe=m(K,Z),oe.return=X,X=oe):(o(X,K),oe=bm(Z,X.mode,oe),oe.return=X,X=oe),_(X)):o(X,K)}return function(X,K,Z,oe){try{hc=0;var Re=xt(X,K,Z,oe);return zl=null,Re}catch(Ee){if(Ee===Vl||Ee===Td)throw Ee;var lt=Zr(29,Ee,null,X.mode);return lt.lanes=oe,lt.return=X,lt}finally{}}}var Hi=oy(!0),cy=oy(!1),Ta=!1;function Im(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dm(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Aa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ca(n,a,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(ct&2)!==0){var m=u.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),u.pending=a,a=_d(n),Gx(n,null,o),a}return wd(n,u,a,o),_d(n)}function mc(n,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,oa(n,o)}}function Om(n,a){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,x=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};x===null?m=x=_:x=x.next=_,o=o.next}while(o!==null);x===null?m=x=a:x=x.next=a}else m=x=a;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:x,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=a:n.next=a,o.lastBaseUpdate=a}var Mm=!1;function gc(){if(Mm){var n=Ul;if(n!==null)throw n}}function pc(n,a,o,u){Mm=!1;var m=n.updateQueue;Ta=!1;var x=m.firstBaseUpdate,_=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var q=R,ee=q.next;q.next=null,_===null?x=ee:_.next=ee,_=q;var ie=n.alternate;ie!==null&&(ie=ie.updateQueue,R=ie.lastBaseUpdate,R!==_&&(R===null?ie.firstBaseUpdate=ee:R.next=ee,ie.lastBaseUpdate=q))}if(x!==null){var de=m.baseState;_=0,ie=ee=q=null,R=x;do{var te=R.lane&-536870913,ne=te!==R.lane;if(ne?(We&te)===te:(u&te)===te){te!==0&&te===Ll&&(Mm=!0),ie!==null&&(ie=ie.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ke=n,Me=R;te=a;var xt=o;switch(Me.tag){case 1:if(ke=Me.payload,typeof ke=="function"){de=ke.call(xt,de,te);break e}de=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Me.payload,te=typeof ke=="function"?ke.call(xt,de,te):ke,te==null)break e;de=v({},de,te);break e;case 2:Ta=!0}}te=R.callback,te!==null&&(n.flags|=64,ne&&(n.flags|=8192),ne=m.callbacks,ne===null?m.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ie===null?(ee=ie=ne,q=de):ie=ie.next=ne,_|=te;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;ne=R,R=ne.next,ne.next=null,m.lastBaseUpdate=ne,m.shared.pending=null}}while(!0);ie===null&&(q=de),m.baseState=q,m.firstBaseUpdate=ee,m.lastBaseUpdate=ie,x===null&&(m.shared.lanes=0),Ma|=_,n.lanes=_,n.memoizedState=de}}function uy(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function dy(n,a){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)uy(o[n],a)}var Fl=D(null),Id=D(0);function hy(n,a){n=Ls,ae(Id,n),ae(Fl,a),Ls=n|a.baseLanes}function Pm(){ae(Id,Ls),ae(Fl,Fl.current)}function Lm(){Ls=Id.current,Q(Fl),Q(Id)}var en=D(null),_n=null;function Ra(n){var a=n.alternate;ae(Mt,Mt.current&1),ae(en,n),_n===null&&(a===null||Fl.current!==null||a.memoizedState!==null)&&(_n=n)}function Um(n){ae(Mt,Mt.current),ae(en,n),_n===null&&(_n=n)}function fy(n){n.tag===22?(ae(Mt,Mt.current),ae(en,n),_n===null&&(_n=n)):Ia()}function Ia(){ae(Mt,Mt.current),ae(en,en.current)}function tn(n){Q(en),_n===n&&(_n=null),Q(Mt)}var Mt=D(0);function Dd(n){for(var a=n;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Hg(o)||$g(o)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var As=0,qe=null,gt=null,Bt=null,Od=!1,Bl=!1,$i=!1,Md=0,xc=0,ql=null,WS=0;function It(){throw Error(s(321))}function Vm(n,a){if(a===null)return!1;for(var o=0;o<a.length&&o<n.length;o++)if(!Jr(n[o],a[o]))return!1;return!0}function zm(n,a,o,u,m,x){return As=x,qe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=n===null||n.memoizedState===null?Xy:tg,$i=!1,x=o(u,m),$i=!1,Bl&&(x=gy(a,o,u,m)),my(n),x}function my(n){H.H=vc;var a=gt!==null&&gt.next!==null;if(As=0,Bt=gt=qe=null,Od=!1,xc=0,ql=null,a)throw Error(s(300));n===null||qt||(n=n.dependencies,n!==null&&kd(n)&&(qt=!0))}function gy(n,a,o,u){qe=n;var m=0;do{if(Bl&&(ql=null),xc=0,Bl=!1,25<=m)throw Error(s(301));if(m+=1,Bt=gt=null,n.updateQueue!=null){var x=n.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}H.H=Wy,x=a(o,u)}while(Bl);return x}function JS(){var n=H.H,a=n.useState()[0];return a=typeof a.then=="function"?yc(a):a,n=n.useState()[0],(gt!==null?gt.memoizedState:null)!==n&&(qe.flags|=1024),a}function Fm(){var n=Md!==0;return Md=0,n}function Bm(n,a,o){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~o}function qm(n){if(Od){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Od=!1}As=0,Bt=gt=qe=null,Bl=!1,xc=Md=0,ql=null}function Rr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?qe.memoizedState=Bt=n:Bt=Bt.next=n,Bt}function Pt(){if(gt===null){var n=qe.alternate;n=n!==null?n.memoizedState:null}else n=gt.next;var a=Bt===null?qe.memoizedState:Bt.next;if(a!==null)Bt=a,gt=n;else{if(n===null)throw qe.alternate===null?Error(s(467)):Error(s(310));gt=n,n={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Bt===null?qe.memoizedState=Bt=n:Bt=Bt.next=n}return Bt}function Pd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yc(n){var a=xc;return xc+=1,ql===null&&(ql=[]),n=ay(ql,n,a),a=qe,(Bt===null?a.memoizedState:Bt.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?Xy:tg),n}function Ld(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return yc(n);if(n.$$typeof===B)return gr(n)}throw Error(s(438,String(n)))}function Hm(n){var a=null,o=qe.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var u=qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(a={data:u.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=Pd(),qe.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(n),u=0;u<n;u++)o[u]=A;return a.index++,o}function Cs(n,a){return typeof a=="function"?a(n):a}function Ud(n){var a=Pt();return $m(a,gt,n)}function $m(n,a,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=n.baseQueue,x=u.pending;if(x!==null){if(m!==null){var _=m.next;m.next=x.next,x.next=_}a.baseQueue=m=x,u.pending=null}if(x=n.baseState,m===null)n.memoizedState=x;else{a=m.next;var R=_=null,q=null,ee=a,ie=!1;do{var de=ee.lane&-536870913;if(de!==ee.lane?(We&de)===de:(As&de)===de){var te=ee.revertLane;if(te===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),de===Ll&&(ie=!0);else if((As&te)===te){ee=ee.next,te===Ll&&(ie=!0);continue}else de={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},q===null?(R=q=de,_=x):q=q.next=de,qe.lanes|=te,Ma|=te;de=ee.action,$i&&o(x,de),x=ee.hasEagerState?ee.eagerState:o(x,de)}else te={lane:de,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},q===null?(R=q=te,_=x):q=q.next=te,qe.lanes|=de,Ma|=de;ee=ee.next}while(ee!==null&&ee!==a);if(q===null?_=x:q.next=R,!Jr(x,n.memoizedState)&&(qt=!0,ie&&(o=Ul,o!==null)))throw o;n.memoizedState=x,n.baseState=_,n.baseQueue=q,u.lastRenderedState=x}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Gm(n){var a=Pt(),o=a.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,m=o.pending,x=a.memoizedState;if(m!==null){o.pending=null;var _=m=m.next;do x=n(x,_.action),_=_.next;while(_!==m);Jr(x,a.memoizedState)||(qt=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),o.lastRenderedState=x}return[x,u]}function py(n,a,o){var u=qe,m=Pt(),x=nt;if(x){if(o===void 0)throw Error(s(407));o=o()}else o=a();var _=!Jr((gt||m).memoizedState,o);if(_&&(m.memoizedState=o,qt=!0),m=m.queue,Qm(by.bind(null,u,m,n),[n]),m.getSnapshot!==a||_||Bt!==null&&Bt.memoizedState.tag&1){if(u.flags|=2048,Hl(9,{destroy:void 0},yy.bind(null,u,m,o,a),null),bt===null)throw Error(s(349));x||(As&127)!==0||xy(u,a,o)}return o}function xy(n,a,o){n.flags|=16384,n={getSnapshot:a,value:o},a=qe.updateQueue,a===null?(a=Pd(),qe.updateQueue=a,a.stores=[n]):(o=a.stores,o===null?a.stores=[n]:o.push(n))}function yy(n,a,o,u){a.value=o,a.getSnapshot=u,vy(a)&&wy(n)}function by(n,a,o){return o(function(){vy(a)&&wy(n)})}function vy(n){var a=n.getSnapshot;n=n.value;try{var o=a();return!Jr(n,o)}catch{return!0}}function wy(n){var a=Pi(n,2);a!==null&&qr(a,n,2)}function Km(n){var a=Rr();if(typeof n=="function"){var o=n;if(n=o(),$i){fn(!0);try{o()}finally{fn(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:n},a}function _y(n,a,o,u){return n.baseState=o,$m(n,gt,typeof u=="function"?u:Cs)}function ZS(n,a,o,u,m){if(Fd(n))throw Error(s(485));if(n=a.action,n!==null){var x={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){x.listeners.push(_)}};H.T!==null?o(!0):x.isTransition=!1,u(x),o=a.pending,o===null?(x.next=a.pending=x,Ny(a,x)):(x.next=o.next,a.pending=o.next=x)}}function Ny(n,a){var o=a.action,u=a.payload,m=n.state;if(a.isTransition){var x=H.T,_={};H.T=_;try{var R=o(m,u),q=H.S;q!==null&&q(_,R),jy(n,a,R)}catch(ee){Ym(n,a,ee)}finally{x!==null&&_.types!==null&&(x.types=_.types),H.T=x}}else try{x=o(m,u),jy(n,a,x)}catch(ee){Ym(n,a,ee)}}function jy(n,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){ky(n,a,u)},function(u){return Ym(n,a,u)}):ky(n,a,o)}function ky(n,a,o){a.status="fulfilled",a.value=o,Ey(a),n.state=o,a=n.pending,a!==null&&(o=a.next,o===a?n.pending=null:(o=o.next,a.next=o,Ny(n,o)))}function Ym(n,a,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do a.status="rejected",a.reason=o,Ey(a),a=a.next;while(a!==u)}n.action=null}function Ey(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Sy(n,a){return a}function Ty(n,a){if(nt){var o=bt.formState;if(o!==null){e:{var u=qe;if(nt){if(_t){t:{for(var m=_t,x=wn;m.nodeType!==8;){if(!x){m=null;break t}if(m=Nn(m.nextSibling),m===null){m=null;break t}}x=m.data,m=x==="F!"||x==="F"?m:null}if(m){_t=Nn(m.nextSibling),u=m.data==="F!";break e}}Ea(u)}u=!1}u&&(a=o[0])}}return o=Rr(),o.memoizedState=o.baseState=a,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sy,lastRenderedState:a},o.queue=u,o=Ky.bind(null,qe,u),u.dispatch=o,u=Km(!1),x=eg.bind(null,qe,!1,u.queue),u=Rr(),m={state:a,dispatch:null,action:n,pending:null},u.queue=m,o=ZS.bind(null,qe,m,x,o),m.dispatch=o,u.memoizedState=n,[a,o,!1]}function Ay(n){var a=Pt();return Cy(a,gt,n)}function Cy(n,a,o){if(a=$m(n,a,Sy)[0],n=Ud(Cs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var u=yc(a)}catch(_){throw _===Vl?Td:_}else u=a;a=Pt();var m=a.queue,x=m.dispatch;return o!==a.memoizedState&&(qe.flags|=2048,Hl(9,{destroy:void 0},eT.bind(null,m,o),null)),[u,x,n]}function eT(n,a){n.action=a}function Ry(n){var a=Pt(),o=gt;if(o!==null)return Cy(a,o,n);Pt(),a=a.memoizedState,o=Pt();var u=o.queue.dispatch;return o.memoizedState=n,[a,u,!1]}function Hl(n,a,o,u){return n={tag:n,create:o,deps:u,inst:a,next:null},a=qe.updateQueue,a===null&&(a=Pd(),qe.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,a.lastEffect=n),n}function Iy(){return Pt().memoizedState}function Vd(n,a,o,u){var m=Rr();qe.flags|=n,m.memoizedState=Hl(1|a,{destroy:void 0},o,u===void 0?null:u)}function zd(n,a,o,u){var m=Pt();u=u===void 0?null:u;var x=m.memoizedState.inst;gt!==null&&u!==null&&Vm(u,gt.memoizedState.deps)?m.memoizedState=Hl(a,x,o,u):(qe.flags|=n,m.memoizedState=Hl(1|a,x,o,u))}function Dy(n,a){Vd(8390656,8,n,a)}function Qm(n,a){zd(2048,8,n,a)}function tT(n){qe.flags|=4;var a=qe.updateQueue;if(a===null)a=Pd(),qe.updateQueue=a,a.events=[n];else{var o=a.events;o===null?a.events=[n]:o.push(n)}}function Oy(n){var a=Pt().memoizedState;return tT({ref:a,nextImpl:n}),function(){if((ct&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function My(n,a){return zd(4,2,n,a)}function Py(n,a){return zd(4,4,n,a)}function Ly(n,a){if(typeof a=="function"){n=n();var o=a(n);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function Uy(n,a,o){o=o!=null?o.concat([n]):null,zd(4,4,Ly.bind(null,a,n),o)}function Xm(){}function Vy(n,a){var o=Pt();a=a===void 0?null:a;var u=o.memoizedState;return a!==null&&Vm(a,u[1])?u[0]:(o.memoizedState=[n,a],n)}function zy(n,a){var o=Pt();a=a===void 0?null:a;var u=o.memoizedState;if(a!==null&&Vm(a,u[1]))return u[0];if(u=n(),$i){fn(!0);try{n()}finally{fn(!1)}}return o.memoizedState=[u,a],u}function Wm(n,a,o){return o===void 0||(As&1073741824)!==0&&(We&261930)===0?n.memoizedState=a:(n.memoizedState=o,n=Fb(),qe.lanes|=n,Ma|=n,o)}function Fy(n,a,o,u){return Jr(o,a)?o:Fl.current!==null?(n=Wm(n,o,u),Jr(n,a)||(qt=!0),n):(As&42)===0||(As&1073741824)!==0&&(We&261930)===0?(qt=!0,n.memoizedState=o):(n=Fb(),qe.lanes|=n,Ma|=n,a)}function By(n,a,o,u,m){var x=U.p;U.p=x!==0&&8>x?x:8;var _=H.T,R={};H.T=R,eg(n,!1,a,o);try{var q=m(),ee=H.S;if(ee!==null&&ee(R,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ie=XS(q,u);bc(n,a,ie,sn(n))}else bc(n,a,u,sn(n))}catch(de){bc(n,a,{then:function(){},status:"rejected",reason:de},sn())}finally{U.p=x,_!==null&&R.types!==null&&(_.types=R.types),H.T=_}}function rT(){}function Jm(n,a,o,u){if(n.tag!==5)throw Error(s(476));var m=qy(n).queue;By(n,m,a,re,o===null?rT:function(){return Hy(n),o(u)})}function qy(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:re},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:o},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Hy(n){var a=qy(n);a.next===null&&(a=n.alternate.memoizedState),bc(n,a.next.queue,{},sn())}function Zm(){return gr(Pc)}function $y(){return Pt().memoizedState}function Gy(){return Pt().memoizedState}function nT(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var o=sn();n=Aa(o);var u=Ca(a,n,o);u!==null&&(qr(u,a,o),mc(u,a,o)),a={cache:Tm()},n.payload=a;return}a=a.return}}function sT(n,a,o){var u=sn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Fd(n)?Yy(a,o):(o=xm(n,a,o,u),o!==null&&(qr(o,n,u),Qy(o,a,u)))}function Ky(n,a,o){var u=sn();bc(n,a,o,u)}function bc(n,a,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Fd(n))Yy(a,m);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var _=a.lastRenderedState,R=x(_,o);if(m.hasEagerState=!0,m.eagerState=R,Jr(R,_))return wd(n,a,m,0),bt===null&&vd(),!1}catch{}finally{}if(o=xm(n,a,m,u),o!==null)return qr(o,n,u),Qy(o,a,u),!0}return!1}function eg(n,a,o,u){if(u={lane:2,revertLane:Ig(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Fd(n)){if(a)throw Error(s(479))}else a=xm(n,o,u,2),a!==null&&qr(a,n,2)}function Fd(n){var a=n.alternate;return n===qe||a!==null&&a===qe}function Yy(n,a){Bl=Od=!0;var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}function Qy(n,a,o){if((o&4194048)!==0){var u=a.lanes;u&=n.pendingLanes,o|=u,a.lanes=o,oa(n,o)}}var vc={readContext:gr,use:Ld,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};vc.useEffectEvent=It;var Xy={readContext:gr,use:Ld,useCallback:function(n,a){return Rr().memoizedState=[n,a===void 0?null:a],n},useContext:gr,useEffect:Dy,useImperativeHandle:function(n,a,o){o=o!=null?o.concat([n]):null,Vd(4194308,4,Ly.bind(null,a,n),o)},useLayoutEffect:function(n,a){return Vd(4194308,4,n,a)},useInsertionEffect:function(n,a){Vd(4,2,n,a)},useMemo:function(n,a){var o=Rr();a=a===void 0?null:a;var u=n();if($i){fn(!0);try{n()}finally{fn(!1)}}return o.memoizedState=[u,a],u},useReducer:function(n,a,o){var u=Rr();if(o!==void 0){var m=o(a);if($i){fn(!0);try{o(a)}finally{fn(!1)}}}else m=a;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=sT.bind(null,qe,n),[u.memoizedState,n]},useRef:function(n){var a=Rr();return n={current:n},a.memoizedState=n},useState:function(n){n=Km(n);var a=n.queue,o=Ky.bind(null,qe,a);return a.dispatch=o,[n.memoizedState,o]},useDebugValue:Xm,useDeferredValue:function(n,a){var o=Rr();return Wm(o,n,a)},useTransition:function(){var n=Km(!1);return n=By.bind(null,qe,n.queue,!0,!1),Rr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,o){var u=qe,m=Rr();if(nt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=a(),bt===null)throw Error(s(349));(We&127)!==0||xy(u,a,o)}m.memoizedState=o;var x={value:o,getSnapshot:a};return m.queue=x,Dy(by.bind(null,u,x,n),[n]),u.flags|=2048,Hl(9,{destroy:void 0},yy.bind(null,u,x,o,a),null),o},useId:function(){var n=Rr(),a=bt.identifierPrefix;if(nt){var o=Jn,u=Wn;o=(u&~(1<<32-Er(u)-1)).toString(32)+o,a="_"+a+"R_"+o,o=Md++,0<o&&(a+="H"+o.toString(32)),a+="_"}else o=WS++,a="_"+a+"r_"+o.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:Zm,useFormState:Ty,useActionState:Ty,useOptimistic:function(n){var a=Rr();a.memoizedState=a.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=eg.bind(null,qe,!0,o),o.dispatch=a,[n,a]},useMemoCache:Hm,useCacheRefresh:function(){return Rr().memoizedState=nT.bind(null,qe)},useEffectEvent:function(n){var a=Rr(),o={impl:n};return a.memoizedState=o,function(){if((ct&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},tg={readContext:gr,use:Ld,useCallback:Vy,useContext:gr,useEffect:Qm,useImperativeHandle:Uy,useInsertionEffect:My,useLayoutEffect:Py,useMemo:zy,useReducer:Ud,useRef:Iy,useState:function(){return Ud(Cs)},useDebugValue:Xm,useDeferredValue:function(n,a){var o=Pt();return Fy(o,gt.memoizedState,n,a)},useTransition:function(){var n=Ud(Cs)[0],a=Pt().memoizedState;return[typeof n=="boolean"?n:yc(n),a]},useSyncExternalStore:py,useId:$y,useHostTransitionStatus:Zm,useFormState:Ay,useActionState:Ay,useOptimistic:function(n,a){var o=Pt();return _y(o,gt,n,a)},useMemoCache:Hm,useCacheRefresh:Gy};tg.useEffectEvent=Oy;var Wy={readContext:gr,use:Ld,useCallback:Vy,useContext:gr,useEffect:Qm,useImperativeHandle:Uy,useInsertionEffect:My,useLayoutEffect:Py,useMemo:zy,useReducer:Gm,useRef:Iy,useState:function(){return Gm(Cs)},useDebugValue:Xm,useDeferredValue:function(n,a){var o=Pt();return gt===null?Wm(o,n,a):Fy(o,gt.memoizedState,n,a)},useTransition:function(){var n=Gm(Cs)[0],a=Pt().memoizedState;return[typeof n=="boolean"?n:yc(n),a]},useSyncExternalStore:py,useId:$y,useHostTransitionStatus:Zm,useFormState:Ry,useActionState:Ry,useOptimistic:function(n,a){var o=Pt();return gt!==null?_y(o,gt,n,a):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Hm,useCacheRefresh:Gy};Wy.useEffectEvent=Oy;function rg(n,a,o,u){a=n.memoizedState,o=o(u,a),o=o==null?a:v({},a,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var ng={enqueueSetState:function(n,a,o){n=n._reactInternals;var u=sn(),m=Aa(u);m.payload=a,o!=null&&(m.callback=o),a=Ca(n,m,u),a!==null&&(qr(a,n,u),mc(a,n,u))},enqueueReplaceState:function(n,a,o){n=n._reactInternals;var u=sn(),m=Aa(u);m.tag=1,m.payload=a,o!=null&&(m.callback=o),a=Ca(n,m,u),a!==null&&(qr(a,n,u),mc(a,n,u))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var o=sn(),u=Aa(o);u.tag=2,a!=null&&(u.callback=a),a=Ca(n,u,o),a!==null&&(qr(a,n,o),mc(a,n,o))}};function Jy(n,a,o,u,m,x,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,x,_):a.prototype&&a.prototype.isPureReactComponent?!ic(o,u)||!ic(m,x):!0}function Zy(n,a,o,u){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,u),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,u),a.state!==n&&ng.enqueueReplaceState(a,a.state,null)}function Gi(n,a){var o=a;if("ref"in a){o={};for(var u in a)u!=="ref"&&(o[u]=a[u])}if(n=n.defaultProps){o===a&&(o=v({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function eb(n){bd(n)}function tb(n){console.error(n)}function rb(n){bd(n)}function Bd(n,a){try{var o=n.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(u){setTimeout(function(){throw u})}}function nb(n,a,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function sg(n,a,o){return o=Aa(o),o.tag=3,o.payload={element:null},o.callback=function(){Bd(n,a)},o}function sb(n){return n=Aa(n),n.tag=3,n}function ab(n,a,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var x=u.value;n.payload=function(){return m(x)},n.callback=function(){nb(a,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){nb(a,o,u),typeof m!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function aT(n,a,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(a=o.alternate,a!==null&&Pl(a,o,m,!0),o=en.current,o!==null){switch(o.tag){case 31:case 13:return _n===null?eh():o.alternate===null&&Dt===0&&(Dt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Ad?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([u]):a.add(u),Ag(n,u,m)),!1;case 22:return o.flags|=65536,u===Ad?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([u]):o.add(u)),Ag(n,u,m)),!1}throw Error(s(435,o.tag))}return Ag(n,u,m),eh(),!1}if(nt)return a=en.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,u!==Nm&&(n=Error(s(422),{cause:u}),cc(yn(n,o)))):(u!==Nm&&(a=Error(s(423),{cause:u}),cc(yn(a,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=yn(u,o),m=sg(n.stateNode,u,m),Om(n,m),Dt!==4&&(Dt=2)),!1;var x=Error(s(520),{cause:u});if(x=yn(x,o),Tc===null?Tc=[x]:Tc.push(x),Dt!==4&&(Dt=2),a===null)return!0;u=yn(u,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=sg(o.stateNode,u,n),Om(o,n),!1;case 1:if(a=o.type,x=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Pa===null||!Pa.has(x))))return o.flags|=65536,m&=-m,o.lanes|=m,m=sb(m),ab(m,n,o,u),Om(o,m),!1}o=o.return}while(o!==null);return!1}var ag=Error(s(461)),qt=!1;function pr(n,a,o,u){a.child=n===null?cy(a,null,o,u):Hi(a,n.child,o,u)}function ib(n,a,o,u,m){o=o.render;var x=a.ref;if("ref"in u){var _={};for(var R in u)R!=="ref"&&(_[R]=u[R])}else _=u;return zi(a),u=zm(n,a,o,_,x,m),R=Fm(),n!==null&&!qt?(Bm(n,a,m),Rs(n,a,m)):(nt&&R&&wm(a),a.flags|=1,pr(n,a,u,m),a.child)}function lb(n,a,o,u,m){if(n===null){var x=o.type;return typeof x=="function"&&!ym(x)&&x.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=x,ob(n,a,x,u,m)):(n=Nd(o.type,null,u,a,a.mode,m),n.ref=a.ref,n.return=a,a.child=n)}if(x=n.child,!fg(n,m)){var _=x.memoizedProps;if(o=o.compare,o=o!==null?o:ic,o(_,u)&&n.ref===a.ref)return Rs(n,a,m)}return a.flags|=1,n=ks(x,u),n.ref=a.ref,n.return=a,a.child=n}function ob(n,a,o,u,m){if(n!==null){var x=n.memoizedProps;if(ic(x,u)&&n.ref===a.ref)if(qt=!1,a.pendingProps=u=x,fg(n,m))(n.flags&131072)!==0&&(qt=!0);else return a.lanes=n.lanes,Rs(n,a,m)}return ig(n,a,o,u,m)}function cb(n,a,o,u){var m=u.children,x=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|o:o,n!==null){for(u=a.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~x}else u=0,a.child=null;return ub(n,a,x,o,u)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&Sd(a,x!==null?x.cachePool:null),x!==null?hy(a,x):Pm(),fy(a);else return u=a.lanes=536870912,ub(n,a,x!==null?x.baseLanes|o:o,o,u)}else x!==null?(Sd(a,x.cachePool),hy(a,x),Ia(),a.memoizedState=null):(n!==null&&Sd(a,null),Pm(),Ia());return pr(n,a,m,o),a.child}function wc(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function ub(n,a,o,u,m){var x=Cm();return x=x===null?null:{parent:Ft._currentValue,pool:x},a.memoizedState={baseLanes:o,cachePool:x},n!==null&&Sd(a,null),Pm(),fy(a),n!==null&&Pl(n,a,u,!0),a.childLanes=m,null}function qd(n,a){return a=$d({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function db(n,a,o){return Hi(a,n.child,null,o),n=qd(a,a.pendingProps),n.flags|=2,tn(a),a.memoizedState=null,n}function iT(n,a,o){var u=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(nt){if(u.mode==="hidden")return n=qd(a,u),a.lanes=536870912,wc(null,n);if(Um(a),(n=_t)?(n=Nv(n,wn),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:ja!==null?{id:Wn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},o=Yx(n),o.return=a,a.child=o,mr=a,_t=null)):n=null,n===null)throw Ea(a);return a.lanes=536870912,null}return qd(a,u)}var x=n.memoizedState;if(x!==null){var _=x.dehydrated;if(Um(a),m)if(a.flags&256)a.flags&=-257,a=db(n,a,o);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(s(558));else if(qt||Pl(n,a,o,!1),m=(o&n.childLanes)!==0,qt||m){if(u=bt,u!==null&&(_=ca(u,o),_!==0&&_!==x.retryLane))throw x.retryLane=_,Pi(n,_),qr(u,n,_),ag;eh(),a=db(n,a,o)}else n=x.treeContext,_t=Nn(_.nextSibling),mr=a,nt=!0,ka=null,wn=!1,n!==null&&Wx(a,n),a=qd(a,u),a.flags|=4096;return a}return n=ks(n.child,{mode:u.mode,children:u.children}),n.ref=a.ref,a.child=n,n.return=a,n}function Hd(n,a){var o=a.ref;if(o===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(a.flags|=4194816)}}function ig(n,a,o,u,m){return zi(a),o=zm(n,a,o,u,void 0,m),u=Fm(),n!==null&&!qt?(Bm(n,a,m),Rs(n,a,m)):(nt&&u&&wm(a),a.flags|=1,pr(n,a,o,m),a.child)}function hb(n,a,o,u,m,x){return zi(a),a.updateQueue=null,o=gy(a,u,o,m),my(n),u=Fm(),n!==null&&!qt?(Bm(n,a,x),Rs(n,a,x)):(nt&&u&&wm(a),a.flags|=1,pr(n,a,o,x),a.child)}function fb(n,a,o,u,m){if(zi(a),a.stateNode===null){var x=Il,_=o.contextType;typeof _=="object"&&_!==null&&(x=gr(_)),x=new o(u,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=ng,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=u,x.state=a.memoizedState,x.refs={},Im(a),_=o.contextType,x.context=typeof _=="object"&&_!==null?gr(_):Il,x.state=a.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(rg(a,o,_,u),x.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(_=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),_!==x.state&&ng.enqueueReplaceState(x,x.state,null),pc(a,u,x,m),gc(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!0}else if(n===null){x=a.stateNode;var R=a.memoizedProps,q=Gi(o,R);x.props=q;var ee=x.context,ie=o.contextType;_=Il,typeof ie=="object"&&ie!==null&&(_=gr(ie));var de=o.getDerivedStateFromProps;ie=typeof de=="function"||typeof x.getSnapshotBeforeUpdate=="function",R=a.pendingProps!==R,ie||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(R||ee!==_)&&Zy(a,x,u,_),Ta=!1;var te=a.memoizedState;x.state=te,pc(a,u,x,m),gc(),ee=a.memoizedState,R||te!==ee||Ta?(typeof de=="function"&&(rg(a,o,de,u),ee=a.memoizedState),(q=Ta||Jy(a,o,q,u,te,ee,_))?(ie||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=u,a.memoizedState=ee),x.props=u,x.state=ee,x.context=_,u=q):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),u=!1)}else{x=a.stateNode,Dm(n,a),_=a.memoizedProps,ie=Gi(o,_),x.props=ie,de=a.pendingProps,te=x.context,ee=o.contextType,q=Il,typeof ee=="object"&&ee!==null&&(q=gr(ee)),R=o.getDerivedStateFromProps,(ee=typeof R=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_!==de||te!==q)&&Zy(a,x,u,q),Ta=!1,te=a.memoizedState,x.state=te,pc(a,u,x,m),gc();var ne=a.memoizedState;_!==de||te!==ne||Ta||n!==null&&n.dependencies!==null&&kd(n.dependencies)?(typeof R=="function"&&(rg(a,o,R,u),ne=a.memoizedState),(ie=Ta||Jy(a,o,ie,u,te,ne,q)||n!==null&&n.dependencies!==null&&kd(n.dependencies))?(ee||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,ne,q),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,ne,q)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||_===n.memoizedProps&&te===n.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&te===n.memoizedState||(a.flags|=1024),a.memoizedProps=u,a.memoizedState=ne),x.props=u,x.state=ne,x.context=q,u=ie):(typeof x.componentDidUpdate!="function"||_===n.memoizedProps&&te===n.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&te===n.memoizedState||(a.flags|=1024),u=!1)}return x=u,Hd(n,a),u=(a.flags&128)!==0,x||u?(x=a.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,n!==null&&u?(a.child=Hi(a,n.child,null,m),a.child=Hi(a,null,o,m)):pr(n,a,o,m),a.memoizedState=x.state,n=a.child):n=Rs(n,a,m),n}function mb(n,a,o,u){return Ui(),a.flags|=256,pr(n,a,o,u),a.child}var lg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function og(n){return{baseLanes:n,cachePool:ny()}}function cg(n,a,o){return n=n!==null?n.childLanes&~o:0,a&&(n|=nn),n}function gb(n,a,o){var u=a.pendingProps,m=!1,x=(a.flags&128)!==0,_;if((_=x)||(_=n!==null&&n.memoizedState===null?!1:(Mt.current&2)!==0),_&&(m=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,n===null){if(nt){if(m?Ra(a):Ia(),(n=_t)?(n=Nv(n,wn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:ja!==null?{id:Wn,overflow:Jn}:null,retryLane:536870912,hydrationErrors:null},o=Yx(n),o.return=a,a.child=o,mr=a,_t=null)):n=null,n===null)throw Ea(a);return $g(n)?a.lanes=32:a.lanes=536870912,null}var R=u.children;return u=u.fallback,m?(Ia(),m=a.mode,R=$d({mode:"hidden",children:R},m),u=Li(u,m,o,null),R.return=a,u.return=a,R.sibling=u,a.child=R,u=a.child,u.memoizedState=og(o),u.childLanes=cg(n,_,o),a.memoizedState=lg,wc(null,u)):(Ra(a),ug(a,R))}var q=n.memoizedState;if(q!==null&&(R=q.dehydrated,R!==null)){if(x)a.flags&256?(Ra(a),a.flags&=-257,a=dg(n,a,o)):a.memoizedState!==null?(Ia(),a.child=n.child,a.flags|=128,a=null):(Ia(),R=u.fallback,m=a.mode,u=$d({mode:"visible",children:u.children},m),R=Li(R,m,o,null),R.flags|=2,u.return=a,R.return=a,u.sibling=R,a.child=u,Hi(a,n.child,null,o),u=a.child,u.memoizedState=og(o),u.childLanes=cg(n,_,o),a.memoizedState=lg,a=wc(null,u));else if(Ra(a),$g(R)){if(_=R.nextSibling&&R.nextSibling.dataset,_)var ee=_.dgst;_=ee,u=Error(s(419)),u.stack="",u.digest=_,cc({value:u,source:null,stack:null}),a=dg(n,a,o)}else if(qt||Pl(n,a,o,!1),_=(o&n.childLanes)!==0,qt||_){if(_=bt,_!==null&&(u=ca(_,o),u!==0&&u!==q.retryLane))throw q.retryLane=u,Pi(n,u),qr(_,n,u),ag;Hg(R)||eh(),a=dg(n,a,o)}else Hg(R)?(a.flags|=192,a.child=n.child,a=null):(n=q.treeContext,_t=Nn(R.nextSibling),mr=a,nt=!0,ka=null,wn=!1,n!==null&&Wx(a,n),a=ug(a,u.children),a.flags|=4096);return a}return m?(Ia(),R=u.fallback,m=a.mode,q=n.child,ee=q.sibling,u=ks(q,{mode:"hidden",children:u.children}),u.subtreeFlags=q.subtreeFlags&65011712,ee!==null?R=ks(ee,R):(R=Li(R,m,o,null),R.flags|=2),R.return=a,u.return=a,u.sibling=R,a.child=u,wc(null,u),u=a.child,R=n.child.memoizedState,R===null?R=og(o):(m=R.cachePool,m!==null?(q=Ft._currentValue,m=m.parent!==q?{parent:q,pool:q}:m):m=ny(),R={baseLanes:R.baseLanes|o,cachePool:m}),u.memoizedState=R,u.childLanes=cg(n,_,o),a.memoizedState=lg,wc(n.child,u)):(Ra(a),o=n.child,n=o.sibling,o=ks(o,{mode:"visible",children:u.children}),o.return=a,o.sibling=null,n!==null&&(_=a.deletions,_===null?(a.deletions=[n],a.flags|=16):_.push(n)),a.child=o,a.memoizedState=null,o)}function ug(n,a){return a=$d({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function $d(n,a){return n=Zr(22,n,null,a),n.lanes=0,n}function dg(n,a,o){return Hi(a,n.child,null,o),n=ug(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function pb(n,a,o){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a),Em(n.return,a,o)}function hg(n,a,o,u,m,x){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:x}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=m,_.treeForkCount=x)}function xb(n,a,o){var u=a.pendingProps,m=u.revealOrder,x=u.tail;u=u.children;var _=Mt.current,R=(_&2)!==0;if(R?(_=_&1|2,a.flags|=128):_&=1,ae(Mt,_),pr(n,a,u,o),u=nt?oc:0,!R&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&pb(n,o,a);else if(n.tag===19)pb(n,o,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=a.child,m=null;o!==null;)n=o.alternate,n!==null&&Dd(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=a.child,a.child=null):(m=o.sibling,o.sibling=null),hg(a,!1,m,o,x,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=a.child,a.child=null;m!==null;){if(n=m.alternate,n!==null&&Dd(n)===null){a.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}hg(a,!0,o,null,x,u);break;case"together":hg(a,!1,null,null,void 0,u);break;default:a.memoizedState=null}return a.child}function Rs(n,a,o){if(n!==null&&(a.dependencies=n.dependencies),Ma|=a.lanes,(o&a.childLanes)===0)if(n!==null){if(Pl(n,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,o=ks(n,n.pendingProps),a.child=o,o.return=a;n.sibling!==null;)n=n.sibling,o=o.sibling=ks(n,n.pendingProps),o.return=a;o.sibling=null}return a.child}function fg(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&kd(n)))}function lT(n,a,o){switch(a.tag){case 3:Te(a,a.stateNode.containerInfo),Sa(a,Ft,n.memoizedState.cache),Ui();break;case 27:case 5:He(a);break;case 4:Te(a,a.stateNode.containerInfo);break;case 10:Sa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Um(a),null;break;case 13:var u=a.memoizedState;if(u!==null)return u.dehydrated!==null?(Ra(a),a.flags|=128,null):(o&a.child.childLanes)!==0?gb(n,a,o):(Ra(a),n=Rs(n,a,o),n!==null?n.sibling:null);Ra(a);break;case 19:var m=(n.flags&128)!==0;if(u=(o&a.childLanes)!==0,u||(Pl(n,a,o,!1),u=(o&a.childLanes)!==0),m){if(u)return xb(n,a,o);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ae(Mt,Mt.current),u)break;return null;case 22:return a.lanes=0,cb(n,a,o,a.pendingProps);case 24:Sa(a,Ft,n.memoizedState.cache)}return Rs(n,a,o)}function yb(n,a,o){if(n!==null)if(n.memoizedProps!==a.pendingProps)qt=!0;else{if(!fg(n,o)&&(a.flags&128)===0)return qt=!1,lT(n,a,o);qt=(n.flags&131072)!==0}else qt=!1,nt&&(a.flags&1048576)!==0&&Xx(a,oc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var u=a.pendingProps;if(n=Bi(a.elementType),a.type=n,typeof n=="function")ym(n)?(u=Gi(n,u),a.tag=1,a=fb(null,a,n,u,o)):(a.tag=0,a=ig(null,a,n,u,o));else{if(n!=null){var m=n.$$typeof;if(m===Y){a.tag=11,a=ib(null,a,n,u,o);break e}else if(m===I){a.tag=14,a=lb(null,a,n,u,o);break e}}throw a=me(n)||n,Error(s(306,a,""))}}return a;case 0:return ig(n,a,a.type,a.pendingProps,o);case 1:return u=a.type,m=Gi(u,a.pendingProps),fb(n,a,u,m,o);case 3:e:{if(Te(a,a.stateNode.containerInfo),n===null)throw Error(s(387));u=a.pendingProps;var x=a.memoizedState;m=x.element,Dm(n,a),pc(a,u,null,o);var _=a.memoizedState;if(u=_.cache,Sa(a,Ft,u),u!==x.cache&&Sm(a,[Ft],o,!0),gc(),u=_.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=mb(n,a,u,o);break e}else if(u!==m){m=yn(Error(s(424)),a),cc(m),a=mb(n,a,u,o);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(_t=Nn(n.firstChild),mr=a,nt=!0,ka=null,wn=!0,o=cy(a,null,u,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ui(),u===m){a=Rs(n,a,o);break e}pr(n,a,u,o)}a=a.child}return a;case 26:return Hd(n,a),n===null?(o=Av(a.type,null,a.pendingProps,null))?a.memoizedState=o:nt||(o=a.type,n=a.pendingProps,u=lh(ce.current).createElement(o),u[Ct]=a,u[fr]=n,xr(u,o,n),Ot(u),a.stateNode=u):a.memoizedState=Av(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return He(a),n===null&&nt&&(u=a.stateNode=Ev(a.type,a.pendingProps,ce.current),mr=a,wn=!0,m=_t,za(a.type)?(Gg=m,_t=Nn(u.firstChild)):_t=m),pr(n,a,a.pendingProps.children,o),Hd(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&nt&&((m=u=_t)&&(u=LT(u,a.type,a.pendingProps,wn),u!==null?(a.stateNode=u,mr=a,_t=Nn(u.firstChild),wn=!1,m=!0):m=!1),m||Ea(a)),He(a),m=a.type,x=a.pendingProps,_=n!==null?n.memoizedProps:null,u=x.children,Fg(m,x)?u=null:_!==null&&Fg(m,_)&&(a.flags|=32),a.memoizedState!==null&&(m=zm(n,a,JS,null,null,o),Pc._currentValue=m),Hd(n,a),pr(n,a,u,o),a.child;case 6:return n===null&&nt&&((n=o=_t)&&(o=UT(o,a.pendingProps,wn),o!==null?(a.stateNode=o,mr=a,_t=null,n=!0):n=!1),n||Ea(a)),null;case 13:return gb(n,a,o);case 4:return Te(a,a.stateNode.containerInfo),u=a.pendingProps,n===null?a.child=Hi(a,null,u,o):pr(n,a,u,o),a.child;case 11:return ib(n,a,a.type,a.pendingProps,o);case 7:return pr(n,a,a.pendingProps,o),a.child;case 8:return pr(n,a,a.pendingProps.children,o),a.child;case 12:return pr(n,a,a.pendingProps.children,o),a.child;case 10:return u=a.pendingProps,Sa(a,a.type,u.value),pr(n,a,u.children,o),a.child;case 9:return m=a.type._context,u=a.pendingProps.children,zi(a),m=gr(m),u=u(m),a.flags|=1,pr(n,a,u,o),a.child;case 14:return lb(n,a,a.type,a.pendingProps,o);case 15:return ob(n,a,a.type,a.pendingProps,o);case 19:return xb(n,a,o);case 31:return iT(n,a,o);case 22:return cb(n,a,o,a.pendingProps);case 24:return zi(a),u=gr(Ft),n===null?(m=Cm(),m===null&&(m=bt,x=Tm(),m.pooledCache=x,x.refCount++,x!==null&&(m.pooledCacheLanes|=o),m=x),a.memoizedState={parent:u,cache:m},Im(a),Sa(a,Ft,m)):((n.lanes&o)!==0&&(Dm(n,a),pc(a,null,null,o),gc()),m=n.memoizedState,x=a.memoizedState,m.parent!==u?(m={parent:u,cache:u},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Sa(a,Ft,u)):(u=x.cache,Sa(a,Ft,u),u!==m.cache&&Sm(a,[Ft],o,!0))),pr(n,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Is(n){n.flags|=4}function mg(n,a,o,u,m){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if($b())n.flags|=8192;else throw qi=Ad,Rm}else n.flags&=-16777217}function bb(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Ov(a))if($b())n.flags|=8192;else throw qi=Ad,Rm}function Gd(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?Bo():536870912,n.lanes|=a,Yl|=a)}function _c(n,a){if(!nt)switch(n.tailMode){case"hidden":a=n.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Nt(n){var a=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(a)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=o,a}function oT(n,a,o){var u=a.pendingProps;switch(_m(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(a),null;case 1:return Nt(a),null;case 3:return o=a.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ts(Ft),Se(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ml(a)?Is(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,jm())),Nt(a),null;case 26:var m=a.type,x=a.memoizedState;return n===null?(Is(a),x!==null?(Nt(a),bb(a,x)):(Nt(a),mg(a,m,null,u,o))):x?x!==n.memoizedState?(Is(a),Nt(a),bb(a,x)):(Nt(a),a.flags&=-16777217):(n=n.memoizedProps,n!==u&&Is(a),Nt(a),mg(a,m,n,u,o)),null;case 27:if(Ge(a),o=ce.current,m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Is(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Nt(a),null}n=ge.current,Ml(a)?Jx(a):(n=Ev(m,u,o),a.stateNode=n,Is(a))}return Nt(a),null;case 5:if(Ge(a),m=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==u&&Is(a);else{if(!u){if(a.stateNode===null)throw Error(s(166));return Nt(a),null}if(x=ge.current,Ml(a))Jx(a);else{var _=lh(ce.current);switch(x){case 1:x=_.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:x=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":x=_.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":x=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":x=_.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?x.multiple=!0:u.size&&(x.size=u.size);break;default:x=typeof u.is=="string"?_.createElement(m,{is:u.is}):_.createElement(m)}}x[Ct]=a,x[fr]=u;e:for(_=a.child;_!==null;){if(_.tag===5||_.tag===6)x.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===a)break e;for(;_.sibling===null;){if(_.return===null||_.return===a)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}a.stateNode=x;e:switch(xr(x,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Is(a)}}return Nt(a),mg(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,o),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==u&&Is(a);else{if(typeof u!="string"&&a.stateNode===null)throw Error(s(166));if(n=ce.current,Ml(a)){if(n=a.stateNode,o=a.memoizedProps,u=null,m=mr,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[Ct]=a,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||gv(n.nodeValue,o)),n||Ea(a,!0)}else n=lh(n).createTextNode(u),n[Ct]=a,a.stateNode=n}return Nt(a),null;case 31:if(o=a.memoizedState,n===null||n.memoizedState!==null){if(u=Ml(a),o!==null){if(n===null){if(!u)throw Error(s(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Ct]=a}else Ui(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Nt(a),n=!1}else o=jm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return a.flags&256?(tn(a),a):(tn(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Nt(a),null;case 13:if(u=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=Ml(a),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Ct]=a}else Ui(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Nt(a),m=!1}else m=jm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(tn(a),a):(tn(a),null)}return tn(a),(a.flags&128)!==0?(a.lanes=o,a):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=a.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),x=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==m&&(u.flags|=2048)),o!==n&&o&&(a.child.flags|=8192),Gd(a,a.updateQueue),Nt(a),null);case 4:return Se(),n===null&&Pg(a.stateNode.containerInfo),Nt(a),null;case 10:return Ts(a.type),Nt(a),null;case 19:if(Q(Mt),u=a.memoizedState,u===null)return Nt(a),null;if(m=(a.flags&128)!==0,x=u.rendering,x===null)if(m)_c(u,!1);else{if(Dt!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(x=Dd(n),x!==null){for(a.flags|=128,_c(u,!1),n=x.updateQueue,a.updateQueue=n,Gd(a,n),a.subtreeFlags=0,n=o,o=a.child;o!==null;)Kx(o,n),o=o.sibling;return ae(Mt,Mt.current&1|2),nt&&Es(a,u.treeForkCount),a.child}n=n.sibling}u.tail!==null&&dr()>Wd&&(a.flags|=128,m=!0,_c(u,!1),a.lanes=4194304)}else{if(!m)if(n=Dd(x),n!==null){if(a.flags|=128,m=!0,n=n.updateQueue,a.updateQueue=n,Gd(a,n),_c(u,!0),u.tail===null&&u.tailMode==="hidden"&&!x.alternate&&!nt)return Nt(a),null}else 2*dr()-u.renderingStartTime>Wd&&o!==536870912&&(a.flags|=128,m=!0,_c(u,!1),a.lanes=4194304);u.isBackwards?(x.sibling=a.child,a.child=x):(n=u.last,n!==null?n.sibling=x:a.child=x,u.last=x)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=dr(),n.sibling=null,o=Mt.current,ae(Mt,m?o&1|2:o&1),nt&&Es(a,u.treeForkCount),n):(Nt(a),null);case 22:case 23:return tn(a),Lm(),u=a.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(a.flags|=8192):u&&(a.flags|=8192),u?(o&536870912)!==0&&(a.flags&128)===0&&(Nt(a),a.subtreeFlags&6&&(a.flags|=8192)):Nt(a),o=a.updateQueue,o!==null&&Gd(a,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),u!==o&&(a.flags|=2048),n!==null&&Q(Fi),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Ts(Ft),Nt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function cT(n,a){switch(_m(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Ts(Ft),Se(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return Ge(a),null;case 31:if(a.memoizedState!==null){if(tn(a),a.alternate===null)throw Error(s(340));Ui()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(tn(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Ui()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return Q(Mt),null;case 4:return Se(),null;case 10:return Ts(a.type),null;case 22:case 23:return tn(a),Lm(),n!==null&&Q(Fi),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return Ts(Ft),null;case 25:return null;default:return null}}function vb(n,a){switch(_m(a),a.tag){case 3:Ts(Ft),Se();break;case 26:case 27:case 5:Ge(a);break;case 4:Se();break;case 31:a.memoizedState!==null&&tn(a);break;case 13:tn(a);break;case 19:Q(Mt);break;case 10:Ts(a.type);break;case 22:case 23:tn(a),Lm(),n!==null&&Q(Fi);break;case 24:Ts(Ft)}}function Nc(n,a){try{var o=a.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&n)===n){u=void 0;var x=o.create,_=o.inst;u=x(),_.destroy=u}o=o.next}while(o!==m)}}catch(R){ft(a,a.return,R)}}function Da(n,a,o){try{var u=a.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var x=m.next;u=x;do{if((u.tag&n)===n){var _=u.inst,R=_.destroy;if(R!==void 0){_.destroy=void 0,m=a;var q=o,ee=R;try{ee()}catch(ie){ft(m,q,ie)}}}u=u.next}while(u!==x)}}catch(ie){ft(a,a.return,ie)}}function wb(n){var a=n.updateQueue;if(a!==null){var o=n.stateNode;try{dy(a,o)}catch(u){ft(n,n.return,u)}}}function _b(n,a,o){o.props=Gi(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){ft(n,a,u)}}function jc(n,a){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(m){ft(n,a,m)}}function Zn(n,a){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){ft(n,a,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){ft(n,a,m)}else o.current=null}function Nb(n){var a=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){ft(n,n.return,m)}}function gg(n,a,o){try{var u=n.stateNode;RT(u,n.type,o,a),u[fr]=a}catch(m){ft(n,n.return,m)}}function jb(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&za(n.type)||n.tag===4}function pg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||jb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&za(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function xg(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(n),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=rr));else if(u!==4&&(u===27&&za(n.type)&&(o=n.stateNode,a=null),n=n.child,n!==null))for(xg(n,a,o),n=n.sibling;n!==null;)xg(n,a,o),n=n.sibling}function Kd(n,a,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,a?o.insertBefore(n,a):o.appendChild(n);else if(u!==4&&(u===27&&za(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Kd(n,a,o),n=n.sibling;n!==null;)Kd(n,a,o),n=n.sibling}function kb(n){var a=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);xr(a,u,o),a[Ct]=n,a[fr]=o}catch(x){ft(n,n.return,x)}}var Ds=!1,Ht=!1,yg=!1,Eb=typeof WeakSet=="function"?WeakSet:Set,ar=null;function uT(n,a){if(n=n.containerInfo,Vg=mh,n=Ux(n),dm(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{o.nodeType,x.nodeType}catch{o=null;break e}var _=0,R=-1,q=-1,ee=0,ie=0,de=n,te=null;t:for(;;){for(var ne;de!==o||m!==0&&de.nodeType!==3||(R=_+m),de!==x||u!==0&&de.nodeType!==3||(q=_+u),de.nodeType===3&&(_+=de.nodeValue.length),(ne=de.firstChild)!==null;)te=de,de=ne;for(;;){if(de===n)break t;if(te===o&&++ee===m&&(R=_),te===x&&++ie===u&&(q=_),(ne=de.nextSibling)!==null)break;de=te,te=de.parentNode}de=ne}o=R===-1||q===-1?null:{start:R,end:q}}else o=null}o=o||{start:0,end:0}}else o=null;for(zg={focusedElem:n,selectionRange:o},mh=!1,ar=a;ar!==null;)if(a=ar,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,ar=n;else for(;ar!==null;){switch(a=ar,x=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&x!==null){n=void 0,o=a,m=x.memoizedProps,x=x.memoizedState,u=o.stateNode;try{var ke=Gi(o.type,m);n=u.getSnapshotBeforeUpdate(ke,x),u.__reactInternalSnapshotBeforeUpdate=n}catch(Me){ft(o,o.return,Me)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,o=n.nodeType,o===9)qg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":qg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,ar=n;break}ar=a.return}}function Sb(n,a,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ms(n,o),u&4&&Nc(5,o);break;case 1:if(Ms(n,o),u&4)if(n=o.stateNode,a===null)try{n.componentDidMount()}catch(_){ft(o,o.return,_)}else{var m=Gi(o.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(m,a,n.__reactInternalSnapshotBeforeUpdate)}catch(_){ft(o,o.return,_)}}u&64&&wb(o),u&512&&jc(o,o.return);break;case 3:if(Ms(n,o),u&64&&(n=o.updateQueue,n!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{dy(n,a)}catch(_){ft(o,o.return,_)}}break;case 27:a===null&&u&4&&kb(o);case 26:case 5:Ms(n,o),a===null&&u&4&&Nb(o),u&512&&jc(o,o.return);break;case 12:Ms(n,o);break;case 31:Ms(n,o),u&4&&Cb(n,o);break;case 13:Ms(n,o),u&4&&Rb(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=bT.bind(null,o),VT(n,o))));break;case 22:if(u=o.memoizedState!==null||Ds,!u){a=a!==null&&a.memoizedState!==null||Ht,m=Ds;var x=Ht;Ds=u,(Ht=a)&&!x?Ps(n,o,(o.subtreeFlags&8772)!==0):Ms(n,o),Ds=m,Ht=x}break;case 30:break;default:Ms(n,o)}}function Tb(n){var a=n.alternate;a!==null&&(n.alternate=null,Tb(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&ji(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var kt=null,Vr=!1;function Os(n,a,o){for(o=o.child;o!==null;)Ab(n,a,o),o=o.sibling}function Ab(n,a,o){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(sa,o)}catch{}switch(o.tag){case 26:Ht||Zn(o,a),Os(n,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ht||Zn(o,a);var u=kt,m=Vr;za(o.type)&&(kt=o.stateNode,Vr=!1),Os(n,a,o),Dc(o.stateNode),kt=u,Vr=m;break;case 5:Ht||Zn(o,a);case 6:if(u=kt,m=Vr,kt=null,Os(n,a,o),kt=u,Vr=m,kt!==null)if(Vr)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(o.stateNode)}catch(x){ft(o,a,x)}else try{kt.removeChild(o.stateNode)}catch(x){ft(o,a,x)}break;case 18:kt!==null&&(Vr?(n=kt,wv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),ro(n)):wv(kt,o.stateNode));break;case 4:u=kt,m=Vr,kt=o.stateNode.containerInfo,Vr=!0,Os(n,a,o),kt=u,Vr=m;break;case 0:case 11:case 14:case 15:Da(2,o,a),Ht||Da(4,o,a),Os(n,a,o);break;case 1:Ht||(Zn(o,a),u=o.stateNode,typeof u.componentWillUnmount=="function"&&_b(o,a,u)),Os(n,a,o);break;case 21:Os(n,a,o);break;case 22:Ht=(u=Ht)||o.memoizedState!==null,Os(n,a,o),Ht=u;break;default:Os(n,a,o)}}function Cb(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ro(n)}catch(o){ft(a,a.return,o)}}}function Rb(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ro(n)}catch(o){ft(a,a.return,o)}}function dT(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new Eb),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new Eb),a;default:throw Error(s(435,n.tag))}}function Yd(n,a){var o=dT(n);a.forEach(function(u){if(!o.has(u)){o.add(u);var m=vT.bind(null,n,u);u.then(m,m)}})}function zr(n,a){var o=a.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],x=n,_=a,R=_;e:for(;R!==null;){switch(R.tag){case 27:if(za(R.type)){kt=R.stateNode,Vr=!1;break e}break;case 5:kt=R.stateNode,Vr=!1;break e;case 3:case 4:kt=R.stateNode.containerInfo,Vr=!0;break e}R=R.return}if(kt===null)throw Error(s(160));Ab(x,_,m),kt=null,Vr=!1,x=m.alternate,x!==null&&(x.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Ib(a,n),a=a.sibling}var Dn=null;function Ib(n,a){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:zr(a,n),Fr(n),u&4&&(Da(3,n,n.return),Nc(3,n),Da(5,n,n.return));break;case 1:zr(a,n),Fr(n),u&512&&(Ht||o===null||Zn(o,o.return)),u&64&&Ds&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=Dn;if(zr(a,n),Fr(n),u&512&&(Ht||o===null||Zn(o,o.return)),u&4){var x=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":x=m.getElementsByTagName("title")[0],(!x||x[xs]||x[Ct]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=m.createElement(u),m.head.insertBefore(x,m.querySelector("head > title"))),xr(x,u,o),x[Ct]=n,Ot(x),u=x;break e;case"link":var _=Iv("link","href",m).get(u+(o.href||""));if(_){for(var R=0;R<_.length;R++)if(x=_[R],x.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&x.getAttribute("rel")===(o.rel==null?null:o.rel)&&x.getAttribute("title")===(o.title==null?null:o.title)&&x.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(R,1);break t}}x=m.createElement(u),xr(x,u,o),m.head.appendChild(x);break;case"meta":if(_=Iv("meta","content",m).get(u+(o.content||""))){for(R=0;R<_.length;R++)if(x=_[R],x.getAttribute("content")===(o.content==null?null:""+o.content)&&x.getAttribute("name")===(o.name==null?null:o.name)&&x.getAttribute("property")===(o.property==null?null:o.property)&&x.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&x.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(R,1);break t}}x=m.createElement(u),xr(x,u,o),m.head.appendChild(x);break;default:throw Error(s(468,u))}x[Ct]=n,Ot(x),u=x}n.stateNode=u}else Dv(m,n.type,n.stateNode);else n.stateNode=Rv(m,u,n.memoizedProps);else x!==u?(x===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):x.count--,u===null?Dv(m,n.type,n.stateNode):Rv(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&gg(n,n.memoizedProps,o.memoizedProps)}break;case 27:zr(a,n),Fr(n),u&512&&(Ht||o===null||Zn(o,o.return)),o!==null&&u&4&&gg(n,n.memoizedProps,o.memoizedProps);break;case 5:if(zr(a,n),Fr(n),u&512&&(Ht||o===null||Zn(o,o.return)),n.flags&32){m=n.stateNode;try{pn(m,"")}catch(ke){ft(n,n.return,ke)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,gg(n,m,o!==null?o.memoizedProps:m)),u&1024&&(yg=!0);break;case 6:if(zr(a,n),Fr(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(ke){ft(n,n.return,ke)}}break;case 3:if(uh=null,m=Dn,Dn=oh(a.containerInfo),zr(a,n),Dn=m,Fr(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ro(a.containerInfo)}catch(ke){ft(n,n.return,ke)}yg&&(yg=!1,Db(n));break;case 4:u=Dn,Dn=oh(n.stateNode.containerInfo),zr(a,n),Fr(n),Dn=u;break;case 12:zr(a,n),Fr(n);break;case 31:zr(a,n),Fr(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Yd(n,u)));break;case 13:zr(a,n),Fr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Xd=dr()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Yd(n,u)));break;case 22:m=n.memoizedState!==null;var q=o!==null&&o.memoizedState!==null,ee=Ds,ie=Ht;if(Ds=ee||m,Ht=ie||q,zr(a,n),Ht=ie,Ds=ee,Fr(n),u&8192)e:for(a=n.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(o===null||q||Ds||Ht||Ki(n)),o=null,a=n;;){if(a.tag===5||a.tag===26){if(o===null){q=o=a;try{if(x=q.stateNode,m)_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{R=q.stateNode;var de=q.memoizedProps.style,te=de!=null&&de.hasOwnProperty("display")?de.display:null;R.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ke){ft(q,q.return,ke)}}}else if(a.tag===6){if(o===null){q=a;try{q.stateNode.nodeValue=m?"":q.memoizedProps}catch(ke){ft(q,q.return,ke)}}}else if(a.tag===18){if(o===null){q=a;try{var ne=q.stateNode;m?_v(ne,!0):_v(q.stateNode,!1)}catch(ke){ft(q,q.return,ke)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Yd(n,o))));break;case 19:zr(a,n),Fr(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Yd(n,u)));break;case 30:break;case 21:break;default:zr(a,n),Fr(n)}}function Fr(n){var a=n.flags;if(a&2){try{for(var o,u=n.return;u!==null;){if(jb(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,x=pg(n);Kd(n,x,m);break;case 5:var _=o.stateNode;o.flags&32&&(pn(_,""),o.flags&=-33);var R=pg(n);Kd(n,R,_);break;case 3:case 4:var q=o.stateNode.containerInfo,ee=pg(n);xg(n,ee,q);break;default:throw Error(s(161))}}catch(ie){ft(n,n.return,ie)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function Db(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;Db(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function Ms(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Sb(n,a.alternate,a),a=a.sibling}function Ki(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Da(4,a,a.return),Ki(a);break;case 1:Zn(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&_b(a,a.return,o),Ki(a);break;case 27:Dc(a.stateNode);case 26:case 5:Zn(a,a.return),Ki(a);break;case 22:a.memoizedState===null&&Ki(a);break;case 30:Ki(a);break;default:Ki(a)}n=n.sibling}}function Ps(n,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var u=a.alternate,m=n,x=a,_=x.flags;switch(x.tag){case 0:case 11:case 15:Ps(m,x,o),Nc(4,x);break;case 1:if(Ps(m,x,o),u=x,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ee){ft(u,u.return,ee)}if(u=x,m=u.updateQueue,m!==null){var R=u.stateNode;try{var q=m.shared.hiddenCallbacks;if(q!==null)for(m.shared.hiddenCallbacks=null,m=0;m<q.length;m++)uy(q[m],R)}catch(ee){ft(u,u.return,ee)}}o&&_&64&&wb(x),jc(x,x.return);break;case 27:kb(x);case 26:case 5:Ps(m,x,o),o&&u===null&&_&4&&Nb(x),jc(x,x.return);break;case 12:Ps(m,x,o);break;case 31:Ps(m,x,o),o&&_&4&&Cb(m,x);break;case 13:Ps(m,x,o),o&&_&4&&Rb(m,x);break;case 22:x.memoizedState===null&&Ps(m,x,o),jc(x,x.return);break;case 30:break;default:Ps(m,x,o)}a=a.sibling}}function bg(n,a){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&uc(o))}function vg(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&uc(n))}function On(n,a,o,u){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ob(n,a,o,u),a=a.sibling}function Ob(n,a,o,u){var m=a.flags;switch(a.tag){case 0:case 11:case 15:On(n,a,o,u),m&2048&&Nc(9,a);break;case 1:On(n,a,o,u);break;case 3:On(n,a,o,u),m&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&uc(n)));break;case 12:if(m&2048){On(n,a,o,u),n=a.stateNode;try{var x=a.memoizedProps,_=x.id,R=x.onPostCommit;typeof R=="function"&&R(_,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(q){ft(a,a.return,q)}}else On(n,a,o,u);break;case 31:On(n,a,o,u);break;case 13:On(n,a,o,u);break;case 23:break;case 22:x=a.stateNode,_=a.alternate,a.memoizedState!==null?x._visibility&2?On(n,a,o,u):kc(n,a):x._visibility&2?On(n,a,o,u):(x._visibility|=2,$l(n,a,o,u,(a.subtreeFlags&10256)!==0||!1)),m&2048&&bg(_,a);break;case 24:On(n,a,o,u),m&2048&&vg(a.alternate,a);break;default:On(n,a,o,u)}}function $l(n,a,o,u,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=n,_=a,R=o,q=u,ee=_.flags;switch(_.tag){case 0:case 11:case 15:$l(x,_,R,q,m),Nc(8,_);break;case 23:break;case 22:var ie=_.stateNode;_.memoizedState!==null?ie._visibility&2?$l(x,_,R,q,m):kc(x,_):(ie._visibility|=2,$l(x,_,R,q,m)),m&&ee&2048&&bg(_.alternate,_);break;case 24:$l(x,_,R,q,m),m&&ee&2048&&vg(_.alternate,_);break;default:$l(x,_,R,q,m)}a=a.sibling}}function kc(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=n,u=a,m=u.flags;switch(u.tag){case 22:kc(o,u),m&2048&&bg(u.alternate,u);break;case 24:kc(o,u),m&2048&&vg(u.alternate,u);break;default:kc(o,u)}a=a.sibling}}var Ec=8192;function Gl(n,a,o){if(n.subtreeFlags&Ec)for(n=n.child;n!==null;)Mb(n,a,o),n=n.sibling}function Mb(n,a,o){switch(n.tag){case 26:Gl(n,a,o),n.flags&Ec&&n.memoizedState!==null&&WT(o,Dn,n.memoizedState,n.memoizedProps);break;case 5:Gl(n,a,o);break;case 3:case 4:var u=Dn;Dn=oh(n.stateNode.containerInfo),Gl(n,a,o),Dn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Ec,Ec=16777216,Gl(n,a,o),Ec=u):Gl(n,a,o));break;default:Gl(n,a,o)}}function Pb(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function Sc(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];ar=u,Ub(u,n)}Pb(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Lb(n),n=n.sibling}function Lb(n){switch(n.tag){case 0:case 11:case 15:Sc(n),n.flags&2048&&Da(9,n,n.return);break;case 3:Sc(n);break;case 12:Sc(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,Qd(n)):Sc(n);break;default:Sc(n)}}function Qd(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var u=a[o];ar=u,Ub(u,n)}Pb(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Da(8,a,a.return),Qd(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,Qd(a));break;default:Qd(a)}n=n.sibling}}function Ub(n,a){for(;ar!==null;){var o=ar;switch(o.tag){case 0:case 11:case 15:Da(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:uc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,ar=u;else e:for(o=n;ar!==null;){u=ar;var m=u.sibling,x=u.return;if(Tb(u),u===o){ar=null;break e}if(m!==null){m.return=x,ar=m;break e}ar=x}}}var hT={getCacheForType:function(n){var a=gr(Ft),o=a.data.get(n);return o===void 0&&(o=n(),a.data.set(n,o)),o},cacheSignal:function(){return gr(Ft).controller.signal}},fT=typeof WeakMap=="function"?WeakMap:Map,ct=0,bt=null,Ye=null,We=0,ht=0,rn=null,Oa=!1,Kl=!1,wg=!1,Ls=0,Dt=0,Ma=0,Yi=0,_g=0,nn=0,Yl=0,Tc=null,Br=null,Ng=!1,Xd=0,Vb=0,Wd=1/0,Jd=null,Pa=null,Xt=0,La=null,Ql=null,Us=0,jg=0,kg=null,zb=null,Ac=0,Eg=null;function sn(){return(ct&2)!==0&&We!==0?We&-We:H.T!==null?Ig():ps()}function Fb(){if(nn===0)if((We&536870912)===0||nt){var n=qn;qn<<=1,(qn&3932160)===0&&(qn=262144),nn=n}else nn=536870912;return n=en.current,n!==null&&(n.flags|=32),nn}function qr(n,a,o){(n===bt&&(ht===2||ht===9)||n.cancelPendingCommit!==null)&&(Xl(n,0),Ua(n,We,nn,!1)),la(n,o),((ct&2)===0||n!==bt)&&(n===bt&&((ct&2)===0&&(Yi|=o),Dt===4&&Ua(n,We,nn,!1)),es(n))}function Bb(n,a,o){if((ct&6)!==0)throw Error(s(327));var u=!o&&(a&127)===0&&(a&n.expiredLanes)===0||ia(n,a),m=u?pT(n,a):Tg(n,a,!0),x=u;do{if(m===0){Kl&&!u&&Ua(n,a,0,!1);break}else{if(o=n.current.alternate,x&&!mT(o)){m=Tg(n,a,!1),x=!1;continue}if(m===2){if(x=a,n.errorRecoveryDisabledLanes&x)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;e:{var R=n;m=Tc;var q=R.current.memoizedState.isDehydrated;if(q&&(Xl(R,_).flags|=256),_=Tg(R,_,!1),_!==2){if(wg&&!q){R.errorRecoveryDisabledLanes|=x,Yi|=x,m=4;break e}x=Br,Br=m,x!==null&&(Br===null?Br=x:Br.push.apply(Br,x))}m=_}if(x=!1,m!==2)continue}}if(m===1){Xl(n,0),Ua(n,a,0,!0);break}e:{switch(u=n,x=m,x){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Ua(u,a,nn,!Oa);break e;case 2:Br=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(m=Xd+300-dr(),10<m)){if(Ua(u,a,nn,!Oa),mn(u,0,!0)!==0)break e;Us=a,u.timeoutHandle=bv(qb.bind(null,u,o,Br,Jd,Ng,a,nn,Yi,Yl,Oa,x,"Throttled",-0,0),m);break e}qb(u,o,Br,Jd,Ng,a,nn,Yi,Yl,Oa,x,null,-0,0)}}break}while(!0);es(n)}function qb(n,a,o,u,m,x,_,R,q,ee,ie,de,te,ne){if(n.timeoutHandle=-1,de=a.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rr},Mb(a,x,de);var ke=(x&62914560)===x?Xd-dr():(x&4194048)===x?Vb-dr():0;if(ke=JT(de,ke),ke!==null){Us=x,n.cancelPendingCommit=ke(Wb.bind(null,n,a,x,o,u,m,_,R,q,ie,de,null,te,ne)),Ua(n,x,_,!ee);return}}Wb(n,a,x,o,u,m,_,R,q)}function mT(n){for(var a=n;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],x=m.getSnapshot;m=m.value;try{if(!Jr(x(),m))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ua(n,a,o,u){a&=~_g,a&=~Yi,n.suspendedLanes|=a,n.pingedLanes&=~a,u&&(n.warmLanes|=a),u=n.expirationTimes;for(var m=a;0<m;){var x=31-Er(m),_=1<<x;u[x]=-1,m&=~_}o!==0&&qo(n,o,a)}function Zd(){return(ct&6)===0?(Cc(0),!1):!0}function Sg(){if(Ye!==null){if(ht===0)var n=Ye.return;else n=Ye,Ss=Vi=null,qm(n),zl=null,hc=0,n=Ye;for(;n!==null;)vb(n.alternate,n),n=n.return;Ye=null}}function Xl(n,a){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,OT(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Us=0,Sg(),bt=n,Ye=o=ks(n.current,null),We=a,ht=0,rn=null,Oa=!1,Kl=ia(n,a),wg=!1,Yl=nn=_g=Yi=Ma=Dt=0,Br=Tc=null,Ng=!1,(a&8)!==0&&(a|=a&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=a;0<u;){var m=31-Er(u),x=1<<m;a|=n[m],u&=~x}return Ls=a,vd(),o}function Hb(n,a){qe=null,H.H=vc,a===Vl||a===Td?(a=iy(),ht=3):a===Rm?(a=iy(),ht=4):ht=a===ag?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,rn=a,Ye===null&&(Dt=1,Bd(n,yn(a,n.current)))}function $b(){var n=en.current;return n===null?!0:(We&4194048)===We?_n===null:(We&62914560)===We||(We&536870912)!==0?n===_n:!1}function Gb(){var n=H.H;return H.H=vc,n===null?vc:n}function Kb(){var n=H.A;return H.A=hT,n}function eh(){Dt=4,Oa||(We&4194048)!==We&&en.current!==null||(Kl=!0),(Ma&134217727)===0&&(Yi&134217727)===0||bt===null||Ua(bt,We,nn,!1)}function Tg(n,a,o){var u=ct;ct|=2;var m=Gb(),x=Kb();(bt!==n||We!==a)&&(Jd=null,Xl(n,a)),a=!1;var _=Dt;e:do try{if(ht!==0&&Ye!==null){var R=Ye,q=rn;switch(ht){case 8:Sg(),_=6;break e;case 3:case 2:case 9:case 6:en.current===null&&(a=!0);var ee=ht;if(ht=0,rn=null,Wl(n,R,q,ee),o&&Kl){_=0;break e}break;default:ee=ht,ht=0,rn=null,Wl(n,R,q,ee)}}gT(),_=Dt;break}catch(ie){Hb(n,ie)}while(!0);return a&&n.shellSuspendCounter++,Ss=Vi=null,ct=u,H.H=m,H.A=x,Ye===null&&(bt=null,We=0,vd()),_}function gT(){for(;Ye!==null;)Yb(Ye)}function pT(n,a){var o=ct;ct|=2;var u=Gb(),m=Kb();bt!==n||We!==a?(Jd=null,Wd=dr()+500,Xl(n,a)):Kl=ia(n,a);e:do try{if(ht!==0&&Ye!==null){a=Ye;var x=rn;t:switch(ht){case 1:ht=0,rn=null,Wl(n,a,x,1);break;case 2:case 9:if(sy(x)){ht=0,rn=null,Qb(a);break}a=function(){ht!==2&&ht!==9||bt!==n||(ht=7),es(n)},x.then(a,a);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:sy(x)?(ht=0,rn=null,Qb(a)):(ht=0,rn=null,Wl(n,a,x,7));break;case 5:var _=null;switch(Ye.tag){case 26:_=Ye.memoizedState;case 5:case 27:var R=Ye;if(_?Ov(_):R.stateNode.complete){ht=0,rn=null;var q=R.sibling;if(q!==null)Ye=q;else{var ee=R.return;ee!==null?(Ye=ee,th(ee)):Ye=null}break t}}ht=0,rn=null,Wl(n,a,x,5);break;case 6:ht=0,rn=null,Wl(n,a,x,6);break;case 8:Sg(),Dt=6;break e;default:throw Error(s(462))}}xT();break}catch(ie){Hb(n,ie)}while(!0);return Ss=Vi=null,H.H=u,H.A=m,ct=o,Ye!==null?0:(bt=null,We=0,vd(),Dt)}function xT(){for(;Ye!==null&&!Uo();)Yb(Ye)}function Yb(n){var a=yb(n.alternate,n,Ls);n.memoizedProps=n.pendingProps,a===null?th(n):Ye=a}function Qb(n){var a=n,o=a.alternate;switch(a.tag){case 15:case 0:a=hb(o,a,a.pendingProps,a.type,void 0,We);break;case 11:a=hb(o,a,a.pendingProps,a.type.render,a.ref,We);break;case 5:qm(a);default:vb(o,a),a=Ye=Kx(a,Ls),a=yb(o,a,Ls)}n.memoizedProps=n.pendingProps,a===null?th(n):Ye=a}function Wl(n,a,o,u){Ss=Vi=null,qm(a),zl=null,hc=0;var m=a.return;try{if(aT(n,m,a,o,We)){Dt=1,Bd(n,yn(o,n.current)),Ye=null;return}}catch(x){if(m!==null)throw Ye=m,x;Dt=1,Bd(n,yn(o,n.current)),Ye=null;return}a.flags&32768?(nt||u===1?n=!0:Kl||(We&536870912)!==0?n=!1:(Oa=n=!0,(u===2||u===9||u===3||u===6)&&(u=en.current,u!==null&&u.tag===13&&(u.flags|=16384))),Xb(a,n)):th(a)}function th(n){var a=n;do{if((a.flags&32768)!==0){Xb(a,Oa);return}n=a.return;var o=oT(a.alternate,a,Ls);if(o!==null){Ye=o;return}if(a=a.sibling,a!==null){Ye=a;return}Ye=a=n}while(a!==null);Dt===0&&(Dt=5)}function Xb(n,a){do{var o=cT(n.alternate,n);if(o!==null){o.flags&=32767,Ye=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(n=n.sibling,n!==null)){Ye=n;return}Ye=n=o}while(n!==null);Dt=6,Ye=null}function Wb(n,a,o,u,m,x,_,R,q){n.cancelPendingCommit=null;do rh();while(Xt!==0);if((ct&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(x=a.lanes|a.childLanes,x|=pm,hr(n,o,x,_,R,q),n===bt&&(Ye=bt=null,We=0),Ql=a,La=n,Us=o,jg=x,kg=m,zb=u,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,wT(ms,function(){return rv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,m=U.p,U.p=2,_=ct,ct|=4;try{uT(n,a,o)}finally{ct=_,U.p=m,H.T=u}}Xt=1,Jb(),Zb(),ev()}}function Jb(){if(Xt===1){Xt=0;var n=La,a=Ql,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=H.T,H.T=null;var u=U.p;U.p=2;var m=ct;ct|=4;try{Ib(a,n);var x=zg,_=Ux(n.containerInfo),R=x.focusedElem,q=x.selectionRange;if(_!==R&&R&&R.ownerDocument&&Lx(R.ownerDocument.documentElement,R)){if(q!==null&&dm(R)){var ee=q.start,ie=q.end;if(ie===void 0&&(ie=ee),"selectionStart"in R)R.selectionStart=ee,R.selectionEnd=Math.min(ie,R.value.length);else{var de=R.ownerDocument||document,te=de&&de.defaultView||window;if(te.getSelection){var ne=te.getSelection(),ke=R.textContent.length,Me=Math.min(q.start,ke),xt=q.end===void 0?Me:Math.min(q.end,ke);!ne.extend&&Me>xt&&(_=xt,xt=Me,Me=_);var X=Px(R,Me),K=Px(R,xt);if(X&&K&&(ne.rangeCount!==1||ne.anchorNode!==X.node||ne.anchorOffset!==X.offset||ne.focusNode!==K.node||ne.focusOffset!==K.offset)){var Z=de.createRange();Z.setStart(X.node,X.offset),ne.removeAllRanges(),Me>xt?(ne.addRange(Z),ne.extend(K.node,K.offset)):(Z.setEnd(K.node,K.offset),ne.addRange(Z))}}}}for(de=[],ne=R;ne=ne.parentNode;)ne.nodeType===1&&de.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<de.length;R++){var oe=de[R];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}mh=!!Vg,zg=Vg=null}finally{ct=m,U.p=u,H.T=o}}n.current=a,Xt=2}}function Zb(){if(Xt===2){Xt=0;var n=La,a=Ql,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=H.T,H.T=null;var u=U.p;U.p=2;var m=ct;ct|=4;try{Sb(n,a.alternate,a)}finally{ct=m,U.p=u,H.T=o}}Xt=3}}function ev(){if(Xt===4||Xt===3){Xt=0,Vo();var n=La,a=Ql,o=Us,u=zb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Xt=5:(Xt=0,Ql=La=null,tv(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Pa=null),$o(o),a=a.stateNode,br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(sa,a,void 0,(a.current.flags&128)===128)}catch{}if(u!==null){a=H.T,m=U.p,U.p=2,H.T=null;try{for(var x=n.onRecoverableError,_=0;_<u.length;_++){var R=u[_];x(R.value,{componentStack:R.stack})}}finally{H.T=a,U.p=m}}(Us&3)!==0&&rh(),es(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===Eg?Ac++:(Ac=0,Eg=n):Ac=0,Cc(0)}}function tv(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,uc(a)))}function rh(){return Jb(),Zb(),ev(),rv()}function rv(){if(Xt!==5)return!1;var n=La,a=jg;jg=0;var o=$o(Us),u=H.T,m=U.p;try{U.p=32>o?32:o,H.T=null,o=kg,kg=null;var x=La,_=Us;if(Xt=0,Ql=La=null,Us=0,(ct&6)!==0)throw Error(s(331));var R=ct;if(ct|=4,Lb(x.current),Ob(x,x.current,_,o),ct=R,Cc(0,!1),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(sa,x)}catch{}return!0}finally{U.p=m,H.T=u,tv(n,a)}}function nv(n,a,o){a=yn(o,a),a=sg(n.stateNode,a,2),n=Ca(n,a,2),n!==null&&(la(n,2),es(n))}function ft(n,a,o){if(n.tag===3)nv(n,n,o);else for(;a!==null;){if(a.tag===3){nv(a,n,o);break}else if(a.tag===1){var u=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Pa===null||!Pa.has(u))){n=yn(o,n),o=sb(2),u=Ca(a,o,2),u!==null&&(ab(o,u,a,n),la(u,2),es(u));break}}a=a.return}}function Ag(n,a,o){var u=n.pingCache;if(u===null){u=n.pingCache=new fT;var m=new Set;u.set(a,m)}else m=u.get(a),m===void 0&&(m=new Set,u.set(a,m));m.has(o)||(wg=!0,m.add(o),n=yT.bind(null,n,a,o),a.then(n,n))}function yT(n,a,o){var u=n.pingCache;u!==null&&u.delete(a),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,bt===n&&(We&o)===o&&(Dt===4||Dt===3&&(We&62914560)===We&&300>dr()-Xd?(ct&2)===0&&Xl(n,0):_g|=o,Yl===We&&(Yl=0)),es(n)}function sv(n,a){a===0&&(a=Bo()),n=Pi(n,a),n!==null&&(la(n,a),es(n))}function bT(n){var a=n.memoizedState,o=0;a!==null&&(o=a.retryLane),sv(n,o)}function vT(n,a){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(a),sv(n,o)}function wT(n,a){return Pr(n,a)}var nh=null,Jl=null,Cg=!1,sh=!1,Rg=!1,Va=0;function es(n){n!==Jl&&n.next===null&&(Jl===null?nh=Jl=n:Jl=Jl.next=n),sh=!0,Cg||(Cg=!0,NT())}function Cc(n,a){if(!Rg&&sh){Rg=!0;do for(var o=!1,u=nh;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var x=0;else{var _=u.suspendedLanes,R=u.pingedLanes;x=(1<<31-Er(42|n)+1)-1,x&=m&~(_&~R),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(o=!0,ov(u,x))}else x=We,x=mn(u,u===bt?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(x&3)===0||ia(u,x)||(o=!0,ov(u,x));u=u.next}while(o);Rg=!1}}function _T(){av()}function av(){sh=Cg=!1;var n=0;Va!==0&&DT()&&(n=Va);for(var a=dr(),o=null,u=nh;u!==null;){var m=u.next,x=iv(u,a);x===0?(u.next=null,o===null?nh=m:o.next=m,m===null&&(Jl=o)):(o=u,(n!==0||(x&3)!==0)&&(sh=!0)),u=m}Xt!==0&&Xt!==5||Cc(n),Va!==0&&(Va=0)}function iv(n,a){for(var o=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,x=n.pendingLanes&-62914561;0<x;){var _=31-Er(x),R=1<<_,q=m[_];q===-1?((R&o)===0||(R&u)!==0)&&(m[_]=yl(R,a)):q<=a&&(n.expiredLanes|=R),x&=~R}if(a=bt,o=We,o=mn(n,n===a?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===a&&(ht===2||ht===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&hn(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||ia(n,o)){if(a=o&-o,a===n.callbackPriority)return a;switch(u!==null&&hn(u),$o(o)){case 2:case 8:o=tr;break;case 32:o=ms;break;case 268435456:o=zo;break;default:o=ms}return u=lv.bind(null,n),o=Pr(o,u),n.callbackPriority=a,n.callbackNode=o,a}return u!==null&&u!==null&&hn(u),n.callbackPriority=2,n.callbackNode=null,2}function lv(n,a){if(Xt!==0&&Xt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(rh()&&n.callbackNode!==o)return null;var u=We;return u=mn(n,n===bt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Bb(n,u,a),iv(n,dr()),n.callbackNode!=null&&n.callbackNode===o?lv.bind(null,n):null)}function ov(n,a){if(rh())return null;Bb(n,a,!0)}function NT(){MT(function(){(ct&6)!==0?Pr(Qt,_T):av()})}function Ig(){if(Va===0){var n=Ll;n===0&&(n=Ni,Ni<<=1,(Ni&261888)===0&&(Ni=256)),Va=n}return Va}function cv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Yn(""+n)}function uv(n,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,n.id&&o.setAttribute("form",n.id),a.parentNode.insertBefore(o,a),n=new FormData(n),o.parentNode.removeChild(o),n}function jT(n,a,o,u,m){if(a==="submit"&&o&&o.stateNode===m){var x=cv((m[fr]||null).action),_=u.submitter;_&&(a=(a=_[fr]||null)?cv(a.formAction):_.getAttribute("formAction"),a!==null&&(x=a,_=null));var R=new Ai("action","action",null,u,m);n.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Va!==0){var q=_?uv(m,_):new FormData(m);Jm(o,{pending:!0,data:q,method:m.method,action:x},null,q)}}else typeof x=="function"&&(R.preventDefault(),q=_?uv(m,_):new FormData(m),Jm(o,{pending:!0,data:q,method:m.method,action:x},x,q))},currentTarget:m}]})}}for(var Dg=0;Dg<gm.length;Dg++){var Og=gm[Dg],kT=Og.toLowerCase(),ET=Og[0].toUpperCase()+Og.slice(1);In(kT,"on"+ET)}In(Fx,"onAnimationEnd"),In(Bx,"onAnimationIteration"),In(qx,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(BS,"onTransitionRun"),In(qS,"onTransitionStart"),In(HS,"onTransitionCancel"),In(Hx,"onTransitionEnd"),Kn("onMouseEnter",["mouseout","mouseover"]),Kn("onMouseLeave",["mouseout","mouseover"]),Kn("onPointerEnter",["pointerout","pointerover"]),Kn("onPointerLeave",["pointerout","pointerover"]),Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ST=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rc));function dv(n,a){a=(a&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],m=u.event;u=u.listeners;e:{var x=void 0;if(a)for(var _=u.length-1;0<=_;_--){var R=u[_],q=R.instance,ee=R.currentTarget;if(R=R.listener,q!==x&&m.isPropagationStopped())break e;x=R,m.currentTarget=ee;try{x(m)}catch(ie){bd(ie)}m.currentTarget=null,x=q}else for(_=0;_<u.length;_++){if(R=u[_],q=R.instance,ee=R.currentTarget,R=R.listener,q!==x&&m.isPropagationStopped())break e;x=R,m.currentTarget=ee;try{x(m)}catch(ie){bd(ie)}m.currentTarget=null,x=q}}}}function Qe(n,a){var o=a[ua];o===void 0&&(o=a[ua]=new Set);var u=n+"__bubble";o.has(u)||(hv(a,n,2,!1),o.add(u))}function Mg(n,a,o){var u=0;a&&(u|=4),hv(o,n,u,a)}var ah="_reactListening"+Math.random().toString(36).slice(2);function Pg(n){if(!n[ah]){n[ah]=!0,bl.forEach(function(o){o!=="selectionchange"&&(ST.has(o)||Mg(o,!1,n),Mg(o,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[ah]||(a[ah]=!0,Mg("selectionchange",!1,a))}}function hv(n,a,o,u){switch(Fv(a)){case 2:var m=t1;break;case 8:m=r1;break;default:m=Wg}o=m.bind(null,a,o,n),m=void 0,!Zo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(a,o,{capture:!0,passive:m}):n.addEventListener(a,o,!0):m!==void 0?n.addEventListener(a,o,{passive:m}):n.addEventListener(a,o,!1)}function Lg(n,a,o,u,m){var x=u;if((a&1)===0&&(a&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var R=u.stateNode.containerInfo;if(R===m)break;if(_===4)for(_=u.return;_!==null;){var q=_.tag;if((q===3||q===4)&&_.stateNode.containerInfo===m)return;_=_.return}for(;R!==null;){if(_=ys(R),_===null)return;if(q=_.tag,q===5||q===6||q===26||q===27){u=x=_;continue e}R=R.parentNode}}u=u.return}nd(function(){var ee=x,ie=jl(o),de=[];e:{var te=$x.get(n);if(te!==void 0){var ne=Ai,ke=n;switch(n){case"keypress":if(Ti(o)===0)break e;case"keydown":case"keyup":ne=hd;break;case"focusin":ke="focus",ne=va;break;case"focusout":ke="blur",ne=va;break;case"beforeblur":case"afterblur":ne=va;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=md;break;case Fx:case Bx:case qx:ne=Sl;break;case Hx:ne=Tl;break;case"scroll":case"scrollend":ne=sd;break;case"wheel":ne=pd;break;case"copy":case"cut":case"paste":ne=od;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=sc;break;case"toggle":case"beforetoggle":ne=_a}var Me=(a&4)!==0,xt=!Me&&(n==="scroll"||n==="scrollend"),X=Me?te!==null?te+"Capture":null:te;Me=[];for(var K=ee,Z;K!==null;){var oe=K;if(Z=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||Z===null||X===null||(oe=Lr(K,X),oe!=null&&Me.push(Ic(K,oe,Z))),xt)break;K=K.return}0<Me.length&&(te=new ne(te,ke,null,o,ie),de.push({event:te,listeners:Me}))}}if((a&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",ne=n==="mouseout"||n==="pointerout",te&&o!==Nl&&(ke=o.relatedTarget||o.fromElement)&&(ys(ke)||ke[$n]))break e;if((ne||te)&&(te=ie.window===ie?ie:(te=ie.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(ke=o.relatedTarget||o.toElement,ne=ee,ke=ke?ys(ke):null,ke!==null&&(xt=c(ke),Me=ke.tag,ke!==xt||Me!==5&&Me!==27&&Me!==6)&&(ke=null)):(ne=null,ke=ee),ne!==ke)){if(Me=ad,oe="onMouseLeave",X="onMouseEnter",K="mouse",(n==="pointerout"||n==="pointerover")&&(Me=sc,oe="onPointerLeave",X="onPointerEnter",K="pointer"),xt=ne==null?te:ki(ne),Z=ke==null?te:ki(ke),te=new Me(oe,K+"leave",ne,o,ie),te.target=xt,te.relatedTarget=Z,oe=null,ys(ie)===ee&&(Me=new Me(X,K+"enter",ke,o,ie),Me.target=Z,Me.relatedTarget=xt,oe=Me),xt=oe,ne&&ke)t:{for(Me=TT,X=ne,K=ke,Z=0,oe=X;oe;oe=Me(oe))Z++;oe=0;for(var Re=K;Re;Re=Me(Re))oe++;for(;0<Z-oe;)X=Me(X),Z--;for(;0<oe-Z;)K=Me(K),oe--;for(;Z--;){if(X===K||K!==null&&X===K.alternate){Me=X;break t}X=Me(X),K=Me(K)}Me=null}else Me=null;ne!==null&&fv(de,te,ne,Me,!1),ke!==null&&xt!==null&&fv(de,xt,ke,Me,!0)}}e:{if(te=ee?ki(ee):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var lt=Cx;else if(Ur(te))if(Rx)lt=VS;else{lt=LS;var Ee=PS}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&Wo(ee.elementType)&&(lt=Cx):lt=US;if(lt&&(lt=lt(n,ee))){Di(de,lt,o,ie);break e}Ee&&Ee(n,te,ee),n==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&_l(te,"number",te.value)}switch(Ee=ee?ki(ee):window,n){case"focusin":(Ur(Ee)||Ee.contentEditable==="true")&&(Al=Ee,hm=ee,lc=null);break;case"focusout":lc=hm=Al=null;break;case"mousedown":fm=!0;break;case"contextmenu":case"mouseup":case"dragend":fm=!1,Vx(de,o,ie);break;case"selectionchange":if(FS)break;case"keydown":case"keyup":Vx(de,o,ie)}var $e;if(b)e:{switch(n){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Ke?ut(n,o)&&(Je="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Je="onCompositionStart");Je&&(J&&o.locale!=="ko"&&(Ke||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Ke&&($e=pa()):(Wr=ie,kl="value"in Wr?Wr.value:Wr.textContent,Ke=!0)),Ee=ih(ee,Je),0<Ee.length&&(Je=new tc(Je,n,null,o,ie),de.push({event:Je,listeners:Ee}),$e?Je.data=$e:($e=zt(o),$e!==null&&(Je.data=$e)))),($e=O?nr(n,o):sr(n,o))&&(Je=ih(ee,"onBeforeInput"),0<Je.length&&(Ee=new tc("onBeforeInput","beforeinput",null,o,ie),de.push({event:Ee,listeners:Je}),Ee.data=$e)),jT(de,n,ee,o,ie)}dv(de,a)})}function Ic(n,a,o){return{instance:n,listener:a,currentTarget:o}}function ih(n,a){for(var o=a+"Capture",u=[];n!==null;){var m=n,x=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||x===null||(m=Lr(n,o),m!=null&&u.unshift(Ic(n,m,x)),m=Lr(n,a),m!=null&&u.push(Ic(n,m,x))),n.tag===3)return u;n=n.return}return[]}function TT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function fv(n,a,o,u,m){for(var x=a._reactName,_=[];o!==null&&o!==u;){var R=o,q=R.alternate,ee=R.stateNode;if(R=R.tag,q!==null&&q===u)break;R!==5&&R!==26&&R!==27||ee===null||(q=ee,m?(ee=Lr(o,x),ee!=null&&_.unshift(Ic(o,ee,q))):m||(ee=Lr(o,x),ee!=null&&_.push(Ic(o,ee,q)))),o=o.return}_.length!==0&&n.push({event:a,listeners:_})}var AT=/\r\n?/g,CT=/\u0000|\uFFFD/g;function mv(n){return(typeof n=="string"?n:""+n).replace(AT,`
`).replace(CT,"")}function gv(n,a){return a=mv(a),mv(n)===a}function pt(n,a,o,u,m,x){switch(o){case"children":typeof u=="string"?a==="body"||a==="textarea"&&u===""||pn(n,u):(typeof u=="number"||typeof u=="bigint")&&a!=="body"&&pn(n,""+u);break;case"className":fa(n,"class",u);break;case"tabIndex":fa(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":fa(n,o,u);break;case"style":td(n,u,x);break;case"data":if(a!=="object"){fa(n,"data",u);break}case"src":case"href":if(u===""&&(a!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Yn(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(o==="formAction"?(a!=="input"&&pt(n,a,"name",m.name,m,null),pt(n,a,"formEncType",m.formEncType,m,null),pt(n,a,"formMethod",m.formMethod,m,null),pt(n,a,"formTarget",m.formTarget,m,null)):(pt(n,a,"encType",m.encType,m,null),pt(n,a,"method",m.method,m,null),pt(n,a,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Yn(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=rr);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Yn(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Qe("beforetoggle",n),Qe("toggle",n),ha(n,"popover",u);break;case"xlinkActuate":gn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":gn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":gn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":gn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":gn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":gn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":gn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":gn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":gn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ha(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=im.get(o)||o,ha(n,o,u))}}function Ug(n,a,o,u,m,x){switch(o){case"style":td(n,u,x);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?pn(n,u):(typeof u=="number"||typeof u=="bigint")&&pn(n,""+u);break;case"onScroll":u!=null&&Qe("scroll",n);break;case"onScrollEnd":u!=null&&Qe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!da.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),a=o.slice(2,m?o.length-7:void 0),x=n[fr]||null,x=x!=null?x[o]:null,typeof x=="function"&&n.removeEventListener(a,x,m),typeof u=="function")){typeof x!="function"&&x!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(a,u,m);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):ha(n,o,u)}}}function xr(n,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",n),Qe("load",n);var u=!1,m=!1,x;for(x in o)if(o.hasOwnProperty(x)){var _=o[x];if(_!=null)switch(x){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:pt(n,a,x,_,o,null)}}m&&pt(n,a,"srcSet",o.srcSet,o,null),u&&pt(n,a,"src",o.src,o,null);return;case"input":Qe("invalid",n);var R=x=_=m=null,q=null,ee=null;for(u in o)if(o.hasOwnProperty(u)){var ie=o[u];if(ie!=null)switch(u){case"name":m=ie;break;case"type":_=ie;break;case"checked":q=ie;break;case"defaultChecked":ee=ie;break;case"value":x=ie;break;case"defaultValue":R=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,a));break;default:pt(n,a,u,ie,o,null)}}Ei(n,x,R,q,ee,_,m,!1);return;case"select":Qe("invalid",n),u=_=x=null;for(m in o)if(o.hasOwnProperty(m)&&(R=o[m],R!=null))switch(m){case"value":x=R;break;case"defaultValue":_=R;break;case"multiple":u=R;default:pt(n,a,m,R,o,null)}a=x,o=_,n.multiple=!!u,a!=null?it(n,!!u,a,!1):o!=null&&it(n,!!u,o,!0);return;case"textarea":Qe("invalid",n),x=m=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(R=o[_],R!=null))switch(_){case"value":u=R;break;case"defaultValue":m=R;break;case"children":x=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:pt(n,a,_,R,o,null)}ga(n,u,m,x);return;case"option":for(q in o)if(o.hasOwnProperty(q)&&(u=o[q],u!=null))switch(q){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:pt(n,a,q,u,o,null)}return;case"dialog":Qe("beforetoggle",n),Qe("toggle",n),Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":Qe("load",n);break;case"video":case"audio":for(u=0;u<Rc.length;u++)Qe(Rc[u],n);break;case"image":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"embed":case"source":case"link":Qe("error",n),Qe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in o)if(o.hasOwnProperty(ee)&&(u=o[ee],u!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:pt(n,a,ee,u,o,null)}return;default:if(Wo(a)){for(ie in o)o.hasOwnProperty(ie)&&(u=o[ie],u!==void 0&&Ug(n,a,ie,u,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(u=o[R],u!=null&&pt(n,a,R,u,o,null))}function RT(n,a,o,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,x=null,_=null,R=null,q=null,ee=null,ie=null;for(ne in o){var de=o[ne];if(o.hasOwnProperty(ne)&&de!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":q=de;default:u.hasOwnProperty(ne)||pt(n,a,ne,null,u,de)}}for(var te in u){var ne=u[te];if(de=o[te],u.hasOwnProperty(te)&&(ne!=null||de!=null))switch(te){case"type":x=ne;break;case"name":m=ne;break;case"checked":ee=ne;break;case"defaultChecked":ie=ne;break;case"value":_=ne;break;case"defaultValue":R=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:ne!==de&&pt(n,a,te,ne,u,de)}}ma(n,_,R,q,ee,ie,x,m);return;case"select":ne=_=R=te=null;for(x in o)if(q=o[x],o.hasOwnProperty(x)&&q!=null)switch(x){case"value":break;case"multiple":ne=q;default:u.hasOwnProperty(x)||pt(n,a,x,null,u,q)}for(m in u)if(x=u[m],q=o[m],u.hasOwnProperty(m)&&(x!=null||q!=null))switch(m){case"value":te=x;break;case"defaultValue":R=x;break;case"multiple":_=x;default:x!==q&&pt(n,a,m,x,u,q)}a=R,o=_,u=ne,te!=null?it(n,!!o,te,!1):!!u!=!!o&&(a!=null?it(n,!!o,a,!0):it(n,!!o,o?[]:"",!1));return;case"textarea":ne=te=null;for(R in o)if(m=o[R],o.hasOwnProperty(R)&&m!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:pt(n,a,R,null,u,m)}for(_ in u)if(m=u[_],x=o[_],u.hasOwnProperty(_)&&(m!=null||x!=null))switch(_){case"value":te=m;break;case"defaultValue":ne=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==x&&pt(n,a,_,m,u,x)}Si(n,te,ne);return;case"option":for(var ke in o)if(te=o[ke],o.hasOwnProperty(ke)&&te!=null&&!u.hasOwnProperty(ke))switch(ke){case"selected":n.selected=!1;break;default:pt(n,a,ke,null,u,te)}for(q in u)if(te=u[q],ne=o[q],u.hasOwnProperty(q)&&te!==ne&&(te!=null||ne!=null))switch(q){case"selected":n.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:pt(n,a,q,te,u,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in o)te=o[Me],o.hasOwnProperty(Me)&&te!=null&&!u.hasOwnProperty(Me)&&pt(n,a,Me,null,u,te);for(ee in u)if(te=u[ee],ne=o[ee],u.hasOwnProperty(ee)&&te!==ne&&(te!=null||ne!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,a));break;default:pt(n,a,ee,te,u,ne)}return;default:if(Wo(a)){for(var xt in o)te=o[xt],o.hasOwnProperty(xt)&&te!==void 0&&!u.hasOwnProperty(xt)&&Ug(n,a,xt,void 0,u,te);for(ie in u)te=u[ie],ne=o[ie],!u.hasOwnProperty(ie)||te===ne||te===void 0&&ne===void 0||Ug(n,a,ie,te,u,ne);return}}for(var X in o)te=o[X],o.hasOwnProperty(X)&&te!=null&&!u.hasOwnProperty(X)&&pt(n,a,X,null,u,te);for(de in u)te=u[de],ne=o[de],!u.hasOwnProperty(de)||te===ne||te==null&&ne==null||pt(n,a,de,te,u,ne)}function pv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function IT(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],x=m.transferSize,_=m.initiatorType,R=m.duration;if(x&&R&&pv(_)){for(_=0,R=m.responseEnd,u+=1;u<o.length;u++){var q=o[u],ee=q.startTime;if(ee>R)break;var ie=q.transferSize,de=q.initiatorType;ie&&pv(de)&&(q=q.responseEnd,_+=ie*(q<R?1:(R-ee)/(q-ee)))}if(--u,a+=8*(x+_)/(m.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Vg=null,zg=null;function lh(n){return n.nodeType===9?n:n.ownerDocument}function xv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yv(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function Fg(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Bg=null;function DT(){var n=window.event;return n&&n.type==="popstate"?n===Bg?!1:(Bg=n,!0):(Bg=null,!1)}var bv=typeof setTimeout=="function"?setTimeout:void 0,OT=typeof clearTimeout=="function"?clearTimeout:void 0,vv=typeof Promise=="function"?Promise:void 0,MT=typeof queueMicrotask=="function"?queueMicrotask:typeof vv<"u"?function(n){return vv.resolve(null).then(n).catch(PT)}:bv;function PT(n){setTimeout(function(){throw n})}function za(n){return n==="head"}function wv(n,a){var o=a,u=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(m),ro(a);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Dc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Dc(o);for(var x=o.firstChild;x;){var _=x.nextSibling,R=x.nodeName;x[xs]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&x.rel.toLowerCase()==="stylesheet"||o.removeChild(x),x=_}}else o==="body"&&Dc(n.ownerDocument.body);o=m}while(o);ro(a)}function _v(n,a){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?a?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(a?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function qg(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":qg(o),ji(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function LT(n,a,o,u){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[xs])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(x=n.getAttribute("rel"),x==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(x!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(x=n.getAttribute("src"),(x!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&x&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var x=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===x)return n}else return n;if(n=Nn(n.nextSibling),n===null)break}return null}function UT(n,a,o){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Nn(n.nextSibling),n===null))return null;return n}function Nv(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Nn(n.nextSibling),n===null))return null;return n}function Hg(n){return n.data==="$?"||n.data==="$~"}function $g(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function VT(n,a){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||o.readyState!=="loading")a();else{var u=function(){a(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Nn(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var Gg=null;function jv(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(a===0)return Nn(n.nextSibling);a--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||a++}n=n.nextSibling}return null}function kv(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(a===0)return n;a--}else o!=="/$"&&o!=="/&"||a++}n=n.previousSibling}return null}function Ev(n,a,o){switch(a=lh(o),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Dc(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);ji(n)}var jn=new Map,Sv=new Set;function oh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Vs=U.d;U.d={f:zT,r:FT,D:BT,C:qT,L:HT,m:$T,X:KT,S:GT,M:YT};function zT(){var n=Vs.f(),a=Zd();return n||a}function FT(n){var a=bs(n);a!==null&&a.tag===5&&a.type==="form"?Hy(a):Vs.r(n)}var Zl=typeof document>"u"?null:document;function Tv(n,a,o){var u=Zl;if(u&&typeof a=="string"&&a){var m=Rt(a);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),Sv.has(m)||(Sv.add(m),n={rel:n,crossOrigin:o,href:a},u.querySelector(m)===null&&(a=u.createElement("link"),xr(a,"link",n),Ot(a),u.head.appendChild(a)))}}function BT(n){Vs.D(n),Tv("dns-prefetch",n,null)}function qT(n,a){Vs.C(n,a),Tv("preconnect",n,a)}function HT(n,a,o){Vs.L(n,a,o);var u=Zl;if(u&&n&&a){var m='link[rel="preload"][as="'+Rt(a)+'"]';a==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Rt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Rt(o.imageSizes)+'"]')):m+='[href="'+Rt(n)+'"]';var x=m;switch(a){case"style":x=eo(n);break;case"script":x=to(n)}jn.has(x)||(n=v({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:n,as:a},o),jn.set(x,n),u.querySelector(m)!==null||a==="style"&&u.querySelector(Oc(x))||a==="script"&&u.querySelector(Mc(x))||(a=u.createElement("link"),xr(a,"link",n),Ot(a),u.head.appendChild(a)))}}function $T(n,a){Vs.m(n,a);var o=Zl;if(o&&n){var u=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Rt(u)+'"][href="'+Rt(n)+'"]',x=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=to(n)}if(!jn.has(x)&&(n=v({rel:"modulepreload",href:n},a),jn.set(x,n),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Mc(x)))return}u=o.createElement("link"),xr(u,"link",n),Ot(u),o.head.appendChild(u)}}}function GT(n,a,o){Vs.S(n,a,o);var u=Zl;if(u&&n){var m=Cn(u).hoistableStyles,x=eo(n);a=a||"default";var _=m.get(x);if(!_){var R={loading:0,preload:null};if(_=u.querySelector(Oc(x)))R.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":a},o),(o=jn.get(x))&&Kg(n,o);var q=_=u.createElement("link");Ot(q),xr(q,"link",n),q._p=new Promise(function(ee,ie){q.onload=ee,q.onerror=ie}),q.addEventListener("load",function(){R.loading|=1}),q.addEventListener("error",function(){R.loading|=2}),R.loading|=4,ch(_,a,u)}_={type:"stylesheet",instance:_,count:1,state:R},m.set(x,_)}}}function KT(n,a){Vs.X(n,a);var o=Zl;if(o&&n){var u=Cn(o).hoistableScripts,m=to(n),x=u.get(m);x||(x=o.querySelector(Mc(m)),x||(n=v({src:n,async:!0},a),(a=jn.get(m))&&Yg(n,a),x=o.createElement("script"),Ot(x),xr(x,"link",n),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(m,x))}}function YT(n,a){Vs.M(n,a);var o=Zl;if(o&&n){var u=Cn(o).hoistableScripts,m=to(n),x=u.get(m);x||(x=o.querySelector(Mc(m)),x||(n=v({src:n,async:!0,type:"module"},a),(a=jn.get(m))&&Yg(n,a),x=o.createElement("script"),Ot(x),xr(x,"link",n),o.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(m,x))}}function Av(n,a,o,u){var m=(m=ce.current)?oh(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=eo(o.href),o=Cn(m).hoistableStyles,u=o.get(a),u||(u={type:"style",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=eo(o.href);var x=Cn(m).hoistableStyles,_=x.get(n);if(_||(m=m.ownerDocument||m,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(n,_),(x=m.querySelector(Oc(n)))&&!x._p&&(_.instance=x,_.state.loading=5),jn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},jn.set(n,o),x||QT(m,n,o,_.state))),a&&u===null)throw Error(s(528,""));return _}if(a&&u!==null)throw Error(s(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=to(o),o=Cn(m).hoistableScripts,u=o.get(a),u||(u={type:"script",instance:null,count:0,state:null},o.set(a,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function eo(n){return'href="'+Rt(n)+'"'}function Oc(n){return'link[rel="stylesheet"]['+n+"]"}function Cv(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function QT(n,a,o,u){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?u.loading=1:(a=n.createElement("link"),u.preload=a,a.addEventListener("load",function(){return u.loading|=1}),a.addEventListener("error",function(){return u.loading|=2}),xr(a,"link",o),Ot(a),n.head.appendChild(a))}function to(n){return'[src="'+Rt(n)+'"]'}function Mc(n){return"script[async]"+n}function Rv(n,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var u=n.querySelector('style[data-href~="'+Rt(o.href)+'"]');if(u)return a.instance=u,Ot(u),u;var m=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ot(u),xr(u,"style",m),ch(u,o.precedence,n),a.instance=u;case"stylesheet":m=eo(o.href);var x=n.querySelector(Oc(m));if(x)return a.state.loading|=4,a.instance=x,Ot(x),x;u=Cv(o),(m=jn.get(m))&&Kg(u,m),x=(n.ownerDocument||n).createElement("link"),Ot(x);var _=x;return _._p=new Promise(function(R,q){_.onload=R,_.onerror=q}),xr(x,"link",u),a.state.loading|=4,ch(x,o.precedence,n),a.instance=x;case"script":return x=to(o.src),(m=n.querySelector(Mc(x)))?(a.instance=m,Ot(m),m):(u=o,(m=jn.get(x))&&(u=v({},o),Yg(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),Ot(m),xr(m,"link",u),n.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(u=a.instance,a.state.loading|=4,ch(u,o.precedence,n));return a.instance}function ch(n,a,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,x=m,_=0;_<u.length;_++){var R=u[_];if(R.dataset.precedence===a)x=R;else if(x!==m)break}x?x.parentNode.insertBefore(n,x.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(n,a.firstChild))}function Kg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function Yg(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var uh=null;function Iv(n,a,o){if(uh===null){var u=new Map,m=uh=new Map;m.set(o,u)}else m=uh,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var x=o[m];if(!(x[xs]||x[Ct]||n==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var _=x.getAttribute(a)||"";_=n+_;var R=u.get(_);R?R.push(x):u.set(_,[x])}}return u}function Dv(n,a,o){n=n.ownerDocument||n,n.head.insertBefore(o,a==="title"?n.querySelector("head > title"):null)}function XT(n,a,o){if(o===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ov(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function WT(n,a,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=eo(u.href),x=a.querySelector(Oc(m));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=dh.bind(n),a.then(n,n)),o.state.loading|=4,o.instance=x,Ot(x);return}x=a.ownerDocument||a,u=Cv(u),(m=jn.get(m))&&Kg(u,m),x=x.createElement("link"),Ot(x);var _=x;_._p=new Promise(function(R,q){_.onload=R,_.onerror=q}),xr(x,"link",u),o.instance=x}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=dh.bind(n),a.addEventListener("load",o),a.addEventListener("error",o))}}var Qg=0;function JT(n,a){return n.stylesheets&&n.count===0&&fh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&fh(n,n.stylesheets),n.unsuspend){var x=n.unsuspend;n.unsuspend=null,x()}},6e4+a);0<n.imgBytes&&Qg===0&&(Qg=62500*IT());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&fh(n,n.stylesheets),n.unsuspend)){var x=n.unsuspend;n.unsuspend=null,x()}},(n.imgBytes>Qg?50:800)+a);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function dh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var hh=null;function fh(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,hh=new Map,a.forEach(ZT,n),hh=null,dh.call(n))}function ZT(n,a){if(!(a.state.loading&4)){var o=hh.get(n);if(o)var u=o.get(null);else{o=new Map,hh.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<m.length;x++){var _=m[x];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}m=a.instance,_=m.getAttribute("data-precedence"),x=o.get(_)||u,x===u&&o.set(null,m),o.set(_,m),this.count++,u=dh.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),x?x.parentNode.insertBefore(m,x.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),a.state.loading|=4}}var Pc={$$typeof:B,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function e1(n,a,o,u,m,x,_,R,q){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gs(0),this.hiddenUpdates=gs(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=x,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function Mv(n,a,o,u,m,x,_,R,q,ee,ie,de){return n=new e1(n,a,o,_,q,ee,ie,de,R),a=1,x===!0&&(a|=24),x=Zr(3,null,null,a),n.current=x,x.stateNode=n,a=Tm(),a.refCount++,n.pooledCache=a,a.refCount++,x.memoizedState={element:u,isDehydrated:o,cache:a},Im(x),n}function Pv(n){return n?(n=Il,n):Il}function Lv(n,a,o,u,m,x){m=Pv(m),u.context===null?u.context=m:u.pendingContext=m,u=Aa(a),u.payload={element:o},x=x===void 0?null:x,x!==null&&(u.callback=x),o=Ca(n,u,a),o!==null&&(qr(o,n,a),mc(o,n,a))}function Uv(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<a?o:a}}function Xg(n,a){Uv(n,a),(n=n.alternate)&&Uv(n,a)}function Vv(n){if(n.tag===13||n.tag===31){var a=Pi(n,67108864);a!==null&&qr(a,n,67108864),Xg(n,67108864)}}function zv(n){if(n.tag===13||n.tag===31){var a=sn();a=Ho(a);var o=Pi(n,a);o!==null&&qr(o,n,a),Xg(n,a)}}var mh=!0;function t1(n,a,o,u){var m=H.T;H.T=null;var x=U.p;try{U.p=2,Wg(n,a,o,u)}finally{U.p=x,H.T=m}}function r1(n,a,o,u){var m=H.T;H.T=null;var x=U.p;try{U.p=8,Wg(n,a,o,u)}finally{U.p=x,H.T=m}}function Wg(n,a,o,u){if(mh){var m=Jg(u);if(m===null)Lg(n,a,u,gh,o),Bv(n,u);else if(s1(m,n,a,o,u))u.stopPropagation();else if(Bv(n,u),a&4&&-1<n1.indexOf(n)){for(;m!==null;){var x=bs(m);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var _=An(x.pendingLanes);if(_!==0){var R=x;for(R.pendingLanes|=2,R.entangledLanes|=2;_;){var q=1<<31-Er(_);R.entanglements[1]|=q,_&=~q}es(x),(ct&6)===0&&(Wd=dr()+500,Cc(0))}}break;case 31:case 13:R=Pi(x,2),R!==null&&qr(R,x,2),Zd(),Xg(x,2)}if(x=Jg(u),x===null&&Lg(n,a,u,gh,o),x===m)break;m=x}m!==null&&u.stopPropagation()}else Lg(n,a,u,null,o)}}function Jg(n){return n=jl(n),Zg(n)}var gh=null;function Zg(n){if(gh=null,n=ys(n),n!==null){var a=c(n);if(a===null)n=null;else{var o=a.tag;if(o===13){if(n=d(a),n!==null)return n;n=null}else if(o===31){if(n=h(a),n!==null)return n;n=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return gh=n,null}function Fv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yu()){case Qt:return 2;case tr:return 8;case ms:case Qu:return 32;case zo:return 268435456;default:return 32}default:return 32}}var ep=!1,Fa=null,Ba=null,qa=null,Lc=new Map,Uc=new Map,Ha=[],n1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bv(n,a){switch(n){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":Lc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uc.delete(a.pointerId)}}function Vc(n,a,o,u,m,x){return n===null||n.nativeEvent!==x?(n={blockedOn:a,domEventName:o,eventSystemFlags:u,nativeEvent:x,targetContainers:[m]},a!==null&&(a=bs(a),a!==null&&Vv(a)),n):(n.eventSystemFlags|=u,a=n.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),n)}function s1(n,a,o,u,m){switch(a){case"focusin":return Fa=Vc(Fa,n,a,o,u,m),!0;case"dragenter":return Ba=Vc(Ba,n,a,o,u,m),!0;case"mouseover":return qa=Vc(qa,n,a,o,u,m),!0;case"pointerover":var x=m.pointerId;return Lc.set(x,Vc(Lc.get(x)||null,n,a,o,u,m)),!0;case"gotpointercapture":return x=m.pointerId,Uc.set(x,Vc(Uc.get(x)||null,n,a,o,u,m)),!0}return!1}function qv(n){var a=ys(n.target);if(a!==null){var o=c(a);if(o!==null){if(a=o.tag,a===13){if(a=d(o),a!==null){n.blockedOn=a,Wu(n.priority,function(){zv(o)});return}}else if(a===31){if(a=h(o),a!==null){n.blockedOn=a,Wu(n.priority,function(){zv(o)});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ph(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var o=Jg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Nl=u,o.target.dispatchEvent(u),Nl=null}else return a=bs(o),a!==null&&Vv(a),n.blockedOn=o,!1;a.shift()}return!0}function Hv(n,a,o){ph(n)&&o.delete(a)}function a1(){ep=!1,Fa!==null&&ph(Fa)&&(Fa=null),Ba!==null&&ph(Ba)&&(Ba=null),qa!==null&&ph(qa)&&(qa=null),Lc.forEach(Hv),Uc.forEach(Hv)}function xh(n,a){n.blockedOn===a&&(n.blockedOn=null,ep||(ep=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,a1)))}var yh=null;function $v(n){yh!==n&&(yh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){yh===n&&(yh=null);for(var a=0;a<n.length;a+=3){var o=n[a],u=n[a+1],m=n[a+2];if(typeof u!="function"){if(Zg(u||o)===null)continue;break}var x=bs(o);x!==null&&(n.splice(a,3),a-=3,Jm(x,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function ro(n){function a(q){return xh(q,n)}Fa!==null&&xh(Fa,n),Ba!==null&&xh(Ba,n),qa!==null&&xh(qa,n),Lc.forEach(a),Uc.forEach(a);for(var o=0;o<Ha.length;o++){var u=Ha[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ha.length&&(o=Ha[0],o.blockedOn===null);)qv(o),o.blockedOn===null&&Ha.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],x=o[u+1],_=m[fr]||null;if(typeof x=="function")_||$v(o);else if(_){var R=null;if(x&&x.hasAttribute("formAction")){if(m=x,_=x[fr]||null)R=_.formAction;else if(Zg(m)!==null)continue}else R=_.action;typeof R=="function"?o[u+1]=R:(o.splice(u,3),u-=3),$v(o)}}}function Gv(){function n(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(_){return m=_})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function tp(n){this._internalRoot=n}bh.prototype.render=tp.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var o=a.current,u=sn();Lv(o,u,n,a,null,null)},bh.prototype.unmount=tp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Lv(n.current,2,null,n,null,null),Zd(),a[$n]=null}};function bh(n){this._internalRoot=n}bh.prototype.unstable_scheduleHydration=function(n){if(n){var a=ps();n={blockedOn:null,target:n,priority:a};for(var o=0;o<Ha.length&&a!==0&&a<Ha[o].priority;o++);Ha.splice(o,0,n),o===0&&qv(n)}};var Kv=e.version;if(Kv!=="19.2.0")throw Error(s(527,Kv,"19.2.0"));U.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(a),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var i1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{sa=vh.inject(i1),br=vh}catch{}}return Bc.createRoot=function(n,a){if(!l(n))throw Error(s(299));var o=!1,u="",m=eb,x=tb,_=rb;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=Mv(n,1,!1,null,null,o,u,null,m,x,_,Gv),n[$n]=a.current,Pg(n),new tp(a)},Bc.hydrateRoot=function(n,a,o){if(!l(n))throw Error(s(299));var u=!1,m="",x=eb,_=tb,R=rb,q=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(q=o.formState)),a=Mv(n,1,!0,a,o??null,u,m,q,x,_,R,Gv),a.context=Pv(null),o=a.current,u=sn(),u=Ho(u),m=Aa(u),m.callback=null,Ca(o,m,u),o=u,a.current.lanes=o,la(a,o),es(a),n[$n]=a.current,Pg(n),new bh(a)},Bc.version="19.2.0",Bc}var _w;function aA(){if(_w)return ip.exports;_w=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ip.exports=sA(),ip.exports}var iA=aA();var Nw="popstate";function lA(r={}){function e(s,l){let{pathname:c,search:d,hash:h}=s.location;return Lp("",{pathname:c,search:d,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){return typeof l=="string"?l:mu(l)}return cA(e,t,null,r)}function Wt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Vn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oA(){return Math.random().toString(36).substring(2,10)}function jw(r,e){return{usr:r.state,key:r.key,idx:e}}function Lp(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Eu(e):e,state:t,key:e&&e.key||s||oA()}}function mu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Eu(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function cA(r,e,t,s={}){let{window:l=document.defaultView,v5Compat:c=!1}=s,d=l.history,h="POP",g=null,p=y();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function y(){return(d.state||{idx:null}).idx}function v(){h="POP";let T=y(),V=T==null?null:T-p;p=T,g&&g({action:h,location:F.location,delta:V})}function w(T,V){h="PUSH";let E=Lp(F.location,T,V);p=y()+1;let B=jw(E,p),Y=F.createHref(E);try{d.pushState(B,"",Y)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;l.location.assign(Y)}c&&g&&g({action:h,location:F.location,delta:1})}function S(T,V){h="REPLACE";let E=Lp(F.location,T,V);p=y();let B=jw(E,p),Y=F.createHref(E);d.replaceState(B,"",Y),c&&g&&g({action:h,location:F.location,delta:0})}function C(T){return uA(T)}let F={get action(){return h},get location(){return r(l,d)},listen(T){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Nw,v),g=T,()=>{l.removeEventListener(Nw,v),g=null}},createHref(T){return e(l,T)},createURL:C,encodeLocation(T){let V=C(T);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:w,replace:S,go(T){return d.go(T)}};return F}function uA(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:mu(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function zN(r,e,t="/"){return dA(r,e,t,!1)}function dA(r,e,t,s){let l=typeof e=="string"?Eu(e):e,c=Qs(l.pathname||"/",t);if(c==null)return null;let d=FN(r);hA(d);let h=null;for(let g=0;h==null&&g<d.length;++g){let p=NA(c);h=wA(d[g],p,s)}return h}function FN(r,e=[],t=[],s="",l=!1){let c=(d,h,g=l,p)=>{let y={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(s)&&g)return;Wt(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length)}let v=Hs([s,y.relativePath]),w=t.concat(y);d.children&&d.children.length>0&&(Wt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),FN(d.children,e,w,v,g)),!(d.path==null&&!d.index)&&e.push({path:v,score:bA(v,d.index),routesMeta:w})};return r.forEach((d,h)=>{if(d.path===""||!d.path?.includes("?"))c(d,h);else for(let g of BN(d.path))c(d,h,!0,g)}),e}function BN(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,l=t.endsWith("?"),c=t.replace(/\?$/,"");if(s.length===0)return l?[c,""]:[c];let d=BN(s.join("/")),h=[];return h.push(...d.map(g=>g===""?c:[c,g].join("/"))),l&&h.push(...d),h.map(g=>r.startsWith("/")&&g===""?"/":g)}function hA(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:vA(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var fA=/^:[\w-]+$/,mA=3,gA=2,pA=1,xA=10,yA=-2,kw=r=>r==="*";function bA(r,e){let t=r.split("/"),s=t.length;return t.some(kw)&&(s+=yA),e&&(s+=gA),t.filter(l=>!kw(l)).reduce((l,c)=>l+(fA.test(c)?mA:c===""?pA:xA),s)}function vA(r,e){return r.length===e.length&&r.slice(0,-1).every((s,l)=>s===e[l])?r[r.length-1]-e[e.length-1]:0}function wA(r,e,t=!1){let{routesMeta:s}=r,l={},c="/",d=[];for(let h=0;h<s.length;++h){let g=s[h],p=h===s.length-1,y=c==="/"?e:e.slice(c.length)||"/",v=Kh({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},y),w=g.route;if(!v&&p&&t&&!s[s.length-1].route.index&&(v=Kh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},y)),!v)return null;Object.assign(l,v.params),d.push({params:l,pathname:Hs([c,v.pathname]),pathnameBase:TA(Hs([c,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(c=Hs([c,v.pathnameBase]))}return d}function Kh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=_A(r.path,r.caseSensitive,r.end),l=e.match(t);if(!l)return null;let c=l[0],d=c.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:s.reduce((p,{paramName:y,isOptional:v},w)=>{if(y==="*"){let C=h[w]||"";d=c.slice(0,c.length-C.length).replace(/(.)\/+$/,"$1")}const S=h[w];return v&&!S?p[y]=void 0:p[y]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:c,pathnameBase:d,pattern:r}}function _A(r,e=!1,t=!0){Vn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],l="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,g)=>(s.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),l+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":r!==""&&r!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),s]}function NA(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Qs(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}var jA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kA=r=>jA.test(r);function EA(r,e="/"){let{pathname:t,search:s="",hash:l=""}=typeof r=="string"?Eu(r):r,c;if(t)if(kA(t))c=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),Vn(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${t}`)}t.startsWith("/")?c=Ew(t.substring(1),"/"):c=Ew(t,e)}else c=e;return{pathname:c,search:AA(s),hash:CA(l)}}function Ew(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function up(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SA(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qN(r){let e=SA(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function HN(r,e,t,s=!1){let l;typeof r=="string"?l=Eu(r):(l={...r},Wt(!l.pathname||!l.pathname.includes("?"),up("?","pathname","search",l)),Wt(!l.pathname||!l.pathname.includes("#"),up("#","pathname","hash",l)),Wt(!l.search||!l.search.includes("#"),up("#","search","hash",l)));let c=r===""||l.pathname==="",d=c?"/":l.pathname,h;if(d==null)h=t;else{let v=e.length-1;if(!s&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),v-=1;l.pathname=w.join("/")}h=v>=0?e[v]:"/"}let g=EA(l,h),p=d&&d!=="/"&&d.endsWith("/"),y=(c||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(p||y)&&(g.pathname+="/"),g}var Hs=r=>r.join("/").replace(/\/\/+/g,"/"),TA=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),AA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,CA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function RA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $N=["POST","PUT","PATCH","DELETE"];new Set($N);var IA=["GET",...$N];new Set(IA);var Co=k.createContext(null);Co.displayName="DataRouter";var bf=k.createContext(null);bf.displayName="DataRouterState";k.createContext(!1);var GN=k.createContext({isTransitioning:!1});GN.displayName="ViewTransition";var DA=k.createContext(new Map);DA.displayName="Fetchers";var OA=k.createContext(null);OA.displayName="Await";var us=k.createContext(null);us.displayName="Navigation";var vf=k.createContext(null);vf.displayName="Location";var ds=k.createContext({outlet:null,matches:[],isDataRoute:!1});ds.displayName="Route";var g0=k.createContext(null);g0.displayName="RouteError";function MA(r,{relative:e}={}){Wt(Su(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=k.useContext(us),{hash:l,pathname:c,search:d}=Tu(r,{relative:e}),h=c;return t!=="/"&&(h=c==="/"?t:Hs([t,c])),s.createHref({pathname:h,search:d,hash:l})}function Su(){return k.useContext(vf)!=null}function pi(){return Wt(Su(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(vf).location}var KN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function YN(r){k.useContext(us).static||k.useLayoutEffect(r)}function dn(){let{isDataRoute:r}=k.useContext(ds);return r?YA():PA()}function PA(){Wt(Su(),"useNavigate() may be used only in the context of a <Router> component.");let r=k.useContext(Co),{basename:e,navigator:t}=k.useContext(us),{matches:s}=k.useContext(ds),{pathname:l}=pi(),c=JSON.stringify(qN(s)),d=k.useRef(!1);return YN(()=>{d.current=!0}),k.useCallback((g,p={})=>{if(Vn(d.current,KN),!d.current)return;if(typeof g=="number"){t.go(g);return}let y=HN(g,JSON.parse(c),l,p.relative==="path");r==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Hs([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,c,l,r])}k.createContext(null);function QN(){let{matches:r}=k.useContext(ds),e=r[r.length-1];return e?e.params:{}}function Tu(r,{relative:e}={}){let{matches:t}=k.useContext(ds),{pathname:s}=pi(),l=JSON.stringify(qN(t));return k.useMemo(()=>HN(r,JSON.parse(l),s,e==="path"),[r,l,s,e])}function LA(r,e){return XN(r)}function XN(r,e,t,s,l){Wt(Su(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=k.useContext(us),{matches:d}=k.useContext(ds),h=d[d.length-1],g=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",v=h&&h.route;{let E=v&&v.path||"";WN(p,!v||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let w=pi(),S;S=w;let C=S.pathname||"/",F=C;if(y!=="/"){let E=y.replace(/^\//,"").split("/");F="/"+C.replace(/^\//,"").split("/").slice(E.length).join("/")}let T=zN(r,{pathname:F});return Vn(v||T!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Vn(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),BA(T&&T.map(E=>Object.assign({},E,{params:Object.assign({},g,E.params),pathname:Hs([y,c.encodeLocation?c.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?y:Hs([y,c.encodeLocation?c.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),d,t,s,l)}function UA(){let r=KA(),e=RA(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:c},"ErrorBoundary")," or"," ",k.createElement("code",{style:c},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:l},t):null,d)}var VA=k.createElement(UA,null),zA=class extends k.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?k.createElement(ds.Provider,{value:this.props.routeContext},k.createElement(g0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FA({routeContext:r,match:e,children:t}){let s=k.useContext(Co);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(ds.Provider,{value:r},t)}function BA(r,e=[],t=null,s=null,l=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let c=r,d=t?.errors;if(d!=null){let y=c.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);Wt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let h=!1,g=-1;if(t)for(let y=0;y<c.length;y++){let v=c[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=y),v.route.id){let{loaderData:w,errors:S}=t,C=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||C){h=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}let p=t&&s?(y,v)=>{s(y,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:v})}:void 0;return c.reduceRight((y,v,w)=>{let S,C=!1,F=null,T=null;t&&(S=d&&v.route.id?d[v.route.id]:void 0,F=v.route.errorElement||VA,h&&(g<0&&w===0?(WN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,T=null):g===w&&(C=!0,T=v.route.hydrateFallbackElement||null)));let V=e.concat(c.slice(0,w+1)),E=()=>{let B;return S?B=F:C?B=T:v.route.Component?B=k.createElement(v.route.Component,null):v.route.element?B=v.route.element:B=y,k.createElement(FA,{match:v,routeContext:{outlet:y,matches:V,isDataRoute:t!=null},children:B})};return t&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?k.createElement(zA,{location:t.location,revalidation:t.revalidation,component:F,error:S,children:E(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:p}):E()},null)}function p0(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qA(r){let e=k.useContext(Co);return Wt(e,p0(r)),e}function HA(r){let e=k.useContext(bf);return Wt(e,p0(r)),e}function $A(r){let e=k.useContext(ds);return Wt(e,p0(r)),e}function x0(r){let e=$A(r),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function GA(){return x0("useRouteId")}function KA(){let r=k.useContext(g0),e=HA("useRouteError"),t=x0("useRouteError");return r!==void 0?r:e.errors?.[t]}function YA(){let{router:r}=qA("useNavigate"),e=x0("useNavigate"),t=k.useRef(!1);return YN(()=>{t.current=!0}),k.useCallback(async(l,c={})=>{Vn(t.current,KN),t.current&&(typeof l=="number"?r.navigate(l):await r.navigate(l,{fromRouteId:e,...c}))},[r,e])}var Sw={};function WN(r,e,t){!e&&!Sw[r]&&(Sw[r]=!0,Vn(!1,t))}k.memo(QA);function QA({routes:r,future:e,state:t,unstable_onError:s}){return XN(r,void 0,t,s,e)}function XA({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:l,static:c=!1}){Wt(!Su(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=r.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:d,navigator:l,static:c,future:{}}),[d,l,c]);typeof t=="string"&&(t=Eu(t));let{pathname:g="/",search:p="",hash:y="",state:v=null,key:w="default"}=t,S=k.useMemo(()=>{let C=Qs(g,d);return C==null?null:{location:{pathname:C,search:p,hash:y,state:v,key:w},navigationType:s}},[d,g,p,y,v,w,s]);return Vn(S!=null,`<Router basename="${d}"> is not able to match the URL "${g}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:k.createElement(us.Provider,{value:h},k.createElement(vf.Provider,{children:e,value:S}))}var Dh="get",Oh="application/x-www-form-urlencoded";function wf(r){return r!=null&&typeof r.tagName=="string"}function WA(r){return wf(r)&&r.tagName.toLowerCase()==="button"}function JA(r){return wf(r)&&r.tagName.toLowerCase()==="form"}function ZA(r){return wf(r)&&r.tagName.toLowerCase()==="input"}function eC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function tC(r,e){return r.button===0&&(!e||e==="_self")&&!eC(r)}var _h=null;function rC(){if(_h===null)try{new FormData(document.createElement("form"),0),_h=!1}catch{_h=!0}return _h}var nC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dp(r){return r!=null&&!nC.has(r)?(Vn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Oh}"`),null):r}function sC(r,e){let t,s,l,c,d;if(JA(r)){let h=r.getAttribute("action");s=h?Qs(h,e):null,t=r.getAttribute("method")||Dh,l=dp(r.getAttribute("enctype"))||Oh,c=new FormData(r)}else if(WA(r)||ZA(r)&&(r.type==="submit"||r.type==="image")){let h=r.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||h.getAttribute("action");if(s=g?Qs(g,e):null,t=r.getAttribute("formmethod")||h.getAttribute("method")||Dh,l=dp(r.getAttribute("formenctype"))||dp(h.getAttribute("enctype"))||Oh,c=new FormData(h,r),!rC()){let{name:p,type:y,value:v}=r;if(y==="image"){let w=p?`${p}.`:"";c.append(`${w}x`,"0"),c.append(`${w}y`,"0")}else p&&c.append(p,v)}}else{if(wf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Dh,s=null,l=Oh,d=r}return c&&l==="text/plain"&&(d=c,c=void 0),{action:s,method:t.toLowerCase(),encType:l,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function y0(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function aC(r,e,t){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&Qs(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function iC(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lC(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function oC(r,e,t){let s=await Promise.all(r.map(async l=>{let c=e.routes[l.route.id];if(c){let d=await iC(c,t);return d.links?d.links():[]}return[]}));return hC(s.flat(1).filter(lC).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Tw(r,e,t,s,l,c){let d=(g,p)=>t[p]?g.route.id!==t[p].route.id:!0,h=(g,p)=>t[p].pathname!==g.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,p)=>d(g,p)||h(g,p)):c==="data"?e.filter((g,p)=>{let y=s.routes[g.route.id];if(!y||!y.hasLoader)return!1;if(d(g,p)||h(g,p))return!0;if(g.route.shouldRevalidate){let v=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function cC(r,e,{includeHydrateFallback:t}={}){return uC(r.map(s=>{let l=e.routes[s.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function uC(r){return[...new Set(r)]}function dC(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function hC(r,e){let t=new Set;return new Set(e),r.reduce((s,l)=>{let c=JSON.stringify(dC(l));return t.has(c)||(t.add(c),s.push({key:c,link:l})),s},[])}function JN(){let r=k.useContext(Co);return y0(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function fC(){let r=k.useContext(bf);return y0(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var b0=k.createContext(void 0);b0.displayName="FrameworkContext";function ZN(){let r=k.useContext(b0);return y0(r,"You must render this element inside a <HydratedRouter> element"),r}function mC(r,e){let t=k.useContext(b0),[s,l]=k.useState(!1),[c,d]=k.useState(!1),{onFocus:h,onBlur:g,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,w=k.useRef(null);k.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let F=V=>{V.forEach(E=>{d(E.isIntersecting)})},T=new IntersectionObserver(F,{threshold:.5});return w.current&&T.observe(w.current),()=>{T.disconnect()}}},[r]),k.useEffect(()=>{if(s){let F=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(F)}}},[s]);let S=()=>{l(!0)},C=()=>{l(!1),d(!1)};return t?r!=="intent"?[c,w,{}]:[c,w,{onFocus:qc(h,S),onBlur:qc(g,C),onMouseEnter:qc(p,S),onMouseLeave:qc(y,C),onTouchStart:qc(v,S)}]:[!1,w,{}]}function qc(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function gC({page:r,...e}){let{router:t}=JN(),s=k.useMemo(()=>zN(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?k.createElement(xC,{page:r,matches:s,...e}):null}function pC(r){let{manifest:e,routeModules:t}=ZN(),[s,l]=k.useState([]);return k.useEffect(()=>{let c=!1;return oC(r,e,t).then(d=>{c||l(d)}),()=>{c=!0}},[r,e,t]),s}function xC({page:r,matches:e,...t}){let s=pi(),{manifest:l,routeModules:c}=ZN(),{basename:d}=JN(),{loaderData:h,matches:g}=fC(),p=k.useMemo(()=>Tw(r,e,g,l,s,"data"),[r,e,g,l,s]),y=k.useMemo(()=>Tw(r,e,g,l,s,"assets"),[r,e,g,l,s]),v=k.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let C=new Set,F=!1;if(e.forEach(V=>{let E=l.routes[V.route.id];!E||!E.hasLoader||(!p.some(B=>B.route.id===V.route.id)&&V.route.id in h&&c[V.route.id]?.shouldRevalidate||E.hasClientLoader?F=!0:C.add(V.route.id))}),C.size===0)return[];let T=aC(r,d,"data");return F&&C.size>0&&T.searchParams.set("_routes",e.filter(V=>C.has(V.route.id)).map(V=>V.route.id).join(",")),[T.pathname+T.search]},[d,h,s,l,p,e,r,c]),w=k.useMemo(()=>cC(y,l),[y,l]),S=pC(y);return k.createElement(k.Fragment,null,v.map(C=>k.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),w.map(C=>k.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),S.map(({key:C,link:F})=>k.createElement("link",{key:C,nonce:t.nonce,...F})))}function yC(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ej=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ej&&(window.__reactRouterVersion="7.9.6")}catch{}function bC({basename:r,children:e,window:t}){let s=k.useRef();s.current==null&&(s.current=lA({window:t,v5Compat:!0}));let l=s.current,[c,d]=k.useState({action:l.action,location:l.location}),h=k.useCallback(g=>{k.startTransition(()=>d(g))},[d]);return k.useLayoutEffect(()=>l.listen(h),[l,h]),k.createElement(XA,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:l})}var tj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zi=k.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:l,reloadDocument:c,replace:d,state:h,target:g,to:p,preventScrollReset:y,viewTransition:v,...w},S){let{basename:C}=k.useContext(us),F=typeof p=="string"&&tj.test(p),T,V=!1;if(typeof p=="string"&&F&&(T=p,ej))try{let j=new URL(window.location.href),A=p.startsWith("//")?new URL(j.protocol+p):new URL(p),P=Qs(A.pathname,C);A.origin===j.origin&&P!=null?p=P+A.search+A.hash:V=!0}catch{Vn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=MA(p,{relative:l}),[B,Y,W]=mC(s,w),$=_C(p,{replace:d,state:h,target:g,preventScrollReset:y,relative:l,viewTransition:v});function I(j){e&&e(j),j.defaultPrevented||$(j)}let L=k.createElement("a",{...w,...W,href:T||E,onClick:V||c?e:I,ref:yC(S,Y),target:g,"data-discover":!F&&t==="render"?"true":void 0});return B&&!F?k.createElement(k.Fragment,null,L,k.createElement(gC,{page:E})):L});Zi.displayName="Link";var rj=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:l=!1,style:c,to:d,viewTransition:h,children:g,...p},y){let v=Tu(d,{relative:p.relative}),w=pi(),S=k.useContext(bf),{navigator:C,basename:F}=k.useContext(us),T=S!=null&&SC(v)&&h===!0,V=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,E=w.pathname,B=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(E=E.toLowerCase(),B=B?B.toLowerCase():null,V=V.toLowerCase()),B&&F&&(B=Qs(B,F)||B);const Y=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let W=E===V||!l&&E.startsWith(V)&&E.charAt(Y)==="/",$=B!=null&&(B===V||!l&&B.startsWith(V)&&B.charAt(V.length)==="/"),I={isActive:W,isPending:$,isTransitioning:T},L=W?e:void 0,j;typeof s=="function"?j=s(I):j=[s,W?"active":null,$?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let A=typeof c=="function"?c(I):c;return k.createElement(Zi,{...p,"aria-current":L,className:j,ref:y,style:A,to:d,viewTransition:h},typeof g=="function"?g(I):g)});rj.displayName="NavLink";var vC=k.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:l,state:c,method:d=Dh,action:h,onSubmit:g,relative:p,preventScrollReset:y,viewTransition:v,...w},S)=>{let C=kC(),F=EC(h,{relative:p}),T=d.toLowerCase()==="get"?"get":"post",V=typeof h=="string"&&tj.test(h),E=B=>{if(g&&g(B),B.defaultPrevented)return;B.preventDefault();let Y=B.nativeEvent.submitter,W=Y?.getAttribute("formmethod")||d;C(Y||B.currentTarget,{fetcherKey:e,method:W,navigate:t,replace:l,state:c,relative:p,preventScrollReset:y,viewTransition:v})};return k.createElement("form",{ref:S,method:T,action:F,onSubmit:s?g:E,...w,"data-discover":!V&&r==="render"?"true":void 0})});vC.displayName="Form";function wC(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nj(r){let e=k.useContext(Co);return Wt(e,wC(r)),e}function _C(r,{target:e,replace:t,state:s,preventScrollReset:l,relative:c,viewTransition:d}={}){let h=dn(),g=pi(),p=Tu(r,{relative:c});return k.useCallback(y=>{if(tC(y,e)){y.preventDefault();let v=t!==void 0?t:mu(g)===mu(p);h(r,{replace:v,state:s,preventScrollReset:l,relative:c,viewTransition:d})}},[g,h,p,t,s,e,r,l,c,d])}var NC=0,jC=()=>`__${String(++NC)}__`;function kC(){let{router:r}=nj("useSubmit"),{basename:e}=k.useContext(us),t=GA();return k.useCallback(async(s,l={})=>{let{action:c,method:d,encType:h,formData:g,body:p}=sC(s,e);if(l.navigate===!1){let y=l.fetcherKey||jC();await r.fetch(y,t,l.action||c,{preventScrollReset:l.preventScrollReset,formData:g,body:p,formMethod:l.method||d,formEncType:l.encType||h,flushSync:l.flushSync})}else await r.navigate(l.action||c,{preventScrollReset:l.preventScrollReset,formData:g,body:p,formMethod:l.method||d,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,e,t])}function EC(r,{relative:e}={}){let{basename:t}=k.useContext(us),s=k.useContext(ds);Wt(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),c={...Tu(r||".",{relative:e})},d=pi();if(r==null){c.search=d.search;let h=new URLSearchParams(c.search),g=h.getAll("index");if(g.some(y=>y==="")){h.delete("index"),g.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();c.search=y?`?${y}`:""}}return(!r||r===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:Hs([t,c.pathname])),mu(c)}function SC(r,{relative:e}={}){let t=k.useContext(GN);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=nj("useViewTransitionState"),l=Tu(r,{relative:e});if(!t.isTransitioning)return!1;let c=Qs(t.currentLocation.pathname,s)||t.currentLocation.pathname,d=Qs(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Kh(l.pathname,d)!=null||Kh(l.pathname,c)!=null}const TC=()=>{};var Aw={};const sj=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},AC=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const l=r[t++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[t++];e[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[t++],d=r[t++],h=r[t++],g=((l&7)<<18|(c&63)<<12|(d&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[t++],d=r[t++];e[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},aj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,h=d?r[l+1]:0,g=l+2<r.length,p=g?r[l+2]:0,y=c>>2,v=(c&3)<<4|h>>4;let w=(h&15)<<2|p>>6,S=p&63;g||(S=64,d||(w=64)),s.push(t[y],t[v],t[w],t[S])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(sj(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):AC(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=t[r.charAt(l++)],h=l<r.length?t[r.charAt(l)]:0;++l;const p=l<r.length?t[r.charAt(l)]:64;++l;const v=l<r.length?t[r.charAt(l)]:64;if(++l,c==null||h==null||p==null||v==null)throw new CC;const w=c<<2|h>>4;if(s.push(w),p!==64){const S=h<<4&240|p>>2;if(s.push(S),v!==64){const C=p<<6&192|v;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class CC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RC=function(r){const e=sj(r);return aj.encodeByteArray(e,!0)},Yh=function(r){return RC(r).replace(/\./g,"")},ij=function(r){try{return aj.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function IC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const DC=()=>IC().__FIREBASE_DEFAULTS__,OC=()=>{if(typeof process>"u"||typeof Aw>"u")return;const r=Aw.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},MC=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ij(r[1]);return e&&JSON.parse(e)},_f=()=>{try{return TC()||DC()||OC()||MC()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},lj=r=>_f()?.emulatorHosts?.[r],oj=r=>{const e=lj(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},cj=()=>_f()?.config,uj=r=>_f()?.[`_${r}`];class PC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function xi(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function v0(r){return(await fetch(r,{credentials:"include"})).ok}function dj(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Yh(JSON.stringify(t)),Yh(JSON.stringify(d)),""].join(".")}const su={};function LC(){const r={prod:[],emulator:[]};for(const e of Object.keys(su))su[e]?r.emulator.push(e):r.prod.push(e);return r}function UC(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Cw=!1;function w0(r,e){if(typeof window>"u"||typeof document>"u"||!xi(window.location.host)||su[r]===e||su[r]||Cw)return;su[r]=e;function t(w){return`__firebase__banner__${w}`}const s="__firebase__banner",c=LC().prod.length>0;function d(){const w=document.getElementById(s);w&&w.remove()}function h(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Cw=!0,d()},w}function y(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function v(){const w=UC(s),S=t("text"),C=document.getElementById(S)||document.createElement("span"),F=t("learnmore"),T=document.getElementById(F)||document.createElement("a"),V=t("preprendIcon"),E=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const B=w.element;h(B),y(T,F);const Y=p();g(E,V),B.append(E,C,T,Y),document.body.appendChild(B)}c?(C.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kr())}function zC(){const r=_f()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _0(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function BC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qC(){const r=kr();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function HC(){return!zC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N0(){try{return typeof indexedDB=="object"}catch{return!1}}function j0(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(t){e(t)}})}function hj(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const $C="FirebaseError";class Qr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=$C,Object.setPrototypeOf(this,Qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hl.prototype.create)}}class hl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?GC(c,s):"Error",h=`${this.serviceName}: ${d} (${l}).`;return new Qr(l,h,s)}}function GC(r,e){return r.replace(KC,(t,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const KC=/\{\$([^}]+)}/g;function YC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ci(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const l of t){if(!s.includes(l))return!1;const c=r[l],d=e[l];if(Rw(c)&&Rw(d)){if(!ci(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!t.includes(l))return!1;return!0}function Rw(r){return r!==null&&typeof r=="object"}function Au(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Xc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[l,c]=s.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function Wc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function QC(r,e){const t=new XC(r,e);return t.subscribe.bind(t)}class XC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let l;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");WC(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:s},l.next===void 0&&(l.next=hp),l.error===void 0&&(l.error=hp),l.complete===void 0&&(l.complete=hp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WC(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function hp(){}const JC=1e3,ZC=2,e2=14400*1e3,t2=.5;function Iw(r,e=JC,t=ZC){const s=e*Math.pow(t,r),l=Math.round(t2*s*(Math.random()-.5)*2);return Math.min(e2,s+l)}function mt(r){return r&&r._delegate?r._delegate:r}class Sn{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xi="[DEFAULT]";class r2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new PC;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s2(e))try{this.getOrInitializeService({instanceIdentifier:Xi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(e=Xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xi){return this.instances.has(e)}getOptions(e=Xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(c);s===h&&d.resolve(l)}return l}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const l of s)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:n2(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Xi){return this.component?this.component.multipleInstances?e:Xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function n2(r){return r===Xi?void 0:r}function s2(r){return r.instantiationMode==="EAGER"}class a2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new r2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ze||(Ze={}));const i2={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},l2=Ze.INFO,o2={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},c2=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),l=o2[e];if(l)console[l](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nf{constructor(e){this.name=e,this._logLevel=l2,this._logHandler=c2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const u2=(r,e)=>e.some(t=>r instanceof t);let Dw,Ow;function d2(){return Dw||(Dw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h2(){return Ow||(Ow=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fj=new WeakMap,Up=new WeakMap,mj=new WeakMap,fp=new WeakMap,k0=new WeakMap;function f2(r){const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{t(ni(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&fj.set(t,r)}).catch(()=>{}),k0.set(e,r),e}function m2(r){if(Up.has(r))return;const e=new Promise((t,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{t(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Up.set(r,e)}let Vp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Up.get(r);if(e==="objectStoreNames")return r.objectStoreNames||mj.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ni(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function g2(r){Vp=r(Vp)}function p2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(mp(this),e,...t);return mj.set(s,e.sort?e.sort():[e]),ni(s)}:h2().includes(r)?function(...e){return r.apply(mp(this),e),ni(fj.get(this))}:function(...e){return ni(r.apply(mp(this),e))}}function x2(r){return typeof r=="function"?p2(r):(r instanceof IDBTransaction&&m2(r),u2(r,d2())?new Proxy(r,Vp):r)}function ni(r){if(r instanceof IDBRequest)return f2(r);if(fp.has(r))return fp.get(r);const e=x2(r);return e!==r&&(fp.set(r,e),k0.set(e,r)),e}const mp=r=>k0.get(r);function gj(r,e,{blocked:t,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,e),h=ni(d);return s&&d.addEventListener("upgradeneeded",g=>{s(ni(d.result),g.oldVersion,g.newVersion,ni(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),h.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",p=>l(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const y2=["get","getKey","getAll","getAllKeys","count"],b2=["put","add","delete","clear"],gp=new Map;function Mw(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(gp.get(e))return gp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,l=b2.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(l||y2.includes(t)))return;const c=async function(d,...h){const g=this.transaction(d,l?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),l&&g.done]))[0]};return gp.set(e,c),c}g2(r=>({...r,get:(e,t,s)=>Mw(e,t)||r.get(e,t,s),has:(e,t)=>!!Mw(e,t)||r.has(e,t)}));class v2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(w2(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function w2(r){return r.getComponent()?.type==="VERSION"}const zp="@firebase/app",Pw="0.14.0";const Xs=new Nf("@firebase/app"),_2="@firebase/app-compat",N2="@firebase/analytics-compat",j2="@firebase/analytics",k2="@firebase/app-check-compat",E2="@firebase/app-check",S2="@firebase/auth",T2="@firebase/auth-compat",A2="@firebase/database",C2="@firebase/data-connect",R2="@firebase/database-compat",I2="@firebase/functions",D2="@firebase/functions-compat",O2="@firebase/installations",M2="@firebase/installations-compat",P2="@firebase/messaging",L2="@firebase/messaging-compat",U2="@firebase/performance",V2="@firebase/performance-compat",z2="@firebase/remote-config",F2="@firebase/remote-config-compat",B2="@firebase/storage",q2="@firebase/storage-compat",H2="@firebase/firestore",$2="@firebase/ai",G2="@firebase/firestore-compat",K2="firebase",Y2="12.0.0";const Fp="[DEFAULT]",Q2={[zp]:"fire-core",[_2]:"fire-core-compat",[j2]:"fire-analytics",[N2]:"fire-analytics-compat",[E2]:"fire-app-check",[k2]:"fire-app-check-compat",[S2]:"fire-auth",[T2]:"fire-auth-compat",[A2]:"fire-rtdb",[C2]:"fire-data-connect",[R2]:"fire-rtdb-compat",[I2]:"fire-fn",[D2]:"fire-fn-compat",[O2]:"fire-iid",[M2]:"fire-iid-compat",[P2]:"fire-fcm",[L2]:"fire-fcm-compat",[U2]:"fire-perf",[V2]:"fire-perf-compat",[z2]:"fire-rc",[F2]:"fire-rc-compat",[B2]:"fire-gcs",[q2]:"fire-gcs-compat",[H2]:"fire-fst",[G2]:"fire-fst-compat",[$2]:"fire-vertex","fire-js":"fire-js",[K2]:"fire-js-all"};const gu=new Map,X2=new Map,Bp=new Map;function Lw(r,e){try{r.container.addComponent(e)}catch(t){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function zn(r){const e=r.name;if(Bp.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;Bp.set(e,r);for(const t of gu.values())Lw(t,r);for(const t of X2.values())Lw(t,r);return!0}function yi(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function an(r){return r==null?!1:r.settings!==void 0}const W2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},si=new hl("app","Firebase",W2);class J2{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Sn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}const fl=Y2;function pj(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Fp,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw si.create("bad-app-name",{appName:String(l)});if(t||(t=cj()),!t)throw si.create("no-options");const c=gu.get(l);if(c){if(ci(t,c.options)&&ci(s,c.config))return c;throw si.create("duplicate-app",{appName:l})}const d=new a2(l);for(const g of Bp.values())d.addComponent(g);const h=new J2(t,s,d);return gu.set(l,h),h}function Cu(r=Fp){const e=gu.get(r);if(!e&&r===Fp&&cj())return pj();if(!e)throw si.create("no-app",{appName:r});return e}function Z2(){return Array.from(gu.values())}function Kr(r,e,t){let s=Q2[r]??r;t&&(s+=`-${t}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${e}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(d.join(" "));return}zn(new Sn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const eR="firebase-heartbeat-database",tR=1,pu="firebase-heartbeat-store";let pp=null;function xj(){return pp||(pp=gj(eR,tR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(pu)}catch(t){console.warn(t)}}}}).catch(r=>{throw si.create("idb-open",{originalErrorMessage:r.message})})),pp}async function rR(r){try{const t=(await xj()).transaction(pu),s=await t.objectStore(pu).get(yj(r));return await t.done,s}catch(e){if(e instanceof Qr)Xs.warn(e.message);else{const t=si.create("idb-get",{originalErrorMessage:e?.message});Xs.warn(t.message)}}}async function Uw(r,e){try{const s=(await xj()).transaction(pu,"readwrite");await s.objectStore(pu).put(e,yj(r)),await s.done}catch(t){if(t instanceof Qr)Xs.warn(t.message);else{const s=si.create("idb-set",{originalErrorMessage:t?.message});Xs.warn(s.message)}}}function yj(r){return`${r.name}!${r.options.appId}`}const nR=1024,sR=30;class aR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Vw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>sR){const l=oR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Xs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Vw(),{heartbeatsToSend:t,unsentEntries:s}=iR(this._heartbeatsCache.heartbeats),l=Yh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Xs.warn(e),""}}}function Vw(){return new Date().toISOString().substring(0,10)}function iR(r,e=nR){const t=[];let s=r.slice();for(const l of r){const c=t.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),zw(t)>e){c.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),zw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class lR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return N0()?j0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Uw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Uw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zw(r){return Yh(JSON.stringify({version:2,heartbeats:r})).length}function oR(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function cR(r){zn(new Sn("platform-logger",e=>new v2(e),"PRIVATE")),zn(new Sn("heartbeat",e=>new aR(e),"PRIVATE")),Kr(zp,Pw,r),Kr(zp,Pw,"esm2020"),Kr("fire-js","")}cR("");var Fw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ai,bj;(function(){var r;function e(I,L){function j(){}j.prototype=L.prototype,I.D=L.prototype,I.prototype=new j,I.prototype.constructor=I,I.C=function(A,P,M){for(var z=Array(arguments.length-2),me=2;me<arguments.length;me++)z[me-2]=arguments[me];return L.prototype[P].apply(A,z)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(I,L,j){j||(j=0);var A=Array(16);if(typeof L=="string")for(var P=0;16>P;++P)A[P]=L.charCodeAt(j++)|L.charCodeAt(j++)<<8|L.charCodeAt(j++)<<16|L.charCodeAt(j++)<<24;else for(P=0;16>P;++P)A[P]=L[j++]|L[j++]<<8|L[j++]<<16|L[j++]<<24;L=I.g[0],j=I.g[1],P=I.g[2];var M=I.g[3],z=L+(M^j&(P^M))+A[0]+3614090360&4294967295;L=j+(z<<7&4294967295|z>>>25),z=M+(P^L&(j^P))+A[1]+3905402710&4294967295,M=L+(z<<12&4294967295|z>>>20),z=P+(j^M&(L^j))+A[2]+606105819&4294967295,P=M+(z<<17&4294967295|z>>>15),z=j+(L^P&(M^L))+A[3]+3250441966&4294967295,j=P+(z<<22&4294967295|z>>>10),z=L+(M^j&(P^M))+A[4]+4118548399&4294967295,L=j+(z<<7&4294967295|z>>>25),z=M+(P^L&(j^P))+A[5]+1200080426&4294967295,M=L+(z<<12&4294967295|z>>>20),z=P+(j^M&(L^j))+A[6]+2821735955&4294967295,P=M+(z<<17&4294967295|z>>>15),z=j+(L^P&(M^L))+A[7]+4249261313&4294967295,j=P+(z<<22&4294967295|z>>>10),z=L+(M^j&(P^M))+A[8]+1770035416&4294967295,L=j+(z<<7&4294967295|z>>>25),z=M+(P^L&(j^P))+A[9]+2336552879&4294967295,M=L+(z<<12&4294967295|z>>>20),z=P+(j^M&(L^j))+A[10]+4294925233&4294967295,P=M+(z<<17&4294967295|z>>>15),z=j+(L^P&(M^L))+A[11]+2304563134&4294967295,j=P+(z<<22&4294967295|z>>>10),z=L+(M^j&(P^M))+A[12]+1804603682&4294967295,L=j+(z<<7&4294967295|z>>>25),z=M+(P^L&(j^P))+A[13]+4254626195&4294967295,M=L+(z<<12&4294967295|z>>>20),z=P+(j^M&(L^j))+A[14]+2792965006&4294967295,P=M+(z<<17&4294967295|z>>>15),z=j+(L^P&(M^L))+A[15]+1236535329&4294967295,j=P+(z<<22&4294967295|z>>>10),z=L+(P^M&(j^P))+A[1]+4129170786&4294967295,L=j+(z<<5&4294967295|z>>>27),z=M+(j^P&(L^j))+A[6]+3225465664&4294967295,M=L+(z<<9&4294967295|z>>>23),z=P+(L^j&(M^L))+A[11]+643717713&4294967295,P=M+(z<<14&4294967295|z>>>18),z=j+(M^L&(P^M))+A[0]+3921069994&4294967295,j=P+(z<<20&4294967295|z>>>12),z=L+(P^M&(j^P))+A[5]+3593408605&4294967295,L=j+(z<<5&4294967295|z>>>27),z=M+(j^P&(L^j))+A[10]+38016083&4294967295,M=L+(z<<9&4294967295|z>>>23),z=P+(L^j&(M^L))+A[15]+3634488961&4294967295,P=M+(z<<14&4294967295|z>>>18),z=j+(M^L&(P^M))+A[4]+3889429448&4294967295,j=P+(z<<20&4294967295|z>>>12),z=L+(P^M&(j^P))+A[9]+568446438&4294967295,L=j+(z<<5&4294967295|z>>>27),z=M+(j^P&(L^j))+A[14]+3275163606&4294967295,M=L+(z<<9&4294967295|z>>>23),z=P+(L^j&(M^L))+A[3]+4107603335&4294967295,P=M+(z<<14&4294967295|z>>>18),z=j+(M^L&(P^M))+A[8]+1163531501&4294967295,j=P+(z<<20&4294967295|z>>>12),z=L+(P^M&(j^P))+A[13]+2850285829&4294967295,L=j+(z<<5&4294967295|z>>>27),z=M+(j^P&(L^j))+A[2]+4243563512&4294967295,M=L+(z<<9&4294967295|z>>>23),z=P+(L^j&(M^L))+A[7]+1735328473&4294967295,P=M+(z<<14&4294967295|z>>>18),z=j+(M^L&(P^M))+A[12]+2368359562&4294967295,j=P+(z<<20&4294967295|z>>>12),z=L+(j^P^M)+A[5]+4294588738&4294967295,L=j+(z<<4&4294967295|z>>>28),z=M+(L^j^P)+A[8]+2272392833&4294967295,M=L+(z<<11&4294967295|z>>>21),z=P+(M^L^j)+A[11]+1839030562&4294967295,P=M+(z<<16&4294967295|z>>>16),z=j+(P^M^L)+A[14]+4259657740&4294967295,j=P+(z<<23&4294967295|z>>>9),z=L+(j^P^M)+A[1]+2763975236&4294967295,L=j+(z<<4&4294967295|z>>>28),z=M+(L^j^P)+A[4]+1272893353&4294967295,M=L+(z<<11&4294967295|z>>>21),z=P+(M^L^j)+A[7]+4139469664&4294967295,P=M+(z<<16&4294967295|z>>>16),z=j+(P^M^L)+A[10]+3200236656&4294967295,j=P+(z<<23&4294967295|z>>>9),z=L+(j^P^M)+A[13]+681279174&4294967295,L=j+(z<<4&4294967295|z>>>28),z=M+(L^j^P)+A[0]+3936430074&4294967295,M=L+(z<<11&4294967295|z>>>21),z=P+(M^L^j)+A[3]+3572445317&4294967295,P=M+(z<<16&4294967295|z>>>16),z=j+(P^M^L)+A[6]+76029189&4294967295,j=P+(z<<23&4294967295|z>>>9),z=L+(j^P^M)+A[9]+3654602809&4294967295,L=j+(z<<4&4294967295|z>>>28),z=M+(L^j^P)+A[12]+3873151461&4294967295,M=L+(z<<11&4294967295|z>>>21),z=P+(M^L^j)+A[15]+530742520&4294967295,P=M+(z<<16&4294967295|z>>>16),z=j+(P^M^L)+A[2]+3299628645&4294967295,j=P+(z<<23&4294967295|z>>>9),z=L+(P^(j|~M))+A[0]+4096336452&4294967295,L=j+(z<<6&4294967295|z>>>26),z=M+(j^(L|~P))+A[7]+1126891415&4294967295,M=L+(z<<10&4294967295|z>>>22),z=P+(L^(M|~j))+A[14]+2878612391&4294967295,P=M+(z<<15&4294967295|z>>>17),z=j+(M^(P|~L))+A[5]+4237533241&4294967295,j=P+(z<<21&4294967295|z>>>11),z=L+(P^(j|~M))+A[12]+1700485571&4294967295,L=j+(z<<6&4294967295|z>>>26),z=M+(j^(L|~P))+A[3]+2399980690&4294967295,M=L+(z<<10&4294967295|z>>>22),z=P+(L^(M|~j))+A[10]+4293915773&4294967295,P=M+(z<<15&4294967295|z>>>17),z=j+(M^(P|~L))+A[1]+2240044497&4294967295,j=P+(z<<21&4294967295|z>>>11),z=L+(P^(j|~M))+A[8]+1873313359&4294967295,L=j+(z<<6&4294967295|z>>>26),z=M+(j^(L|~P))+A[15]+4264355552&4294967295,M=L+(z<<10&4294967295|z>>>22),z=P+(L^(M|~j))+A[6]+2734768916&4294967295,P=M+(z<<15&4294967295|z>>>17),z=j+(M^(P|~L))+A[13]+1309151649&4294967295,j=P+(z<<21&4294967295|z>>>11),z=L+(P^(j|~M))+A[4]+4149444226&4294967295,L=j+(z<<6&4294967295|z>>>26),z=M+(j^(L|~P))+A[11]+3174756917&4294967295,M=L+(z<<10&4294967295|z>>>22),z=P+(L^(M|~j))+A[2]+718787259&4294967295,P=M+(z<<15&4294967295|z>>>17),z=j+(M^(P|~L))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+L&4294967295,I.g[1]=I.g[1]+(P+(z<<21&4294967295|z>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+M&4294967295}s.prototype.u=function(I,L){L===void 0&&(L=I.length);for(var j=L-this.blockSize,A=this.B,P=this.h,M=0;M<L;){if(P==0)for(;M<=j;)l(this,I,M),M+=this.blockSize;if(typeof I=="string"){for(;M<L;)if(A[P++]=I.charCodeAt(M++),P==this.blockSize){l(this,A),P=0;break}}else for(;M<L;)if(A[P++]=I[M++],P==this.blockSize){l(this,A),P=0;break}}this.h=P,this.o+=L},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var L=1;L<I.length-8;++L)I[L]=0;var j=8*this.o;for(L=I.length-8;L<I.length;++L)I[L]=j&255,j/=256;for(this.u(I),I=Array(16),L=j=0;4>L;++L)for(var A=0;32>A;A+=8)I[j++]=this.g[L]>>>A&255;return I};function c(I,L){var j=h;return Object.prototype.hasOwnProperty.call(j,I)?j[I]:j[I]=L(I)}function d(I,L){this.h=L;for(var j=[],A=!0,P=I.length-1;0<=P;P--){var M=I[P]|0;A&&M==L||(j[P]=M,A=!1)}this.g=j}var h={};function g(I){return-128<=I&&128>I?c(I,function(L){return new d([L|0],0>L?-1:0)}):new d([I|0],0>I?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return v;if(0>I)return T(p(-I));for(var L=[],j=1,A=0;I>=j;A++)L[A]=I/j|0,j*=4294967296;return new d(L,0)}function y(I,L){if(I.length==0)throw Error("number format error: empty string");if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(I.charAt(0)=="-")return T(y(I.substring(1),L));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=p(Math.pow(L,8)),A=v,P=0;P<I.length;P+=8){var M=Math.min(8,I.length-P),z=parseInt(I.substring(P,P+M),L);8>M?(M=p(Math.pow(L,M)),A=A.j(M).add(p(z))):(A=A.j(j),A=A.add(p(z)))}return A}var v=g(0),w=g(1),S=g(16777216);r=d.prototype,r.m=function(){if(F(this))return-T(this).m();for(var I=0,L=1,j=0;j<this.g.length;j++){var A=this.i(j);I+=(0<=A?A:4294967296+A)*L,L*=4294967296}return I},r.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(F(this))return"-"+T(this).toString(I);for(var L=p(Math.pow(I,6)),j=this,A="";;){var P=Y(j,L).g;j=V(j,P.j(L));var M=((0<j.g.length?j.g[0]:j.h)>>>0).toString(I);if(j=P,C(j))return M+A;for(;6>M.length;)M="0"+M;A=M+A}},r.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(var L=0;L<I.g.length;L++)if(I.g[L]!=0)return!1;return!0}function F(I){return I.h==-1}r.l=function(I){return I=V(this,I),F(I)?-1:C(I)?0:1};function T(I){for(var L=I.g.length,j=[],A=0;A<L;A++)j[A]=~I.g[A];return new d(j,~I.h).add(w)}r.abs=function(){return F(this)?T(this):this},r.add=function(I){for(var L=Math.max(this.g.length,I.g.length),j=[],A=0,P=0;P<=L;P++){var M=A+(this.i(P)&65535)+(I.i(P)&65535),z=(M>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);A=z>>>16,M&=65535,z&=65535,j[P]=z<<16|M}return new d(j,j[j.length-1]&-2147483648?-1:0)};function V(I,L){return I.add(T(L))}r.j=function(I){if(C(this)||C(I))return v;if(F(this))return F(I)?T(this).j(T(I)):T(T(this).j(I));if(F(I))return T(this.j(T(I)));if(0>this.l(S)&&0>I.l(S))return p(this.m()*I.m());for(var L=this.g.length+I.g.length,j=[],A=0;A<2*L;A++)j[A]=0;for(A=0;A<this.g.length;A++)for(var P=0;P<I.g.length;P++){var M=this.i(A)>>>16,z=this.i(A)&65535,me=I.i(P)>>>16,Oe=I.i(P)&65535;j[2*A+2*P]+=z*Oe,E(j,2*A+2*P),j[2*A+2*P+1]+=M*Oe,E(j,2*A+2*P+1),j[2*A+2*P+1]+=z*me,E(j,2*A+2*P+1),j[2*A+2*P+2]+=M*me,E(j,2*A+2*P+2)}for(A=0;A<L;A++)j[A]=j[2*A+1]<<16|j[2*A];for(A=L;A<2*L;A++)j[A]=0;return new d(j,0)};function E(I,L){for(;(I[L]&65535)!=I[L];)I[L+1]+=I[L]>>>16,I[L]&=65535,L++}function B(I,L){this.g=I,this.h=L}function Y(I,L){if(C(L))throw Error("division by zero");if(C(I))return new B(v,v);if(F(I))return L=Y(T(I),L),new B(T(L.g),T(L.h));if(F(L))return L=Y(I,T(L)),new B(T(L.g),L.h);if(30<I.g.length){if(F(I)||F(L))throw Error("slowDivide_ only works with positive integers.");for(var j=w,A=L;0>=A.l(I);)j=W(j),A=W(A);var P=$(j,1),M=$(A,1);for(A=$(A,2),j=$(j,2);!C(A);){var z=M.add(A);0>=z.l(I)&&(P=P.add(j),M=z),A=$(A,1),j=$(j,1)}return L=V(I,P.j(L)),new B(P,L)}for(P=v;0<=I.l(L);){for(j=Math.max(1,Math.floor(I.m()/L.m())),A=Math.ceil(Math.log(j)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),M=p(j),z=M.j(L);F(z)||0<z.l(I);)j-=A,M=p(j),z=M.j(L);C(M)&&(M=w),P=P.add(M),I=V(I,z)}return new B(P,I)}r.A=function(I){return Y(this,I).h},r.and=function(I){for(var L=Math.max(this.g.length,I.g.length),j=[],A=0;A<L;A++)j[A]=this.i(A)&I.i(A);return new d(j,this.h&I.h)},r.or=function(I){for(var L=Math.max(this.g.length,I.g.length),j=[],A=0;A<L;A++)j[A]=this.i(A)|I.i(A);return new d(j,this.h|I.h)},r.xor=function(I){for(var L=Math.max(this.g.length,I.g.length),j=[],A=0;A<L;A++)j[A]=this.i(A)^I.i(A);return new d(j,this.h^I.h)};function W(I){for(var L=I.g.length+1,j=[],A=0;A<L;A++)j[A]=I.i(A)<<1|I.i(A-1)>>>31;return new d(j,I.h)}function $(I,L){var j=L>>5;L%=32;for(var A=I.g.length-j,P=[],M=0;M<A;M++)P[M]=0<L?I.i(M+j)>>>L|I.i(M+j+1)<<32-L:I.i(M+j);return new d(P,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,bj=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=y,ai=d}).apply(typeof Fw<"u"?Fw:typeof self<"u"?self:typeof window<"u"?window:{});var Nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vj,Jc,wj,Mh,qp,_j,Nj,jj;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,b,N){return f==Array.prototype||f==Object.prototype||(f[b]=N.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nh=="object"&&Nh];for(var b=0;b<f.length;++b){var N=f[b];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var s=t(this);function l(f,b){if(b)e:{var N=s;f=f.split(".");for(var O=0;O<f.length-1;O++){var J=f[O];if(!(J in N))break e;N=N[J]}f=f[f.length-1],O=N[f],b=b(O),b!=O&&b!=null&&e(N,f,{configurable:!0,writable:!0,value:b})}}function c(f,b){f instanceof String&&(f+="");var N=0,O=!1,J={next:function(){if(!O&&N<f.length){var se=N++;return{value:b(se,f[se]),done:!1}}return O=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}l("Array.prototype.values",function(f){return f||function(){return c(this,function(b,N){return N})}});var d=d||{},h=this||self;function g(f){var b=typeof f;return b=b!="object"?b:f?Array.isArray(f)?"array":b:"null",b=="array"||b=="object"&&typeof f.length=="number"}function p(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function y(f,b,N){return f.call.apply(f.bind,arguments)}function v(f,b,N){if(!f)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,O),f.apply(b,J)}}return function(){return f.apply(b,arguments)}}function w(f,b,N){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,w.apply(null,arguments)}function S(f,b){var N=Array.prototype.slice.call(arguments,1);return function(){var O=N.slice();return O.push.apply(O,arguments),f.apply(this,O)}}function C(f,b){function N(){}N.prototype=b.prototype,f.aa=b.prototype,f.prototype=new N,f.prototype.constructor=f,f.Qb=function(O,J,se){for(var ve=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)ve[ut-2]=arguments[ut];return b.prototype[J].apply(O,ve)}}function F(f){const b=f.length;if(0<b){const N=Array(b);for(let O=0;O<b;O++)N[O]=f[O];return N}return[]}function T(f,b){for(let N=1;N<arguments.length;N++){const O=arguments[N];if(g(O)){const J=f.length||0,se=O.length||0;f.length=J+se;for(let ve=0;ve<se;ve++)f[J+ve]=O[ve]}else f.push(O)}}class V{constructor(b,N){this.i=b,this.j=N,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function E(f){return/^[\s\xa0]*$/.test(f)}function B(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function Y(f){return Y[" "](f),f}Y[" "]=function(){};var W=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function $(f,b,N){for(const O in f)b.call(N,f[O],O,f)}function I(f,b){for(const N in f)b.call(void 0,f[N],N,f)}function L(f){const b={};for(const N in f)b[N]=f[N];return b}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(f,b){let N,O;for(let J=1;J<arguments.length;J++){O=arguments[J];for(N in O)f[N]=O[N];for(let se=0;se<j.length;se++)N=j[se],Object.prototype.hasOwnProperty.call(O,N)&&(f[N]=O[N])}}function P(f){var b=1;f=f.split(":");const N=[];for(;0<b&&f.length;)N.push(f.shift()),b--;return f.length&&N.push(f.join(":")),N}function M(f){h.setTimeout(()=>{throw f},0)}function z(){var f=le;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class me{constructor(){this.h=this.g=null}add(b,N){const O=Oe.get();O.set(b,N),this.h?this.h.next=O:this.g=O,this.h=O}}var Oe=new V(()=>new H,f=>f.reset());class H{constructor(){this.next=this.g=this.h=null}set(b,N){this.h=b,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let U,re=!1,le=new me,pe=()=>{const f=h.Promise.resolve(void 0);U=()=>{f.then(D)}};var D=()=>{for(var f;f=z();){try{f.h.call(f.g)}catch(N){M(N)}var b=Oe;b.j(f),100>b.h&&(b.h++,f.next=b.g,b.g=f)}re=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ge=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const N=()=>{};h.addEventListener("test",N,b),h.removeEventListener("test",N,b)}catch{}return f})();function G(f,b){if(ae.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var N=this.type=f.type,O=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget){if(W){e:{try{Y(b.nodeName);var J=!0;break e}catch{}J=!1}J||(b=null)}}else N=="mouseover"?b=f.fromElement:N=="mouseout"&&(b=f.toElement);this.relatedTarget=b,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ce[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&G.aa.h.call(this)}}C(G,ae);var ce={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Te=0;function Se(f,b,N,O,J){this.listener=f,this.proxy=null,this.src=b,this.type=N,this.capture=!!O,this.ha=J,this.key=++Te,this.da=this.fa=!1}function He(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ge(f){this.src=f,this.g={},this.h=0}Ge.prototype.add=function(f,b,N,O,J){var se=f.toString();f=this.g[se],f||(f=this.g[se]=[],this.h++);var ve=Ve(f,b,O,J);return-1<ve?(b=f[ve],N||(b.fa=!1)):(b=new Se(b,this.src,se,!!O,J),b.fa=N,f.push(b)),b};function ye(f,b){var N=b.type;if(N in f.g){var O=f.g[N],J=Array.prototype.indexOf.call(O,b,void 0),se;(se=0<=J)&&Array.prototype.splice.call(O,J,1),se&&(He(b),f.g[N].length==0&&(delete f.g[N],f.h--))}}function Ve(f,b,N,O){for(var J=0;J<f.length;++J){var se=f[J];if(!se.da&&se.listener==b&&se.capture==!!N&&se.ha==O)return J}return-1}var Ae="closure_lm_"+(1e6*Math.random()|0),yt={};function Yt(f,b,N,O,J){if(Array.isArray(b)){for(var se=0;se<b.length;se++)Yt(f,b[se],N,O,J);return null}return N=Yu(N),f&&f[xe]?f.K(b,N,p(O)?!!O.capture:!1,J):fs(f,b,N,!1,O,J)}function fs(f,b,N,O,J,se){if(!b)throw Error("Invalid event type");var ve=p(J)?!!J.capture:!!J,ut=Vo(f);if(ut||(f[Ae]=ut=new Ge(f)),N=ut.add(b,N,O,ve,se),N.proxy)return N;if(O=ra(),N.proxy=O,O.src=f,O.listener=N,f.addEventListener)ge||(J=ve),J===void 0&&(J=!1),f.addEventListener(b.toString(),O,J);else if(f.attachEvent)f.attachEvent(hn(b.toString()),O);else if(f.addListener&&f.removeListener)f.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return N}function ra(){function f(N){return b.call(f.src,f.listener,N)}const b=Uo;return f}function na(f,b,N,O,J){if(Array.isArray(b))for(var se=0;se<b.length;se++)na(f,b[se],N,O,J);else O=p(O)?!!O.capture:!!O,N=Yu(N),f&&f[xe]?(f=f.i,b=String(b).toString(),b in f.g&&(se=f.g[b],N=Ve(se,N,O,J),-1<N&&(He(se[N]),Array.prototype.splice.call(se,N,1),se.length==0&&(delete f.g[b],f.h--)))):f&&(f=Vo(f))&&(b=f.g[b.toString()],f=-1,b&&(f=Ve(b,N,O,J)),(N=-1<f?b[f]:null)&&Pr(N))}function Pr(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[xe])ye(b.i,f);else{var N=f.type,O=f.proxy;b.removeEventListener?b.removeEventListener(N,O,f.capture):b.detachEvent?b.detachEvent(hn(N),O):b.addListener&&b.removeListener&&b.removeListener(O),(N=Vo(b))?(ye(N,f),N.h==0&&(N.src=null,b[Ae]=null)):He(f)}}}function hn(f){return f in yt?yt[f]:yt[f]="on"+f}function Uo(f,b){if(f.da)f=!0;else{b=new G(b,this);var N=f.listener,O=f.ha||f.src;f.fa&&Pr(f),f=N.call(O,b)}return f}function Vo(f){return f=f[Ae],f instanceof Ge?f:null}var dr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yu(f){return typeof f=="function"?f:(f[dr]||(f[dr]=function(b){return f.handleEvent(b)}),f[dr])}function Qt(){Q.call(this),this.i=new Ge(this),this.M=this,this.F=null}C(Qt,Q),Qt.prototype[xe]=!0,Qt.prototype.removeEventListener=function(f,b,N,O){na(this,f,b,N,O)};function tr(f,b){var N,O=f.F;if(O)for(N=[];O;O=O.F)N.push(O);if(f=f.M,O=b.type||b,typeof b=="string")b=new ae(b,f);else if(b instanceof ae)b.target=b.target||f;else{var J=b;b=new ae(O,f),A(b,J)}if(J=!0,N)for(var se=N.length-1;0<=se;se--){var ve=b.g=N[se];J=ms(ve,O,!0,b)&&J}if(ve=b.g=f,J=ms(ve,O,!0,b)&&J,J=ms(ve,O,!1,b)&&J,N)for(se=0;se<N.length;se++)ve=b.g=N[se],J=ms(ve,O,!1,b)&&J}Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var f=this.i,b;for(b in f.g){for(var N=f.g[b],O=0;O<N.length;O++)He(N[O]);delete f.g[b],f.h--}}this.F=null},Qt.prototype.K=function(f,b,N,O){return this.i.add(String(f),b,!1,N,O)},Qt.prototype.L=function(f,b,N,O){return this.i.add(String(f),b,!0,N,O)};function ms(f,b,N,O){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();for(var J=!0,se=0;se<b.length;++se){var ve=b[se];if(ve&&!ve.da&&ve.capture==N){var ut=ve.listener,zt=ve.ha||ve.src;ve.fa&&ye(f.i,ve),J=ut.call(zt,O)!==!1&&J}}return J&&!O.defaultPrevented}function Qu(f,b,N){if(typeof f=="function")N&&(f=w(f,N));else if(f&&typeof f.handleEvent=="function")f=w(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:h.setTimeout(f,b||0)}function zo(f){f.g=Qu(()=>{f.g=null,f.i&&(f.i=!1,zo(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class tm extends Q{constructor(b,N){super(),this.m=b,this.l=N,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:zo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _i(f){Q.call(this),this.h=f,this.g={}}C(_i,Q);var sa=[];function br(f){$(f.g,function(b,N){this.g.hasOwnProperty(N)&&Pr(b)},f),f.g={}}_i.prototype.N=function(){_i.aa.N.call(this),br(this)},_i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fn=h.JSON.stringify,Er=h.JSON.parse,rm=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function Fo(){}Fo.prototype.h=null;function Xu(f){return f.h||(f.h=f.i())}function Ni(){}var qn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function aa(){ae.call(this,"d")}C(aa,ae);function An(){ae.call(this,"c")}C(An,ae);var mn={},ia=null;function yl(){return ia=ia||new Qt}mn.La="serverreachability";function Bo(f){ae.call(this,mn.La,f)}C(Bo,ae);function gs(f){const b=yl();tr(b,new Bo(b))}mn.STAT_EVENT="statevent";function la(f,b){ae.call(this,mn.STAT_EVENT,f),this.stat=b}C(la,ae);function hr(f){const b=yl();tr(b,new la(b,f))}mn.Ma="timingevent";function qo(f,b){ae.call(this,mn.Ma,f),this.size=b}C(qo,ae);function oa(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},b)}function ca(){this.g=!0}ca.prototype.xa=function(){this.g=!1};function Ho(f,b,N,O,J,se){f.info(function(){if(f.g)if(se)for(var ve="",ut=se.split("&"),zt=0;zt<ut.length;zt++){var Ke=ut[zt].split("=");if(1<Ke.length){var nr=Ke[0];Ke=Ke[1];var sr=nr.split("_");ve=2<=sr.length&&sr[1]=="type"?ve+(nr+"="+Ke+"&"):ve+(nr+"=redacted&")}}else ve=null;else ve=se;return"XMLHTTP REQ ("+O+") [attempt "+J+"]: "+b+`
`+N+`
`+ve})}function $o(f,b,N,O,J,se,ve){f.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+J+"]: "+b+`
`+N+`
`+se+" "+ve})}function ps(f,b,N,O){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+Hn(f,N)+(O?" "+O:"")})}function Wu(f,b){f.info(function(){return"TIMEOUT: "+b})}ca.prototype.info=function(){};function Hn(f,b){if(!f.g)return b;if(!b)return null;try{var N=JSON.parse(b);if(N){for(f=0;f<N.length;f++)if(Array.isArray(N[f])){var O=N[f];if(!(2>O.length)){var J=O[1];if(Array.isArray(J)&&!(1>J.length)){var se=J[0];if(se!="noop"&&se!="stop"&&se!="close")for(var ve=1;ve<J.length;ve++)J[ve]=""}}}}return fn(N)}catch{return b}}var Ct={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function ua(){}C(ua,Fo),ua.prototype.g=function(){return new XMLHttpRequest},ua.prototype.i=function(){return{}},$n=new ua;function Gn(f,b,N,O){this.j=f,this.i=b,this.l=N,this.R=O||1,this.U=new _i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ju}function Ju(){this.i=null,this.g="",this.h=!1}var Go={},xs={};function ji(f,b,N){f.L=1,f.v=Si(Rt(b)),f.m=N,f.P=!0,ys(f,null)}function ys(f,b){f.F=Date.now(),Cn(f),f.A=Rt(f.v);var N=f.A,O=f.R;Array.isArray(O)||(O=[String(O)]),ws(N.i,"t",O),f.C=0,N=f.j.J,f.h=new Ju,f.g=md(f.j,N?b:null,!f.m),0<f.O&&(f.M=new tm(w(f.Y,f,f.g),f.O)),b=f.U,N=f.g,O=f.ca;var J="readystatechange";Array.isArray(J)||(J&&(sa[0]=J.toString()),J=sa);for(var se=0;se<J.length;se++){var ve=Yt(N,J[se],O||b.handleEvent,!1,b.h||b);if(!ve)break;b.g[ve.key]=ve}b=f.H?L(f.H):{},f.m?(f.u||(f.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,b)):(f.u="GET",f.g.ea(f.A,f.u,null,b)),gs(),Ho(f.i,f.u,f.A,f.l,f.R,f.m)}Gn.prototype.ca=function(f){f=f.target;const b=this.M;b&&Ar(f)==3?b.j():this.Y(f)},Gn.prototype.Y=function(f){try{if(f==this.g)e:{const sr=Ar(this.g);var b=this.g.Ba();const Na=this.g.Z();if(!(3>sr)&&(sr!=3||this.g&&(this.h.h||this.g.oa()||Ci(this.g)))){this.J||sr!=4||b==7||(b==8||0>=Na?gs(3):gs(2)),bl(this);var N=this.g.Z();this.X=N;t:if(bs(this)){var O=Ci(this.g);f="";var J=O.length,se=Ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sr(this),da(this);var ve="";break t}this.h.i=new h.TextDecoder}for(b=0;b<J;b++)this.h.h=!0,f+=this.h.i.decode(O[b],{stream:!(se&&b==J-1)});O.length=0,this.h.g+=f,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=N==200,$o(this.i,this.u,this.A,this.l,this.R,sr,N),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,zt=this.g;if((ut=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ut)){var Ke=ut;break t}}Ke=null}if(N=Ke)ps(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kn(this,N);else{this.o=!1,this.s=3,hr(12),Sr(this),da(this);break e}}if(this.P){N=!0;let Ur;for(;!this.J&&this.C<ve.length;)if(Ur=ki(this,ve),Ur==xs){sr==4&&(this.s=4,hr(14),N=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(Ur==Go){this.s=4,hr(15),ps(this.i,this.l,ve,"[Invalid Chunk]"),N=!1;break}else ps(this.i,this.l,Ur,null),Kn(this,Ur);if(bs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sr!=4||ve.length!=0||this.h.h||(this.s=1,hr(16),N=!1),this.o=this.o&&N,!N)ps(this.i,this.l,ve,"[Invalid Chunked Response]"),Sr(this),da(this);else if(0<ve.length&&!this.W){this.W=!0;var nr=this.j;nr.g==this&&nr.ba&&!nr.M&&(nr.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),nc(nr),nr.M=!0,hr(11))}}else ps(this.i,this.l,ve,null),Kn(this,ve);sr==4&&Sr(this),this.o&&!this.J&&(sr==4?dd(this.j,this):(this.o=!1,Cn(this)))}else ad(this.g),N==400&&0<ve.indexOf("Unknown SID")?(this.s=3,hr(12)):(this.s=0,hr(13)),Sr(this),da(this)}}}catch{}finally{}};function bs(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ki(f,b){var N=f.C,O=b.indexOf(`
`,N);return O==-1?xs:(N=Number(b.substring(N,O)),isNaN(N)?Go:(O+=1,O+N>b.length?xs:(b=b.slice(O,O+N),f.C=O+N,b)))}Gn.prototype.cancel=function(){this.J=!0,Sr(this)};function Cn(f){f.S=Date.now()+f.I,Ot(f,f.I)}function Ot(f,b){if(f.B!=null)throw Error("WatchDog timer not null");f.B=oa(w(f.ba,f),b)}function bl(f){f.B&&(h.clearTimeout(f.B),f.B=null)}Gn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Wu(this.i,this.A),this.L!=2&&(gs(),hr(17)),Sr(this),this.s=2,da(this)):Ot(this,this.S-f)};function da(f){f.j.G==0||f.J||dd(f.j,f)}function Sr(f){bl(f);var b=f.M;b&&typeof b.ma=="function"&&b.ma(),f.M=null,br(f.U),f.g&&(b=f.g,f.g=null,b.abort(),b.ma())}function Kn(f,b){try{var N=f.j;if(N.G!=0&&(N.g==f||ha(N.h,f))){if(!f.K&&ha(N.h,f)&&N.G==3){try{var O=N.Da.g.parse(b)}catch{O=null}if(Array.isArray(O)&&O.length==3){var J=O;if(J[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<f.F)wa(N),va(N);else break e;rc(N),hr(18)}}else N.za=J[1],0<N.za-N.T&&37500>J[2]&&N.F&&N.v==0&&!N.C&&(N.C=oa(w(N.Za,N),6e3));if(1>=Zu(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else Ns(N,11)}else if((f.K||N.g==f)&&wa(N),!E(b))for(J=N.Da.g.parse(b),b=0;b<J.length;b++){let Ke=J[b];if(N.T=Ke[0],Ke=Ke[1],N.G==2)if(Ke[0]=="c"){N.K=Ke[1],N.ia=Ke[2];const nr=Ke[3];nr!=null&&(N.la=nr,N.j.info("VER="+N.la));const sr=Ke[4];sr!=null&&(N.Aa=sr,N.j.info("SVER="+N.Aa));const Na=Ke[5];Na!=null&&typeof Na=="number"&&0<Na&&(O=1.5*Na,N.L=O,N.j.info("backChannelRequestTimeoutMs_="+O)),O=N;const Ur=f.g;if(Ur){const Di=Ur.g?Ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Di){var se=O.h;se.g||Di.indexOf("spdy")==-1&&Di.indexOf("quic")==-1&&Di.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(fa(se,se.h),se.h=null))}if(O.D){const js=Ur.g?Ur.g.getResponseHeader("X-HTTP-Session-Id"):null;js&&(O.ya=js,it(O.I,O.D,js))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-f.F,N.j.info("Handshake RTT: "+N.R+"ms")),O=N;var ve=f;if(O.qa=fd(O,O.J?O.ia:null,O.W),ve.K){gn(O.h,ve);var ut=ve,zt=O.L;zt&&(ut.I=zt),ut.B&&(bl(ut),Cn(ut)),O.g=ve}else cd(O);0<N.i.length&&Sl(N)}else Ke[0]!="stop"&&Ke[0]!="close"||Ns(N,7);else N.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Ns(N,7):ec(N):Ke[0]!="noop"&&N.l&&N.l.ta(Ke),N.v=0)}}gs(4)}catch{}}var nm=class{constructor(f,b){this.g=f,this.map=b}};function Ko(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yo(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Zu(f){return f.h?1:f.g?f.g.size:0}function ha(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function fa(f,b){f.g?f.g.add(b):f.h=b}function gn(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}Ko.prototype.cancel=function(){if(this.i=Tr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Tr(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const N of f.g.values())b=b.concat(N.D);return b}return F(f.i)}function ed(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(g(f)){for(var b=[],N=f.length,O=0;O<N;O++)b.push(f[O]);return b}b=[],N=0;for(O in f)b[N++]=f[O];return b}function sm(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(g(f)||typeof f=="string"){var b=[];f=f.length;for(var N=0;N<f;N++)b.push(N);return b}b=[],N=0;for(const O in f)b[N++]=O;return b}}}function vl(f,b){if(f.forEach&&typeof f.forEach=="function")f.forEach(b,void 0);else if(g(f)||typeof f=="string")Array.prototype.forEach.call(f,b,void 0);else for(var N=sm(f),O=ed(f),J=O.length,se=0;se<J;se++)b.call(void 0,O[se],N&&N[se],f)}var Qo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wl(f,b){if(f){f=f.split("&");for(var N=0;N<f.length;N++){var O=f[N].indexOf("="),J=null;if(0<=O){var se=f[N].substring(0,O);J=f[N].substring(O+1)}else se=f[N];b(se,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function vs(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof vs){this.h=f.h,ma(this,f.j),this.o=f.o,this.g=f.g,Ei(this,f.s),this.l=f.l;var b=f.i,N=new Yn;N.i=b.i,b.g&&(N.g=new Map(b.g),N.h=b.h),_l(this,N),this.m=f.m}else f&&(b=String(f).match(Qo))?(this.h=!1,ma(this,b[1]||"",!0),this.o=ga(b[2]||""),this.g=ga(b[3]||"",!0),Ei(this,b[4]),this.l=ga(b[5]||"",!0),_l(this,b[6]||"",!0),this.m=ga(b[7]||"")):(this.h=!1,this.i=new Yn(null,this.h))}vs.prototype.toString=function(){var f=[],b=this.j;b&&f.push(pn(b,Xo,!0),":");var N=this.g;return(N||b=="file")&&(f.push("//"),(b=this.o)&&f.push(pn(b,Xo,!0),"@"),f.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&f.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&f.push("/"),f.push(pn(N,N.charAt(0)=="/"?Wo:td,!0))),(N=this.i.toString())&&f.push("?",N),(N=this.m)&&f.push("#",pn(N,lm)),f.join("")};function Rt(f){return new vs(f)}function ma(f,b,N){f.j=N?ga(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function Ei(f,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);f.s=b}else f.s=null}function _l(f,b,N){b instanceof Yn?(f.i=b,rd(f.i,f.h)):(N||(b=pn(b,im)),f.i=new Yn(b,f.h))}function it(f,b,N){f.i.set(b,N)}function Si(f){return it(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ga(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function pn(f,b,N){return typeof f=="string"?(f=encodeURI(f).replace(b,am),N&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function am(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Xo=/[#\/\?@]/g,td=/[#\?:]/g,Wo=/[#\?]/g,im=/[#\?@]/g,lm=/#/g;function Yn(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function rr(f){f.g||(f.g=new Map,f.h=0,f.i&&wl(f.i,function(b,N){f.add(decodeURIComponent(b.replace(/\+/g," ")),N)}))}r=Yn.prototype,r.add=function(f,b){rr(this),this.i=null,f=Xr(this,f);var N=this.g.get(f);return N||this.g.set(f,N=[]),N.push(b),this.h+=1,this};function Nl(f,b){rr(f),b=Xr(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function jl(f,b){return rr(f),b=Xr(f,b),f.g.has(b)}r.forEach=function(f,b){rr(this),this.g.forEach(function(N,O){N.forEach(function(J){f.call(b,J,O,this)},this)},this)},r.na=function(){rr(this);const f=Array.from(this.g.values()),b=Array.from(this.g.keys()),N=[];for(let O=0;O<b.length;O++){const J=f[O];for(let se=0;se<J.length;se++)N.push(b[O])}return N},r.V=function(f){rr(this);let b=[];if(typeof f=="string")jl(this,f)&&(b=b.concat(this.g.get(Xr(this,f))));else{f=Array.from(this.g.values());for(let N=0;N<f.length;N++)b=b.concat(f[N])}return b},r.set=function(f,b){return rr(this),this.i=null,f=Xr(this,f),jl(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},r.get=function(f,b){return f?(f=this.V(f),0<f.length?String(f[0]):b):b};function ws(f,b,N){Nl(f,b),0<N.length&&(f.i=null,f.g.set(Xr(f,b),F(N)),f.h+=N.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(var N=0;N<b.length;N++){var O=b[N];const se=encodeURIComponent(String(O)),ve=this.V(O);for(O=0;O<ve.length;O++){var J=se;ve[O]!==""&&(J+="="+encodeURIComponent(String(ve[O]))),f.push(J)}}return this.i=f.join("&")};function Xr(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function rd(f,b){b&&!f.j&&(rr(f),f.i=null,f.g.forEach(function(N,O){var J=O.toLowerCase();O!=J&&(Nl(this,O),ws(this,J,N))},f)),f.j=b}function Jo(f,b){const N=new ca;if(h.Image){const O=new Image;O.onload=S(Lr,N,"TestLoadImage: loaded",!0,b,O),O.onerror=S(Lr,N,"TestLoadImage: error",!1,b,O),O.onabort=S(Lr,N,"TestLoadImage: abort",!1,b,O),O.ontimeout=S(Lr,N,"TestLoadImage: timeout",!1,b,O),h.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=f}else b(!1)}function nd(f,b){const N=new ca,O=new AbortController,J=setTimeout(()=>{O.abort(),Lr(N,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:O.signal}).then(se=>{clearTimeout(J),se.ok?Lr(N,"TestPingServer: ok",!0,b):Lr(N,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(J),Lr(N,"TestPingServer: error",!1,b)})}function Lr(f,b,N,O,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),O(N)}catch{}}function Rn(){this.g=new rm}function Zo(f,b,N){const O=N||"";try{vl(f,function(J,se){let ve=J;p(J)&&(ve=fn(J)),b.push(O+se+"="+encodeURIComponent(ve))})}catch(J){throw b.push(O+"type="+encodeURIComponent("_badmap")),J}}function Qn(f){this.l=f.Ub||null,this.j=f.eb||!1}C(Qn,Fo),Qn.prototype.g=function(){return new Wr(this.l,this.j)},Qn.prototype.i=(function(f){return function(){return f}})({});function Wr(f,b){Qt.call(this),this.D=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Wr,Qt),r=Wr.prototype,r.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=b,this.readyState=1,pa(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(b.body=f),(this.D||h).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xn(this)),this.readyState=0},r.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,pa(this)),this.g&&(this.readyState=3,pa(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kl(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function kl(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}r.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?Xn(this):pa(this),this.readyState==3&&kl(this)}},r.Ra=function(f){this.g&&(this.response=this.responseText=f,Xn(this))},r.Qa=function(f){this.g&&(this.response=f,Xn(this))},r.ga=function(){this.g&&Xn(this)};function Xn(f){f.readyState=4,f.l=null,f.j=null,f.v=null,pa(f)}r.setRequestHeader=function(f,b){this.u.append(f,b)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var N=b.next();!N.done;)N=N.value,f.push(N[0]+": "+N[1]),N=b.next();return f.join(`\r
`)};function pa(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ti(f){let b="";return $(f,function(N,O){b+=O,b+=":",b+=N,b+=`\r
`}),b}function xa(f,b,N){e:{for(O in N){var O=!1;break e}O=!0}O||(N=Ti(N),typeof f=="string"?N!=null&&encodeURIComponent(String(N)):it(f,b,N))}function wt(f){Qt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(wt,Qt);var vr=/^https?$/i,_s=["POST","PUT"];r=wt.prototype,r.Ha=function(f){this.J=f},r.ea=function(f,b,N,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?Xu(this.o):Xu($n),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(se){Ai(this,se);return}if(f=N||"",N=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var J in O)N.set(J,O[J]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const se of O.keys())N.set(se,O.get(se));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(N.keys()).find(se=>se.toLowerCase()=="content-type"),J=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(_s,b,void 0))||O||J||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,ve]of N)this.g.setRequestHeader(se,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{El(this),this.u=!0,this.g.send(f),this.u=!1}catch(se){Ai(this,se)}};function Ai(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.m=5,ya(f),ba(f)}function ya(f){f.A||(f.A=!0,tr(f,"complete"),tr(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,tr(this,"complete"),tr(this,"abort"),ba(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ba(this,!0)),wt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?sd(this):this.bb())},r.bb=function(){sd(this)};function sd(f){if(f.h&&typeof d<"u"&&(!f.v[1]||Ar(f)!=4||f.Z()!=2)){if(f.u&&Ar(f)==4)Qu(f.Ea,0,f);else if(tr(f,"readystatechange"),Ar(f)==4){f.h=!1;try{const ve=f.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var N;if(!(N=b)){var O;if(O=ve===0){var J=String(f.D).match(Qo)[1]||null;!J&&h.self&&h.self.location&&(J=h.self.location.protocol.slice(0,-1)),O=!vr.test(J?J.toLowerCase():"")}N=O}if(N)tr(f,"complete"),tr(f,"success");else{f.m=6;try{var se=2<Ar(f)?f.g.statusText:""}catch{se=""}f.l=se+" ["+f.Z()+"]",ya(f)}}finally{ba(f)}}}}function ba(f,b){if(f.g){El(f);const N=f.g,O=f.v[0]?()=>{}:null;f.g=null,f.v=null,b||tr(f,"ready");try{N.onreadystatechange=O}catch{}}}function El(f){f.I&&(h.clearTimeout(f.I),f.I=null)}r.isActive=function(){return!!this.g};function Ar(f){return f.g?f.g.readyState:0}r.Z=function(){try{return 2<Ar(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),Er(b)}};function Ci(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ad(f){const b={};f=(f.g&&2<=Ar(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<f.length;O++){if(E(f[O]))continue;var N=P(f[O]);const J=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const se=b[J]||[];b[J]=se,se.push(N)}I(b,function(O){return O.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ri(f,b,N){return N&&N.internalChannelParams&&N.internalChannelParams[f]||b}function id(f){this.Aa=0,this.i=[],this.j=new ca,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ri("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ri("baseRetryDelayMs",5e3,f),this.cb=Ri("retryDelaySeedMs",1e4,f),this.Wa=Ri("forwardChannelMaxRetries",2,f),this.wa=Ri("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Ko(f&&f.concurrentRequestLimit),this.Da=new Rn,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=id.prototype,r.la=8,r.G=1,r.connect=function(f,b,N,O){hr(0),this.W=f,this.H=b||{},N&&O!==void 0&&(this.H.OSID=N,this.H.OAID=O),this.F=this.X,this.I=fd(this,null,this.W),Sl(this)};function ec(f){if(ld(f),f.G==3){var b=f.U++,N=Rt(f.I);if(it(N,"SID",f.K),it(N,"RID",b),it(N,"TYPE","terminate"),Ii(f,N),b=new Gn(f,f.j,b),b.L=2,b.v=Si(Rt(N)),N=!1,h.navigator&&h.navigator.sendBeacon)try{N=h.navigator.sendBeacon(b.v.toString(),"")}catch{}!N&&h.Image&&(new Image().src=b.v,N=!0),N||(b.g=md(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Cn(b)}sc(f)}function va(f){f.g&&(nc(f),f.g.cancel(),f.g=null)}function ld(f){va(f),f.u&&(h.clearTimeout(f.u),f.u=null),wa(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function Sl(f){if(!Yo(f.h)&&!f.s){f.s=!0;var b=f.Ga;U||pe(),re||(U(),re=!0),le.add(b,f),f.B=0}}function om(f,b){return Zu(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=b.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=oa(w(f.Ga,f,b),hd(f,f.B)),f.B++,!0)}r.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const J=new Gn(this,this.j,f);let se=this.o;if(this.S&&(se?(se=L(se),A(se,this.S)):se=this.S),this.m!==null||this.O||(J.H=se,se=null),this.P)e:{for(var b=0,N=0;N<this.i.length;N++){t:{var O=this.i[N];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(b+=O,4096<b){b=N;break e}if(b===4096||N===this.i.length-1){b=N+1;break e}}b=1e3}else b=1e3;b=tc(this,J,b),N=Rt(this.I),it(N,"RID",f),it(N,"CVER",22),this.D&&it(N,"X-HTTP-Session-Id",this.D),Ii(this,N),se&&(this.O?b="headers="+encodeURIComponent(String(Ti(se)))+"&"+b:this.m&&xa(N,this.m,se)),fa(this.h,J),this.Ua&&it(N,"TYPE","init"),this.P?(it(N,"$req",b),it(N,"SID","null"),J.T=!0,ji(J,N,null)):ji(J,N,b),this.G=2}}else this.G==3&&(f?od(this,f):this.i.length==0||Yo(this.h)||od(this))};function od(f,b){var N;b?N=b.l:N=f.U++;const O=Rt(f.I);it(O,"SID",f.K),it(O,"RID",N),it(O,"AID",f.T),Ii(f,O),f.m&&f.o&&xa(O,f.m,f.o),N=new Gn(f,f.j,N,f.B+1),f.m===null&&(N.H=f.o),b&&(f.i=b.D.concat(f.i)),b=tc(f,N,1e3),N.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),fa(f.h,N),ji(N,O,b)}function Ii(f,b){f.H&&$(f.H,function(N,O){it(b,O,N)}),f.l&&vl({},function(N,O){it(b,O,N)})}function tc(f,b,N){N=Math.min(f.i.length,N);var O=f.l?w(f.l.Na,f.l,f):null;e:{var J=f.i;let se=-1;for(;;){const ve=["count="+N];se==-1?0<N?(se=J[0].g,ve.push("ofs="+se)):se=0:ve.push("ofs="+se);let ut=!0;for(let zt=0;zt<N;zt++){let Ke=J[zt].g;const nr=J[zt].map;if(Ke-=se,0>Ke)se=Math.max(0,J[zt].g-100),ut=!1;else try{Zo(nr,ve,"req"+Ke+"_")}catch{O&&O(nr)}}if(ut){O=ve.join("&");break e}}}return f=f.i.splice(0,N),b.D=f,O}function cd(f){if(!f.g&&!f.u){f.Y=1;var b=f.Fa;U||pe(),re||(U(),re=!0),le.add(b,f),f.v=0}}function rc(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=oa(w(f.Fa,f),hd(f,f.v)),f.v++,!0)}r.Fa=function(){if(this.u=null,ud(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=oa(w(this.ab,this),f)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hr(10),va(this),ud(this))};function nc(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function ud(f){f.g=new Gn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var b=Rt(f.qa);it(b,"RID","rpc"),it(b,"SID",f.K),it(b,"AID",f.T),it(b,"CI",f.F?"0":"1"),!f.F&&f.ja&&it(b,"TO",f.ja),it(b,"TYPE","xmlhttp"),Ii(f,b),f.m&&f.o&&xa(b,f.m,f.o),f.L&&(f.g.I=f.L);var N=f.g;f=f.ia,N.L=1,N.v=Si(Rt(b)),N.m=null,N.P=!0,ys(N,f)}r.Za=function(){this.C!=null&&(this.C=null,va(this),rc(this),hr(19))};function wa(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function dd(f,b){var N=null;if(f.g==b){wa(f),nc(f),f.g=null;var O=2}else if(ha(f.h,b))N=b.D,gn(f.h,b),O=1;else return;if(f.G!=0){if(b.o)if(O==1){N=b.m?b.m.length:0,b=Date.now()-b.F;var J=f.B;O=yl(),tr(O,new qo(O,N)),Sl(f)}else cd(f);else if(J=b.s,J==3||J==0&&0<b.X||!(O==1&&om(f,b)||O==2&&rc(f)))switch(N&&0<N.length&&(b=f.h,b.i=b.i.concat(N)),J){case 1:Ns(f,5);break;case 4:Ns(f,10);break;case 3:Ns(f,6);break;default:Ns(f,2)}}}function hd(f,b){let N=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(N*=2),N*b}function Ns(f,b){if(f.j.info("Error code "+b),b==2){var N=w(f.fb,f),O=f.Xa;const J=!O;O=new vs(O||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ma(O,"https"),Si(O),J?Jo(O.toString(),N):nd(O.toString(),N)}else hr(2);f.G=0,f.l&&f.l.sa(b),sc(f),ld(f)}r.fb=function(f){f?(this.j.info("Successfully pinged google.com"),hr(2)):(this.j.info("Failed to ping google.com"),hr(1))};function sc(f){if(f.G=0,f.ka=[],f.l){const b=Tr(f.h);(b.length!=0||f.i.length!=0)&&(T(f.ka,b),T(f.ka,f.i),f.h.i.length=0,F(f.i),f.i.length=0),f.l.ra()}}function fd(f,b,N){var O=N instanceof vs?Rt(N):new vs(N);if(O.g!="")b&&(O.g=b+"."+O.g),Ei(O,O.s);else{var J=h.location;O=J.protocol,b=b?b+"."+J.hostname:J.hostname,J=+J.port;var se=new vs(null);O&&ma(se,O),b&&(se.g=b),J&&Ei(se,J),N&&(se.l=N),O=se}return N=f.D,b=f.ya,N&&b&&it(O,N,b),it(O,"VER",f.la),Ii(f,O),O}function md(f,b,N){if(b&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Ca&&!f.pa?new wt(new Qn({eb:N})):new wt(f.pa),b.Ha(f.J),b}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function gd(){}r=gd.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Tl(){}Tl.prototype.g=function(f,b){return new Cr(f,b)};function Cr(f,b){Qt.call(this),this.g=new id(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(f?f["X-WebChannel-Client-Profile"]=b.va:f={"X-WebChannel-Client-Profile":b.va}),this.g.S=f,(f=b&&b.Sb)&&!E(f)&&(this.g.m=f),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!E(b)&&(this.g.D=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new _a(this)}C(Cr,Qt),Cr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cr.prototype.close=function(){ec(this.g)},Cr.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var N={};N.__data__=f,f=N}else this.u&&(N={},N.__data__=fn(f),f=N);b.i.push(new nm(b.Ya++,f)),b.G==3&&Sl(b)},Cr.prototype.N=function(){this.g.l=null,delete this.j,ec(this.g),delete this.g,Cr.aa.N.call(this)};function pd(f){aa.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const N in b){f=N;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}C(pd,aa);function xd(){An.call(this),this.status=1}C(xd,An);function _a(f){this.g=f}C(_a,gd),_a.prototype.ua=function(){tr(this.g,"a")},_a.prototype.ta=function(f){tr(this.g,new pd(f))},_a.prototype.sa=function(f){tr(this.g,new xd)},_a.prototype.ra=function(){tr(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Cr.prototype.send=Cr.prototype.o,Cr.prototype.open=Cr.prototype.m,Cr.prototype.close=Cr.prototype.close,jj=function(){return new Tl},Nj=function(){return yl()},_j=mn,qp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ct.NO_ERROR=0,Ct.TIMEOUT=8,Ct.HTTP_ERROR=6,Mh=Ct,fr.COMPLETE="complete",wj=fr,Ni.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,Jc=Ni,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,vj=wt}).apply(typeof Nh<"u"?Nh:typeof self<"u"?self:typeof window<"u"?window:{});const Bw="@firebase/firestore",qw="4.9.0";class Nr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let Ro="12.0.0";const tl=new Nf("@firebase/firestore");function ho(){return tl.logLevel}function je(r,...e){if(tl.logLevel<=Ze.DEBUG){const t=e.map(E0);tl.debug(`Firestore (${Ro}): ${r}`,...t)}}function Ws(r,...e){if(tl.logLevel<=Ze.ERROR){const t=e.map(E0);tl.error(`Firestore (${Ro}): ${r}`,...t)}}function rl(r,...e){if(tl.logLevel<=Ze.WARN){const t=e.map(E0);tl.warn(`Firestore (${Ro}): ${r}`,...t)}}function E0(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Le(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,kj(r,s,t)}function kj(r,e,t){let s=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ws(s),new Error(s)}function dt(r,e,t,s){let l="Unexpected state";typeof t=="string"?l=t:s=t,r||kj(e,l,s)}function Be(r,e){return r}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ej{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Nr.UNAUTHENTICATED)))}shutdown(){}}class uR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class dR{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0,42304);let s=this.i;const l=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let c=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new $s,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},h=g=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>h(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?h(g):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new $s)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(dt(typeof s.accessToken=="string",31837,{l:s}),new Ej(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new Nr(e)}}class hR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new hR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Nr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dt(this.o===void 0,3512);const s=c=>{c.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,je("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const l=c=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Hw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function gR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class jf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=gR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<t&&(s+=e.charAt(l[c]%62))}return s}}function et(r,e){return r<e?-1:r>e?1:0}function Hp(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const l=r.charAt(s),c=e.charAt(s);if(l!==c)return xp(l)===xp(c)?et(l,c):xp(l)?1:-1}return et(r.length,e.length)}const pR=55296,xR=57343;function xp(r){const e=r.charCodeAt(0);return e>=pR&&e<=xR}function No(r,e,t){return r.length===e.length&&r.every(((s,l)=>t(s,e[l])))}const $w="__name__";class ts{constructor(e,t,s){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Le(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ts.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ts?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let l=0;l<s;l++){const c=ts.compareSegments(e.get(l),t.get(l));if(c!==0)return c}return et(e.length,t.length)}static compareSegments(e,t){const s=ts.isNumericId(e),l=ts.isNumericId(t);return s&&!l?-1:!s&&l?1:s&&l?ts.extractNumericId(e).compare(ts.extractNumericId(t)):Hp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ai.fromString(e.substring(4,e.length-2))}}class vt extends ts{construct(e,t,s){return new vt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((l=>l.length>0)))}return new vt(t)}static emptyPath(){return new vt([])}}const yR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class or extends ts{construct(e,t,s){return new or(e,t,s)}static isValidIdentifier(e){return yR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),or.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$w}static keyField(){return new or([$w])}static fromServerFormat(e){const t=[];let s="",l=0;const c=()=>{if(s.length===0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;l<e.length;){const h=e[l];if(h==="\\"){if(l+1===e.length)throw new Ne(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ne(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,l+=2}else h==="`"?(d=!d,l++):h!=="."||d?(s+=h,l++):(c(),l++)}if(c(),d)throw new Ne(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new or(t)}static emptyPath(){return new or([])}}class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(vt.fromString(e))}static fromName(e){return new Ce(vt.fromString(e).popFirst(5))}static empty(){return new Ce(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new vt(e.slice()))}}function Tj(r,e,t){if(!t)throw new Ne(ue.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Aj(r,e,t,s){if(e===!0&&s===!0)throw new Ne(ue.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Gw(r){if(!Ce.isDocumentKey(r))throw new Ne(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Kw(r){if(Ce.isDocumentKey(r))throw new Ne(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Cj(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function kf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Le(12329,{type:typeof r})}function Or(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Ne(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kf(r);throw new Ne(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function Kt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ru(r,e){if(!Cj(r))throw new Ne(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const l=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){t=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new Ne(ue.INVALID_ARGUMENT,t);return!0}const Yw=-62135596800,Qw=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Qw);return new De(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Yw)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qw}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ru(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Yw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:Kt("string",De._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new De(0,0))}static max(){return new ze(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const xu=-1;function bR(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=ze.fromTimestamp(s===1e9?new De(t+1,0):new De(t,s));return new ui(l,Ce.empty(),e)}function vR(r){return new ui(r.readTime,r.key,xu)}class ui{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ui(ze.min(),Ce.empty(),xu)}static max(){return new ui(ze.max(),Ce.empty(),xu)}}function wR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(r.documentKey,e.documentKey),t!==0?t:et(r.largestBatchId,e.largestBatchId))}const _R="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Io(r){if(r.code!==ue.FAILED_PRECONDITION||r.message!==_R)throw r;je("LocalStore","Unexpectedly lost primary lease")}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):he.reject(t)}static resolve(e){return new he(((t,s)=>{t(e)}))}static reject(e){return new he(((t,s)=>{s(e)}))}static waitFor(e){return new he(((t,s)=>{let l=0,c=0,d=!1;e.forEach((h=>{++l,h.next((()=>{++c,d&&c===l&&t()}),(g=>s(g)))})),d=!0,c===l&&t()}))}static or(e){let t=he.resolve(!1);for(const s of e)t=t.next((l=>l?he.resolve(l):s()));return t}static forEach(e,t){const s=[];return e.forEach(((l,c)=>{s.push(t.call(this,l,c))})),this.waitFor(s)}static mapArray(e,t){return new he(((s,l)=>{const c=e.length,d=new Array(c);let h=0;for(let g=0;g<c;g++){const p=g;t(e[p]).next((y=>{d[p]=y,++h,h===c&&s(d)}),(y=>l(y)))}}))}static doWhile(e,t){return new he(((s,l)=>{const c=()=>{e()===!0?t().next((()=>{c()}),l):s()};c()}))}}function jR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Do(r){return r.name==="IndexedDbTransactionError"}class Ef{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ef.ce=-1;const S0=-1;function Sf(r){return r==null}function Qh(r){return r===0&&1/r==-1/0}function kR(r){return typeof r=="number"&&Number.isInteger(r)&&!Qh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Rj="";function ER(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Xw(e)),e=SR(r.get(t),e);return Xw(e)}function SR(r,e){let t=e;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":t+="";break;case Rj:t+="";break;default:t+=c}}return t}function Xw(r){return r+Rj+""}function Ww(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function bi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Ij(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Tt{constructor(e,t){this.comparator=e,this.root=t||yr.EMPTY}insert(e,t){return new Tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yr.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(e,s.key);if(l===0)return t+s.left.size;l<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jh(this.root,e,this.comparator,!0)}}class jh{constructor(e,t,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yr{constructor(e,t,s,l,c){this.key=e,this.value=t,this.color=s??yr.RED,this.left=l??yr.EMPTY,this.right=c??yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,l,c){return new yr(e??this.key,t??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let l=this;const c=s(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,t,s),null):c===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return yr.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}yr.EMPTY=null,yr.RED=!0,yr.BLACK=!1;yr.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,s,l,c){return this}insert(e,t,s){return new yr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jw(this.data.getIterator())}getIteratorFrom(e){return new Jw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Jt(this.comparator);return t.data=e,t}}class Jw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class on{constructor(e){this.fields=e,e.sort(or.comparator)}static empty(){return new on([])}unionWith(e){let t=new Jt(or.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new on(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Dj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Dj("Invalid base64 string: "+c):c}})(e);return new cr(t)}static fromUint8Array(e){const t=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cr.EMPTY_BYTE_STRING=new cr("");const TR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(r){if(dt(!!r,39018),typeof r=="string"){let e=0;const t=TR.exec(r);if(dt(!!t,46558,{timestamp:r}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Lt(r.seconds),nanos:Lt(r.nanos)}}function Lt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function hi(r){return typeof r=="string"?cr.fromBase64String(r):cr.fromUint8Array(r)}const Oj="server_timestamp",Mj="__type__",Pj="__previous_value__",Lj="__local_write_time__";function T0(r){return(r?.mapValue?.fields||{})[Mj]?.stringValue===Oj}function Tf(r){const e=r.mapValue.fields[Pj];return T0(e)?Tf(e):e}function yu(r){const e=di(r.mapValue.fields[Lj].timestampValue);return new De(e.seconds,e.nanos)}class AR{constructor(e,t,s,l,c,d,h,g,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=y}}const Xh="(default)";class jo{constructor(e,t){this.projectId=e,this.database=t||Xh}static empty(){return new jo("","")}get isDefaultDatabase(){return this.database===Xh}isEqual(e){return e instanceof jo&&e.projectId===this.projectId&&e.database===this.database}}const Uj="__type__",CR="__max__",kh={mapValue:{}},Vj="__vector__",Wh="value";function fi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?T0(r)?4:IR(r)?9007199254740991:RR(r)?10:11:Le(28295,{value:r})}function os(r,e){if(r===e)return!0;const t=fi(r);if(t!==fi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return yu(r).isEqual(yu(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=di(l.timestampValue),h=di(c.timestampValue);return d.seconds===h.seconds&&d.nanos===h.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,c){return hi(l.bytesValue).isEqual(hi(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,c){return Lt(l.geoPointValue.latitude)===Lt(c.geoPointValue.latitude)&&Lt(l.geoPointValue.longitude)===Lt(c.geoPointValue.longitude)})(r,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Lt(l.integerValue)===Lt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=Lt(l.doubleValue),h=Lt(c.doubleValue);return d===h?Qh(d)===Qh(h):isNaN(d)&&isNaN(h)}return!1})(r,e);case 9:return No(r.arrayValue.values||[],e.arrayValue.values||[],os);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},h=c.mapValue.fields||{};if(Ww(d)!==Ww(h))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(h[g]===void 0||!os(d[g],h[g])))return!1;return!0})(r,e);default:return Le(52216,{left:r})}}function bu(r,e){return(r.values||[]).find((t=>os(t,e)))!==void 0}function ko(r,e){if(r===e)return 0;const t=fi(r),s=fi(e);if(t!==s)return et(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const h=Lt(c.integerValue||c.doubleValue),g=Lt(d.integerValue||d.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1})(r,e);case 3:return Zw(r.timestampValue,e.timestampValue);case 4:return Zw(yu(r),yu(e));case 5:return Hp(r.stringValue,e.stringValue);case 6:return(function(c,d){const h=hi(c),g=hi(d);return h.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const h=c.split("/"),g=d.split("/");for(let p=0;p<h.length&&p<g.length;p++){const y=et(h[p],g[p]);if(y!==0)return y}return et(h.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const h=et(Lt(c.latitude),Lt(d.latitude));return h!==0?h:et(Lt(c.longitude),Lt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return e_(r.arrayValue,e.arrayValue);case 10:return(function(c,d){const h=c.fields||{},g=d.fields||{},p=h[Wh]?.arrayValue,y=g[Wh]?.arrayValue,v=et(p?.values?.length||0,y?.values?.length||0);return v!==0?v:e_(p,y)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===kh.mapValue&&d===kh.mapValue)return 0;if(c===kh.mapValue)return 1;if(d===kh.mapValue)return-1;const h=c.fields||{},g=Object.keys(h),p=d.fields||{},y=Object.keys(p);g.sort(),y.sort();for(let v=0;v<g.length&&v<y.length;++v){const w=Hp(g[v],y[v]);if(w!==0)return w;const S=ko(h[g[v]],p[y[v]]);if(S!==0)return S}return et(g.length,y.length)})(r.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function Zw(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return et(r,e);const t=di(r),s=di(e),l=et(t.seconds,s.seconds);return l!==0?l:et(t.nanos,s.nanos)}function e_(r,e){const t=r.values||[],s=e.values||[];for(let l=0;l<t.length&&l<s.length;++l){const c=ko(t[l],s[l]);if(c)return c}return et(t.length,s.length)}function Eo(r){return $p(r)}function $p(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=di(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return hi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ce.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",l=!0;for(const c of t.values||[])l?l=!1:s+=",",s+=$p(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${$p(t.fields[d])}`;return l+"}"})(r.mapValue):Le(61005,{value:r})}function Ph(r){switch(fi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tf(r);return e?16+Ph(e):16;case 5:return 2*r.stringValue.length;case 6:return hi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Ph(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return bi(s.fields,((c,d)=>{l+=c.length+Ph(d)})),l})(r.mapValue);default:throw Le(13486,{value:r})}}function t_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Gp(r){return!!r&&"integerValue"in r}function A0(r){return!!r&&"arrayValue"in r}function r_(r){return!!r&&"nullValue"in r}function n_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Lh(r){return!!r&&"mapValue"in r}function RR(r){return(r?.mapValue?.fields||{})[Uj]?.stringValue===Vj}function au(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return bi(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=au(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(r.arrayValue.values[t]);return e}return{...r}}function IR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===CR}class Gr{constructor(e){this.value=e}static empty(){return new Gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Lh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=or.emptyPath(),s={},l=[];e.forEach(((d,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,s,l),s={},l=[],t=h.popLast()}d?s[h.lastSegment()]=au(d):l.push(h.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,l)}delete(e){const t=this.field(e.popLast());Lh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return os(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let l=t.mapValue.fields[e.get(s)];Lh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,s){bi(t,((l,c)=>e[l]=c));for(const l of s)delete e[l]}clone(){return new Gr(au(this.value))}}function zj(r){const e=[];return bi(r.fields,((t,s)=>{const l=new or([t]);if(Lh(s)){const c=zj(s.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new on(e)}class jr{constructor(e,t,s,l,c,d,h){this.key=e,this.documentType=t,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=h}static newInvalidDocument(e){return new jr(e,0,ze.min(),ze.min(),ze.min(),Gr.empty(),0)}static newFoundDocument(e,t,s,l){return new jr(e,1,t,ze.min(),s,l,0)}static newNoDocument(e,t){return new jr(e,2,t,ze.min(),ze.min(),Gr.empty(),0)}static newUnknownDocument(e,t){return new jr(e,3,t,ze.min(),ze.min(),Gr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jh{constructor(e,t){this.position=e,this.inclusive=t}}function s_(r,e,t){let s=0;for(let l=0;l<r.position.length;l++){const c=e[l],d=r.position[l];if(c.field.isKeyField()?s=Ce.comparator(Ce.fromName(d.referenceValue),t.key):s=ko(d,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function a_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!os(r.position[t],e.position[t]))return!1;return!0}class vu{constructor(e,t="asc"){this.field=e,this.dir=t}}function DR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Fj{}class Gt extends Fj{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new MR(e,t,s):t==="array-contains"?new UR(e,s):t==="in"?new VR(e,s):t==="not-in"?new zR(e,s):t==="array-contains-any"?new FR(e,s):new Gt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new PR(e,s):new LR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ko(t,this.value)):t!==null&&fi(this.value)===fi(t)&&this.matchesComparison(ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends Fj{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fn(e,t)}matches(e){return Bj(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Bj(r){return r.op==="and"}function qj(r){return OR(r)&&Bj(r)}function OR(r){for(const e of r.filters)if(e instanceof Fn)return!1;return!0}function Kp(r){if(r instanceof Gt)return r.field.canonicalString()+r.op.toString()+Eo(r.value);if(qj(r))return r.filters.map((e=>Kp(e))).join(",");{const e=r.filters.map((t=>Kp(t))).join(",");return`${r.op}(${e})`}}function Hj(r,e){return r instanceof Gt?(function(s,l){return l instanceof Gt&&s.op===l.op&&s.field.isEqual(l.field)&&os(s.value,l.value)})(r,e):r instanceof Fn?(function(s,l){return l instanceof Fn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,h)=>c&&Hj(d,l.filters[h])),!0):!1})(r,e):void Le(19439)}function $j(r){return r instanceof Gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Eo(t.value)}`})(r):r instanceof Fn?(function(t){return t.op.toString()+" {"+t.getFilters().map($j).join(" ,")+"}"})(r):"Filter"}class MR extends Gt{constructor(e,t,s){super(e,t,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class PR extends Gt{constructor(e,t){super(e,"in",t),this.keys=Gj("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class LR extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=Gj("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Gj(r,e){return(e.arrayValue?.values||[]).map((t=>Ce.fromName(t.referenceValue)))}class UR extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return A0(t)&&bu(t.arrayValue,this.value)}}class VR extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bu(this.value.arrayValue,t)}}class zR extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bu(this.value.arrayValue,t)}}class FR extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!A0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>bu(this.value.arrayValue,s)))}}class BR{constructor(e,t=null,s=[],l=[],c=null,d=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=h,this.Te=null}}function i_(r,e=null,t=[],s=[],l=null,c=null,d=null){return new BR(r,e,t,s,l,c,d)}function C0(r){const e=Be(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Kp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Eo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Eo(s))).join(",")),e.Te=t}return e.Te}function R0(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!DR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Hj(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!a_(r.startAt,e.startAt)&&a_(r.endAt,e.endAt)}function Yp(r){return Ce.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Oo{constructor(e,t=null,s=[],l=[],c=null,d="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=h,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qR(r,e,t,s,l,c,d,h){return new Oo(r,e,t,s,l,c,d,h)}function Af(r){return new Oo(r)}function l_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Kj(r){return r.collectionGroup!==null}function iu(r){const e=Be(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let h=new Jt(or.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new vu(c,s))})),t.has(or.keyField().canonicalString())||e.Ie.push(new vu(or.keyField(),s))}return e.Ie}function ss(r){const e=Be(r);return e.Ee||(e.Ee=HR(e,iu(r))),e.Ee}function HR(r,e){if(r.limitType==="F")return i_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new vu(l.field,c)}));const t=r.endAt?new Jh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Jh(r.startAt.position,r.startAt.inclusive):null;return i_(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Qp(r,e){const t=r.filters.concat([e]);return new Oo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Zh(r,e,t){return new Oo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Cf(r,e){return R0(ss(r),ss(e))&&r.limitType===e.limitType}function Yj(r){return`${C0(ss(r))}|lt:${r.limitType}`}function fo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((l=>$j(l))).join(", ")}]`),Sf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((l=>Eo(l))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((l=>Eo(l))).join(",")),`Target(${s})`})(ss(r))}; limitType=${r.limitType})`}function Rf(r,e){return e.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ce.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,l){for(const c of iu(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,e)&&(function(s,l){return!(s.startAt&&!(function(d,h,g){const p=s_(d,h,g);return d.inclusive?p<=0:p<0})(s.startAt,iu(s),l)||s.endAt&&!(function(d,h,g){const p=s_(d,h,g);return d.inclusive?p>=0:p>0})(s.endAt,iu(s),l))})(r,e)}function $R(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Qj(r){return(e,t)=>{let s=!1;for(const l of iu(r)){const c=GR(l,e,t);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function GR(r,e,t){const s=r.field.isKeyField()?Ce.comparator(e.key,t.key):(function(c,d,h){const g=d.data.field(c),p=h.data.field(c);return g!==null&&p!==null?ko(g,p):Le(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Le(19790,{direction:r.dir})}}class ml{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),l=this.inner[s];if(l===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return s.length===1?delete this.inner[t]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(e){bi(this.inner,((t,s)=>{for(const[l,c]of s)e(l,c)}))}isEmpty(){return Ij(this.inner)}size(){return this.innerSize}}const KR=new Tt(Ce.comparator);function Js(){return KR}const Xj=new Tt(Ce.comparator);function Zc(...r){let e=Xj;for(const t of r)e=e.insert(t.key,t);return e}function Wj(r){let e=Xj;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Wi(){return lu()}function Jj(){return lu()}function lu(){return new ml((r=>r.toString()),((r,e)=>r.isEqual(e)))}const YR=new Tt(Ce.comparator),QR=new Jt(Ce.comparator);function tt(...r){let e=QR;for(const t of r)e=e.add(t);return e}const XR=new Jt(et);function WR(){return XR}function I0(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function Zj(r){return{integerValue:""+r}}function JR(r,e){return kR(e)?Zj(e):I0(r,e)}class If{constructor(){this._=void 0}}function ZR(r,e,t){return r instanceof wu?(function(l,c){const d={fields:{[Mj]:{stringValue:Oj},[Lj]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&T0(c)&&(c=Tf(c)),c&&(d.fields[Pj]=c),{mapValue:d}})(t,e):r instanceof _u?tk(r,e):r instanceof Nu?rk(r,e):(function(l,c){const d=ek(l,c),h=o_(d)+o_(l.Ae);return Gp(d)&&Gp(l.Ae)?Zj(h):I0(l.serializer,h)})(r,e)}function eI(r,e,t){return r instanceof _u?tk(r,e):r instanceof Nu?rk(r,e):t}function ek(r,e){return r instanceof ef?(function(s){return Gp(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class wu extends If{}class _u extends If{constructor(e){super(),this.elements=e}}function tk(r,e){const t=nk(e);for(const s of r.elements)t.some((l=>os(l,s)))||t.push(s);return{arrayValue:{values:t}}}class Nu extends If{constructor(e){super(),this.elements=e}}function rk(r,e){let t=nk(e);for(const s of r.elements)t=t.filter((l=>!os(l,s)));return{arrayValue:{values:t}}}class ef extends If{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function o_(r){return Lt(r.integerValue||r.doubleValue)}function nk(r){return A0(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class tI{constructor(e,t){this.field=e,this.transform=t}}function rI(r,e){return r.field.isEqual(e.field)&&(function(s,l){return s instanceof _u&&l instanceof _u||s instanceof Nu&&l instanceof Nu?No(s.elements,l.elements,os):s instanceof ef&&l instanceof ef?os(s.Ae,l.Ae):s instanceof wu&&l instanceof wu})(r.transform,e.transform)}class nI{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Df{}function sk(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new D0(r.key,kn.none()):new Iu(r.key,r.data,kn.none());{const t=r.data,s=Gr.empty();let l=new Jt(or.comparator);for(let c of e.fields)if(!l.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new vi(r.key,s,new on(l.toArray()),kn.none())}}function sI(r,e,t){r instanceof Iu?(function(l,c,d){const h=l.value.clone(),g=u_(l.fieldTransforms,c,d.transformResults);h.setAll(g),c.convertToFoundDocument(d.version,h).setHasCommittedMutations()})(r,e,t):r instanceof vi?(function(l,c,d){if(!Uh(l.precondition,c))return void c.convertToUnknownDocument(d.version);const h=u_(l.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(ak(l)),g.setAll(h),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,t):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function ou(r,e,t,s){return r instanceof Iu?(function(c,d,h,g){if(!Uh(c.precondition,d))return h;const p=c.value.clone(),y=d_(c.fieldTransforms,g,d);return p.setAll(y),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(r,e,t,s):r instanceof vi?(function(c,d,h,g){if(!Uh(c.precondition,d))return h;const p=d_(c.fieldTransforms,g,d),y=d.data;return y.setAll(ak(c)),y.setAll(p),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),h===null?null:h.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((v=>v.field)))})(r,e,t,s):(function(c,d,h){return Uh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):h})(r,e,t)}function aI(r,e){let t=null;for(const s of r.fieldTransforms){const l=e.data.field(s.field),c=ek(s.transform,l||null);c!=null&&(t===null&&(t=Gr.empty()),t.set(s.field,c))}return t||null}function c_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&No(s,l,((c,d)=>rI(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Iu extends Df{constructor(e,t,s,l=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class vi extends Df{constructor(e,t,s,l,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ak(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function u_(r,e,t){const s=new Map;dt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let l=0;l<t.length;l++){const c=r[l],d=c.transform,h=e.data.field(c.field);s.set(c.field,eI(d,h,t[l]))}return s}function d_(r,e,t){const s=new Map;for(const l of r){const c=l.transform,d=t.data.field(l.field);s.set(l.field,ZR(c,d,e))}return s}class D0 extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iI extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class lI{constructor(e,t,s,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&sI(c,e,s[l])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ou(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ou(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Jj();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let h=this.applyToLocalView(d,c.mutatedFields);h=t.has(l.key)?null:h;const g=sk(d,h);g!==null&&s.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(ze.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),tt())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,((t,s)=>c_(t,s)))&&No(this.baseMutations,e.baseMutations,((t,s)=>c_(t,s)))}}class O0{constructor(e,t,s,l){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=l}static from(e,t,s){dt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let l=(function(){return YR})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new O0(e,t,s,l)}}class oI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class cI{constructor(e,t){this.count=e,this.unchangedNames=t}}var $t,st;function uI(r){switch(r){case ue.OK:return Le(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Le(15467,{code:r})}}function ik(r){if(r===void 0)return Ws("GRPC error has no .code"),ue.UNKNOWN;switch(r){case $t.OK:return ue.OK;case $t.CANCELLED:return ue.CANCELLED;case $t.UNKNOWN:return ue.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ue.INTERNAL;case $t.UNAVAILABLE:return ue.UNAVAILABLE;case $t.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case $t.NOT_FOUND:return ue.NOT_FOUND;case $t.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case $t.ABORTED:return ue.ABORTED;case $t.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case $t.DATA_LOSS:return ue.DATA_LOSS;default:return Le(39323,{code:r})}}(st=$t||($t={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";function dI(){return new TextEncoder}const hI=new ai([4294967295,4294967295],0);function h_(r){const e=dI().encode(r),t=new bj;return t.update(e),new Uint8Array(t.digest())}function f_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ai([t,s],0),new ai([l,c],0)]}class M0{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new eu(`Invalid padding: ${t}`);if(s<0)throw new eu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new eu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ai.fromNumber(this.ge)}ye(e,t,s){let l=e.add(t.multiply(ai.fromNumber(s)));return l.compare(hI)===1&&(l=new ai([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=h_(e),[s,l]=f_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(e,t,s){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new M0(c,l,t);return s.forEach((h=>d.insert(h))),d}insert(e){if(this.ge===0)return;const t=h_(e),[s,l]=f_(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Of{constructor(e,t,s,l,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const l=new Map;return l.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Of(ze.min(),l,new Tt(et),Js(),tt())}}class Du{constructor(e,t,s,l,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Du(s,t,tt(),tt(),tt())}}class Vh{constructor(e,t,s,l){this.be=e,this.removedTargetIds=t,this.key=s,this.De=l}}class lk{constructor(e,t){this.targetId=e,this.Ce=t}}class ok{constructor(e,t,s=cr.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=l}}class m_{constructor(){this.ve=0,this.Fe=g_(),this.Me=cr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tt(),t=tt(),s=tt();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:s=s.add(l);break;default:Le(38017,{changeType:c})}})),new Du(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=g_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Js(),this.Je=Eh(),this.He=Eh(),this.Ye=new Tt(et)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,s=e.Ce.count,l=this.ot(t);if(l){const c=l.target;if(Yp(c))if(s===0){const d=new Ce(c.path);this.et(t,d,jr.newNoDocument(d,ze.min()))}else dt(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const h=this.ut(e),g=h?this.ct(h,e,d):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=t;let d,h;try{d=hi(s).toUint8Array()}catch(g){if(g instanceof Dj)return rl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{h=new M0(d,l,c)}catch(g){return rl(g instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),h=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(h)||(this.et(t,c,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const h=this.ot(d);if(h){if(c.current&&Yp(h.target)){const g=new Ce(h.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,jr.newNoDocument(g,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let s=tt();this.He.forEach(((c,d)=>{let h=!0;d.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new Of(e,t,this.Ye,this.je,s);return this.je=Js(),this.Je=Eh(),this.He=Eh(),this.Ye=new Tt(et),l}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.Qe(t,1):l.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new m_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Jt(et),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Jt(et),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||je("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new m_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Eh(){return new Tt(Ce.comparator)}function g_(){return new Tt(Ce.comparator)}const mI={asc:"ASCENDING",desc:"DESCENDING"},gI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pI={and:"AND",or:"OR"};class xI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xp(r,e){return r.useProto3Json||Sf(e)?e:{value:e}}function tf(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ck(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function yI(r,e){return tf(r,e.toTimestamp())}function as(r){return dt(!!r,49232),ze.fromTimestamp((function(t){const s=di(t);return new De(s.seconds,s.nanos)})(r))}function P0(r,e){return Wp(r,e).canonicalString()}function Wp(r,e){const t=(function(l){return new vt(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?t:t.child(e)}function uk(r){const e=vt.fromString(r);return dt(gk(e),10190,{key:e.toString()}),e}function Jp(r,e){return P0(r.databaseId,e.path)}function yp(r,e){const t=uk(e);if(t.get(1)!==r.databaseId.projectId)throw new Ne(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Ne(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ce(hk(t))}function dk(r,e){return P0(r.databaseId,e)}function bI(r){const e=uk(r);return e.length===4?vt.emptyPath():hk(e)}function Zp(r){return new vt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function hk(r){return dt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function p_(r,e,t){return{name:Jp(r,e),fields:t.value.mapValue.fields}}function vI(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Le(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(p,y){return p.useProto3Json?(dt(y===void 0||typeof y=="string",58123),cr.fromBase64String(y||"")):(dt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),cr.fromUint8Array(y||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,h=d&&(function(p){const y=p.code===void 0?ue.UNKNOWN:ik(p.code);return new Ne(y,p.message||"")})(d);t=new ok(s,l,c,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const l=yp(r,s.document.name),c=as(s.document.updateTime),d=s.document.createTime?as(s.document.createTime):ze.min(),h=new Gr({mapValue:{fields:s.document.fields}}),g=jr.newFoundDocument(l,c,d,h),p=s.targetIds||[],y=s.removedTargetIds||[];t=new Vh(p,y,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const l=yp(r,s.document),c=s.readTime?as(s.readTime):ze.min(),d=jr.newNoDocument(l,c),h=s.removedTargetIds||[];t=new Vh([],h,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const l=yp(r,s.document),c=s.removedTargetIds||[];t=new Vh([],c,l,null)}else{if(!("filter"in e))return Le(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new cI(l,c),h=s.targetId;t=new lk(h,d)}}return t}function wI(r,e){let t;if(e instanceof Iu)t={update:p_(r,e.key,e.value)};else if(e instanceof D0)t={delete:Jp(r,e.key)};else if(e instanceof vi)t={update:p_(r,e.key,e.data),updateMask:CI(e.fieldMask)};else{if(!(e instanceof iI))return Le(16599,{Vt:e.type});t={verify:Jp(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const h=d.transform;if(h instanceof wu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof _u)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Nu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ef)return{fieldPath:d.field.canonicalString(),increment:h.Ae};throw Le(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:yI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Le(27497)})(r,e.precondition)),t}function _I(r,e){return r&&r.length>0?(dt(e!==void 0,14353),r.map((t=>(function(l,c){let d=l.updateTime?as(l.updateTime):as(c);return d.isEqual(ze.min())&&(d=as(c)),new nI(d,l.transformResults||[])})(t,e)))):[]}function NI(r,e){return{documents:[dk(r,e.path)]}}function jI(r,e){const t={structuredQuery:{}},s=e.path;let l;e.collectionGroup!==null?(l=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=dk(r,l);const c=(function(p){if(p.length!==0)return mk(Fn.create(p,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(p){if(p.length!==0)return p.map((y=>(function(w){return{field:mo(w.field),direction:SI(w.dir)}})(y)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const h=Xp(r,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:l}}function kI(r){let e=bI(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let l=null;if(s>0){dt(s===1,65062);const y=t.from[0];y.allDescendants?l=y.collectionId:e=e.child(y.collectionId)}let c=[];t.where&&(c=(function(v){const w=fk(v);return w instanceof Fn&&qj(w)?w.getFilters():[w]})(t.where));let d=[];t.orderBy&&(d=(function(v){return v.map((w=>(function(C){return new vu(go(C.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(w)))})(t.orderBy));let h=null;t.limit&&(h=(function(v){let w;return w=typeof v=="object"?v.value:v,Sf(w)?null:w})(t.limit));let g=null;t.startAt&&(g=(function(v){const w=!!v.before,S=v.values||[];return new Jh(S,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const w=!v.before,S=v.values||[];return new Jh(S,w)})(t.endAt)),qR(e,l,d,c,h,"F",g,p)}function EI(r,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fk(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=go(t.unaryFilter.field);return Gt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=go(t.unaryFilter.field);return Gt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=go(t.unaryFilter.field);return Gt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=go(t.unaryFilter.field);return Gt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Gt.create(go(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Fn.create(t.compositeFilter.filters.map((s=>fk(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(r):Le(30097,{filter:r})}function SI(r){return mI[r]}function TI(r){return gI[r]}function AI(r){return pI[r]}function mo(r){return{fieldPath:r.canonicalString()}}function go(r){return or.fromServerFormat(r.fieldPath)}function mk(r){return r instanceof Gt?(function(t){if(t.op==="=="){if(n_(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NAN"}};if(r_(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(n_(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NAN"}};if(r_(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(t.field),op:TI(t.op),value:t.value}}})(r):r instanceof Fn?(function(t){const s=t.getFilters().map((l=>mk(l)));return s.length===1?s[0]:{compositeFilter:{op:AI(t.op),filters:s}}})(r):Le(54877,{filter:r})}function CI(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function gk(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class ti{constructor(e,t,s,l,c=ze.min(),d=ze.min(),h=cr.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class RI{constructor(e){this.yt=e}}function II(r){const e=kI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Zh(e,e.limit,"L"):e}class DI{constructor(){this.Cn=new OI}addToCollectionParentIndex(e,t){return this.Cn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(ui.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(ui.min())}updateCollectionGroup(e,t,s){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class OI{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t]||new Jt(vt.comparator),c=!l.has(s);return this.index[t]=l.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),l=this.index[t];return l&&l.has(s)}getEntries(e){return(this.index[e]||new Jt(vt.comparator)).toArray()}}const x_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pk=41943040;class Hr{static withCacheSize(e){return new Hr(e,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}Hr.DEFAULT_COLLECTION_PERCENTILE=10,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hr.DEFAULT=new Hr(pk,Hr.DEFAULT_COLLECTION_PERCENTILE,Hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hr.DISABLED=new Hr(-1,0,0);class So{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new So(0)}static cr(){return new So(-1)}}const y_="LruGarbageCollector",MI=1048576;function b_([r,e],[t,s]){const l=et(r,t);return l===0?et(e,s):l}class PI{constructor(e){this.Ir=e,this.buffer=new Jt(b_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();b_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class LI{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){je(y_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Do(t)?je(y_,"Ignoring IndexedDB error during garbage collection: ",t):await Io(t)}await this.Vr(3e5)}))}}class UI{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return he.resolve(Ef.ce);const s=new PI(t);return this.mr.forEachTarget(e,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(je("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(x_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),x_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,l,c,d,h,g,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),l=this.params.maximumSequenceNumbersToCollect):l=v,d=Date.now(),this.nthSequenceNumber(e,l)))).next((v=>(s=v,h=Date.now(),this.removeTargets(e,s,t)))).next((v=>(c=v,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((v=>(p=Date.now(),ho()<=Ze.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-y}ms
	Determined least recently used ${l} in `+(h-d)+`ms
	Removed ${c} targets in `+(g-h)+`ms
	Removed ${v} documents in `+(p-g)+`ms
Total Duration: ${p-y}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:v}))))}}function VI(r,e){return new UI(r,e)}class zI{constructor(){this.changes=new ml((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?he.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class FI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class BI{constructor(e,t,s,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=l}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(s=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(s!==null&&ou(s.mutation,l,on.empty(),De.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,tt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=tt()){const l=Wi();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,s).next((c=>{let d=Zc();return c.forEach(((h,g)=>{d=d.insert(h,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=Wi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,tt())))}populateOverlays(e,t,s){const l=[];return s.forEach((c=>{t.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,h)=>{t.set(d,h)}))}))}computeViews(e,t,s,l){let c=Js();const d=lu(),h=(function(){return lu()})();return t.forEach(((g,p)=>{const y=s.get(p.key);l.has(p.key)&&(y===void 0||y.mutation instanceof vi)?c=c.insert(p.key,p):y!==void 0?(d.set(p.key,y.mutation.getFieldMask()),ou(y.mutation,p,y.mutation.getFieldMask(),De.now())):d.set(p.key,on.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((p,y)=>d.set(p,y))),t.forEach(((p,y)=>h.set(p,new FI(y,d.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=lu();let l=new Tt(((d,h)=>d-h)),c=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const h of d)h.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let y=s.get(g)||on.empty();y=h.applyToLocalView(p,y),s.set(g,y);const v=(l.get(h.batchId)||tt()).add(g);l=l.insert(h.batchId,v)}))})).next((()=>{const d=[],h=l.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),p=g.key,y=g.value,v=Jj();y.forEach((w=>{if(!c.has(w)){const S=sk(t.get(w),s.get(w));S!==null&&v.set(w,S),c=c.add(w)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,v))}return he.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,l){return(function(d){return Ce.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,l):this.getDocumentsMatchingCollectionQuery(e,t,s,l)}getNextDocuments(e,t,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,l-c.size):he.resolve(Wi());let h=xu,g=c;return d.next((p=>he.forEach(p,((y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),c.get(y)?he.resolve():this.remoteDocumentCache.getEntry(e,y).next((w=>{g=g.insert(y,w)}))))).next((()=>this.populateOverlays(e,p,c))).next((()=>this.computeViews(e,g,p,tt()))).next((y=>({batchId:h,changes:Wj(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((s=>{let l=Zc();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,l){const c=t.collectionGroup;let d=Zc();return this.indexManager.getCollectionParents(e,c).next((h=>he.forEach(h,(g=>{const p=(function(v,w){return new Oo(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,p,s,l).next((y=>{y.forEach(((v,w)=>{d=d.insert(v,w)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,l)))).next((d=>{c.forEach(((g,p)=>{const y=p.getKey();d.get(y)===null&&(d=d.insert(y,jr.newInvalidDocument(y)))}));let h=Zc();return d.forEach(((g,p)=>{const y=c.get(g);y!==void 0&&ou(y.mutation,p,on.empty(),De.now()),Rf(t,p)&&(h=h.insert(g,p))})),h}))}}class qI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return he.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:as(l.createTime)}})(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(l){return{name:l.name,query:II(l.bundledQuery),readTime:as(l.readTime)}})(t)),he.resolve()}}class HI{constructor(){this.overlays=new Tt(Ce.comparator),this.qr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Wi();return he.forEach(t,(l=>this.getOverlay(e,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((l,c)=>{this.St(e,t,c)})),he.resolve()}removeOverlaysForBatchId(e,t,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),he.resolve()}getOverlaysForCollection(e,t,s){const l=Wi(),c=t.length+1,d=new Ce(t.child("")),h=this.overlays.getIteratorFrom(d);for(;h.hasNext();){const g=h.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===c&&g.largestBatchId>s&&l.set(g.getKey(),g)}return he.resolve(l)}getOverlaysForCollectionGroup(e,t,s,l){let c=new Tt(((p,y)=>p-y));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let y=c.get(p.largestBatchId);y===null&&(y=Wi(),c=c.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=Wi(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,y)=>h.set(p,y))),!(h.size()>=l)););return he.resolve(h)}St(e,t,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new oI(t,s));let c=this.qr.get(t);c===void 0&&(c=tt(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}class $I{constructor(){this.sessionToken=cr.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}class L0{constructor(){this.Qr=new Jt(lr.$r),this.Ur=new Jt(lr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new lr(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new lr(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ce(new vt([])),s=new lr(t,e),l=new lr(t,e+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ce(new vt([])),s=new lr(t,e),l=new lr(t,e+1);let c=tt();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new lr(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class lr{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||et(e.Yr,t.Yr)}static Kr(e,t){return et(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}}class GI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(lr.$r)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new lI(c,t,s,l);this.mutationQueue.push(d);for(const h of l)this.Zr=this.Zr.add(new lr(h.key,c)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return he.resolve(d)}lookupMutationBatch(e,t){return he.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,l=this.ei(s),c=l<0?0:l;return he.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?S0:this.tr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new lr(t,0),l=new lr(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const h=this.Xr(d.Yr);c.push(h)})),he.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Jt(et);return t.forEach((l=>{const c=new lr(l,0),d=new lr(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(h=>{s=s.add(h.Yr)}))})),he.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,l=s.length+1;let c=s;Ce.isDocumentKey(c)||(c=c.child(""));const d=new lr(new Ce(c),0);let h=new Jt(et);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===l&&(h=h.add(g.Yr)),!0)}),d),he.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const l=this.Xr(s);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){dt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return he.forEach(t.mutations,(l=>{const c=new lr(l.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new lr(t,0),l=this.Zr.firstAfterOrEqual(s);return he.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class KI{constructor(e){this.ri=e,this.docs=(function(){return new Tt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return he.resolve(s?s.document.mutableCopy():jr.newInvalidDocument(t))}getEntries(e,t){let s=Js();return t.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():jr.newInvalidDocument(l))})),he.resolve(s)}getDocumentsMatchingQuery(e,t,s,l){let c=Js();const d=t.path,h=new Ce(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:p,value:{document:y}}=g.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||wR(vR(y),s)<=0||(l.has(y.key)||Rf(t,y))&&(c=c.insert(y.key,y.mutableCopy()))}return he.resolve(c)}getAllFromCollectionGroup(e,t,s,l){Le(9500)}ii(e,t){return he.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new YI(this)}getSize(e){return he.resolve(this.size)}}class YI extends zI{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?t.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(s)})),he.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class QI{constructor(e){this.persistence=e,this.si=new ml((t=>C0(t)),R0),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.oi=0,this._i=new L0,this.targetCount=0,this.ai=So.ur()}forEachTarget(e,t){return this.si.forEach(((s,l)=>t(l))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),he.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new So(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Pr(t),he.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,s){let l=0;const c=[];return this.si.forEach(((d,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,h.targetId)),l++)})),he.waitFor(c).next((()=>l))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return he.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),he.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const l=this.persistence.referenceDelegate,c=[];return l&&t.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),he.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return he.resolve(s)}containsKey(e,t){return he.resolve(this._i.containsKey(t))}}class xk{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ef(0),this.li=!1,this.li=!0,this.hi=new $I,this.referenceDelegate=e(this),this.Pi=new QI(this),this.indexManager=new DI,this.remoteDocumentCache=(function(l){return new KI(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new RI(t),this.Ii=new qI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new GI(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){je("MemoryPersistence","Starting transaction:",e);const l=new XI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,t){return he.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class XI extends NR{constructor(e){super(),this.currentSequenceNumber=e}}class U0{constructor(e){this.persistence=e,this.Ri=new L0,this.Vi=null}static mi(e){return new U0(e)}get fi(){if(this.Vi)return this.Vi;throw Le(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),he.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.fi,(s=>{const l=Ce.fromPath(s);return this.gi(e,l).next((c=>{c||t.removeEntry(l,ze.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return he.or([()=>he.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class rf{constructor(e,t){this.persistence=e,this.pi=new ml((s=>ER(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=VI(this,t)}static mi(e,t){return new rf(e,t)}Ei(){}di(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((l=>s+l))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return he.forEach(this.pi,((s,l)=>this.br(e,s,l).next((c=>c?he.resolve():t(l)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,t).next((h=>{h||(s++,c.removeEntry(d,ze.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),he.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),he.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ph(e.data.value)),t}br(e,t,s){return he.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.pi.get(t);return he.resolve(l!==void 0&&l>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class V0{constructor(e,t,s,l){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=l}static As(e,t){let s=tt(),l=tt();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new V0(e,t.fromCache,s,l)}}class WI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class JI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return HC()?8:jR(kr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,l){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new WI;return this.Ss(e,t,d).next((h=>{if(c.result=h,this.Vs)return this.bs(e,t,d,h.size)}))})).next((()=>c.result))}bs(e,t,s,l){return s.documentReadCount<this.fs?(ho()<=Ze.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),he.resolve()):(ho()<=Ze.DEBUG&&je("QueryEngine","Query:",fo(t),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(ho()<=Ze.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ss(t))):he.resolve())}ys(e,t){if(l_(t))return he.resolve(null);let s=ss(t);return this.indexManager.getIndexType(e,s).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Zh(t,null,"F"),s=ss(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=tt(...c);return this.ps.getDocuments(e,d).next((h=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,h);return this.Cs(t,p,d,g.readTime)?this.ys(e,Zh(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,l){return l_(t)||l.isEqual(ze.min())?he.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,s,l)?he.resolve(null):(ho()<=Ze.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),fo(t)),this.vs(e,d,t,bR(l,xu)).next((h=>h)))}))}Ds(e,t){let s=new Jt(Qj(e));return t.forEach(((l,c)=>{Rf(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,l){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,t,s){return ho()<=Ze.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",fo(t)),this.ps.getDocumentsMatchingQuery(e,t,ui.min(),s)}vs(e,t,s,l){return this.ps.getDocumentsMatchingQuery(e,s,l).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const z0="LocalStore",ZI=3e8;class e4{constructor(e,t,s,l){this.persistence=e,this.Fs=t,this.serializer=l,this.Ms=new Tt(et),this.xs=new ml((c=>C0(c)),R0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function t4(r,e,t,s){return new e4(r,e,t,s)}async function yk(r,e){const t=Be(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return t.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],h=[];let g=tt();for(const p of l){d.push(p.batchId);for(const y of p.mutations)g=g.add(y.key)}for(const p of c){h.push(p.batchId);for(const y of p.mutations)g=g.add(y.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:h})))}))}))}function r4(r,e){const t=Be(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,g,p,y){const v=p.batch,w=v.keys();let S=he.resolve();return w.forEach((C=>{S=S.next((()=>y.getEntry(g,C))).next((F=>{const T=p.docVersions.get(C);dt(T!==null,48541),F.version.compareTo(T)<0&&(v.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),y.addEntry(F)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(g,v)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let g=tt();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(g=g.add(h.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,l)))}))}function bk(r){const e=Be(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function n4(r,e){const t=Be(r),s=e.snapshotVersion;let l=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});l=t.Ms;const h=[];e.targetChanges.forEach(((y,v)=>{const w=l.get(v);if(!w)return;h.push(t.Pi.removeMatchingKeys(c,y.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(c,y.addedDocuments,v))));let S=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(cr.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,s)),l=l.insert(v,S),(function(F,T,V){return F.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=ZI?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(w,S,y)&&h.push(t.Pi.updateTargetData(c,S))}));let g=Js(),p=tt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(c,y))})),h.push(s4(c,d,e.documentUpdates).next((y=>{g=y.ks,p=y.qs}))),!s.isEqual(ze.min())){const y=t.Pi.getLastRemoteSnapshotVersion(c).next((v=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));h.push(y)}return he.waitFor(h).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,g,p))).next((()=>g))})).then((c=>(t.Ms=l,c)))}function s4(r,e,t){let s=tt(),l=tt();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=Js();return t.forEach(((h,g)=>{const p=c.get(h);g.isFoundDocument()!==p.isFoundDocument()&&(l=l.add(h)),g.isNoDocument()&&g.version.isEqual(ze.min())?(e.removeEntry(h,g.readTime),d=d.insert(h,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),d=d.insert(h,g)):je(z0,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",g.version)})),{ks:d,qs:l}}))}function a4(r,e){const t=Be(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=S0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function i4(r,e){const t=Be(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return t.Pi.getTargetData(s,e).next((c=>c?(l=c,he.resolve(l)):t.Pi.allocateTargetId(s).next((d=>(l=new ti(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=t.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function e0(r,e,t){const s=Be(r),l=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Do(d))throw d;je(z0,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(l.target)}function v_(r,e,t){const s=Be(r);let l=ze.min(),c=tt();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,p,y){const v=Be(g),w=v.xs.get(y);return w!==void 0?he.resolve(v.Ms.get(w)):v.Pi.getTargetData(p,y)})(s,d,ss(e)).next((h=>{if(h)return l=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,h.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,t?l:ze.min(),t?c:tt()))).next((h=>(l4(s,$R(e),h),{documents:h,Qs:c})))))}function l4(r,e,t){let s=r.Os.get(e)||ze.min();t.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class w_{constructor(){this.activeTargetIds=WR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o4{constructor(){this.Mo=new w_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new w_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class c4{Oo(e){}shutdown(){}}const __="ConnectivityMonitor";class N_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){je(__,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){je(__,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Sh=null;function t0(){return Sh===null?Sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sh++,"0x"+Sh.toString(16)}const bp="RestConnection",u4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class d4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Xh?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(e,t,s,l,c){const d=t0(),h=this.zo(e,t.toUriEncodedString());je(bp,`Sending RPC '${e}' ${d}:`,h,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,l,c);const{host:p}=new URL(h),y=xi(p);return this.Jo(e,h,g,s,y).then((v=>(je(bp,`Received RPC '${e}' ${d}: `,v),v)),(v=>{throw rl(bp,`RPC '${e}' ${d} failed with error: `,v,"url: ",h,"request:",s),v}))}Ho(e,t,s,l,c,d){return this.Go(e,t,s,l,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ro})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,c)=>e[c]=l)),s&&s.headers.forEach(((l,c)=>e[c]=l))}zo(e,t){const s=u4[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class h4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const _r="WebChannelConnection";class f4 extends d4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,l,c){const d=t0();return new Promise(((h,g)=>{const p=new vj;p.setWithCredentials(!0),p.listenOnce(wj.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Mh.NO_ERROR:const v=p.getResponseJson();je(_r,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(v)),h(v);break;case Mh.TIMEOUT:je(_r,`RPC '${e}' ${d} timed out`),g(new Ne(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Mh.HTTP_ERROR:const w=p.getStatus();if(je(_r,`RPC '${e}' ${d} failed with status:`,w,"response text:",p.getResponseText()),w>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const C=S?.error;if(C&&C.status&&C.message){const F=(function(V){const E=V.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(E)>=0?E:ue.UNKNOWN})(C.status);g(new Ne(F,C.message))}else g(new Ne(ue.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new Ne(ue.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{je(_r,`RPC '${e}' ${d} completed.`)}}));const y=JSON.stringify(l);je(_r,`RPC '${e}' ${d} sending request:`,l),p.send(t,"POST",y,s,15)}))}T_(e,t,s){const l=t0(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=jj(),h=Nj(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const y=c.join("");je(_r,`Creating RPC '${e}' stream ${l}: ${y}`,g);const v=d.createWebChannel(y,g);this.I_(v);let w=!1,S=!1;const C=new h4({Yo:T=>{S?je(_r,`Not sending because RPC '${e}' stream ${l} is closed:`,T):(w||(je(_r,`Opening RPC '${e}' stream ${l} transport.`),v.open(),w=!0),je(_r,`RPC '${e}' stream ${l} sending:`,T),v.send(T))},Zo:()=>v.close()}),F=(T,V,E)=>{T.listen(V,(B=>{try{E(B)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return F(v,Jc.EventType.OPEN,(()=>{S||(je(_r,`RPC '${e}' stream ${l} transport opened.`),C.o_())})),F(v,Jc.EventType.CLOSE,(()=>{S||(S=!0,je(_r,`RPC '${e}' stream ${l} transport closed`),C.a_(),this.E_(v))})),F(v,Jc.EventType.ERROR,(T=>{S||(S=!0,rl(_r,`RPC '${e}' stream ${l} transport errored. Name:`,T.name,"Message:",T.message),C.a_(new Ne(ue.UNAVAILABLE,"The operation could not be completed")))})),F(v,Jc.EventType.MESSAGE,(T=>{if(!S){const V=T.data[0];dt(!!V,16349);const E=V,B=E?.error||E[0]?.error;if(B){je(_r,`RPC '${e}' stream ${l} received error:`,B);const Y=B.status;let W=(function(L){const j=$t[L];if(j!==void 0)return ik(j)})(Y),$=B.message;W===void 0&&(W=ue.INTERNAL,$="Unknown error status: "+Y+" with message "+B.message),S=!0,C.a_(new Ne(W,$)),v.close()}else je(_r,`RPC '${e}' stream ${l} received:`,V),C.u_(V)}})),F(h,_j.STAT_EVENT,(T=>{T.stat===qp.PROXY?je(_r,`RPC '${e}' stream ${l} detected buffering proxy`):T.stat===qp.NOPROXY&&je(_r,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function vp(){return typeof document<"u"?document:null}function Mf(r){return new xI(r,!0)}class vk{constructor(e,t,s=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-s);l>0&&je("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const j_="PersistentStream";class wk{constructor(e,t,s,l,c,d,h,g){this.Mi=e,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vk(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Ws(t.toString()),Ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===t&&this.G_(s,l)}),(s=>{e((()=>{const l=new Ne(ue.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return je(j_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(je(j_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class m4 extends wk{constructor(e,t,s,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=vI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return ze.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?ze.min():d.readTime?as(d.readTime):ze.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Zp(this.serializer),t.addTarget=(function(c,d){let h;const g=d.target;if(h=Yp(g)?{documents:NI(c,g)}:{query:jI(c,g).ft},h.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){h.resumeToken=ck(c,d.resumeToken);const p=Xp(c,d.expectedCount);p!==null&&(h.expectedCount=p)}else if(d.snapshotVersion.compareTo(ze.min())>0){h.readTime=tf(c,d.snapshotVersion.toTimestamp());const p=Xp(c,d.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const s=EI(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Zp(this.serializer),t.removeTarget=e,this.q_(t)}}class g4 extends wk{constructor(e,t,s,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=_I(e.writeResults,e.commitTime),s=as(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Zp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>wI(this.serializer,s)))};this.q_(t)}}class p4{}class x4 extends p4{constructor(e,t,s,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ne(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Wp(t,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ne(ue.UNKNOWN,c.toString())}))}Ho(e,t,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,h])=>this.connection.Ho(e,Wp(t,s),l,d,h,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ne(ue.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class y4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ws(t),this.aa=!1):je("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const nl="RemoteStore";class b4{constructor(e,t,s,l,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{gl(this)&&(je(nl,"Restarting streams for network reachability change."),await(async function(g){const p=Be(g);p.Ea.add(4),await Ou(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Pf(p)})(this))}))})),this.Ra=new y4(s,l)}}async function Pf(r){if(gl(r))for(const e of r.da)await e(!0)}async function Ou(r){for(const e of r.da)await e(!1)}function _k(r,e){const t=Be(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),H0(t)?q0(t):Mo(t).O_()&&B0(t,e))}function F0(r,e){const t=Be(r),s=Mo(t);t.Ia.delete(e),s.O_()&&Nk(t,e),t.Ia.size===0&&(s.O_()?s.L_():gl(t)&&t.Ra.set("Unknown"))}function B0(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Mo(r).Y_(e)}function Nk(r,e){r.Va.Ue(e),Mo(r).Z_(e)}function q0(r){r.Va=new fI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Mo(r).start(),r.Ra.ua()}function H0(r){return gl(r)&&!Mo(r).x_()&&r.Ia.size>0}function gl(r){return Be(r).Ea.size===0}function jk(r){r.Va=void 0}async function v4(r){r.Ra.set("Online")}async function w4(r){r.Ia.forEach(((e,t)=>{B0(r,e)}))}async function _4(r,e){jk(r),H0(r)?(r.Ra.ha(e),q0(r)):r.Ra.set("Unknown")}async function N4(r,e,t){if(r.Ra.set("Online"),e instanceof ok&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const h of c.targetIds)l.Ia.has(h)&&(await l.remoteSyncer.rejectListen(h,d),l.Ia.delete(h),l.Va.removeTarget(h))})(r,e)}catch(s){je(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await nf(r,s)}else if(e instanceof Vh?r.Va.Ze(e):e instanceof lk?r.Va.st(e):r.Va.tt(e),!t.isEqual(ze.min()))try{const s=await bk(r.localStore);t.compareTo(s)>=0&&await(function(c,d){const h=c.Va.Tt(d);return h.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const y=c.Ia.get(p);y&&c.Ia.set(p,y.withResumeToken(g.resumeToken,d))}})),h.targetMismatches.forEach(((g,p)=>{const y=c.Ia.get(g);if(!y)return;c.Ia.set(g,y.withResumeToken(cr.EMPTY_BYTE_STRING,y.snapshotVersion)),Nk(c,g);const v=new ti(y.target,g,p,y.sequenceNumber);B0(c,v)})),c.remoteSyncer.applyRemoteEvent(h)})(r,t)}catch(s){je(nl,"Failed to raise snapshot:",s),await nf(r,s)}}async function nf(r,e,t){if(!Do(e))throw e;r.Ea.add(1),await Ou(r),r.Ra.set("Offline"),t||(t=()=>bk(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{je(nl,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Pf(r)}))}function kk(r,e){return e().catch((t=>nf(r,t,e)))}async function Lf(r){const e=Be(r),t=mi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:S0;for(;j4(e);)try{const l=await a4(e.localStore,s);if(l===null){e.Ta.length===0&&t.L_();break}s=l.batchId,k4(e,l)}catch(l){await nf(e,l)}Ek(e)&&Sk(e)}function j4(r){return gl(r)&&r.Ta.length<10}function k4(r,e){r.Ta.push(e);const t=mi(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Ek(r){return gl(r)&&!mi(r).x_()&&r.Ta.length>0}function Sk(r){mi(r).start()}async function E4(r){mi(r).ra()}async function S4(r){const e=mi(r);for(const t of r.Ta)e.ea(t.mutations)}async function T4(r,e,t){const s=r.Ta.shift(),l=O0.from(s,e,t);await kk(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await Lf(r)}async function A4(r,e){e&&mi(r).X_&&await(async function(s,l){if((function(d){return uI(d)&&d!==ue.ABORTED})(l.code)){const c=s.Ta.shift();mi(s).B_(),await kk(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Lf(s)}})(r,e),Ek(r)&&Sk(r)}async function k_(r,e){const t=Be(r);t.asyncQueue.verifyOperationInProgress(),je(nl,"RemoteStore received new credentials");const s=gl(t);t.Ea.add(3),await Ou(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Pf(t)}async function C4(r,e){const t=Be(r);e?(t.Ea.delete(2),await Pf(t)):e||(t.Ea.add(2),await Ou(t),t.Ra.set("Unknown"))}function Mo(r){return r.ma||(r.ma=(function(t,s,l){const c=Be(t);return c.sa(),new m4(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:v4.bind(null,r),t_:w4.bind(null,r),r_:_4.bind(null,r),H_:N4.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),H0(r)?q0(r):r.Ra.set("Unknown")):(await r.ma.stop(),jk(r))}))),r.ma}function mi(r){return r.fa||(r.fa=(function(t,s,l){const c=Be(t);return c.sa(),new g4(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:E4.bind(null,r),r_:A4.bind(null,r),ta:S4.bind(null,r),na:T4.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Lf(r)):(await r.fa.stop(),r.Ta.length>0&&(je(nl,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class $0{constructor(e,t,s,l,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,l,c){const d=Date.now()+s,h=new $0(e,t,d,l,c);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G0(r,e){if(Ws("AsyncQueue",`${e}: ${r}`),Do(r))return new Ne(ue.UNAVAILABLE,`${e}: ${r}`);throw r}class bo{static emptySet(e){return new bo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ce.comparator(t.key,s.key):(t,s)=>Ce.comparator(t.key,s.key),this.keyedMap=Zc(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new bo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class E_{constructor(){this.ga=new Tt(Ce.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class To{constructor(e,t,s,l,c,d,h,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,l,c){const d=[];return t.forEach((h=>{d.push({type:0,doc:h})})),new To(e,t,bo.emptySet(t),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==s[l].type||!t[l].doc.isEqual(s[l].doc))return!1;return!0}}class R4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class I4{constructor(){this.queries=S_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const l=Be(t),c=l.queries;l.queries=S_(),c.forEach(((d,h)=>{for(const g of h.Sa)g.onError(s)}))})(this,new Ne(ue.ABORTED,"Firestore shutting down"))}}function S_(){return new ml((r=>Yj(r)),Cf)}async function K0(r,e){const t=Be(r);let s=3;const l=e.query;let c=t.queries.get(l);c?!c.ba()&&e.Da()&&(s=2):(c=new R4,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(l,!0);break;case 1:c.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const h=G0(d,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(h)}t.queries.set(l,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Q0(t)}async function Y0(r,e){const t=Be(r),s=e.query;let l=3;const c=t.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function D4(r,e){const t=Be(r);let s=!1;for(const l of e){const c=l.query,d=t.queries.get(c);if(d){for(const h of d.Sa)h.Fa(l)&&(s=!0);d.wa=l}}s&&Q0(t)}function O4(r,e,t){const s=Be(r),l=s.queries.get(e);if(l)for(const c of l.Sa)c.onError(t);s.queries.delete(e)}function Q0(r){r.Ca.forEach((e=>{e.next()}))}var r0,T_;(T_=r0||(r0={})).Ma="default",T_.Cache="cache";class X0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const l of e.docChanges)l.type!==3&&s.push(l);e=new To(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=To.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==r0.Cache}}class Tk{constructor(e){this.key=e}}class Ak{constructor(e){this.key=e}}class M4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=tt(),this.mutatedKeys=tt(),this.eu=Qj(e),this.tu=new bo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new E_,l=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=l,h=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,p=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((y,v)=>{const w=l.get(y),S=Rf(this.query,v)?v:null,C=!!w&&this.mutatedKeys.has(w.key),F=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let T=!1;w&&S?w.data.isEqual(S.data)?C!==F&&(s.track({type:3,doc:S}),T=!0):this.su(w,S)||(s.track({type:2,doc:S}),T=!0,(g&&this.eu(S,g)>0||p&&this.eu(S,p)<0)&&(h=!0)):!w&&S?(s.track({type:0,doc:S}),T=!0):w&&!S&&(s.track({type:1,doc:w}),T=!0,(g||p)&&(h=!0)),T&&(S?(d=d.add(S),c=F?c.add(y):c.delete(y)):(d=d.delete(y),c=c.delete(y)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const y=this.query.limitType==="F"?d.last():d.first();d=d.delete(y.key),c=c.delete(y.key),s.track({type:1,doc:y})}return{tu:d,iu:s,Cs:h,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((y,v)=>(function(S,C){const F=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Rt:T})}};return F(S)-F(C)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(s),l=l??!1;const h=t&&!l?this._u():[],g=this.Xa.size===0&&this.current&&!l?1:0,p=g!==this.Za;return this.Za=g,d.length!==0||p?{snapshot:new To(this.query,e.tu,c,d,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new E_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=tt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Ak(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Tk(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=tt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return To.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const W0="SyncEngine";class P4{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class L4{constructor(e){this.key=e,this.hu=!1}}class U4{constructor(e,t,s,l,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ml((h=>Yj(h)),Cf),this.Iu=new Map,this.Eu=new Set,this.du=new Tt(Ce.comparator),this.Au=new Map,this.Ru=new L0,this.Vu={},this.mu=new Map,this.fu=So.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function V4(r,e,t=!0){const s=Mk(r);let l;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await Ck(s,e,t,!0),l}async function z4(r,e){const t=Mk(r);await Ck(t,e,!0,!1)}async function Ck(r,e,t,s){const l=await i4(r.localStore,ss(e)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,t);let h;return s&&(h=await F4(r,e,c,d==="current",l.resumeToken)),r.isPrimaryClient&&t&&_k(r.remoteStore,l),h}async function F4(r,e,t,s,l){r.pu=(v,w,S)=>(async function(F,T,V,E){let B=T.view.ru(V);B.Cs&&(B=await v_(F.localStore,T.query,!1).then((({documents:I})=>T.view.ru(I,B))));const Y=E&&E.targetChanges.get(T.targetId),W=E&&E.targetMismatches.get(T.targetId)!=null,$=T.view.applyChanges(B,F.isPrimaryClient,Y,W);return C_(F,T.targetId,$.au),$.snapshot})(r,v,w,S);const c=await v_(r.localStore,e,!0),d=new M4(e,c.Qs),h=d.ru(c.documents),g=Du.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",l),p=d.applyChanges(h,r.isPrimaryClient,g);C_(r,t,p.au);const y=new P4(e,t,d);return r.Tu.set(e,y),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function B4(r,e,t){const s=Be(r),l=s.Tu.get(e),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!Cf(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await e0(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),t&&F0(s.remoteStore,l.targetId),n0(s,l.targetId)})).catch(Io)):(n0(s,l.targetId),await e0(s.localStore,l.targetId,!0))}async function q4(r,e){const t=Be(r),s=t.Tu.get(e),l=t.Iu.get(s.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),F0(t.remoteStore,s.targetId))}async function H4(r,e,t){const s=W4(r);try{const l=await(function(d,h){const g=Be(d),p=De.now(),y=h.reduce(((S,C)=>S.add(C.key)),tt());let v,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let C=Js(),F=tt();return g.Ns.getEntries(S,y).next((T=>{C=T,C.forEach(((V,E)=>{E.isValidDocument()||(F=F.add(V))}))})).next((()=>g.localDocuments.getOverlayedDocuments(S,C))).next((T=>{v=T;const V=[];for(const E of h){const B=aI(E,v.get(E.key).overlayedDocument);B!=null&&V.push(new vi(E.key,B,zj(B.value.mapValue),kn.exists(!0)))}return g.mutationQueue.addMutationBatch(S,p,V,h)})).next((T=>{w=T;const V=T.applyToLocalDocumentSet(v,F);return g.documentOverlayCache.saveOverlays(S,T.batchId,V)}))})).then((()=>({batchId:w.batchId,changes:Wj(v)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(l.batchId),(function(d,h,g){let p=d.Vu[d.currentUser.toKey()];p||(p=new Tt(et)),p=p.insert(h,g),d.Vu[d.currentUser.toKey()]=p})(s,l.batchId,t),await Mu(s,l.changes),await Lf(s.remoteStore)}catch(l){const c=G0(l,"Failed to persist write");t.reject(c)}}async function Rk(r,e){const t=Be(r);try{const s=await n4(t.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=t.Au.get(c);d&&(dt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?dt(d.hu,14607):l.removedDocuments.size>0&&(dt(d.hu,42227),d.hu=!1))})),await Mu(t,s,e)}catch(s){await Io(s)}}function A_(r,e,t){const s=Be(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const l=[];s.Tu.forEach(((c,d)=>{const h=d.view.va(e);h.snapshot&&l.push(h.snapshot)})),(function(d,h){const g=Be(d);g.onlineState=h;let p=!1;g.queries.forEach(((y,v)=>{for(const w of v.Sa)w.va(h)&&(p=!0)})),p&&Q0(g)})(s.eventManager,e),l.length&&s.Pu.H_(l),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function $4(r,e,t){const s=Be(r);s.sharedClientState.updateQueryState(e,"rejected",t);const l=s.Au.get(e),c=l&&l.key;if(c){let d=new Tt(Ce.comparator);d=d.insert(c,jr.newNoDocument(c,ze.min()));const h=tt().add(c),g=new Of(ze.min(),new Map,new Tt(et),d,h);await Rk(s,g),s.du=s.du.remove(c),s.Au.delete(e),J0(s)}else await e0(s.localStore,e,!1).then((()=>n0(s,e,t))).catch(Io)}async function G4(r,e){const t=Be(r),s=e.batch.batchId;try{const l=await r4(t.localStore,e);Dk(t,s,null),Ik(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Mu(t,l)}catch(l){await Io(l)}}async function K4(r,e,t){const s=Be(r);try{const l=await(function(d,h){const g=Be(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return g.mutationQueue.lookupMutationBatch(p,h).next((v=>(dt(v!==null,37113),y=v.keys(),g.mutationQueue.removeMutationBatch(p,v)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,y,h))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>g.localDocuments.getDocuments(p,y)))}))})(s.localStore,e);Dk(s,e,t),Ik(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Mu(s,l)}catch(l){await Io(l)}}function Ik(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Dk(r,e,t){const s=Be(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(e);c&&(t?c.reject(t):c.resolve(),l=l.remove(e)),s.Vu[s.currentUser.toKey()]=l}}function n0(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||Ok(r,s)}))}function Ok(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(F0(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),J0(r))}function C_(r,e,t){for(const s of t)s instanceof Tk?(r.Ru.addReference(s.key,e),Y4(r,s)):s instanceof Ak?(je(W0,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||Ok(r,s.key)):Le(19791,{wu:s})}function Y4(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(je(W0,"New document in limbo: "+t),r.Eu.add(s),J0(r))}function J0(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ce(vt.fromString(e)),s=r.fu.next();r.Au.set(s,new L4(t)),r.du=r.du.insert(t,s),_k(r.remoteStore,new ti(ss(Af(t.path)),s,"TargetPurposeLimboResolution",Ef.ce))}}async function Mu(r,e,t){const s=Be(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,g)=>{d.push(s.pu(g,e,t).then((p=>{if((p||t)&&s.isPrimaryClient){const y=p?!p.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,y?"current":"not-current")}if(p){l.push(p);const y=V0.As(g.targetId,p);c.push(y)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(g,p){const y=Be(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>he.forEach(p,(w=>he.forEach(w.Es,(S=>y.persistence.referenceDelegate.addReference(v,w.targetId,S))).next((()=>he.forEach(w.ds,(S=>y.persistence.referenceDelegate.removeReference(v,w.targetId,S)))))))))}catch(v){if(!Do(v))throw v;je(z0,"Failed to update sequence numbers: "+v)}for(const v of p){const w=v.targetId;if(!v.fromCache){const S=y.Ms.get(w),C=S.snapshotVersion,F=S.withLastLimboFreeSnapshotVersion(C);y.Ms=y.Ms.insert(w,F)}}})(s.localStore,c))}async function Q4(r,e){const t=Be(r);if(!t.currentUser.isEqual(e)){je(W0,"User change. New user:",e.toKey());const s=await yk(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((h=>{h.forEach((g=>{g.reject(new Ne(ue.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Mu(t,s.Ls)}}function X4(r,e){const t=Be(r),s=t.Au.get(e);if(s&&s.hu)return tt().add(s.key);{let l=tt();const c=t.Iu.get(e);if(!c)return l;for(const d of c){const h=t.Tu.get(d);l=l.unionWith(h.view.nu)}return l}}function Mk(r){const e=Be(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$4.bind(null,e),e.Pu.H_=D4.bind(null,e.eventManager),e.Pu.yu=O4.bind(null,e.eventManager),e}function W4(r){const e=Be(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K4.bind(null,e),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return t4(this.persistence,new JI,e.initialUser,this.serializer)}Cu(e){return new xk(U0.mi,this.serializer)}Du(e){return new o4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class J4 extends sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){dt(this.persistence.referenceDelegate instanceof rf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new LI(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Hr.withCacheSize(this.cacheSizeBytes):Hr.DEFAULT;return new xk((s=>rf.mi(s,t)),this.serializer)}}class s0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>A_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q4.bind(null,this.syncEngine),await C4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new I4})()}createDatastore(e){const t=Mf(e.databaseInfo.databaseId),s=(function(c){return new f4(c)})(e.databaseInfo);return(function(c,d,h,g){return new x4(c,d,h,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,l,c,d,h){return new b4(s,l,c,d,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>A_(this.syncEngine,t,0)),(function(){return N_.v()?new N_:new c4})())}createSyncEngine(e,t){return(function(l,c,d,h,g,p,y){const v=new U4(l,c,d,h,g,p);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Be(t);je(nl,"RemoteStore shutting down."),s.Ea.add(5),await Ou(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}s0.provider={build:()=>new s0};class Z0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const gi="FirestoreClient";class Z4{constructor(e,t,s,l,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=l,this.user=Nr.UNAUTHENTICATED,this.clientId=jf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{je(gi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(je(gi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=G0(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function wp(r,e){r.asyncQueue.verifyOperationInProgress(),je(gi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await yk(e.localStore,l),s=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function R_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await eD(r);je(gi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>k_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>k_(e.remoteStore,l))),r._onlineComponents=e}async function eD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){je(gi,"Using user provided OfflineComponentProvider");try{await wp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ue.FAILED_PRECONDITION||l.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;rl("Error using user provided cache. Falling back to memory cache: "+t),await wp(r,new sf)}}else je(gi,"Using default OfflineComponentProvider"),await wp(r,new J4(void 0));return r._offlineComponents}async function Pk(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(je(gi,"Using user provided OnlineComponentProvider"),await R_(r,r._uninitializedComponentsProvider._online)):(je(gi,"Using default OnlineComponentProvider"),await R_(r,new s0))),r._onlineComponents}function tD(r){return Pk(r).then((e=>e.syncEngine))}async function af(r){const e=await Pk(r),t=e.eventManager;return t.onListen=V4.bind(null,e.syncEngine),t.onUnlisten=B4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=z4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=q4.bind(null,e.syncEngine),t}function rD(r,e,t={}){const s=new $s;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,h,g,p){const y=new Z0({next:w=>{y.Nu(),d.enqueueAndForget((()=>Y0(c,v)));const S=w.docs.has(h);!S&&w.fromCache?p.reject(new Ne(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&g&&g.source==="server"?p.reject(new Ne(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new X0(Af(h.path),y,{includeMetadataChanges:!0,qa:!0});return K0(c,v)})(await af(r),r.asyncQueue,e,t,s))),s.promise}function nD(r,e,t={}){const s=new $s;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,h,g,p){const y=new Z0({next:w=>{y.Nu(),d.enqueueAndForget((()=>Y0(c,v))),w.fromCache&&g.source==="server"?p.reject(new Ne(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),v=new X0(h,y,{includeMetadataChanges:!0,qa:!0});return K0(c,v)})(await af(r),r.asyncQueue,e,t,s))),s.promise}function Lk(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const I_=new Map;const Uk="firestore.googleapis.com",D_=!0;class O_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uk,this.ssl=D_}else this.host=e.host,this.ssl=e.ssl??D_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<MI)throw new Ne(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Aj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lk(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ne(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ne(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ne(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uf{constructor(e,t,s,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new O_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new O_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Sj;switch(s.type){case"firstParty":return new fR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ne(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=I_.get(t);s&&(je("ComponentProvider","Removing Datastore"),I_.delete(t),s.terminate())})(this),Promise.resolve()}}function Vk(r,e,t,s={}){r=Or(r,Uf);const l=xi(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},h=`${e}:${t}`;l&&(v0(`https://${h}`),w0("Firestore",!0)),c.host!==Uk&&c.host!==h&&rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:h,ssl:l,emulatorOptions:s};if(!ci(g,d)&&(r._setSettings(g),s.mockUserToken)){let p,y;if(typeof s.mockUserToken=="string")p=s.mockUserToken,y=Nr.MOCK_USER;else{p=dj(s.mockUserToken,r._app?.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new Ne(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Nr(v)}r._authCredentials=new uR(new Ej(p,y))}}class hs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class St{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ru(t,St._jsonSchema))return new St(e,s||null,new Ce(vt.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:Kt("string",St._jsonSchemaVersion),referencePath:Kt("string")};class Gs extends hs{constructor(e,t,s){super(e,t,Af(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new Ce(e))}withConverter(e){return new Gs(this.firestore,e,this._path)}}function Ie(r,e,...t){if(r=mt(r),Tj("collection","path",e),r instanceof Uf){const s=vt.fromString(e,...t);return Kw(s),new Gs(r,null,s)}{if(!(r instanceof St||r instanceof Gs))throw new Ne(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(vt.fromString(e,...t));return Kw(s),new Gs(r.firestore,null,s)}}function at(r,e,...t){if(r=mt(r),arguments.length===1&&(e=jf.newId()),Tj("doc","path",e),r instanceof Uf){const s=vt.fromString(e,...t);return Gw(s),new St(r,null,new Ce(s))}{if(!(r instanceof St||r instanceof Gs))throw new Ne(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(vt.fromString(e,...t));return Gw(s),new St(r.firestore,r instanceof Gs?r.converter:null,new Ce(s))}}const M_="AsyncQueue";class P_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vk(this,"async_queue_retry"),this._c=()=>{const s=vp();s&&je(M_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=vp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new $s;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Do(e))throw e;je(M_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ws("INTERNAL UNHANDLED ERROR: ",L_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=$0.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Le(47125,{Pc:L_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function L_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function U_(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const l=t;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class cs extends Uf{constructor(e,t,s,l){super(e,t,s,l),this.type="firestore",this._queue=new P_,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new P_(e),this._firestoreClient=void 0,await e}}}function zk(r,e){const t=typeof r=="object"?r:Cu(),s=typeof r=="string"?r:Xh,l=yi(t,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=oj("firestore");c&&Vk(l,...c)}return l}function Pu(r){if(r._terminated)throw new Ne(ue.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||sD(r),r._firestoreClient}function sD(r){const e=r._freezeSettings(),t=(function(l,c,d,h){return new AR(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Lk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Z4(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}class ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ln(cr.fromBase64String(e))}catch(t){throw new Ne(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ln(cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ru(e,ln._jsonSchema))return ln.fromBase64String(e.bytes)}}ln._jsonSchemaVersion="firestore/bytes/1.0",ln._jsonSchema={type:Kt("string",ln._jsonSchemaVersion),bytes:Kt("string")};class Lu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ne(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uu{constructor(e){this._methodName=e}}class Ln{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ln._jsonSchemaVersion}}static fromJSON(e){if(Ru(e,Ln._jsonSchema))return new Ln(e.latitude,e.longitude)}}Ln._jsonSchemaVersion="firestore/geoPoint/1.0",Ln._jsonSchema={type:Kt("string",Ln._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};class Un{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Un._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ru(e,Un._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Un(e.vectorValues);throw new Ne(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Un._jsonSchemaVersion="firestore/vectorValue/1.0",Un._jsonSchema={type:Kt("string",Un._jsonSchemaVersion),vectorValues:Kt("object")};const aD=/^__.*__$/;class iD{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Iu(e,this.data,t,this.fieldTransforms)}}class Fk{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Bk(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{Ac:r})}}class ex{constructor(e,t,s,l,c,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ex({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return lf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Bk(this.Ac)&&aD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class lD{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Mf(e)}Cc(e,t,s,l=!1){return new ex({Ac:e,methodName:t,Dc:s,path:or.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vf(r){const e=r._freezeSettings(),t=Mf(r._databaseId);return new lD(r._databaseId,!!e.ignoreUndefinedProperties,t)}function qk(r,e,t,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,t,l);rx("Data must be an object, but it was:",d,s);const h=Hk(s,d);let g,p;if(c.merge)g=new on(d.fieldMask),p=d.fieldTransforms;else if(c.mergeFields){const y=[];for(const v of c.mergeFields){const w=a0(e,v,t);if(!d.contains(w))throw new Ne(ue.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Gk(y,w)||y.push(w)}g=new on(y),p=d.fieldTransforms.filter((v=>g.covers(v.field)))}else g=null,p=d.fieldTransforms;return new iD(new Gr(h),g,p)}class zf extends Uu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zf}}class tx extends Uu{_toFieldTransform(e){return new tI(e.path,new wu)}isEqual(e){return e instanceof tx}}function oD(r,e,t,s){const l=r.Cc(1,e,t);rx("Data must be an object, but it was:",l,s);const c=[],d=Gr.empty();bi(s,((g,p)=>{const y=nx(e,g,t);p=mt(p);const v=l.yc(y);if(p instanceof zf)c.push(y);else{const w=Vu(p,v);w!=null&&(c.push(y),d.set(y,w))}}));const h=new on(c);return new Fk(d,h,l.fieldTransforms)}function cD(r,e,t,s,l,c){const d=r.Cc(1,e,t),h=[a0(e,s,t)],g=[l];if(c.length%2!=0)throw new Ne(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<c.length;w+=2)h.push(a0(e,c[w])),g.push(c[w+1]);const p=[],y=Gr.empty();for(let w=h.length-1;w>=0;--w)if(!Gk(p,h[w])){const S=h[w];let C=g[w];C=mt(C);const F=d.yc(S);if(C instanceof zf)p.push(S);else{const T=Vu(C,F);T!=null&&(p.push(S),y.set(S,T))}}const v=new on(p);return new Fk(y,v,d.fieldTransforms)}function uD(r,e,t,s=!1){return Vu(t,r.Cc(s?4:3,e))}function Vu(r,e){if($k(r=mt(r)))return rx("Unsupported field value:",e,r),Hk(r,e);if(r instanceof Uu)return(function(s,l){if(!Bk(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const h of s){let g=Vu(h,l.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,l){if((s=mt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return JR(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=De.fromDate(s);return{timestampValue:tf(l.serializer,c)}}if(s instanceof De){const c=new De(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:tf(l.serializer,c)}}if(s instanceof Ln)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ln)return{bytesValue:ck(l.serializer,s._byteString)};if(s instanceof St){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:P0(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Un)return(function(d,h){return{mapValue:{fields:{[Uj]:{stringValue:Vj},[Wh]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return I0(h.serializer,p)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${kf(s)}`)})(r,e)}function Hk(r,e){const t={};return Ij(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bi(r,((s,l)=>{const c=Vu(l,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function $k(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof De||r instanceof Ln||r instanceof ln||r instanceof St||r instanceof Uu||r instanceof Un)}function rx(r,e,t){if(!$k(t)||!Cj(t)){const s=kf(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function a0(r,e,t){if((e=mt(e))instanceof Lu)return e._internalPath;if(typeof e=="string")return nx(r,e);throw lf("Field path arguments must be of type string or ",r,!1,void 0,t)}const dD=new RegExp("[~\\*/\\[\\]]");function nx(r,e,t){if(e.search(dD)>=0)throw lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Lu(...e.split("."))._internalPath}catch{throw lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function lf(r,e,t,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${l}`),g+=")"),new Ne(ue.INVALID_ARGUMENT,h+r+g)}function Gk(r,e){return r.some((t=>t.isEqual(e)))}class Kk{constructor(e,t,s,l,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ff("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class hD extends Kk{data(){return super.data()}}function Ff(r,e){return typeof e=="string"?nx(r,e):e instanceof Lu?e._internalPath:e._delegate._internalPath}function Yk(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Ne(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sx{}class Bf extends sx{}function Xe(r,e,...t){let s=[];e instanceof sx&&s.push(e),s=s.concat(t),(function(c){const d=c.filter((g=>g instanceof qf)).length,h=c.filter((g=>g instanceof zu)).length;if(d>1||d>0&&h>0)throw new Ne(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class zu extends Bf{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new zu(e,t,s)}_apply(e){const t=this._parse(e);return Xk(e._query,t),new hs(e.firestore,e.converter,Qp(e._query,t))}_parse(e){const t=Vf(e.firestore);return(function(c,d,h,g,p,y,v){let w;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){z_(v,y);const C=[];for(const F of v)C.push(V_(g,c,F));w={arrayValue:{values:C}}}else w=V_(g,c,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||z_(v,y),w=uD(h,d,v,y==="in"||y==="not-in");return Gt.create(p,y,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ur(r,e,t){const s=e,l=Ff("where",r);return zu._create(l,s,t)}class qf extends sx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qf(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,c){let d=l;const h=c.getFlattenedFilters();for(const g of h)Xk(d,g),d=Qp(d,g)})(e._query,t),new hs(e.firestore,e.converter,Qp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hf extends Bf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hf(e,t)}_apply(e){const t=(function(l,c,d){if(l.startAt!==null)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vu(c,d)})(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new Oo(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,t))}}function Et(r,e="asc"){const t=e,s=Ff("orderBy",r);return Hf._create(s,t)}class $f extends Bf{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new $f(e,t,s)}_apply(e){return new hs(e.firestore,e.converter,Zh(e._query,this._limit,this._limitType))}}function Qk(r){return $f._create("limit",r,"F")}function V_(r,e,t){if(typeof(t=mt(t))=="string"){if(t==="")throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kj(e)&&t.indexOf("/")!==-1)throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(vt.fromString(t));if(!Ce.isDocumentKey(s))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return t_(r,new Ce(s))}if(t instanceof St)return t_(r,t._key);throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kf(t)}.`)}function z_(r,e){if(!Array.isArray(r)||r.length===0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xk(r,e){const t=(function(l,c){for(const d of l)for(const h of d.getFlattenedFilters())if(c.indexOf(h.op)>=0)return h.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ne(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Wk{convertValue(e,t="none"){switch(fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return bi(e,((l,c)=>{s[l]=this.convertValue(c,t)})),s}convertVectorValue(e){const t=e.fields?.[Wh].arrayValue?.values?.map((s=>Lt(s.doubleValue)));return new Un(t)}convertGeoPoint(e){return new Ln(Lt(e.latitude),Lt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Tf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const t=di(e);return new De(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=vt.fromString(e);dt(gk(s),9688,{name:e});const l=new jo(s.get(1),s.get(3)),c=new Ce(s.popFirst(5));return l.isEqual(t)||Ws(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Jk(r,e,t){let s;return s=r?r.toFirestore(e):e,s}class po{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ii extends Kk{constructor(e,t,s,l,c,d){super(e,t,s,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ff("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ii._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ii._jsonSchemaVersion="firestore/documentSnapshot/1.0",ii._jsonSchema={type:Kt("string",ii._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class cu extends ii{data(e={}){return super.data(e)}}class li{constructor(e,t,s,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new po(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new cu(this._firestore,this._userDataWriter,s.key,s,new po(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((h=>{const g=new cu(l._firestore,l._userDataWriter,h.doc.key,h.doc,new po(l._snapshot.mutatedKeys.has(h.doc.key),l._snapshot.fromCache),l.query.converter);return h.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((h=>c||h.type!==3)).map((h=>{const g=new cu(l._firestore,l._userDataWriter,h.doc.key,h.doc,new po(l._snapshot.mutatedKeys.has(h.doc.key),l._snapshot.fromCache),l.query.converter);let p=-1,y=-1;return h.type!==0&&(p=d.indexOf(h.doc.key),d=d.delete(h.doc.key)),h.type!==1&&(d=d.add(h.doc),y=d.indexOf(h.doc.key)),{type:fD(h.type),doc:g,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=li._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:r})}}function oi(r){r=Or(r,St);const e=Or(r.firestore,cs);return rD(Pu(e),r._key).then((t=>eE(e,r,t)))}li._jsonSchemaVersion="firestore/querySnapshot/1.0",li._jsonSchema={type:Kt("string",li._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class ax extends Wk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ln(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function rt(r){r=Or(r,hs);const e=Or(r.firestore,cs),t=Pu(e),s=new ax(e);return Yk(r._query),nD(t,r._query).then((l=>new li(e,s,r,l)))}function Zk(r,e,t){r=Or(r,St);const s=Or(r.firestore,cs),l=Jk(r.converter,e);return Fu(s,[qk(Vf(s),"setDoc",r._key,l,r.converter!==null,t).toMutation(r._key,kn.none())])}function Vt(r,e,t,...s){r=Or(r,St);const l=Or(r.firestore,cs),c=Vf(l);let d;return d=typeof(e=mt(e))=="string"||e instanceof Lu?cD(c,"updateDoc",r._key,e,t,s):oD(c,"updateDoc",r._key,e),Fu(l,[d.toMutation(r._key,kn.exists(!0))])}function sl(r){return Fu(Or(r.firestore,cs),[new D0(r._key,kn.none())])}function Tn(r,e){const t=Or(r.firestore,cs),s=at(r),l=Jk(r.converter,e);return Fu(t,[qk(Vf(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,kn.exists(!1))]).then((()=>s))}function En(r,...e){r=mt(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||U_(e[s])||(t=e[s++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(U_(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let c,d,h;if(r instanceof St)d=Or(r.firestore,cs),h=Af(r._key.path),c={next:g=>{e[s]&&e[s](eE(d,r,g))},error:e[s+1],complete:e[s+2]};else{const g=Or(r,hs);d=Or(g.firestore,cs),h=g._query;const p=new ax(d);c={next:y=>{e[s]&&e[s](new li(d,p,g,y))},error:e[s+1],complete:e[s+2]},Yk(r._query)}return(function(p,y,v,w){const S=new Z0(w),C=new X0(y,S,v);return p.asyncQueue.enqueueAndForget((async()=>K0(await af(p),C))),()=>{S.Nu(),p.asyncQueue.enqueueAndForget((async()=>Y0(await af(p),C)))}})(Pu(d),h,l,c)}function Fu(r,e){return(function(s,l){const c=new $s;return s.asyncQueue.enqueueAndForget((async()=>H4(await tD(s),l,c))),c.promise})(Pu(r),e)}function eE(r,e,t){const s=t.docs.get(e._key),l=new ax(r);return new ii(r,l,e._key,s,new po(t.hasPendingWrites,t.fromCache),e.converter)}function i0(){return new tx("serverTimestamp")}(function(e,t=!0){(function(l){Ro=l})(fl),zn(new Sn("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),h=new cs(new dR(s.getProvider("auth-internal")),new mR(d,s.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ne(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jo(p.options.projectId,y)})(d,l),d);return c={useFetchStreams:t,...c},h._setSettings(c),h}),"PUBLIC").setMultipleInstances(!0)),Kr(Bw,qw,e),Kr(Bw,qw,"esm2020")})();const _p=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Wk,Bytes:ln,CollectionReference:Gs,DocumentReference:St,DocumentSnapshot:ii,FieldPath:Lu,FieldValue:Uu,Firestore:cs,FirestoreError:Ne,GeoPoint:Ln,Query:hs,QueryCompositeFilterConstraint:qf,QueryConstraint:Bf,QueryDocumentSnapshot:cu,QueryFieldFilterConstraint:zu,QueryLimitConstraint:$f,QueryOrderByConstraint:Hf,QuerySnapshot:li,SnapshotMetadata:po,Timestamp:De,VectorValue:Un,_AutoId:jf,_ByteString:cr,_DatabaseId:jo,_DocumentKey:Ce,_EmptyAuthCredentialsProvider:Sj,_FieldPath:or,_cast:Or,_logWarn:rl,_validateIsNotUsedTogether:Aj,addDoc:Tn,collection:Ie,connectFirestoreEmulator:Vk,deleteDoc:sl,doc:at,ensureFirestoreConfigured:Pu,executeWrite:Fu,getDoc:oi,getDocs:rt,getFirestore:zk,limit:Qk,onSnapshot:En,orderBy:Et,query:Xe,serverTimestamp:i0,setDoc:Zk,updateDoc:Vt,where:ur},Symbol.toStringTag,{value:"Module"}));function tE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mD=tE,rE=new hl("auth","Firebase",tE());const of=new Nf("@firebase/auth");function gD(r,...e){of.logLevel<=Ze.WARN&&of.warn(`Auth (${fl}): ${r}`,...e)}function zh(r,...e){of.logLevel<=Ze.ERROR&&of.error(`Auth (${fl}): ${r}`,...e)}function Bn(r,...e){throw ix(r,...e)}function is(r,...e){return ix(r,...e)}function nE(r,e,t){const s={...mD(),[e]:t};return new hl("auth","Firebase",s).create(e,{appName:r.name})}function Ks(r){return nE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ix(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return rE.create(r,...e)}function Pe(r,e,...t){if(!r)throw ix(e,...t)}function Bs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw zh(e),new Error(e)}function Zs(r,e){r||Bs(e)}function l0(){return typeof self<"u"&&self.location?.href||""}function pD(){return F_()==="http:"||F_()==="https:"}function F_(){return typeof self<"u"&&self.location?.protocol||null}function xD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pD()||_0()||"connection"in navigator)?navigator.onLine:!0}function yD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zs(t>e,"Short delay should be less than long delay!"),this.isMobile=VC()||BC()}get(){return xD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lx(r,e){Zs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class sE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const bD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const vD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wD=new Bu(3e4,6e4);function wi(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ea(r,e,t,s,l={}){return aE(r,l,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const h=Au({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...c};return FC()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&xi(r.emulatorConfig.host)&&(p.credentials="include"),sE.fetch()(await iE(r,r.config.apiHost,t,h),p)})}async function aE(r,e,t){r._canInitEmulator=!1;const s={...bD,...e};try{const l=new ND(r),c=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Th(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const h=c.ok?d.errorMessage:d.error.message,[g,p]=h.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Th(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Th(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw Th(r,"user-disabled",d);const y=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw nE(r,y,p);Bn(r,y)}}catch(l){if(l instanceof Qr)throw l;Bn(r,"network-request-failed",{message:String(l)})}}async function qu(r,e,t,s,l={}){const c=await ea(r,e,t,s,l);return"mfaPendingCredential"in c&&Bn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function iE(r,e,t,s){const l=`${e}${t}?${s}`,c=r,d=c.config.emulator?lx(r.config,l):`${r.config.apiScheme}://${l}`;return vD.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function _D(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ND{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(is(this.auth,"network-request-failed")),wD.get())})}}function Th(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const l=is(r,e,s);return l.customData._tokenResponse=t,l}function B_(r){return r!==void 0&&r.enterprise!==void 0}class jD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _D(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kD(r,e){return ea(r,"GET","/v2/recaptchaConfig",wi(r,e))}async function ED(r,e){return ea(r,"POST","/v1/accounts:delete",e)}async function cf(r,e){return ea(r,"POST","/v1/accounts:lookup",e)}function uu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SD(r,e=!1){const t=mt(r),s=await t.getIdToken(e),l=ox(s);Pe(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:uu(Np(l.auth_time)),issuedAtTime:uu(Np(l.iat)),expirationTime:uu(Np(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Np(r){return Number(r)*1e3}function ox(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return zh("JWT malformed, contained fewer than 3 sections"),null;try{const l=ij(t);return l?JSON.parse(l):(zh("Failed to decode base64 JWT payload"),null)}catch(l){return zh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function q_(r){const e=ox(r);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ao(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Qr&&TD(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function TD({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class AD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class o0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function uf(r){const e=r.auth,t=await r.getIdToken(),s=await Ao(r,cf(e,{idToken:t}));Pe(s?.users.length,e,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?lE(l.providerUserInfo):[],d=RD(r.providerData,c),h=r.isAnonymous,g=!(r.email&&l.passwordHash)&&!d?.length,p=h?g:!1,y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new o0(l.createdAt,l.lastLoginAt),isAnonymous:p};Object.assign(r,y)}async function CD(r){const e=mt(r);await uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RD(r,e){return[...r.filter(s=>!e.some(l=>l.providerId===s.providerId)),...e]}function lE(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function ID(r,e){const t=await aE(r,{},async()=>{const s=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await iE(r,l,"/v1/token",`key=${c}`),h=await r._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:h,body:s};return r.emulatorConfig&&xi(r.emulatorConfig.host)&&(g.credentials="include"),sE.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DD(r,e){return ea(r,"POST","/v2/accounts:revokeToken",wi(r,e))}class vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=q_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:l,expiresIn:c}=await ID(e,t);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:l,expirationTime:c}=t,d=new vo;return s&&(Pe(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),l&&(Pe(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Pe(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vo,this.toJSON())}_performRefresh(){return Bs("not implemented")}}function Ga(r,e){Pe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Pn{constructor({uid:e,auth:t,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new AD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new o0(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ao(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SD(this,e)}reload(){return CD(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Pn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await uf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(Ks(this.auth));const e=await this.getIdToken();return await Ao(this,ED(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,l=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,h=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:w,isAnonymous:S,providerData:C,stsTokenManager:F}=t;Pe(v&&F,e,"internal-error");const T=vo.fromJSON(this.name,F);Pe(typeof v=="string",e,"internal-error"),Ga(s,e.name),Ga(l,e.name),Pe(typeof w=="boolean",e,"internal-error"),Pe(typeof S=="boolean",e,"internal-error"),Ga(c,e.name),Ga(d,e.name),Ga(h,e.name),Ga(g,e.name),Ga(p,e.name),Ga(y,e.name);const V=new Pn({uid:v,auth:e,email:l,emailVerified:w,displayName:s,isAnonymous:S,photoURL:d,phoneNumber:c,tenantId:h,stsTokenManager:T,createdAt:p,lastLoginAt:y});return C&&Array.isArray(C)&&(V.providerData=C.map(E=>({...E}))),g&&(V._redirectEventId=g),V}static async _fromIdTokenResponse(e,t,s=!1){const l=new vo;l.updateFromServerResponse(t);const c=new Pn({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:s});return await uf(c),c}static async _fromGetAccountInfoResponse(e,t,s){const l=t.users[0];Pe(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?lE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,h=new vo;h.updateFromIdToken(s);const g=new Pn({uid:l.localId,auth:e,stsTokenManager:h,isAnonymous:d}),p={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new o0(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,p),g}}const H_=new Map;function qs(r){Zs(r instanceof Function,"Expected a class definition");let e=H_.get(r);return e?(Zs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,H_.set(r,e),e)}class oE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}oE.type="NONE";const $_=oE;function Fh(r,e,t){return`firebase:${r}:${e}:${t}`}class wo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Fh(this.userKey,l.apiKey,c),this.fullPersistenceKey=Fh("persistence",l.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await cf(this.auth,{idToken:e}).catch(()=>{});return t?Pn._fromGetAccountInfoResponse(this.auth,t,e):null}return Pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new wo(qs($_),e,s);const l=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let c=l[0]||qs($_);const d=Fh(s,e.config.apiKey,e.name);let h=null;for(const p of t)try{const y=await p._get(d);if(y){let v;if(typeof y=="string"){const w=await cf(e,{idToken:y}).catch(()=>{});if(!w)break;v=await Pn._fromGetAccountInfoResponse(e,w,y)}else v=Pn._fromJSON(e,y);p!==c&&(h=v),c=p;break}}catch{}const g=l.filter(p=>p._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new wo(c,e,s):(c=g[0],h&&await c._set(d,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==c)try{await p._remove(d)}catch{}})),new wo(c,e,s))}}function G_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mE(e))return"Blackberry";if(gE(e))return"Webos";if(uE(e))return"Safari";if((e.includes("chrome/")||dE(e))&&!e.includes("edge/"))return"Chrome";if(fE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function cE(r=kr()){return/firefox\//i.test(r)}function uE(r=kr()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dE(r=kr()){return/crios\//i.test(r)}function hE(r=kr()){return/iemobile/i.test(r)}function fE(r=kr()){return/android/i.test(r)}function mE(r=kr()){return/blackberry/i.test(r)}function gE(r=kr()){return/webos/i.test(r)}function cx(r=kr()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function OD(r=kr()){return cx(r)&&!!window.navigator?.standalone}function MD(){return qC()&&document.documentMode===10}function pE(r=kr()){return cx(r)||fE(r)||gE(r)||mE(r)||/windows phone/i.test(r)||hE(r)}function xE(r,e=[]){let t;switch(r){case"Browser":t=G_(kr());break;case"Worker":t=`${G_(kr())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fl}/${s}`}class PD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((d,h)=>{try{const g=e(c);d(g)}catch(g){h(g)}});s.onAbort=t,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function LD(r,e={}){return ea(r,"GET","/v2/passwordPolicy",wi(r,e))}const UD=6;class VD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??UD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let l=0;l<e.length;l++)s=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class zD{constructor(e,t,s,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K_(this),this.idTokenSubscription=new K_(this),this.beforeStateQueue=new PD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await cf(this,{idToken:e}),s=await Pn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(an(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===d)&&h?.user&&(s=h.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await uf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(Ks(this));const t=e?mt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(Ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(Ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LD(this),t=new VD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await DD(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qs(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[qs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,l){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(h,this,"internal-error"),h.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,l);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&gD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function pl(r){return mt(r)}class K_{constructor(e){this.auth=e,this.observer=null,this.addObserver=QC(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FD(r){Gf=r}function yE(r){return Gf.loadJS(r)}function BD(){return Gf.recaptchaEnterpriseScript}function qD(){return Gf.gapiScript}function HD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class $D{constructor(){this.enterprise=new GD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class GD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const KD="recaptcha-enterprise",bE="NO_RECAPTCHA";class YD{constructor(e){this.type=KD,this.auth=pl(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,h)=>{kD(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new jD(g);return c.tenantId==null?c._agentRecaptchaConfig=p:c._tenantRecaptchaConfigs[c.tenantId]=p,d(p.siteKey)}}).catch(g=>{h(g)})})}function l(c,d,h){const g=window.grecaptcha;B_(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(p=>{d(p)}).catch(()=>{d(bE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $D().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(h=>{if(!t&&B_(window.grecaptcha))l(h,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=BD();g.length!==0&&(g+=h),yE(g).then(()=>{l(h,c,d)}).catch(p=>{d(p)})}}).catch(h=>{d(h)})})}}async function Y_(r,e,t,s=!1,l=!1){const c=new YD(r);let d;if(l)d=bE;else try{d=await c.verify(t)}catch{d=await c.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const g=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const g=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:d}):Object.assign(h,{captchaResponse:d}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function c0(r,e,t,s,l){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Y_(r,e,t,t==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Y_(r,e,t,t==="getOobCode");return s(r,d)}else return Promise.reject(c)})}function QD(r,e){const t=yi(r,"auth");if(t.isInitialized()){const l=t.getImmediate(),c=t.getOptions();if(ci(c,e??{}))return l;Bn(l,"already-initialized")}return t.initialize({options:e})}function XD(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(qs);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function WD(r,e,t){const s=pl(r);Pe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const l=!1,c=vE(e),{host:d,port:h}=JD(e),g=h===null?"":`:${h}`,p={url:`${c}//${d}${g}/`},y=Object.freeze({host:d,port:h,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Pe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Pe(ci(p,s.config.emulator)&&ci(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,xi(d)?(v0(`${c}//${d}${g}`),w0("Auth",!0)):ZD()}function vE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function JD(r){const e=vE(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:Q_(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Q_(d)}}}function Q_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function ZD(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class ux{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bs("not implemented")}_getIdTokenResponse(e){return Bs("not implemented")}_linkToIdToken(e,t){return Bs("not implemented")}_getReauthenticationResolver(e){return Bs("not implemented")}}async function e6(r,e){return ea(r,"POST","/v1/accounts:signUp",e)}async function t6(r,e){return qu(r,"POST","/v1/accounts:signInWithPassword",wi(r,e))}async function r6(r,e){return qu(r,"POST","/v1/accounts:signInWithEmailLink",wi(r,e))}async function n6(r,e){return qu(r,"POST","/v1/accounts:signInWithEmailLink",wi(r,e))}class ju extends ux{constructor(e,t,s,l=null){super("password",s),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new ju(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new ju(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c0(e,t,"signInWithPassword",t6);case"emailLink":return r6(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c0(e,s,"signUpPassword",e6);case"emailLink":return n6(e,{idToken:t,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function _o(r,e){return qu(r,"POST","/v1/accounts:signInWithIdp",wi(r,e))}const s6="http://localhost";class al extends ux{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new al(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Bn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:l,...c}=t;if(!s||!l)return null;const d=new al(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return _o(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,_o(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_o(e,t)}buildRequest(){const e={requestUri:s6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Au(t)}return e}}function a6(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i6(r){const e=Xc(Wc(r)).link,t=e?Xc(Wc(e)).deep_link_id:null,s=Xc(Wc(r)).deep_link_id;return(s?Xc(Wc(s)).link:null)||s||t||e||r}class dx{constructor(e){const t=Xc(Wc(e)),s=t.apiKey??null,l=t.oobCode??null,c=a6(t.mode??null);Pe(s&&l&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=i6(e);try{return new dx(t)}catch{return null}}}class Po{constructor(){this.providerId=Po.PROVIDER_ID}static credential(e,t){return ju._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=dx.parseLink(t);return Pe(s,"argument-error"),ju._fromEmailAndCode(e,s.code,s.tenantId)}}Po.PROVIDER_ID="password";Po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class wE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Hu extends wE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Xa extends Hu{constructor(){super("facebook.com")}static credential(e){return al._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xa.credential(e.oauthAccessToken)}catch{return null}}}Xa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xa.PROVIDER_ID="facebook.com";class Wa extends Hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return al._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Wa.credential(t,s)}catch{return null}}}Wa.GOOGLE_SIGN_IN_METHOD="google.com";Wa.PROVIDER_ID="google.com";class Ja extends Hu{constructor(){super("github.com")}static credential(e){return al._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ja.credential(e.oauthAccessToken)}catch{return null}}}Ja.GITHUB_SIGN_IN_METHOD="github.com";Ja.PROVIDER_ID="github.com";class Za extends Hu{constructor(){super("twitter.com")}static credential(e,t){return al._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Za.credential(t,s)}catch{return null}}}Za.TWITTER_SIGN_IN_METHOD="twitter.com";Za.PROVIDER_ID="twitter.com";async function l6(r,e){return qu(r,"POST","/v1/accounts:signUp",wi(r,e))}class il{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,l=!1){const c=await Pn._fromIdTokenResponse(e,s,l),d=X_(s);return new il({user:c,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const l=X_(s);return new il({user:e,providerId:l,_tokenResponse:s,operationType:t})}}function X_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class df extends Qr{constructor(e,t,s,l){super(t.code,t.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,l){return new df(e,t,s,l)}}function _E(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?df._fromErrorAndOperation(r,c,e,s):c})}async function o6(r,e,t=!1){const s=await Ao(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return il._forOperation(r,"link",s)}async function c6(r,e,t=!1){const{auth:s}=r;if(an(s.app))return Promise.reject(Ks(s));const l="reauthenticate";try{const c=await Ao(r,_E(s,l,e,r),t);Pe(c.idToken,s,"internal-error");const d=ox(c.idToken);Pe(d,s,"internal-error");const{sub:h}=d;return Pe(r.uid===h,s,"user-mismatch"),il._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Bn(s,"user-mismatch"),c}}async function NE(r,e,t=!1){if(an(r.app))return Promise.reject(Ks(r));const s="signIn",l=await _E(r,s,e),c=await il._fromIdTokenResponse(r,s,l);return t||await r._updateCurrentUser(c.user),c}async function u6(r,e){return NE(pl(r),e)}async function jE(r){const e=pl(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kE(r,e,t){if(an(r.app))return Promise.reject(Ks(r));const s=pl(r),d=await c0(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",l6).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&jE(r),g}),h=await il._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(h.user),h}function d6(r,e,t){return an(r.app)?Promise.reject(Ks(r)):u6(mt(r),Po.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&jE(r),s})}async function h6(r,e){return ea(r,"POST","/v1/accounts:update",e)}async function f6(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=mt(r),c={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await Ao(s,h6(s.auth,c));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const h=s.providerData.find(({providerId:g})=>g==="password");h&&(h.displayName=s.displayName,h.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function W_(r,e){return mt(r).setPersistence(e)}function m6(r,e,t,s){return mt(r).onIdTokenChanged(e,t,s)}function g6(r,e,t){return mt(r).beforeAuthStateChanged(e,t)}function p6(r,e,t,s){return mt(r).onAuthStateChanged(e,t,s)}function EE(r){return mt(r).signOut()}const hf="__sak";class SE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hf,"1"),this.storage.removeItem(hf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const x6=1e3,y6=10;class TE extends SE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),l=this.localCache[t];s!==l&&e(t,l,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,h,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);MD()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,y6):l()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},x6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}TE.type="LOCAL";const u0=TE;class AE extends SE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}AE.type="SESSION";const hx=AE;function b6(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const s=new Kf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:l,data:c}=t.data,d=this.handlersMap[l];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const h=Array.from(d).map(async p=>p(t.origin,c)),g=await b6(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kf.receivers=[];function fx(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class v6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((h,g)=>{const p=fx("",20);l.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(v){const w=v;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(y),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),h(w.data.response);break;default:clearTimeout(y),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ls(){return window}function w6(r){ls().location.href=r}function CE(){return typeof ls().WorkerGlobalScope<"u"&&typeof ls().importScripts=="function"}async function _6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function N6(){return navigator?.serviceWorker?.controller||null}function j6(){return CE()?self:null}const RE="firebaseLocalStorageDb",k6=1,ff="firebaseLocalStorage",IE="fbase_key";class $u{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yf(r,e){return r.transaction([ff],e?"readwrite":"readonly").objectStore(ff)}function E6(){const r=indexedDB.deleteDatabase(RE);return new $u(r).toPromise()}function d0(){const r=indexedDB.open(RE,k6);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(ff,{keyPath:IE})}catch(l){t(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(ff)?e(s):(s.close(),await E6(),e(await d0()))})})}async function J_(r,e,t){const s=Yf(r,!0).put({[IE]:e,value:t});return new $u(s).toPromise()}async function S6(r,e){const t=Yf(r,!1).get(e),s=await new $u(t).toPromise();return s===void 0?null:s.value}function Z_(r,e){const t=Yf(r,!0).delete(e);return new $u(t).toPromise()}const T6=800,A6=3;class DE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await d0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>A6)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kf._getInstance(j6()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _6(),!this.activeServiceWorker)return;this.sender=new v6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||N6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await d0();return await J_(e,hf,"1"),await Z_(e,hf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>J_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>S6(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Z_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Yf(l,!1).getAll();return new $u(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const l of Array.from(s))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),T6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DE.type="LOCAL";const C6=DE;new Bu(3e4,6e4);function R6(r,e){return e?qs(e):(Pe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class mx extends ux{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function I6(r){return NE(r.auth,new mx(r),r.bypassAuthState)}function D6(r){const{auth:e,user:t}=r;return Pe(t,e,"internal-error"),c6(t,new mx(r),r.bypassAuthState)}async function O6(r){const{auth:e,user:t}=r;return Pe(t,e,"internal-error"),o6(t,new mx(r),r.bypassAuthState)}class OE{constructor(e,t,s,l,c=!1){this.auth=e,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:l,tenantId:c,error:d,type:h}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return I6;case"linkViaPopup":case"linkViaRedirect":return O6;case"reauthViaPopup":case"reauthViaRedirect":return D6;default:Bn(this.auth,"internal-error")}}resolve(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const M6=new Bu(2e3,1e4);class xo extends OE{constructor(e,t,s,l,c){super(e,t,l,c),this.provider=s,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Zs(this.filter.length===1,"Popup operations only handle one event");const e=fx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(is(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(is(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(is(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,M6.get())};e()}}xo.currentPopupAction=null;const P6="pendingRedirect",Bh=new Map;class L6 extends OE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Bh.get(this.auth._key());if(!e){try{const s=await U6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U6(r,e){const t=F6(e),s=z6(r);if(!await s._isAvailable())return!1;const l=await s._get(t)==="true";return await s._remove(t),l}function V6(r,e){Bh.set(r._key(),e)}function z6(r){return qs(r._redirectPersistence)}function F6(r){return Fh(P6,r.config.apiKey,r.name)}async function B6(r,e,t=!1){if(an(r.app))return Promise.reject(Ks(r));const s=pl(r),l=R6(s,e),d=await new L6(s,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const q6=600*1e3;class H6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ME(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(is(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=q6&&this.cachedEventUids.clear(),this.cachedEventUids.has(eN(e))}saveEventToCache(e){this.cachedEventUids.add(eN(e)),this.lastProcessedEventTime=Date.now()}}function eN(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function ME({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function $6(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ME(r);default:return!1}}async function G6(r,e={}){return ea(r,"GET","/v1/projects",e)}const K6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y6=/^https?/;async function Q6(r){if(r.config.emulator)return;const{authorizedDomains:e}=await G6(r);for(const t of e)try{if(X6(t))return}catch{}Bn(r,"unauthorized-domain")}function X6(r){const e=l0(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!Y6.test(t))return!1;if(K6.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}const W6=new Bu(3e4,6e4);function tN(){const r=ls().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function J6(r){return new Promise((e,t)=>{function s(){tN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tN(),t(is(r,"network-request-failed"))},timeout:W6.get()})}if(ls().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ls().gapi?.load)s();else{const l=HD("iframefcb");return ls()[l]=()=>{gapi.load?s():t(is(r,"network-request-failed"))},yE(`${qD()}?onload=${l}`).catch(c=>t(c))}}).catch(e=>{throw qh=null,e})}let qh=null;function Z6(r){return qh=qh||J6(r),qh}const eO=new Bu(5e3,15e3),tO="__/auth/iframe",rO="emulator/auth/iframe",nO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aO(r){const e=r.config;Pe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?lx(e,rO):`https://${r.config.authDomain}/${tO}`,s={apiKey:e.apiKey,appName:r.name,v:fl},l=sO.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Au(s).slice(1)}`}async function iO(r){const e=await Z6(r),t=ls().gapi;return Pe(t,r,"internal-error"),e.open({where:document.body,url:aO(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nO,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=is(r,"network-request-failed"),h=ls().setTimeout(()=>{c(d)},eO.get());function g(){ls().clearTimeout(h),l(s)}s.ping(g).then(g,()=>{c(d)})}))}const lO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oO=500,cO=600,uO="_blank",dO="http://localhost";class rN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hO(r,e,t,s=oO,l=cO){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const g={...lO,width:s.toString(),height:l.toString(),top:c,left:d},p=kr().toLowerCase();t&&(h=dE(p)?uO:t),cE(p)&&(e=e||dO,g.scrollbars="yes");const y=Object.entries(g).reduce((w,[S,C])=>`${w}${S}=${C},`,"");if(OD(p)&&h!=="_self")return fO(e||"",h),new rN(null);const v=window.open(e||"",h,y);Pe(v,r,"popup-blocked");try{v.focus()}catch{}return new rN(v)}function fO(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const mO="__/auth/handler",gO="emulator/auth/handler",pO=encodeURIComponent("fac");async function nN(r,e,t,s,l,c){Pe(r.config.authDomain,r,"auth-domain-config-required"),Pe(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:fl,eventId:l};if(e instanceof wE){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",YC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))d[y]=v}if(e instanceof Hu){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(d.scopes=y.join(","))}r.tenantId&&(d.tid=r.tenantId);const h=d;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const g=await r._getAppCheckToken(),p=g?`#${pO}=${encodeURIComponent(g)}`:"";return`${xO(r)}?${Au(h).slice(1)}${p}`}function xO({config:r}){return r.emulator?lx(r,gO):`https://${r.authDomain}/${mO}`}const jp="webStorageSupport";class yO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hx,this._completeRedirectFn=B6,this._overrideRedirectResult=V6}async _openPopup(e,t,s,l){Zs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await nN(e,t,s,l0(),l);return hO(e,c,fx())}async _openRedirect(e,t,s,l){await this._originValidation(e);const c=await nN(e,t,s,l0(),l);return w6(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:c}=this.eventManagers[t];return l?Promise.resolve(l):(Zs(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await iO(e),s=new H6(e);return t.register("authEvent",l=>(Pe(l?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jp,{type:jp},l=>{const c=l?.[0]?.[jp];c!==void 0&&t(!!c),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Q6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pE()||uE()||cx()}}const bO=yO;var sN="@firebase/auth",aN="1.11.0";class vO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wO(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _O(r){zn(new Sn("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:h}=s.options;Pe(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:h,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xE(r)},p=new zD(s,l,c,g);return XD(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),zn(new Sn("auth-internal",e=>{const t=pl(e.getProvider("auth").getImmediate());return(s=>new vO(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(sN,aN,wO(r)),Kr(sN,aN,"esm2020")}const NO=300,jO=uj("authIdTokenMaxAge")||NO;let iN=null;const kO=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>jO)return;const l=t?.token;iN!==l&&(iN=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function EO(r=Cu()){const e=yi(r,"auth");if(e.isInitialized())return e.getImmediate();const t=QD(r,{popupRedirectResolver:bO,persistence:[C6,u0,hx]}),s=uj("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=kO(c.toString());g6(t,d,()=>d(t.currentUser)),m6(t,h=>d(h))}}const l=lj("auth");return l&&WD(t,`http://${l}`),t}function SO(){return document.getElementsByTagName("head")?.[0]??document}FD({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=l=>{const c=is("internal-error");c.customData=l,t(c)},s.type="text/javascript",s.charset="UTF-8",SO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_O("Browser");var TO="firebase",AO="12.0.0";Kr(TO,AO,"app");const PE="@firebase/installations",gx="0.6.19";const LE=1e4,UE=`w:${gx}`,VE="FIS_v2",CO="https://firebaseinstallations.googleapis.com/v1",RO=3600*1e3,IO="installations",DO="Installations";const OO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ll=new hl(IO,DO,OO);function zE(r){return r instanceof Qr&&r.code.includes("request-failed")}function FE({projectId:r}){return`${CO}/projects/${r}/installations`}function BE(r){return{token:r.token,requestStatus:2,expiresIn:PO(r.expiresIn),creationTime:Date.now()}}async function qE(r,e){const s=(await e.json()).error;return ll.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function HE({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function MO(r,{refreshToken:e}){const t=HE(r);return t.append("Authorization",LO(e)),t}async function $E(r){const e=await r();return e.status>=500&&e.status<600?r():e}function PO(r){return Number(r.replace("s","000"))}function LO(r){return`${VE} ${r}`}async function UO({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const s=FE(r),l=HE(r),c=e.getImmediate({optional:!0});if(c){const p=await c.getHeartbeatsHeader();p&&l.append("x-firebase-client",p)}const d={fid:t,authVersion:VE,appId:r.appId,sdkVersion:UE},h={method:"POST",headers:l,body:JSON.stringify(d)},g=await $E(()=>fetch(s,h));if(g.ok){const p=await g.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:BE(p.authToken)}}else throw await qE("Create Installation",g)}function GE(r){return new Promise(e=>{setTimeout(e,r)})}function VO(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}const zO=/^[cdef][\w-]{21}$/,h0="";function FO(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=BO(r);return zO.test(t)?t:h0}catch{return h0}}function BO(r){return VO(r).substr(0,22)}function Qf(r){return`${r.appName}!${r.appId}`}const KE=new Map;function YE(r,e){const t=Qf(r);QE(t,e),qO(t,e)}function QE(r,e){const t=KE.get(r);if(t)for(const s of t)s(e)}function qO(r,e){const t=HO();t&&t.postMessage({key:r,fid:e}),$O()}let Ji=null;function HO(){return!Ji&&"BroadcastChannel"in self&&(Ji=new BroadcastChannel("[Firebase] FID Change"),Ji.onmessage=r=>{QE(r.data.key,r.data.fid)}),Ji}function $O(){KE.size===0&&Ji&&(Ji.close(),Ji=null)}const GO="firebase-installations-database",KO=1,ol="firebase-installations-store";let kp=null;function px(){return kp||(kp=gj(GO,KO,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(ol)}}})),kp}async function mf(r,e){const t=Qf(r),l=(await px()).transaction(ol,"readwrite"),c=l.objectStore(ol),d=await c.get(t);return await c.put(e,t),await l.done,(!d||d.fid!==e.fid)&&YE(r,e.fid),e}async function XE(r){const e=Qf(r),s=(await px()).transaction(ol,"readwrite");await s.objectStore(ol).delete(e),await s.done}async function Xf(r,e){const t=Qf(r),l=(await px()).transaction(ol,"readwrite"),c=l.objectStore(ol),d=await c.get(t),h=e(d);return h===void 0?await c.delete(t):await c.put(h,t),await l.done,h&&(!d||d.fid!==h.fid)&&YE(r,h.fid),h}async function xx(r){let e;const t=await Xf(r.appConfig,s=>{const l=YO(s),c=QO(r,l);return e=c.registrationPromise,c.installationEntry});return t.fid===h0?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function YO(r){const e=r||{fid:FO(),registrationStatus:0};return WE(e)}function QO(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(ll.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=XO(r,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:WO(r)}:{installationEntry:e}}async function XO(r,e){try{const t=await UO(r,e);return mf(r.appConfig,t)}catch(t){throw zE(t)&&t.customData.serverCode===409?await XE(r.appConfig):await mf(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function WO(r){let e=await lN(r.appConfig);for(;e.registrationStatus===1;)await GE(100),e=await lN(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await xx(r);return s||t}return e}function lN(r){return Xf(r,e=>{if(!e)throw ll.create("installation-not-found");return WE(e)})}function WE(r){return JO(r)?{fid:r.fid,registrationStatus:0}:r}function JO(r){return r.registrationStatus===1&&r.registrationTime+LE<Date.now()}async function ZO({appConfig:r,heartbeatServiceProvider:e},t){const s=eM(r,t),l=MO(r,t),c=e.getImmediate({optional:!0});if(c){const p=await c.getHeartbeatsHeader();p&&l.append("x-firebase-client",p)}const d={installation:{sdkVersion:UE,appId:r.appId}},h={method:"POST",headers:l,body:JSON.stringify(d)},g=await $E(()=>fetch(s,h));if(g.ok){const p=await g.json();return BE(p)}else throw await qE("Generate Auth Token",g)}function eM(r,{fid:e}){return`${FE(r)}/${e}/authTokens:generate`}async function yx(r,e=!1){let t;const s=await Xf(r.appConfig,c=>{if(!JE(c))throw ll.create("not-registered");const d=c.authToken;if(!e&&nM(d))return c;if(d.requestStatus===1)return t=tM(r,e),c;{if(!navigator.onLine)throw ll.create("app-offline");const h=aM(c);return t=rM(r,h),h}});return t?await t:s.authToken}async function tM(r,e){let t=await oN(r.appConfig);for(;t.authToken.requestStatus===1;)await GE(100),t=await oN(r.appConfig);const s=t.authToken;return s.requestStatus===0?yx(r,e):s}function oN(r){return Xf(r,e=>{if(!JE(e))throw ll.create("not-registered");const t=e.authToken;return iM(t)?{...e,authToken:{requestStatus:0}}:e})}async function rM(r,e){try{const t=await ZO(r,e),s={...e,authToken:t};return await mf(r.appConfig,s),t}catch(t){if(zE(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await XE(r.appConfig);else{const s={...e,authToken:{requestStatus:0}};await mf(r.appConfig,s)}throw t}}function JE(r){return r!==void 0&&r.registrationStatus===2}function nM(r){return r.requestStatus===2&&!sM(r)}function sM(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+RO}function aM(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function iM(r){return r.requestStatus===1&&r.requestTime+LE<Date.now()}async function lM(r){const e=r,{installationEntry:t,registrationPromise:s}=await xx(e);return s?s.catch(console.error):yx(e).catch(console.error),t.fid}async function oM(r,e=!1){const t=r;return await cM(t),(await yx(t,e)).token}async function cM(r){const{registrationPromise:e}=await xx(r);e&&await e}function uM(r){if(!r||!r.options)throw Ep("App Configuration");if(!r.name)throw Ep("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw Ep(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Ep(r){return ll.create("missing-app-config-values",{valueName:r})}const ZE="installations",dM="installations-internal",hM=r=>{const e=r.getProvider("app").getImmediate(),t=uM(e),s=yi(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},fM=r=>{const e=r.getProvider("app").getImmediate(),t=yi(e,ZE).getImmediate();return{getId:()=>lM(t),getToken:l=>oM(t,l)}};function mM(){zn(new Sn(ZE,hM,"PUBLIC")),zn(new Sn(dM,fM,"PRIVATE"))}mM();Kr(PE,gx);Kr(PE,gx,"esm2020");const gf="analytics",gM="firebase_id",pM="origin",xM=60*1e3,yM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bx="https://www.googletagmanager.com/gtag/js";const Yr=new Nf("@firebase/analytics");const bM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},un=new hl("analytics","Analytics",bM);function vM(r){if(!r.startsWith(bx)){const e=un.create("invalid-gtag-resource",{gtagURL:r});return Yr.warn(e.message),""}return r}function eS(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function wM(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function _M(r,e){const t=wM("firebase-js-sdk-policy",{createScriptURL:vM}),s=document.createElement("script"),l=`${bx}?l=${r}&id=${e}`;s.src=t?t?.createScriptURL(l):l,s.async=!0,document.head.appendChild(s)}function NM(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function jM(r,e,t,s,l,c){const d=s[l];try{if(d)await e[d];else{const g=(await eS(t)).find(p=>p.measurementId===l);g&&await e[g.appId]}}catch(h){Yr.error(h)}r("config",l,c)}async function kM(r,e,t,s,l){try{let c=[];if(l&&l.send_to){let d=l.send_to;Array.isArray(d)||(d=[d]);const h=await eS(t);for(const g of d){const p=h.find(v=>v.measurementId===g),y=p&&e[p.appId];if(y)c.push(y);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),r("event",s,l||{})}catch(c){Yr.error(c)}}function EM(r,e,t,s){async function l(c,...d){try{if(c==="event"){const[h,g]=d;await kM(r,e,t,h,g)}else if(c==="config"){const[h,g]=d;await jM(r,e,t,s,h,g)}else if(c==="consent"){const[h,g]=d;r("consent",h,g)}else if(c==="get"){const[h,g,p]=d;r("get",h,g,p)}else if(c==="set"){const[h]=d;r("set",h)}else r(c,...d)}catch(h){Yr.error(h)}}return l}function SM(r,e,t,s,l){let c=function(...d){window[s].push(arguments)};return window[l]&&typeof window[l]=="function"&&(c=window[l]),window[l]=EM(c,r,e,t),{gtagCore:c,wrappedGtag:window[l]}}function TM(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(bx)&&t.src.includes(r))return t;return null}const AM=30,CM=1e3;class RM{constructor(e={},t=CM){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const tS=new RM;function IM(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function DM(r){const{appId:e,apiKey:t}=r,s={method:"GET",headers:IM(t)},l=yM.replace("{app-id}",e),c=await fetch(l,s);if(c.status!==200&&c.status!==304){let d="";try{const h=await c.json();h.error?.message&&(d=h.error.message)}catch{}throw un.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function OM(r,e=tS,t){const{appId:s,apiKey:l,measurementId:c}=r.options;if(!s)throw un.create("no-app-id");if(!l){if(c)return{measurementId:c,appId:s};throw un.create("no-api-key")}const d=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new LM;return setTimeout(async()=>{h.abort()},xM),rS({appId:s,apiKey:l,measurementId:c},d,h,e)}async function rS(r,{throttleEndTimeMillis:e,backoffCount:t},s,l=tS){const{appId:c,measurementId:d}=r;try{await MM(s,e)}catch(h){if(d)return Yr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:c,measurementId:d};throw h}try{const h=await DM(r);return l.deleteThrottleMetadata(c),h}catch(h){const g=h;if(!PM(g)){if(l.deleteThrottleMetadata(c),d)return Yr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:c,measurementId:d};throw h}const p=Number(g?.customData?.httpStatus)===503?Iw(t,l.intervalMillis,AM):Iw(t,l.intervalMillis),y={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return l.setThrottleMetadata(c,y),Yr.debug(`Calling attemptFetch again in ${p} millis`),rS(r,y,s,l)}}function MM(r,e){return new Promise((t,s)=>{const l=Math.max(e-Date.now(),0),c=setTimeout(t,l);r.addEventListener(()=>{clearTimeout(c),s(un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function PM(r){if(!(r instanceof Qr)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class LM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function UM(r,e,t,s,l){if(l&&l.global){r("event",t,s);return}else{const c=await e,d={...s,send_to:c};r("event",t,d)}}async function VM(){if(N0())try{await j0()}catch(r){return Yr.warn(un.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return Yr.warn(un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function zM(r,e,t,s,l,c,d){const h=OM(r);h.then(w=>{t[w.measurementId]=w.appId,r.options.measurementId&&w.measurementId!==r.options.measurementId&&Yr.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Yr.error(w)),e.push(h);const g=VM().then(w=>{if(w)return s.getId()}),[p,y]=await Promise.all([h,g]);TM(c)||_M(c,p.measurementId),l("js",new Date);const v=d?.config??{};return v[pM]="firebase",v.update=!0,y!=null&&(v[gM]=y),l("config",p.measurementId,v),p.measurementId}class FM{constructor(e){this.app=e}_delete(){return delete du[this.app.options.appId],Promise.resolve()}}let du={},cN=[];const uN={};let Sp="dataLayer",BM="gtag",dN,nS,hN=!1;function qM(){const r=[];if(_0()&&r.push("This is a browser extension environment."),hj()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,l)=>`(${l+1}) ${s}`).join(" "),t=un.create("invalid-analytics-context",{errorInfo:e});Yr.warn(t.message)}}function HM(r,e,t){qM();const s=r.options.appId;if(!s)throw un.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Yr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw un.create("no-api-key");if(du[s]!=null)throw un.create("already-exists",{id:s});if(!hN){NM(Sp);const{wrappedGtag:c,gtagCore:d}=SM(du,cN,uN,Sp,BM);nS=c,dN=d,hN=!0}return du[s]=zM(r,cN,uN,e,dN,Sp,t),new FM(r)}function $M(r=Cu()){r=mt(r);const e=yi(r,gf);return e.isInitialized()?e.getImmediate():GM(r)}function GM(r,e={}){const t=yi(r,gf);if(t.isInitialized()){const l=t.getImmediate();if(ci(e,t.getOptions()))return l;throw un.create("already-initialized")}return t.initialize({options:e})}async function KM(){if(_0()||!hj()||!N0())return!1;try{return await j0()}catch{return!1}}function YM(r,e,t,s){r=mt(r),UM(nS,du[r.app.options.appId],e,t,s).catch(l=>Yr.error(l))}const fN="@firebase/analytics",mN="0.10.18";function QM(){zn(new Sn(gf,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("installations-internal").getImmediate();return HM(s,l,t)},"PUBLIC")),zn(new Sn("analytics-internal",r,"PRIVATE")),Kr(fN,mN),Kr(fN,mN,"esm2020");function r(e){try{const t=e.getProvider(gf).getImmediate();return{logEvent:(s,l,c)=>YM(t,s,l,c)}}catch(t){throw un.create("interop-component-reg-failed",{reason:t})}}}QM();const sS="firebasestorage.googleapis.com",aS="storageBucket",XM=120*1e3,WM=600*1e3,JM=1e3;class At extends Qr{constructor(e,t,s=0){super(Tp(e),`Firebase Storage: ${t} (${Tp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,At.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jt||(jt={}));function Tp(r){return"storage/"+r}function vx(){const r="An unknown error occurred, please check the error payload for server response.";return new At(jt.UNKNOWN,r)}function ZM(r){return new At(jt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function e3(r){return new At(jt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function t3(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new At(jt.UNAUTHENTICATED,r)}function r3(){return new At(jt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function n3(r){return new At(jt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function iS(){return new At(jt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lS(){return new At(jt.CANCELED,"User canceled the upload/download.")}function s3(r){return new At(jt.INVALID_URL,"Invalid URL '"+r+"'.")}function a3(r){return new At(jt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function i3(){return new At(jt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aS+"' property when initializing the app?")}function oS(){return new At(jt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function l3(){return new At(jt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function o3(){return new At(jt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function c3(r){return new At(jt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function f0(r){return new At(jt.INVALID_ARGUMENT,r)}function cS(){return new At(jt.APP_DELETED,"The Firebase app was deleted.")}function u3(r){return new At(jt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hu(r,e){return new At(jt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function Hc(r){throw new At(jt.INTERNAL_ERROR,"Internal error: "+r)}class cn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=cn.makeFromUrl(e,t)}catch{return new cn(e,"")}if(s.path==="")return s;throw a3(e)}static makeFromUrl(e,t){let s=null;const l="([A-Za-z0-9.\\-_]+)";function c(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const d="(/(.*))?$",h=new RegExp("^gs://"+l+d,"i"),g={bucket:1,path:3};function p(Y){Y.path_=decodeURIComponent(Y.path)}const y="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",S=new RegExp(`^https?://${v}/${y}/b/${l}/o${w}`,"i"),C={bucket:1,path:3},F=t===sS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,T="([^?#]*)",V=new RegExp(`^https?://${F}/${l}/${T}`,"i"),B=[{regex:h,indices:g,postModify:c},{regex:S,indices:C,postModify:p},{regex:V,indices:{bucket:1,path:2},postModify:p}];for(let Y=0;Y<B.length;Y++){const W=B[Y],$=W.regex.exec(e);if($){const I=$[W.indices.bucket];let L=$[W.indices.path];L||(L=""),s=new cn(I,L),W.postModify(s);break}}if(s==null)throw s3(e);return s}}class d3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function h3(r,e,t){let s=1,l=null,c=null,d=!1,h=0;function g(){return h===2}let p=!1;function y(...T){p||(p=!0,e.apply(null,T))}function v(T){l=setTimeout(()=>{l=null,r(S,g())},T)}function w(){c&&clearTimeout(c)}function S(T,...V){if(p){w();return}if(T){w(),y.call(null,T,...V);return}if(g()||d){w(),y.call(null,T,...V);return}s<64&&(s*=2);let B;h===1?(h=2,B=0):B=(s+Math.random())*1e3,v(B)}let C=!1;function F(T){C||(C=!0,w(),!p&&(l!==null?(T||(h=2),clearTimeout(l),v(0)):T||(h=1)))}return v(0),c=setTimeout(()=>{d=!0,F(!0)},t),F}function f3(r){r(!1)}function m3(r){return r!==void 0}function g3(r){return typeof r=="function"}function p3(r){return typeof r=="object"&&!Array.isArray(r)}function Wf(r){return typeof r=="string"||r instanceof String}function gN(r){return wx()&&r instanceof Blob}function wx(){return typeof Blob<"u"}function pN(r,e,t,s){if(s<e)throw f0(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>t)throw f0(`Invalid value for '${r}'. Expected ${t} or less.`)}function Lo(r,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${r}`}function uS(r){const e=encodeURIComponent;let t="?";for(const s in r)if(r.hasOwnProperty(s)){const l=e(s)+"="+e(r[s]);t=t+l+"&"}return t=t.slice(0,-1),t}var el;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(el||(el={}));function dS(r,e){const t=r>=500&&r<600,l=[408,429].indexOf(r)!==-1,c=e.indexOf(r)!==-1;return t||l||c}class x3{constructor(e,t,s,l,c,d,h,g,p,y,v,w=!0,S=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=l,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=h,this.errorCallback_=g,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=v,this.retry=w,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,F)=>{this.resolve_=C,this.reject_=F,this.start_()})}start_(){const e=(s,l)=>{if(l){s(!1,new Ah(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=h=>{const g=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,p)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const h=c.getErrorCode()===el.NO_ERROR,g=c.getStatus();if(!h||dS(g,this.additionalRetryCodes_)&&this.retry){const y=c.getErrorCode()===el.ABORT;s(!1,new Ah(!1,null,y));return}const p=this.successCodes_.indexOf(g)!==-1;s(!0,new Ah(p,c))})},t=(s,l)=>{const c=this.resolve_,d=this.reject_,h=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());m3(g)?c(g):c()}catch(g){d(g)}else if(h!==null){const g=vx();g.serverResponse=h.getErrorText(),this.errorCallback_?d(this.errorCallback_(h,g)):d(g)}else if(l.canceled){const g=this.appDelete_?cS():lS();d(g)}else{const g=iS();d(g)}};this.canceled_?t(!1,new Ah(!1,null,!0)):this.backoffId_=h3(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&f3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ah{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function y3(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function b3(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function v3(r,e){e&&(r["X-Firebase-GMPID"]=e)}function w3(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function _3(r,e,t,s,l,c,d=!0,h=!1){const g=uS(r.urlParams),p=r.url+g,y=Object.assign({},r.headers);return v3(y,e),y3(y,t),b3(y,c),w3(y,s),new x3(p,r.method,y,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,l,d,h)}function N3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function j3(...r){const e=N3();if(e!==void 0){const t=new e;for(let s=0;s<r.length;s++)t.append(r[s]);return t.getBlob()}else{if(wx())return new Blob(r);throw new At(jt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function k3(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}function E3(r){if(typeof atob>"u")throw c3("base-64");return atob(r)}const ns={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ap{constructor(e,t){this.data=e,this.contentType=t||null}}function S3(r,e){switch(r){case ns.RAW:return new Ap(hS(e));case ns.BASE64:case ns.BASE64URL:return new Ap(fS(r,e));case ns.DATA_URL:return new Ap(A3(e),C3(e))}throw vx()}function hS(r){const e=[];for(let t=0;t<r.length;t++){let s=r.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const c=s,d=r.charCodeAt(++t);s=65536|(c&1023)<<10|d&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function T3(r){let e;try{e=decodeURIComponent(r)}catch{throw hu(ns.DATA_URL,"Malformed data URL.")}return hS(e)}function fS(r,e){switch(r){case ns.BASE64:{const l=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(l||c)throw hu(r,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case ns.BASE64URL:{const l=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(l||c)throw hu(r,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=E3(e)}catch(l){throw l.message.includes("polyfill")?l:hu(r,"Invalid character found")}const s=new Uint8Array(t.length);for(let l=0;l<t.length;l++)s[l]=t.charCodeAt(l);return s}class mS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw hu(ns.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=R3(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function A3(r){const e=new mS(r);return e.base64?fS(ns.BASE64,e.rest):T3(e.rest)}function C3(r){return new mS(r).contentType}function R3(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}class Fs{constructor(e,t){let s=0,l="";gN(e)?(this.data_=e,s=e.size,l=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,t){if(gN(this.data_)){const s=this.data_,l=k3(s,e,t);return l===null?null:new Fs(l)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new Fs(s,!0)}}static getBlob(...e){if(wx()){const t=e.map(s=>s instanceof Fs?s.data_:s);return new Fs(j3.apply(null,t))}else{const t=e.map(d=>Wf(d)?S3(ns.RAW,d).data:d.data_);let s=0;t.forEach(d=>{s+=d.byteLength});const l=new Uint8Array(s);let c=0;return t.forEach(d=>{for(let h=0;h<d.length;h++)l[c++]=d[h]}),new Fs(l,!0)}}uploadData(){return this.data_}}function gS(r){let e;try{e=JSON.parse(r)}catch{return null}return p3(e)?e:null}function I3(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function D3(r,e){const t=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?t:r+"/"+t}function pS(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}function O3(r,e){return e}class Ir{constructor(e,t,s,l){this.server=e,this.local=t||e,this.writable=!!s,this.xform=l||O3}}let Ch=null;function M3(r){return!Wf(r)||r.length<2?r:pS(r)}function _x(){if(Ch)return Ch;const r=[];r.push(new Ir("bucket")),r.push(new Ir("generation")),r.push(new Ir("metageneration")),r.push(new Ir("name","fullPath",!0));function e(c,d){return M3(d)}const t=new Ir("name");t.xform=e,r.push(t);function s(c,d){return d!==void 0?Number(d):d}const l=new Ir("size");return l.xform=s,r.push(l),r.push(new Ir("timeCreated")),r.push(new Ir("updated")),r.push(new Ir("md5Hash",null,!0)),r.push(new Ir("cacheControl",null,!0)),r.push(new Ir("contentDisposition",null,!0)),r.push(new Ir("contentEncoding",null,!0)),r.push(new Ir("contentLanguage",null,!0)),r.push(new Ir("contentType",null,!0)),r.push(new Ir("metadata","customMetadata",!0)),Ch=r,Ch}function P3(r,e){function t(){const s=r.bucket,l=r.fullPath,c=new cn(s,l);return e._makeStorageReference(c)}Object.defineProperty(r,"ref",{get:t})}function L3(r,e,t){const s={};s.type="file";const l=t.length;for(let c=0;c<l;c++){const d=t[c];s[d.local]=d.xform(s,e[d.server])}return P3(s,r),s}function xS(r,e,t){const s=gS(e);return s===null?null:L3(r,s,t)}function U3(r,e,t,s){const l=gS(e);if(l===null||!Wf(l.downloadTokens))return null;const c=l.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(p=>{const y=r.bucket,v=r.fullPath,w="/b/"+d(y)+"/o/"+d(v),S=Lo(w,t,s),C=uS({alt:"media",token:p});return S+C})[0]}function yS(r,e){const t={},s=e.length;for(let l=0;l<s;l++){const c=e[l];c.writable&&(t[c.server]=r[c.local])}return JSON.stringify(t)}class xl{constructor(e,t,s,l){this.url=e,this.method=t,this.handler=s,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ys(r){if(!r)throw vx()}function Nx(r,e){function t(s,l){const c=xS(r,l,e);return Ys(c!==null),c}return t}function V3(r,e){function t(s,l){const c=xS(r,l,e);return Ys(c!==null),U3(c,l,r.host,r._protocol)}return t}function Gu(r){function e(t,s){let l;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?l=r3():l=t3():t.getStatus()===402?l=e3(r.bucket):t.getStatus()===403?l=n3(r.path):l=s,l.status=t.getStatus(),l.serverResponse=s.serverResponse,l}return e}function jx(r){const e=Gu(r);function t(s,l){let c=e(s,l);return s.getStatus()===404&&(c=ZM(r.path)),c.serverResponse=l.serverResponse,c}return t}function z3(r,e,t){const s=e.fullServerUrl(),l=Lo(s,r.host,r._protocol),c="GET",d=r.maxOperationRetryTime,h=new xl(l,c,Nx(r,t),d);return h.errorHandler=jx(e),h}function F3(r,e,t){const s=e.fullServerUrl(),l=Lo(s,r.host,r._protocol),c="GET",d=r.maxOperationRetryTime,h=new xl(l,c,V3(r,t),d);return h.errorHandler=jx(e),h}function B3(r,e){const t=e.fullServerUrl(),s=Lo(t,r.host,r._protocol),l="DELETE",c=r.maxOperationRetryTime;function d(g,p){}const h=new xl(s,l,d,c);return h.successCodes=[200,204],h.errorHandler=jx(e),h}function q3(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function bS(r,e,t){const s=Object.assign({},t);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=q3(null,e)),s}function vS(r,e,t,s,l){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function h(){let B="";for(let Y=0;Y<2;Y++)B=B+Math.random().toString().slice(2);return B}const g=h();d["Content-Type"]="multipart/related; boundary="+g;const p=bS(e,s,l),y=yS(p,t),v="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+g+`\r
Content-Type: `+p.contentType+`\r
\r
`,w=`\r
--`+g+"--",S=Fs.getBlob(v,s,w);if(S===null)throw oS();const C={name:p.fullPath},F=Lo(c,r.host,r._protocol),T="POST",V=r.maxUploadRetryTime,E=new xl(F,T,Nx(r,t),V);return E.urlParams=C,E.headers=d,E.body=S.uploadData(),E.errorHandler=Gu(e),E}class pf{constructor(e,t,s,l){this.current=e,this.total=t,this.finalized=!!s,this.metadata=l||null}}function kx(r,e){let t=null;try{t=r.getResponseHeader("X-Goog-Upload-Status")}catch{Ys(!1)}return Ys(!!t&&(e||["active"]).indexOf(t)!==-1),t}function H3(r,e,t,s,l){const c=e.bucketOnlyServerUrl(),d=bS(e,s,l),h={name:d.fullPath},g=Lo(c,r.host,r._protocol),p="POST",y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},v=yS(d,t),w=r.maxUploadRetryTime;function S(F){kx(F);let T;try{T=F.getResponseHeader("X-Goog-Upload-URL")}catch{Ys(!1)}return Ys(Wf(T)),T}const C=new xl(g,p,S,w);return C.urlParams=h,C.headers=y,C.body=v,C.errorHandler=Gu(e),C}function $3(r,e,t,s){const l={"X-Goog-Upload-Command":"query"};function c(p){const y=kx(p,["active","final"]);let v=null;try{v=p.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ys(!1)}v||Ys(!1);const w=Number(v);return Ys(!isNaN(w)),new pf(w,s.size(),y==="final")}const d="POST",h=r.maxUploadRetryTime,g=new xl(t,d,c,h);return g.headers=l,g.errorHandler=Gu(e),g}const xN=256*1024;function G3(r,e,t,s,l,c,d,h){const g=new pf(0,0);if(d?(g.current=d.current,g.total=d.total):(g.current=0,g.total=s.size()),s.size()!==g.total)throw l3();const p=g.total-g.current;let y=p;l>0&&(y=Math.min(y,l));const v=g.current,w=v+y;let S="";y===0?S="finalize":p===y?S="upload, finalize":S="upload";const C={"X-Goog-Upload-Command":S,"X-Goog-Upload-Offset":`${g.current}`},F=s.slice(v,w);if(F===null)throw oS();function T(Y,W){const $=kx(Y,["active","final"]),I=g.current+y,L=s.size();let j;return $==="final"?j=Nx(e,c)(Y,W):j=null,new pf(I,L,$==="final",j)}const V="POST",E=e.maxUploadRetryTime,B=new xl(t,V,T,E);return B.headers=C,B.body=F.uploadData(),B.progressCallback=h||null,B.errorHandler=Gu(r),B}const $r={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Cp(r){switch(r){case"running":case"pausing":case"canceling":return $r.RUNNING;case"paused":return $r.PAUSED;case"success":return $r.SUCCESS;case"canceled":return $r.CANCELED;case"error":return $r.ERROR;default:return $r.ERROR}}class K3{constructor(e,t,s){if(g3(e)||t!=null||s!=null)this.next=e,this.error=t??void 0,this.complete=s??void 0;else{const c=e;this.next=c.next,this.error=c.error,this.complete=c.complete}}}function io(r){return(...e)=>{Promise.resolve().then(()=>r(...e))}}class Y3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=el.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=el.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=el.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,l,c){if(this.sent_)throw Hc("cannot .send() more than once");if(xi(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),c!==void 0)for(const d in c)c.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,c[d].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Hc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Q3 extends Y3{initXhr(){this.xhr_.responseType="text"}}function ei(){return new Q3}class X3{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=s,this._mappings=_x(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=l=>{if(this._request=void 0,this._chunkMultiplier=1,l._codeEquals(jt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const c=this.isExponentialBackoffExpired();if(dS(l.status,[]))if(c)l=iS();else{this.sleepTime=Math.max(this.sleepTime*2,JM),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=l,this._transition("error")}},this._metadataErrorHandler=l=>{this._request=void 0,l._codeEquals(jt.CANCELED)?this.completeTransitions_():(this._error=l,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((l,c)=>{this._resolve=l,this._reject=c,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,s])=>{switch(this._state){case"running":e(t,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const s=H3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),l=this._ref.storage._makeRequest(s,ei,e,t);this._request=l,l.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,s)=>{const l=$3(this._ref.storage,this._ref._location,e,this._blob),c=this._ref.storage._makeRequest(l,ei,t,s);this._request=c,c.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=xN*this._chunkMultiplier,t=new pf(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((l,c)=>{let d;try{d=G3(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){this._error=g,this._transition("error");return}const h=this._ref.storage._makeRequest(d,ei,l,c,!1);this._request=h,h.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){xN*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const s=z3(this._ref.storage,this._ref._location,this._mappings),l=this._ref.storage._makeRequest(s,ei,e,t);this._request=l,l.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const s=vS(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),l=this._ref.storage._makeRequest(s,ei,e,t);this._request=l,l.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=lS(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Cp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,s,l){const c=new K3(t||void 0,s||void 0,l||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Cp(this._state)){case $r.SUCCESS:io(this._resolve.bind(null,this.snapshot))();break;case $r.CANCELED:case $r.ERROR:const t=this._reject;io(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Cp(this._state)){case $r.RUNNING:case $r.PAUSED:e.next&&io(e.next.bind(e,this.snapshot))();break;case $r.SUCCESS:e.complete&&io(e.complete.bind(e))();break;case $r.CANCELED:case $r.ERROR:e.error&&io(e.error.bind(e,this._error))();break;default:e.error&&io(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class cl{constructor(e,t){this._service=e,t instanceof cn?this._location=t:this._location=cn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new cl(e,t)}get root(){const e=new cn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pS(this._location.path)}get storage(){return this._service}get parent(){const e=I3(this._location.path);if(e===null)return null;const t=new cn(this._location.bucket,e);return new cl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw u3(e)}}function W3(r,e,t){r._throwIfRoot("uploadBytes");const s=vS(r.storage,r._location,_x(),new Fs(e,!0),t);return r.storage.makeRequestWithTokens(s,ei).then(l=>({metadata:l,ref:r}))}function J3(r,e,t){return r._throwIfRoot("uploadBytesResumable"),new X3(r,new Fs(e),t)}function Z3(r){r._throwIfRoot("getDownloadURL");const e=F3(r.storage,r._location,_x());return r.storage.makeRequestWithTokens(e,ei).then(t=>{if(t===null)throw o3();return t})}function eP(r){r._throwIfRoot("deleteObject");const e=B3(r.storage,r._location);return r.storage.makeRequestWithTokens(e,ei)}function tP(r,e){const t=D3(r._location.path,e),s=new cn(r._location.bucket,t);return new cl(r.storage,s)}function rP(r){return/^[A-Za-z]+:\/\//.test(r)}function nP(r,e){return new cl(r,e)}function wS(r,e){if(r instanceof Ex){const t=r;if(t._bucket==null)throw i3();const s=new cl(t,t._bucket);return e!=null?wS(s,e):s}else return e!==void 0?tP(r,e):r}function sP(r,e){if(e&&rP(e)){if(r instanceof Ex)return nP(r,e);throw f0("To use ref(service, url), the first argument must be a Storage instance.")}else return wS(r,e)}function yN(r,e){const t=e?.[aS];return t==null?null:cn.makeFromBucketSpec(t,r)}function aP(r,e,t,s={}){r.host=`${e}:${t}`;const l=xi(e);l&&(v0(`https://${r.host}/b`),w0("Storage",!0)),r._isUsingEmulator=!0,r._protocol=l?"https":"http";const{mockUserToken:c}=s;c&&(r._overrideAuthToken=typeof c=="string"?c:dj(c,r.app.options.projectId))}class Ex{constructor(e,t,s,l,c,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=l,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=sS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=XM,this._maxUploadRetryTime=WM,this._requests=new Set,l!=null?this._bucket=cn.makeFromBucketSpec(l,this._host):this._bucket=yN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cn.makeFromBucketSpec(this._url,e):this._bucket=yN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cl(this,e)}_makeRequest(e,t,s,l,c=!0){if(this._deleted)return new d3(cS());{const d=_3(e,this._appId,s,l,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[s,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,l).getPromise()}}const bN="@firebase/storage",vN="0.14.0";const _S="storage";function NS(r,e,t){return r=mt(r),W3(r,e,t)}function Sx(r,e,t){return r=mt(r),J3(r,e,t)}function Ku(r){return r=mt(r),Z3(r)}function jS(r){return r=mt(r),eP(r)}function ul(r,e){return r=mt(r),sP(r,e)}function iP(r=Cu(),e){r=mt(r);const s=yi(r,_S).getImmediate({identifier:e}),l=oj("storage");return l&&lP(s,...l),s}function lP(r,e,t,s={}){aP(r,e,t,s)}function oP(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),l=r.getProvider("app-check-internal");return new Ex(t,s,l,e,fl)}function cP(){zn(new Sn(_S,oP,"PUBLIC").setMultipleInstances(!0)),Kr(bN,vN,""),Kr(bN,vN,"esm2020")}cP();const uP={apiKey:"AIzaSyDyo2mO3V_udQY_KiVrTItXOD3ETSGufAo",authDomain:"familymatters-98d8f.firebaseapp.com",projectId:"familymatters-98d8f",storageBucket:"familymatters-98d8f.firebasestorage.app",messagingSenderId:"472637655089",appId:"1:472637655089:web:83f2c1599e79f20a20ed10",measurementId:"G-GPLQ4XPXGJ"},Jf=Z2().length?Cu():pj(uP),Qa=EO(Jf),be=zk(Jf);typeof window<"u"&&KM().then(r=>{r&&$M(Jf)});const dl=iP(Jf),Zt=()=>{const r=pi(),e=dn(),t=async()=>{try{await EE(Qa),e("/auth/login")}catch(l){console.error("Error signing out:",l)}},s=[{icon:"ri-dashboard-line",label:"Dashboard",path:"/"},{icon:"ri-parent-line",label:"Parents",path:"/parents"},{icon:"ri-user-heart-line",label:"Surrogates",path:"/surrogates"},{icon:"ri-links-line",label:"Matches",path:"/matches"},{icon:"ri-chat-1-line",label:"Inquiries",path:"/inquiries"},{icon:"ri-file-text-line",label:"Contracts",path:"/contracts"},{type:"divider"},{icon:"ri-task-line",label:"Tasks",path:"/tasks"},{icon:"ri-calendar-line",label:"Calendar",path:"/calendar"},{icon:"ri-time-line",label:"Appointments",path:"/appointments"},{icon:"ri-heart-pulse-line",label:"Baby Watch",path:"/baby-watch"},{icon:"ri-hospital-line",label:"Medical",path:"/medical"},{icon:"ri-money-dollar-circle-line",label:"Compensation",path:"/payments"},{type:"divider"},{icon:"ri-message-3-line",label:"Messages",path:"/messages"},{icon:"ri-roadmap-line",label:"Milestones",path:"/milestones"},{icon:"ri-file-chart-line",label:"Reports",path:"/reports"},{icon:"ri-settings-4-line",label:"Settings",path:"/settings"}];return i.jsxs("aside",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col h-full flex-shrink-0",children:[i.jsxs("div",{className:"p-6 flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-rose-500 to-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-lg",children:"FM"}),i.jsx("span",{className:"font-bold text-xl text-gray-900 dark:text-white tracking-tight",children:"Family Matters"})]}),i.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-2 space-y-1 custom-scrollbar",children:s.map((l,c)=>{if(l.type==="divider")return i.jsx("div",{className:"my-4 border-t border-gray-100 dark:border-gray-700"},c);const d=l.path==="/"?r.pathname==="/":r.pathname.startsWith(l.path||"");return i.jsxs(rj,{to:l.path,className:({isActive:h})=>`
                flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group
                ${d||h?"bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 font-medium":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 hover:text-gray-900 dark:hover:text-gray-200"}
              `,children:[i.jsx("i",{className:`${l.icon} text-lg ${d?"text-rose-500 dark:text-rose-400":"text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`}),i.jsx("span",{children:l.label})]},l.path)})}),i.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("button",{onClick:t,className:"flex items-center gap-3 w-full px-3 py-2.5 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-lg transition-colors",children:[i.jsx("i",{className:"ri-logout-box-line text-lg"}),i.jsx("span",{children:"Sign Out"})]})})]})},kS=k.createContext(void 0),dP=()=>{const r=k.useContext(kS);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r},hP=({children:r})=>{const[e,t]=k.useState(()=>{const l=localStorage.getItem("theme");return l?l==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});k.useEffect(()=>{const l=document.documentElement,c=document.body;e?(l.classList.add("dark"),c.classList.add("dark:bg-gray-900"),c.classList.remove("bg-gray-50")):(l.classList.remove("dark"),c.classList.add("bg-gray-50"),c.classList.remove("dark:bg-gray-900")),localStorage.setItem("theme",e?"dark":"light")},[e]);const s=()=>{t(l=>!l)};return i.jsx(kS.Provider,{value:{isDark:e,toggleTheme:s},children:r})},fe=({children:r,variant:e="primary",size:t="md",color:s,onClick:l,disabled:c=!1,className:d="",type:h="button"})=>{const g="whitespace-nowrap cursor-pointer font-medium rounded-lg transition-all duration-200 flex items-center justify-center gap-2",p=()=>{if(s)switch(s){case"green":return e==="outline"?"border border-green-300 hover:border-green-400 text-green-700 bg-white hover:bg-green-50":"bg-green-600 hover:bg-green-700 text-white shadow-sm";case"red":return e==="outline"?"border border-red-300 hover:border-red-400 text-red-700 bg-white hover:bg-red-50":"bg-red-600 hover:bg-red-700 text-white shadow-sm";case"blue":return e==="outline"?"border border-blue-300 hover:border-blue-400 text-blue-700 bg-white hover:bg-blue-50":"bg-blue-600 hover:bg-blue-700 text-white shadow-sm";default:return"bg-blue-600 hover:bg-blue-700 text-white shadow-sm"}return{primary:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm",secondary:"bg-gray-100 hover:bg-gray-200 text-gray-700",outline:"border border-gray-300 hover:border-gray-400 text-gray-700 bg-white",danger:"bg-red-600 hover:bg-red-700 text-white shadow-sm"}[e]},y={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},v=c?"opacity-50 cursor-not-allowed":"";return i.jsx("button",{type:h,onClick:l,disabled:c,className:`${g} ${p()} ${y[t]} ${v} ${d}`,children:r})},ES=k.createContext(void 0);function fP({children:r}){const[e,t]=k.useState(null),[s,l]=k.useState(!0),[c,d]=k.useState(null),[h,g]=k.useState(!1),[p,y]=k.useState(null);k.useEffect(()=>{const F=p6(Qa,T=>{t(T),l(!1)});return()=>F()},[]),k.useEffect(()=>{if(!e){d(null),g(!1),y(null);return}g(!0),y(null);const F=at(be,"users",e.uid),T=En(F,V=>{if(V.exists()){const E=V.data();d({id:V.id,...E})}else d(null);g(!1)},V=>{console.error("Failed to subscribe to user profile",V),d(null),y(V.message),g(!1)});return()=>T()},[e]);const v=async({email:F,password:T,rememberMe:V=!0})=>(await W_(Qa,V?u0:hx),d6(Qa,F,T)),w=async({email:F,password:T})=>(await W_(Qa,u0),kE(Qa,F,T)),S=async()=>{await EE(Qa)},C=k.useMemo(()=>({user:e,initializing:s,profile:c,profileLoading:h,profileError:p,login:v,signup:w,logout:S}),[e,s,c,h,p]);return i.jsx(ES.Provider,{value:C,children:r})}function Zf(){const r=k.useContext(ES);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r}const mP=({onClose:r})=>{const[e,t]=k.useState([]),[s,l]=k.useState(!0),c=dn();k.useEffect(()=>{const h=Xe(Ie(be,"users"),Et("createdAt","desc"),Qk(5)),g=En(h,p=>{const y=p.docs.map(v=>{const w=v.data(),C=(w.role||"inquiry")==="inquiry"?"inquiry":"request";let F="Just now";if(w.createdAt instanceof De){const V=De.now().seconds-w.createdAt.seconds;V<60?F="Just now":V<3600?F=`${Math.floor(V/60)}m ago`:V<86400?F=`${Math.floor(V/3600)}h ago`:F=`${Math.floor(V/86400)}d ago`}const T=w.displayName||w.firstName||w.email||"New User";return{id:v.id,type:C,name:T,time:F,isRead:!1,source:w.source||"online"}});t(y),l(!1)});return()=>g()},[]);const d=h=>{h.type==="request"?c("/requests"):c("/inquiries"),r()};return i.jsxs("div",{className:"absolute right-0 top-12 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden z-50 animate-in fade-in zoom-in-95 duration-200",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Notifications"}),i.jsxs("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded-full",children:[e.length," New"]})]}),i.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:s?i.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"Loading..."}):e.length===0?i.jsxs("div",{className:"p-8 text-center text-gray-500 text-sm",children:[i.jsx("i",{className:"ri-notification-off-line text-2xl mb-2 block text-gray-400"}),"No new notifications"]}):i.jsx("div",{className:"divide-y divide-gray-50 dark:divide-gray-700",children:e.map(h=>i.jsx("div",{onClick:()=>d(h),className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer transition-colors group",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:`mt-1 w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${h.type==="request"?"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400":"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400"}`,children:i.jsx("i",{className:h.type==="request"?"ri-file-list-3-line":"ri-question-line"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:h.type==="request"?"New Request received":"New Inquiry received"}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["From ",i.jsx("span",{className:"font-medium",children:h.name})," (",h.source,")"]}),i.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 block",children:h.time})]})]})},h.id))})}),i.jsx("div",{className:"p-3 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 text-center",children:i.jsx("button",{onClick:r,className:"text-xs font-medium text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Close Notifications"})})]})},er=({onToggleSidebar:r})=>{const{isDark:e,toggleTheme:t}=dP(),s=dn(),{user:l,logout:c,initializing:d,profile:h,profileLoading:g}=Zf(),[p,y]=k.useState(!1),[v,w]=k.useState(!1),S=Hh.useRef(null);Hh.useEffect(()=>{const Y=W=>{S.current&&!S.current.contains(W.target)&&w(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]);const C=k.useMemo(()=>{if(h&&typeof h=="object"){const Y=h.firstName?.trim(),W=h.lastName?.trim(),$=[Y,W].filter(Boolean).join(" ");if($.length>0)return $;const I=h.formData?.firstName,L=h.formData?.lastName,j=[I,L].filter(Boolean).join(" ");if(j.length>0)return j;const A=h.parent1?.name;if(A&&A.trim().length>0)return A.trim()}if(l?.displayName&&l.displayName.trim().length>0)return l.displayName;if(l?.email){const[Y]=l.email.split("@");return Y.charAt(0).toUpperCase()+Y.slice(1)}return"Administrator"},[l,h]),F=k.useMemo(()=>{if(h&&typeof h=="object"){const Y=h.role;if(Y)return Y}return"Signed in user"},[h]),T=k.useMemo(()=>g?"":h&&typeof h=="object"?h.email??l?.email??"Signed in user":l?.email??"Signed in user",[h,g,l]),V=k.useMemo(()=>d||g?"":[F,T].filter(W=>W&&W.length>0).join("  "),[T,d,g,F]),E=k.useMemo(()=>{const W=(C||T||"FM").split(" ").filter(Boolean).map($=>$[0]?.toUpperCase()??"").join("").slice(0,2);return W.length>0?W:"FM"},[C,T]),B=async()=>{if(!p){y(!0);try{await c(),s("/auth/login")}catch(Y){console.error("Failed to log out",Y)}finally{y(!1)}}};return i.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 transition-colors duration-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[r&&i.jsx("button",{onClick:r,className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:i.jsx("i",{className:"ri-menu-line text-xl text-gray-600 dark:text-gray-300"})}),i.jsxs("div",{className:"hidden sm:block",children:[i.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Family Matters Admin"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Surrogacy Program Management"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:e?"Switch to light mode":"Switch to dark mode",children:e?i.jsx("i",{className:"ri-sun-line text-xl text-yellow-500"}):i.jsx("i",{className:"ri-moon-line text-xl text-gray-600"})}),i.jsxs("div",{className:"relative",ref:S,children:[i.jsxs("button",{onClick:()=>w(!v),className:`p-2 rounded-lg transition-colors relative ${v?"bg-gray-100 dark:bg-gray-700 text-blue-600":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:[i.jsx("i",{className:`text-xl ${v?"ri-notification-fill":"ri-notification-line"}`}),i.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white dark:border-gray-800"})]}),v&&i.jsx(mP,{onClose:()=>w(!1)})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"hidden md:block text-right",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:d||g?"Loading...":C}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:d||g?"":V})]}),i.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-sm font-medium text-white",children:E})}),i.jsxs(fe,{onClick:B,disabled:p,variant:"outline",size:"sm",className:"hidden sm:flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 border-gray-300 dark:border-gray-600 hover:border-red-300 dark:hover:border-red-600",children:[i.jsx("i",{className:"ri-logout-box-line text-sm"}),i.jsx("span",{className:"hidden lg:inline",children:"Logout"})]}),i.jsx("button",{onClick:B,disabled:p,className:"sm:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Logout",children:i.jsx("i",{className:"ri-logout-box-line text-xl text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400"})})]})]})]})})},we=({children:r,className:e="",padding:t="md",onClick:s})=>{const l={none:"p-0",sm:"p-4",md:"p-6",lg:"p-8"};return i.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 transition-colors duration-200 ${l[t]} ${e}`,onClick:s,children:r})},_e=({children:r,variant:e="neutral",color:t,size:s="md",className:l=""})=>{const c="inline-flex items-center font-medium rounded-full whitespace-nowrap",d=()=>{if(t)switch(t){case"yellow":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"blue":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"green":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"red":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"gray":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200";case"purple":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";case"indigo":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200";case"pink":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}return{success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",danger:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",info:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",neutral:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}[e]},h={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"};return i.jsx("span",{className:`${c} ${d()} ${h[s]} ${l}`,children:r})},gP=r=>typeof r=="object"&&r!==null&&!Array.isArray(r),pP=r=>typeof r=="object"&&r!==null&&typeof r.toDate=="function",xP=r=>r.replace(/([A-Z])/g," $1").replace(/_/g," ").replace(/\s+/g," ").trim().replace(/^\w/,e=>e.toUpperCase()),SS=r=>r==null?"":typeof r=="boolean"?r?"Yes":"No":r instanceof Date?r.toLocaleString():pP(r)?r.toDate().toLocaleString():Array.isArray(r)?r.length===0?"":i.jsx("ul",{className:"list-disc list-inside space-y-1",children:r.map((e,t)=>i.jsx("li",{className:"text-sm text-gray-700 dark:text-gray-300",children:SS(e)},t))}):typeof r=="object"?Tx(r,1):String(r),Rh=["firstname","lastname","name","email","phone","phonenumber","city","state","country","address","zipcode","zip","dob","dateofbirth"],wN=r=>r.replace(/[^a-z0-9]/gi,"").toLowerCase(),yP=r=>[...r].sort(([e],[t])=>{const s=wN(e),l=wN(t),c=Rh.indexOf(s),d=Rh.indexOf(l),h=c===-1?Rh.length:c,g=d===-1?Rh.length:d;return h!==g?h-g:e.localeCompare(t,void 0,{sensitivity:"base"})}),Tx=(r,e=0)=>{const t=yP(Object.entries(r));return t.length===0?i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No data available."}):i.jsx("div",{className:`space-y-3 ${e>0?"pl-4 border-l border-gray-200 dark:border-gray-700":""}`,children:t.map(([s,l])=>{const c=xP(s);return gP(l)?i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:c}),Tx(l,e+1)]},s):i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400",children:c}),i.jsx("span",{className:"text-sm text-gray-900 dark:text-white break-words",children:SS(l)})]},s)})})},Ut=({title:r,data:e,emptyMessage:t})=>!e||Object.keys(e).length===0?t?i.jsxs("div",{children:[r&&r.trim().length>0&&i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:r}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t})]}):null:i.jsxs("div",{children:[r&&r.trim().length>0&&i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:r}),Tx(e)]}),bP=()=>{const r=dn(),[e,t]=k.useState([]),[s,l]=k.useState([]),[c,d]=k.useState([]),[h,g]=k.useState(!0),[p,y]=k.useState(!0),[v,w]=k.useState(null),[S,C]=k.useState(null),F=()=>{r("/medical")},T=()=>{r("/requests")},V=()=>{r("/appointments")};k.useEffect(()=>{const j=Xe(Ie(be,"users"),ur("role","==","Intended Parent"),Et("updatedAt","desc")),A=En(j,P=>{const M=P.docs.map(z=>({id:z.id,data:z.data()}));t(M),g(!1),w(null)},P=>{console.error("Failed to load parents for dashboard",P),t([]),w("Unable to load intended parent updates."),g(!1)});return()=>A()},[]),k.useEffect(()=>{const j=Xe(Ie(be,"users"),ur("role","==","Surrogate"),Et("updatedAt","desc")),A=En(j,P=>{const M=P.docs.map(z=>({id:z.id,data:z.data()}));l(M),y(!1),C(null)},P=>{console.error("Failed to load surrogates for dashboard",P),l([]),C("Unable to load surrogate updates."),y(!1)});return()=>A()},[]),k.useEffect(()=>{const j=Xe(Ie(be,"users"),Et("createdAt","desc")),A=En(j,P=>{const M=P.docs.map(z=>{const me=z.data();return{id:z.id,data:{...me,source:me.source||"online"}}});d(M)},P=>{console.error("Failed to load inquiries for dashboard",P)});return()=>A()},[]);const E=k.useMemo(()=>{const j=e.length,A=e.filter(M=>M.data.profileCompleted).length,P=e.filter(M=>M.data.form2Completed).length;return[{label:"Tracked Parents",value:j},{label:"Profiles Complete",value:A},{label:"Form 2 Complete",value:P}]},[e]),B=k.useMemo(()=>{const j=s.length,A=s.filter(M=>M.data.profileCompleted).length,P=s.filter(M=>M.data.form2Completed).length;return[{label:"Tracked Surrogates",value:j},{label:"Profiles Complete",value:A},{label:"Form 2 Complete",value:P}]},[s]),Y=j=>{if(!j)return null;if(typeof j=="object"&&j!==null&&"toDate"in j&&typeof j.toDate=="function")return j.toDate();const A=new Date(j);return Number.isNaN(A.getTime())?null:A},W=j=>j?j.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"",$=k.useMemo(()=>[...e].sort((j,A)=>{const P=Y(j.data.updatedAt)??Y(j.data.createdAt)??new Date(0);return(Y(A.data.updatedAt)??Y(A.data.createdAt)??new Date(0)).getTime()-P.getTime()}).slice(0,5).map(({id:j,data:A})=>{const P=A.parent1?.name,z=[A.formData?.firstName,A.formData?.lastName].filter(Boolean).join(" "),me=z.length>0?z:void 0,Oe=A.firstName,H=A.email,U=P??me??Oe??H??"Intended Parent",re=!!A.profileCompleted,le=!!A.form2Completed;let pe="new";le?pe="form2":re&&(pe="profile");const D={new:{label:"New",color:"yellow"},profile:{label:"Profile Complete",color:"blue"},form2:{label:"Form 2 Complete",color:"green"}},Q=Y(A.updatedAt)??Y(A.createdAt);return{id:j,name:U,statusConfig:D[pe],dateLabel:W(Q),timeline:A.formData?.whenToStart,location:[A.formData?.city,A.formData?.state].filter(Boolean).join(", ")}}),[e]),I=k.useMemo(()=>{const j=e.length,A=s.length,P=e.filter(H=>H.data.profileCompleted).length,M=s.filter(H=>H.data.profileCompleted).length,z=(H,U)=>U===0?"0 of 0":`${H} of ${U}  ${Math.round(H/U*100)}%`,me=c.filter(H=>H.data.source==="online").length,Oe=c.filter(H=>H.data.source==="phone").length;return[{id:"online-inquiries",label:"Online Inquiries",value:me,subText:"Real-time",icon:"ri-global-line",colorClass:"bg-indigo-100 text-indigo-600"},{id:"phone-inquiries",label:"Phone Inquiries",value:Oe,subText:"Real-time",icon:"ri-phone-line",colorClass:"bg-pink-100 text-pink-600"},{id:"parents-total",label:"Intended Parents",value:j,subText:z(P,j)+" profiles ready",icon:"ri-parent-line",colorClass:"bg-blue-100 text-blue-600"},{id:"surrogates-total",label:"Surrogates",value:A,subText:z(M,A)+" profiles ready",icon:"ri-user-heart-line",colorClass:"bg-rose-100 text-rose-600"}]},[e,s,c]),L=j=>{r(`/parents/${j}`)};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Dashboard"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Welcome back! Here's what's happening with your surrogacy program."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:I.map(j=>i.jsx(we,{className:"hover:shadow-lg transition-shadow",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:j.label}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:j.value}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:j.subText})]}),i.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${j.colorClass}`,children:i.jsx("i",{className:`${j.icon} text-lg`})})]})},j.id))}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(we,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Recent Requests"}),i.jsxs(fe,{variant:"outline",size:"sm",onClick:T,children:[i.jsx("i",{className:"ri-arrow-right-line mr-1"}),"View All"]})]}),h?i.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((j,A)=>i.jsx("div",{className:"h-16 w-full rounded-xl bg-gray-100 dark:bg-gray-800 animate-pulse"},A))}):v?i.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:v}):$.length===0?i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No recent requests yet."}):i.jsx("div",{className:"space-y-4",children:$.map(j=>i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer",onClick:()=>L(j.id),children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-user-line text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:j.name}),i.jsx("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 mt-0.5",children:j.dateLabel}),i.jsxs("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[j.timeline&&i.jsxs("p",{children:["Timeline: ",j.timeline]}),j.location&&i.jsxs("p",{children:["Location: ",j.location]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(_e,{color:j.statusConfig.color,children:j.statusConfig.label}),i.jsxs(fe,{size:"sm",variant:"outline",onClick:A=>{A.stopPropagation(),L(j.id)},children:[i.jsx("i",{className:"ri-eye-line mr-1"}),"View"]})]})]},j.id))})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(we,{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(fe,{className:"w-full justify-start",variant:"outline",onClick:()=>r("/requests"),children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Application"]}),i.jsxs(fe,{className:"w-full justify-start",variant:"outline",onClick:()=>r("/matches"),children:[i.jsx("i",{className:"ri-links-line mr-2"}),"Create Match"]}),i.jsxs(fe,{className:"w-full justify-start",variant:"outline",onClick:()=>r("/appointments"),children:[i.jsx("i",{className:"ri-calendar-line mr-2"}),"Schedule Meeting"]}),i.jsxs(fe,{className:"w-full justify-start",variant:"outline",onClick:()=>r("/reports"),children:[i.jsx("i",{className:"ri-file-text-line mr-2"}),"Generate Report"]})]})]}),i.jsxs(we,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Upcoming"}),i.jsxs(fe,{variant:"outline",size:"sm",onClick:V,children:[i.jsx("i",{className:"ri-calendar-line mr-1"}),"Calendar"]})]}),i.jsx("div",{className:"space-y-3",children:[].map(j=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors cursor-pointer",onClick:V,children:[i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:j.title}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:j.time})]})]},j.id))})]})]})]}),i.jsx("div",{className:"mt-8",children:i.jsxs(we,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Recent Medical Records"}),i.jsxs(fe,{variant:"outline",size:"sm",onClick:F,children:[i.jsx("i",{className:"ri-arrow-right-line mr-1"}),"View All"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[].map(j=>i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:F,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400",children:i.jsx("i",{className:"ri-search-line text-lg"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:j.title}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[i.jsx("i",{className:"ri-user-heart-line text-xs"}),i.jsx("span",{children:j.patient}),i.jsx("span",{children:""}),i.jsx("span",{children:j.date})]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[j.doctor,"  ",j.facility]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx(_e,{color:j.status==="completed"?"green":j.status==="pending"?"yellow":"blue",children:j.status}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[j.attachments," attachments"]})]})]})},j.id))})]})}),i.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(we,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Intended Parents Snapshot"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Latest families onboarding to Family Matters."})]}),i.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>r("/parents"),children:[i.jsx("i",{className:"ri-parent-line mr-1"}),"View All"]})]}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:E.map(j=>i.jsxs("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-3 shadow-sm",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:j.label}),i.jsx("p",{className:"mt-2 text-lg font-semibold text-gray-900 dark:text-white",children:j.value})]},j.label))}),h?i.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((j,A)=>i.jsx("div",{className:"h-20 w-full rounded-2xl bg-gray-100 dark:bg-gray-800 animate-pulse"},A))}):v?i.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:v}):e.length===0?i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No intended parents found."}):i.jsx("div",{className:"space-y-4",children:e.map(({id:j,data:A})=>i.jsxs("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/60 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:()=>r(`/parents/${j}`),children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:A.firstName??A.email??"Intended Parent"}),i.jsxs("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 mt-1",children:["ID: ",j]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(_e,{color:A.profileCompleted?"green":"yellow",children:A.profileCompleted?"Profile Complete":"Profile Pending"}),i.jsx(_e,{color:A.form2Completed?"blue":"gray",children:A.form2Completed?"Form 2 Complete":"Form 2 Pending"})]})]}),i.jsx("div",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400",children:i.jsx(Ut,{title:"",data:{"When To Start":A.formData?.whenToStart,Location:[A.formData?.city,A.formData?.state].filter(Boolean).join(", ")},emptyMessage:"No journey details yet."})})]},j))})]}),i.jsxs(we,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Surrogate Snapshot"}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Recent surrogates progressing through screening."})]}),i.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>r("/surrogates"),children:[i.jsx("i",{className:"ri-user-heart-line mr-1"}),"View All"]})]}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:B.map(j=>i.jsxs("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-3 shadow-sm",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400",children:j.label}),i.jsx("p",{className:"mt-2 text-lg font-semibold text-gray-900 dark:text-white",children:j.value})]},j.label))}),p?i.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((j,A)=>i.jsx("div",{className:"h-20 w-full rounded-2xl bg-gray-100 dark:bg-gray-800 animate-pulse"},A))}):S?i.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:S}):s.length===0?i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No surrogates found."}):i.jsx("div",{className:"space-y-4",children:s.map(({id:j,data:A})=>i.jsxs("div",{className:"rounded-2xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/60 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer",onClick:()=>r(`/surrogates/${j}`),children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:A.firstName??A.email??"Surrogate"}),i.jsxs("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 mt-1",children:["ID: ",j]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(_e,{color:A.profileCompleted?"green":"yellow",children:A.profileCompleted?"Profile Complete":"Profile Pending"}),i.jsx(_e,{color:A.form2Completed?"blue":"gray",children:A.form2Completed?"Form 2 Complete":"Form 2 Pending"})]})]}),i.jsx("div",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400",children:i.jsx(Ut,{title:"",data:{Availability:A.form2?.availability,Location:[A.formData?.city,A.formData?.state].filter(Boolean).join(", ")},emptyMessage:"No readiness details yet."})})]},j))})]})]})]})]})]})},TS=({isOpen:r,onClose:e,onSuccess:t,variant:s="simple"})=>{const[l,c]=k.useState(!1),[d,h]=k.useState({name:"",email:"",phone:"",message:"",role:"Intended Parents",age:"",location:"",experience:""});if(!r)return null;const g=async p=>{p.preventDefault(),c(!0);try{const y={displayName:d.name,email:d.email,phone:d.phone,message:d.message,source:"phone",status:"new",role:s==="detailed"?d.role==="Surrogate"?"Surrogate":"Intended Parents":"inquiry",createdAt:i0(),updatedAt:i0()};if(s==="detailed"&&(y.age=d.age,y.location=d.location,y.experience=d.experience),d.email){d.phone.length<6&&alert("Phone number too short to be used as password (min 6 chars). Inquiry saved without account creation.");try{const w=(await kE(Qa,d.email,d.phone)).user.uid;await Zk(at(be,"users",w),y)}catch(v){if(console.error("Auth creation failed:",v),v.code==="auth/email-already-in-use")alert("Email already in use. Saving inquiry without creating a new account."),await Tn(Ie(be,"users"),y);else throw v}}else await Tn(Ie(be,"users"),y);h({name:"",email:"",phone:"",message:"",role:"Intended Parents",age:"",location:"",experience:""}),t(),e()}catch(y){console.error("Error recording inquiry:",y),alert("Failed to record inquiry. Please check the details and try again.")}finally{c(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Record Phone ",s==="detailed"?"Request":"Inquiry"]}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s==="detailed"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type *"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx("button",{type:"button",onClick:()=>h({...d,role:"Intended Parents"}),className:`px-4 py-2 rounded-lg border text-sm font-medium transition-colors ${d.role==="Intended Parents"?"border-blue-600 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:"Intended Parent"}),i.jsx("button",{type:"button",onClick:()=>h({...d,role:"Surrogate"}),className:`px-4 py-2 rounded-lg border text-sm font-medium transition-colors ${d.role==="Surrogate"?"border-blue-600 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400":"border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:"Surrogate"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name *"}),i.jsx("input",{type:"text",required:!0,value:d.name,onChange:p=>h({...d,name:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors",placeholder:"Caller's Name"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone *"}),i.jsx("input",{type:"tel",required:!0,value:d.phone,onChange:p=>h({...d,phone:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors",placeholder:"Phone Number"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:d.email,onChange:p=>h({...d,email:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors",placeholder:"Email (Optional)"})]})]}),s==="detailed"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Age"}),i.jsx("input",{type:"text",value:d.age,onChange:p=>h({...d,age:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors",placeholder:"Age"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),i.jsx("input",{type:"text",value:d.location,onChange:p=>h({...d,location:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors",placeholder:"City, State"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Experience / Background"}),i.jsx("textarea",{rows:2,value:d.experience,onChange:p=>h({...d,experience:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors resize-none",placeholder:"Relevant experience..."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Message / Notes"}),i.jsx("textarea",{rows:s==="detailed"?3:4,value:d.message,onChange:p=>h({...d,message:p.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-colors resize-none",placeholder:"Notes from the call..."})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-save-line"}),"Save ",s==="detailed"?"Request":"Inquiry"]})})]})]})]})})})},vP=()=>{const[r,e]=k.useState("all"),[t,s]=k.useState("online"),[l,c]=k.useState(!1),[d,h]=k.useState(null),[g,p]=k.useState(!1),[y,v]=k.useState([]),[w,S]=k.useState(!0),C=dn();k.useEffect(()=>{const j=Xe(Ie(be,"users"),Et("createdAt","desc")),A=En(j,P=>{const M=P.docs.map(z=>{const me=z.data(),Oe=me.source||"online";return{id:z.id,...me,applicantName:me.displayName||`${me.firstName||""} ${me.lastName||""}`.trim()||me.email,type:me.role==="Surrogate"?"Surrogate Application":"Intended Parents",status:me.status||"pending",source:Oe,submittedDate:me.createdAt instanceof De?me.createdAt.toDate().toLocaleDateString():me.submittedDate||"N/A"}});v(M),S(!1)},P=>{console.error("Error fetching requests:",P),S(!1)});return()=>A()},[]);const[F,T]=k.useState(!1),V=async j=>{if(d){T(!0);try{await Vt(at(be,"users",d.id),{status:j,updatedAt:De.now()}),h(null)}catch(A){console.error("Error updating status:",A),alert("Failed to update status. Please try again.")}finally{T(!1)}}},E=()=>{if(!d?.email){alert("No email address available for this request.");return}window.open(`mailto:${d.email}?subject=Regarding your application`,"_blank")},B=async()=>{if(d){T(!0);try{await Vt(at(be,"users",d.id),{role:"inquiry",status:"new",updatedAt:De.now()}),C("/inquiries")}catch(j){console.error("Error converting to inquiry:",j),alert("Failed to convert to inquiry.")}finally{T(!1)}}},Y=y.filter(j=>j.source===t),W=r==="all"?Y:Y.filter(j=>j.status===r),$=j=>j==="all"?Y.length:Y.filter(A=>A.status===j).length,I=[{value:"all",label:"All Requests"},{value:"pending",label:"Pending"},{value:"under-review",label:"Under Review"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}],L=j=>{switch(j){case"pending":return i.jsx(_e,{color:"yellow",children:"Pending"});case"under-review":return i.jsx(_e,{color:"blue",children:"Under Review"});case"approved":return i.jsx(_e,{color:"green",children:"Approved"});case"rejected":return i.jsx(_e,{color:"red",children:"Rejected"});default:return i.jsx(_e,{children:j})}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{onToggleSidebar:()=>p(!g)}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Requests Management"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage all incoming surrogacy applications and requests."})]}),i.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2 w-fit shadow-sm",children:[i.jsx("i",{className:"ri-phone-line"}),"Record Phone Request"]})]}),i.jsx(TS,{isOpen:l,onClose:()=>c(!1),onSuccess:()=>s("phone"),variant:"detailed"}),i.jsx("div",{className:"mb-6 border-b border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex space-x-8",children:[i.jsxs("button",{onClick:()=>{s("online"),e("all")},className:`pb-4 px-2 text-sm font-medium transition-colors cursor-pointer relative ${t==="online"?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:["Online Inquiries",t==="online"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]}),i.jsxs("button",{onClick:()=>{s("phone"),e("all")},className:`pb-4 px-2 text-sm font-medium transition-colors cursor-pointer relative ${t==="phone"?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:["Phone Inquiries",t==="phone"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:I.map(j=>i.jsxs("button",{onClick:()=>e(j.value),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${r===j.value?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[j.label," (",$(j.value),")"]},j.value))})}),w?i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:Array.from({length:6}).map((j,A)=>i.jsx("div",{className:"h-64 bg-gray-100 dark:bg-gray-800 rounded-xl animate-pulse"},A))}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:W.map(j=>i.jsxs(we,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>h(j),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-user-line text-blue-600 dark:text-blue-400 text-lg"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:j.applicantName}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.type})]})]}),L(j.status)]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Age:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:j.age})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:j.location})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Experience:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:j.experience})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Submitted:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:j.submittedDate})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(fe,{size:"sm",className:"flex-1",children:[i.jsx("i",{className:"ri-eye-line mr-1"}),"View Details"]}),j.status==="pending"&&i.jsx(fe,{size:"sm",color:"green",onClick:A=>{A.stopPropagation()},children:i.jsx("i",{className:"ri-check-line"})})]})]},j.id))}),d&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Request Details"}),i.jsx("button",{onClick:()=>h(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-user-line text-blue-600 dark:text-blue-400 text-2xl"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:d.applicantName}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d.type}),L(d.status)]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Age"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:d.age||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Location"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:d.location||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Experience"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:d.experience||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Submitted Date"}),i.jsx("p",{className:"text-gray-900 dark:text-white",children:d.submittedDate})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Contact Information"}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("p",{className:"text-gray-900 dark:text-white",children:["Email: ",d.email]}),i.jsxs("p",{className:"text-gray-900 dark:text-white",children:["Phone: ",d.phone]})]})]}),d.message&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Notes / Message"}),i.jsx("p",{className:"text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-900 p-3 rounded mt-2",children:d.message})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(fe,{color:"green",className:"flex-1",onClick:()=>V("approved"),disabled:F||d.status==="approved",children:[F?i.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}):i.jsx("i",{className:"ri-check-line mr-2"}),"Approve"]}),i.jsxs(fe,{color:"red",className:"flex-1",onClick:()=>V("rejected"),disabled:F||d.status==="rejected",children:[F?i.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}):i.jsx("i",{className:"ri-close-line mr-2"}),"Reject"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",onClick:E,children:[i.jsx("i",{className:"ri-message-line mr-2"}),"Contact"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",onClick:B,disabled:F,children:[F?i.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}):i.jsx("i",{className:"ri-share-forward-line mr-2"}),"Convert to Inquiry"]})]})]})]})})})]})]})]})},wP=()=>{const[r,e]=k.useState("online"),[t,s]=k.useState(null),[l,c]=k.useState(!1),[d,h]=k.useState([]),[g,p]=k.useState(!0);k.useEffect(()=>{const w=Xe(Ie(be,"users"),Et("createdAt","desc")),S=En(w,C=>{const F=C.docs.map(T=>{const V=T.data(),E=V.formData||{},B=V.source==="phone"?"phone":"online";let Y="Recently";if(V.createdAt){if(V.createdAt instanceof De)Y=V.createdAt.toDate().toLocaleDateString();else if(typeof V.createdAt=="string"){const $=new Date(V.createdAt);isNaN($.getTime())?Y=V.createdAt:Y=$.toLocaleDateString()}}const W=V.displayName||(V.firstName&&V.lastName?`${V.firstName} ${V.lastName}`:"")||(E.firstName&&E.lastName?`${E.firstName} ${E.lastName}`:"")||V.email||"Unknown User";return{id:T.id,name:W,type:B,email:V.email||E.email||"No email provided",phone:V.phone||E.phone||"No phone provided",message:V.message||E.message||"No message content",date:Y,status:V.status||"new",fullData:V}});h(F),p(!1)},C=>{console.error("Error fetching inquiries:",C),p(!1)});return()=>S()},[]);const y=d.filter(w=>w.type===r),v=w=>{switch(w){case"new":return i.jsx(_e,{color:"blue",children:"New"});case"in-progress":return i.jsx(_e,{color:"yellow",children:"In Progress"});case"closed":return i.jsx(_e,{color:"green",children:"Closed"});default:return i.jsx(_e,{children:w})}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Inquiries"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage online and phone inquiries."})]}),i.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2 w-fit shadow-sm",children:[i.jsx("i",{className:"ri-phone-line"}),"Record Phone Inquiry"]})]}),i.jsx(TS,{isOpen:l,onClose:()=>c(!1),onSuccess:()=>{},variant:"detailed"}),"     ",i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:[i.jsx("button",{onClick:()=>e("online"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${r==="online"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Online Inquiries"}),i.jsx("button",{onClick:()=>e("phone"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${r==="phone"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Phone Inquiries"})]})}),g?i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[1,2,3].map(w=>i.jsx("div",{className:"h-48 bg-gray-100 dark:bg-gray-800 rounded-lg animate-pulse"},w))}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[y.map(w=>i.jsxs(we,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(w),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${w.type==="online"?"bg-purple-100 dark:bg-purple-900":"bg-green-100 dark:bg-green-900"}`,children:i.jsx("i",{className:`${w.type==="online"?"ri-global-line text-purple-600 dark:text-purple-400":"ri-phone-line text-green-600 dark:text-green-400"} text-lg`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:w.name}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:w.type})]})]}),v(w.status)]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Date:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:w.date})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Email:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:w.email})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Phone:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:w.phone})]})]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-4",children:w.message})]},w.id)),y.length===0&&i.jsxs("div",{className:"col-span-full text-center py-10 text-gray-500 dark:text-gray-400",children:["No ",r," inquiries found."]})]}),t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Inquiry Details"}),i.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${t.type==="online"?"bg-purple-100 dark:bg-purple-900":"bg-green-100 dark:bg-green-900"}`,children:i.jsx("i",{className:`${t.type==="online"?"ri-global-line text-purple-600 dark:text-purple-400":"ri-phone-line text-green-600 dark:text-green-400"} text-2xl`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.name}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t.email}),v(t.status)]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Message"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-900 p-4 rounded-lg",children:t.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400 block text-sm",children:"Phone"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:t.phone})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400 block text-sm",children:"Date"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:t.date})]})]})]})]})})})]})]})]})},Rp=[{id:"all",label:"All",filter:r=>!0},{id:"available",label:"Available",filter:r=>r.status==="Available"||!r.form2Completed&&!r.profileCompleted},{id:"potential",label:"Potential",filter:r=>r.status==="Potential"},{id:"records_review",label:"Records Review",filter:r=>r.status==="Records Review"},{id:"screening",label:"Screening",filter:r=>r.status==="Screening"},{id:"legal",label:"Legal",filter:r=>r.status==="Legal"},{id:"cycling",label:"Cycling",filter:r=>r.status==="Cycling"},{id:"pregnant",label:"Pregnant",filter:r=>r.status==="Pregnant"}],_P=()=>{const[r,e]=k.useState("all"),[t,s]=k.useState(null),[l,c]=k.useState([]),[d,h]=k.useState(!0),[g,p]=k.useState(null),y=dn();k.useEffect(()=>{const E=Xe(Ie(be,"users"),ur("role","==","Surrogate")),B=En(E,Y=>{const W=Y.docs.map($=>({id:$.id,...$.data()}));c(W),h(!1),p(null)},Y=>{console.error("Failed to load surrogates",Y),p("Unable to load surrogate records. Please try again later."),h(!1)});return()=>B()},[]);const v=k.useMemo(()=>Rp.reduce((E,B)=>(E[B.id]=l.filter(Y=>B.filter(Y)).length,E),{}),[l]),w=k.useMemo(()=>{const E=Rp.find(B=>B.id===r);return E?l.filter(B=>E.filter(B)):l},[r,l]),S=E=>{switch(E.status){case"Available":return i.jsx(_e,{color:"green",children:"Available"});case"Potential":return i.jsx(_e,{color:"blue",children:"Potential"});case"Records Review":return i.jsx(_e,{color:"yellow",children:"Records Review"});case"Screening":return i.jsx(_e,{color:"purple",children:"Screening"});case"Legal":return i.jsx(_e,{color:"indigo",children:"Legal"});case"Cycling":return i.jsx(_e,{color:"pink",children:"Cycling"});case"Pregnant":return i.jsx(_e,{color:"red",children:"Pregnant"});default:return E.form2Completed?i.jsx(_e,{color:"green",children:"Form 2 Complete"}):E.profileCompleted?i.jsx(_e,{color:"blue",children:"Profile Complete"}):i.jsx(_e,{color:"gray",children:"Unknown"})}},C=E=>{const B=E.formData?.firstName,Y=E.formData?.lastName,W=[B,Y].filter(Boolean).join(" ");if(W.length>0)return W;const $=E.firstName??"",I=E.lastName??"",L=[$,I].filter(Boolean).join(" ");return L.length>0?L:E.email??"Surrogate"},F=E=>{const B=E.formData,Y=B?.city??"",W=B?.state??"";return[Y,W].filter(Boolean).join(", ")||"Not specified"},T=E=>(E.form2??{})?.pregnancyHistory?.total??E.form2?.surrogacyChildren??"",V=E=>E.form2?.availability??"Not provided";return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Surrogates Management"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage all registered surrogates and their profiles."})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:Rp.map(E=>i.jsxs("button",{onClick:()=>e(E.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${r===E.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[E.label," (",v[E.id]??0,")"]},E.id))})}),g&&i.jsx("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-900 dark:bg-red-950/60 dark:text-red-300",children:g}),d?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:Array.from({length:6}).map((E,B)=>i.jsx(we,{className:"animate-pulse",children:i.jsx("div",{className:"h-48 w-full rounded-lg bg-gray-100 dark:bg-gray-800"})},B))}):i.jsx(i.Fragment,{children:w.length===0?i.jsx(we,{className:"p-6 text-center text-gray-600 dark:text-gray-300",children:"No surrogate profiles match this filter."}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:w.map(E=>i.jsxs(we,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(E),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-pink-100 dark:bg-pink-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-user-heart-line text-pink-600 dark:text-pink-400 text-lg"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:C(E)}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 break-all",children:["ID: ",E.id]})]})]}),S(E)]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Email:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right break-words",children:E.email??""})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right",children:F(E)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Experience:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right",children:T(E)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Availability:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right",children:V(E)})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(fe,{size:"sm",className:"flex-1",onClick:B=>{B.stopPropagation(),y(`/surrogates/${E.id}`)},children:[i.jsx("i",{className:"ri-eye-line mr-1"}),"View Profile"]}),i.jsx(fe,{size:"sm",color:"blue",children:i.jsx("i",{className:"ri-message-line"})})]})]},E.id))})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Surrogate Profile"}),i.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-pink-100 dark:bg-pink-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-user-heart-line text-pink-600 dark:text-pink-400 text-2xl"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:C(t)}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 break-all",children:["Surrogate ID: ",t.id]}),S(t)]})]}),i.jsx(Ut,{title:"Profile Overview",data:{Email:t.email,Role:t.role,"Profile Completed":t.profileCompleted,"Form 2 Completed":t.form2Completed,"Created At":t.createdAt,"Updated At":t.updatedAt}}),i.jsx(Ut,{title:"Form 1 Responses",data:t.formData??null,emptyMessage:"No form data available."}),i.jsx(Ut,{title:"Form 2 Responses",data:t.form2??null,emptyMessage:"Form 2 has not been completed."}),i.jsx(Ut,{title:"Additional Profile Data",data:t.form2Data??null,emptyMessage:"No additional data provided."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(fe,{color:"blue",className:"flex-1",children:[i.jsx("i",{className:"ri-links-line mr-2"}),"Create Match"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",children:[i.jsx("i",{className:"ri-message-line mr-2"}),"Send Message"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit Profile"]})]})]})]})})})]})]})]})},Ih=(r,e)=>{try{const t=r&&Object.keys(r).length>0,s=e&&Object.keys(e).length>0;return JSON.stringify((t?r:s?e:{})??{},null,2)}catch{return"{}"}},ir=({title:r,data:e,emptyMessage:t,description:s,templateData:l,onSave:c})=>{const[d,h]=k.useState(!1),[g,p]=k.useState(Ih(e,l)),[y,v]=k.useState(null),[w,S]=k.useState(!1),C=!e||Object.keys(e).length===0;k.useEffect(()=>{d||p(Ih(e,l))},[e,l,d]);const F=()=>{p(Ih(e,l)),v(null),h(!0)},T=()=>{h(!1),v(null),p(Ih(e,l))},V=async()=>{try{const E=g.trim()===""?{}:JSON.parse(g);if(E===null||Array.isArray(E)||typeof E!="object"){v("Please provide a valid JSON object.");return}S(!0),await c(E),S(!1),h(!1),v(null)}catch(E){console.error(E),S(!1),v("Unable to parse the JSON. Please ensure it is valid.")}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r}),s&&i.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:s})]}),d?null:C?i.jsxs(fe,{size:"sm",color:"blue",onClick:F,children:[i.jsx("i",{className:"ri-add-line text-sm"}),"Add Details"]}):i.jsxs(fe,{size:"sm",variant:"outline",onClick:F,children:[i.jsx("i",{className:"ri-edit-line text-sm"}),"Edit"]})]}),d?i.jsxs(i.Fragment,{children:[i.jsx("textarea",{value:g,onChange:E=>p(E.target.value),rows:14,spellCheck:!1,className:"w-full rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 px-4 py-3 font-mono text-sm text-gray-800 dark:text-gray-100 shadow-inner focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:`{
  "example": "value"
}`}),y&&i.jsx("p",{className:"text-xs font-medium text-red-500 dark:text-red-400",children:y}),i.jsxs("div",{className:"flex items-center justify-end gap-3",children:[i.jsx(fe,{size:"sm",variant:"outline",onClick:T,disabled:w,children:"Cancel"}),i.jsx(fe,{size:"sm",color:"blue",onClick:V,disabled:w,children:w?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-loader-4-line animate-spin text-sm"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-save-3-line text-sm"}),"Save"]})})]})]}):i.jsx(Ut,{title:"",data:e??void 0,emptyMessage:t})]})},AS=({title:r,data:e,onSave:t,templateData:s,emptyMessage:l="No information provided.",type:c="parent"})=>{const[d,h]=k.useState(!1);if(d)return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r}),i.jsx(fe,{size:"sm",variant:"outline",onClick:()=>h(!1),children:"Cancel"})]}),i.jsx(ir,{title:"",data:e,onSave:async $=>{await t($),h(!1)},templateData:s})]});if(!e||Object.values(e).every($=>!$))return i.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center bg-gray-50 dark:bg-gray-800/50 rounded-2xl border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-full mb-3",children:i.jsx("i",{className:"ri-user-smile-line text-3xl text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No About Info"}),i.jsx("p",{className:"text-sm text-gray-500 max-w-xs mx-auto mb-4",children:l}),i.jsxs(fe,{size:"sm",onClick:()=>h(!0),children:[i.jsx("i",{className:"ri-add-line mr-2"}),"Add Details"]})]});const g=$=>e?.[$],p=g("bio")||g("aboutUs"),y=g("age"),v=g("height"),w=g("occupation"),S=g("education"),C=g("religion"),F=g("relationshipPreference"),T=g("hobbies"),V=g("familyLifestyle"),E=g("heritage")||[g("bioMotherHeritage"),g("bioFatherHeritage")].filter(Boolean).join(" & "),B=g("amhStatus"),Y=g("opennessToSecondCycle"),W=({icon:$,label:I,value:L,className:j})=>L?i.jsxs("div",{className:`p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 border border-gray-100 dark:border-gray-700/50 flex items-start gap-4 ${j}`,children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-white dark:bg-gray-700 flex items-center justify-center text-primary-500 shadow-sm",children:i.jsx("i",{className:`${$} text-xl`})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-0.5",children:I}),i.jsx("p",{className:"font-medium text-gray-900 dark:text-white leading-tight",children:L})]})]}):null;return i.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[r,i.jsx("span",{className:"px-2.5 py-0.5 rounded-full bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 text-xs font-bold uppercase tracking-wider",children:c==="parent"?"Family Profile":"Surrogate Profile"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[y&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md bg-gray-100 dark:bg-gray-800 text-xs font-medium text-gray-600 dark:text-gray-300",children:[i.jsx("i",{className:"ri-cake-line"})," ",y," years"]}),v&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md bg-gray-100 dark:bg-gray-800 text-xs font-medium text-gray-600 dark:text-gray-300",children:[i.jsx("i",{className:"ri-ruler-line"})," ",v]})]})]}),i.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>h(!0),children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(W,{icon:"ri-briefcase-line",label:"Occupation",value:w}),i.jsx(W,{icon:"ri-graduation-cap-line",label:"Education",value:S}),i.jsx(W,{icon:"ri-heart-2-line",label:"Relationship Status",value:F}),E&&i.jsx(W,{icon:"ri-global-line",label:"Heritage",value:E}),C&&i.jsx(W,{icon:"ri-service-line",label:"Religion",value:C}),c==="surrogate"&&B&&i.jsx(W,{icon:"ri-test-tube-line",label:"AMH Level",value:B}),c==="surrogate"&&Y&&i.jsx(W,{icon:"ri-loop-right-line",label:"Second Cycle",value:Y})]}),p&&i.jsxs("div",{className:"prose dark:prose-invert max-w-none",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("i",{className:"ri-double-quotes-l text-3xl text-primary-200 dark:text-primary-800"}),i.jsx("h3",{className:"text-lg font-semibold m-0",children:c==="parent"?"Our Story":"About Me"})]}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-lg leading-relaxed whitespace-pre-line pl-4 border-l-4 border-primary-100 dark:border-primary-900/50",children:p})]}),(T||V)&&i.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100 dark:border-gray-800",children:[T&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"ri-seedling-line"})," Hobbies & Interests"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:T.split(/[,\n&]/).filter(Boolean).map(($,I)=>i.jsx("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 text-sm font-medium border border-blue-100 dark:border-blue-800/30",children:$.trim()},I))})]}),V&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("h4",{className:"text-sm font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"ri-home-heart-line"})," Family Lifestyle"]}),i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 p-4 rounded-xl border border-amber-100 dark:border-amber-800/30",children:i.jsxs("p",{className:"text-gray-700 dark:text-gray-300 italic",children:['"',V,'"']})})]})]})]})},NP=({isOpen:r,onClose:e,onConfirm:t,title:s,message:l,confirmLabel:c="Confirm",cancelLabel:d="Cancel",isDestructive:h=!1})=>r?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:i.jsx("div",{className:"w-full max-w-sm overflow-hidden bg-white rounded-2xl shadow-xl dark:bg-gray-800",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${h?"bg-red-100 text-red-600 dark:bg-red-900/20":"bg-blue-100 text-blue-600 dark:bg-blue-900/20"}`,children:i.jsx("i",{className:`text-xl ${h?"ri-error-warning-line":"ri-information-line"}`})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s})]}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l}),i.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[i.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 transition-colors bg-white border border-gray-300 rounded-xl hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",children:d}),i.jsx("button",{onClick:()=>{t(),e()},className:`px-4 py-2 text-sm font-medium text-white transition-colors rounded-xl ${h?"bg-red-600 hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600":"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600"}`,children:c})]})]})})}):null,jP=["Legal","Financial","Medical","Personal","Other"],CS=({title:r,description:e,userId:t,files:s=[],onFilesChange:l})=>{const[c,d]=k.useState(!1),[h,g]=k.useState(0),[p,y]=k.useState(!1),[v,w]=k.useState(null),[S,C]=k.useState("Other"),[F,T]=k.useState(null),V=k.useRef(null),E=A=>{A.preventDefault(),A.stopPropagation(),A.type==="dragenter"||A.type==="dragover"?y(!0):A.type==="dragleave"&&y(!1)},B=A=>{A.preventDefault(),A.stopPropagation(),y(!1),A.dataTransfer.files&&A.dataTransfer.files[0]&&W(A.dataTransfer.files[0])},Y=A=>{A.target.files&&A.target.files[0]&&W(A.target.files[0])},W=async A=>{if(d(!0),g(0),w(null),!t){w("User ID is missing. Cannot upload."),d(!1);return}try{const P=`users/${t}/${S}/${Date.now()}_${A.name}`,M=ul(dl,P),z=Sx(M,A);z.on("state_changed",me=>{const Oe=me.bytesTransferred/me.totalBytes*100;g(Oe)},me=>{console.error("Upload failed:",me);let Oe=`Upload failed: ${me.message}`;w(Oe),d(!1)},async()=>{try{const me=await Ku(z.snapshot.ref),Oe={name:A.name,url:me,category:S,uploadedAt:new Date().toISOString(),type:A.type,path:P},H=[...s,Oe];await l(H),d(!1),V.current&&(V.current.value="")}catch(me){console.error("Error getting download URL:",me),w("Upload succeeded but failed to get file URL."),d(!1)}})}catch(P){console.error("Error starting upload:",P),w("Failed to start upload."),d(!1)}},$=async()=>{if(!F)return;const P=(M=>{if(M.path)return M.path;try{const z=new URL(M.url),me=z.pathname.indexOf("/o/");if(me===-1)return null;const Oe=z.pathname.substring(me+3);return decodeURIComponent(Oe)}catch{return null}})(F);try{if(P){const z=ul(dl,P);await jS(z).catch(me=>{console.warn("File might not exist in storage or invalid path, proceeding to remove record:",me)})}else console.warn("Could not determine storage path, removing record only.");const M=s.filter(z=>z.url!==F.url);await l(M)}catch(M){console.error("Error deleting file:",M),alert("Failed to delete file.")}finally{T(null)}},I=A=>new Date(A).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}),L=s.filter(A=>A.type.startsWith("image/")),j=s.filter(A=>!A.type.startsWith("image/"));return i.jsxs("div",{className:"space-y-6",children:[i.jsx(NP,{isOpen:!!F,onClose:()=>T(null),onConfirm:$,title:"Delete File",message:`Are you sure you want to delete ${F?.name}? This action cannot be undone.`,confirmLabel:"Delete",isDestructive:!0}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-50",children:r}),e&&i.jsx("p",{className:"mt-1 text-sm text-emerald-700/80 dark:text-emerald-200/70",children:e})]}),i.jsxs("div",{className:`relative flex flex-col items-center justify-center rounded-3xl border-2 border-dashed p-8 transition-all
          ${p?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/10":"border-emerald-200 dark:border-emerald-800 hover:border-emerald-400 dark:hover:border-emerald-600 bg-white dark:bg-gray-900/50"}`,onDragEnter:E,onDragLeave:E,onDragOver:E,onDrop:B,children:[i.jsx("input",{ref:V,type:"file",className:"hidden",onChange:Y,disabled:c}),i.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[i.jsx("div",{className:"rounded-full bg-emerald-100 p-5 dark:bg-emerald-900/30",children:c?i.jsxs("div",{className:"relative",children:[i.jsx("i",{className:"ri-loader-4-line animate-spin text-3xl text-emerald-600 dark:text-emerald-400"}),i.jsxs("span",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 text-xs font-bold text-emerald-700 dark:text-emerald-300",children:[Math.round(h),"%"]})]}):i.jsx("i",{className:"ri-upload-cloud-2-line text-3xl text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:c?"Uploading your file...":"Drop files here or click to upload"}),c&&i.jsx("div",{className:"mt-3 h-2 w-64 overflow-hidden rounded-full bg-emerald-100 dark:bg-emerald-900/30",children:i.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-300 ease-out",style:{width:`${h}%`}})}),!c&&i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Supports Images, PDF, and Documents"})]})]}),!c&&i.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-3",children:[i.jsx("select",{value:S,onChange:A=>C(A.target.value),className:"rounded-xl border-gray-200 bg-gray-50 py-2 pl-3 pr-8 text-sm font-semibold text-gray-700 focus:border-emerald-500 focus:ring-emerald-500 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200",children:jP.map(A=>i.jsx("option",{value:A,children:A},A))}),i.jsx(fe,{size:"sm",className:"bg-emerald-600 text-white hover:bg-emerald-700 dark:bg-emerald-500 dark:hover:bg-emerald-600 rounded-xl px-6",onClick:()=>V.current?.click(),children:"Select File"})]}),v&&i.jsxs("div",{className:"mt-6 flex items-center gap-2 rounded-lg bg-red-50 px-4 py-2 text-sm font-medium text-red-600 dark:bg-red-900/20 dark:text-red-400",children:[i.jsx("i",{className:"ri-error-warning-line"}),v]})]}),L.length>0&&i.jsxs("div",{children:[i.jsx("h4",{className:"mb-3 text-sm font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Photos"}),i.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:L.map((A,P)=>i.jsxs("div",{className:"group relative aspect-square overflow-hidden rounded-2xl bg-gray-100 dark:bg-gray-800",children:[i.jsx("img",{src:A.url,alt:A.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 transition-opacity group-hover:opacity-100"}),i.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 opacity-0 transition-opacity group-hover:opacity-100",children:[i.jsx("p",{className:"truncate text-xs font-medium text-white",children:A.name}),i.jsx("p",{className:"text-[10px] text-white/80",children:A.category})]}),i.jsx("button",{onClick:()=>T(A),className:"absolute right-2 top-2 rounded-full bg-white/20 p-1.5 text-white backdrop-blur-sm transition-colors hover:bg-red-500",title:"Delete image",children:i.jsx("i",{className:"ri-delete-bin-line text-sm"})})]},`${A.path}-${P}`))})]}),j.length>0&&i.jsxs("div",{children:[i.jsx("h4",{className:"mb-3 text-sm font-bold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:"Documents"}),i.jsx("div",{className:"grid gap-3",children:j.map((A,P)=>i.jsxs("div",{className:"group flex items-center gap-4 rounded-2xl border border-gray-100 bg-white p-4 shadow-sm transition-all hover:border-emerald-200 hover:shadow-md dark:border-gray-800 dark:bg-gray-900 dark:hover:border-emerald-800",children:[i.jsx("div",{className:`flex h-12 w-12 shrink-0 items-center justify-center rounded-xl 
                  ${A.type.includes("pdf")?"bg-red-50 text-red-500 dark:bg-red-900/20":"bg-blue-50 text-blue-500 dark:bg-blue-900/20"}`,children:i.jsx("i",{className:`${A.type.includes("pdf")?"ri-file-pdf-line":"ri-file-text-line"} text-2xl`})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"block truncate text-base font-semibold text-gray-900 hover:text-emerald-600 dark:text-gray-100 dark:hover:text-emerald-400",children:A.name}),i.jsxs("div",{className:"mt-1 flex items-center gap-3 text-xs text-gray-500",children:[i.jsx("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:A.category}),i.jsx("span",{className:"h-1 w-1 rounded-full bg-gray-300 dark:bg-gray-600"}),i.jsx("span",{children:I(A.uploadedAt)})]})]}),i.jsxs("div",{className:"flex items-center gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:[i.jsx("a",{href:A.url,download:!0,className:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-emerald-600 dark:hover:bg-gray-800",title:"Download",children:i.jsx("i",{className:"ri-download-line text-lg"})}),i.jsx("button",{onClick:()=>T(A),className:"rounded-lg p-2 text-gray-400 hover:bg-red-50 hover:text-red-500 dark:hover:bg-red-900/20",title:"Delete",children:i.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})]},`${A.path}-${P}`))})]}),s.length===0&&!c&&i.jsx("div",{className:"py-8 text-center",children:i.jsx("p",{className:"text-sm text-gray-400",children:"No documents or media uploaded yet."})})]})},Ax=({message:r,subMessage:e,type:t="success",onClose:s,duration:l=3e3})=>{k.useEffect(()=>{const g=setTimeout(()=>{s()},l);return()=>clearTimeout(g)},[l,s]);const c={success:"bg-emerald-50 dark:bg-emerald-900/30 border-emerald-200 dark:border-emerald-800",error:"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-800",info:"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800"},d={success:"text-emerald-500 dark:text-emerald-400",error:"text-red-500 dark:text-red-400",info:"text-blue-500 dark:text-blue-400"},h={success:"ri-checkbox-circle-fill",error:"ri-error-warning-fill",info:"ri-information-fill"};return i.jsx("div",{className:"fixed bottom-6 right-6 z-50 animate-slide-up",children:i.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg shadow-lg border ${c[t]} max-w-md`,children:[i.jsx("i",{className:`${h[t]} ${d[t]} text-xl mt-0.5`}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:r}),e&&i.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs mt-1",children:e})]}),i.jsx("button",{onClick:s,className:"ml-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:i.jsx("i",{className:"ri-close-line"})})]})})},lo="medical_records",oo="medications",Mn={getAllRecords:async()=>{try{const r=Xe(Ie(be,lo),Et("date","desc"));return(await rt(r)).docs.map(t=>({id:t.id,...t.data()}))}catch(r){throw console.error("Error fetching medical records:",r),r}},createRecord:async r=>{try{return(await Tn(Ie(be,lo),{...r,createdAt:De.now()})).id}catch(e){throw console.error("Error creating medical record:",e),e}},updateRecord:async(r,e)=>{try{const t=at(be,lo,r);await Vt(t,{...e})}catch(t){throw console.error("Error updating medical record:",t),t}},deleteRecord:async r=>{try{await sl(at(be,lo,r))}catch(e){throw console.error("Error deleting medical record:",e),e}},getAllMedications:async()=>{try{const r=Xe(Ie(be,oo),Et("startDate","desc"));return(await rt(r)).docs.map(t=>({id:t.id,...t.data()}))}catch(r){throw console.error("Error fetching medications:",r),r}},addMedication:async r=>{try{return(await Tn(Ie(be,oo),{...r})).id}catch(e){throw console.error("Error creating medication:",e),e}},updateMedication:async(r,e)=>{try{const t=at(be,oo,r);await Vt(t,{...e})}catch(t){throw console.error("Error updating medication:",t),t}},deleteMedication:async r=>{try{await sl(at(be,oo,r))}catch(e){throw console.error("Error deleting medication:",e),e}},getRecordsBySurrogateId:async r=>{try{const e=Xe(Ie(be,lo),ur("userId","==",r),Et("date","desc"));return(await rt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.warn("Error fetching surrogate records (possibly missing index), trying simple fetch",e);try{const t=Xe(Ie(be,lo));return(await rt(t)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.userId===r||l.surrogateId===r).sort((l,c)=>c.date.localeCompare(l.date))}catch(t){return console.error("Fallback fetch also failed",t),[]}}},getMedicationsBySurrogateId:async r=>{try{const e=Xe(Ie(be,oo),ur("userId","==",r));return(await rt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.error("Error fetching surrogate medications:",e),console.warn("Error fetching surrogate medications (possibly missing index), trying simple fetch",e);try{const t=Xe(Ie(be,oo));return(await rt(t)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.userId===r||l.surrogateId===r)}catch(t){return console.error("Fallback fetch also failed",t),[]}}}},co="payments",tu={getAllPayments:async()=>{try{const r=Xe(Ie(be,co),Et("dueDate","desc"));return(await rt(r)).docs.map(t=>({id:t.id,...t.data()}))}catch(r){throw console.error("Error fetching payments:",r),r}},createPayment:async r=>{try{return(await Tn(Ie(be,co),{...r,createdAt:De.now()})).id}catch(e){throw console.error("Error creating payment:",e),e}},updatePayment:async(r,e)=>{try{const t=at(be,co,r);await Vt(t,{...e})}catch(t){throw console.error("Error updating payment:",t),t}},deletePayment:async r=>{try{await sl(at(be,co,r))}catch(e){throw console.error("Error deleting payment:",e),e}},getPaymentsBySurrogateId:async r=>{try{const e=Xe(Ie(be,co),ur("surrogateId","==",r),Et("dueDate","desc"));return(await rt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.warn("Error fetching surrogate payments (possibly missing index), trying simple fetch",e);const t=Xe(Ie(be,co),ur("surrogateId","==",r));try{return(await rt(t)).docs.map(l=>({id:l.id,...l.data()})).sort((l,c)=>c.dueDate.localeCompare(l.dueDate))}catch(s){return console.error("Fallback fetch also failed",s),[]}}}},RS={firstName:"",lastName:"",role:"",profileCompleted:!1,form2Completed:!1,profileCompletedAt:"",form2CompletedAt:""},IS={firstName:"",lastName:"",email:"",phoneNumber:"",city:"",state:"",country:"",zip:"",address:"",whenToStart:"",preferredContactMethod:""},kP={availability:"",pregnancyHistory:{total:"",vaginal:"",cSection:""},surrogacyChildren:"",bmi:"",smoker:!1,medications:"",supportSystem:""},EP={preferences:"",notes:"",availabilityWindow:"",languages:[]},_N={bioMotherHeritage:"",bioFatherHeritage:"",education:"",occupation:"",age:"",height:"",relationshipPreference:"",amhStatus:"",opennessToSecondCycle:"",bio:"",caption:""},NN={bio:"",age:"",aboutUs:"",relationshipPreference:"",familyLifestyle:"",occupation:"",education:"",heritage:"",religion:"",hobbies:"",caption:""},SP={fertilityClinic:"",embryosAvailable:"",embryoQuality:"",medicalHistory:"",timeline:"",surrogacyBudget:"",legalCounsel:""},TP={clinicName:"",physician:"",clinicContact:"",embryoReport:"",geneticTesting:""},jN={name:"",dateOfBirth:"",occupation:"",phoneNumber:"",email:"",preferredPronouns:"",notes:""},AP={location:"",experiencePreference:"",communicationStyle:"",budgetRange:"",lifestylePreferences:""},CP={ivfEvaluationSummary:"",ovarianReserveAMH:"",semenAnalysis:"",diagnosis:""},RP={hiv:"",hbsag:"",hcv:"",vdrl:"",cmv:""},IP={embryoFreezingReport:"",donorScreeningReport:""},DP={gynecologicalExam:"",obstetricHistory:"",bmi:"",bp:"",generalHealthClearance:""},OP={hiv:"",hbsag:"",hcv:"",vdrl:"",torch:""},MP={mentalHealthClearanceDoc:""},kN=["firstName","lastName","role","profileCompleted","form2Completed","profileCompletedAt","form2CompletedAt"],PP=["Available","Potential","Records Review","Screening","Legal","Cycling","Pregnant"],LP=[{id:"overview",label:"Overview",icon:"ri-dashboard-line"},{id:"about",label:"About",icon:"ri-information-line"},{id:"personal",label:"Personal & Intake",icon:"ri-user-line"},{id:"medical_intake",label:"Medical Intake",icon:"ri-file-shield-line"},{id:"clinical",label:"Clinical Care",icon:"ri-stethoscope-line"},{id:"compensation",label:"Compensation",icon:"ri-money-dollar-circle-line"},{id:"documents",label:"Documents",icon:"ri-folder-open-line"}],UP=()=>{const{id:r}=QN(),e=dn(),[t,s]=k.useState(null),[l,c]=k.useState(!0),[d,h]=k.useState(null),[g,p]=k.useState(!1),[y,v]=k.useState(null),[w,S]=k.useState(!1),[C,F]=k.useState("overview"),T=Hh.useRef(null),[V,E]=k.useState([]),[B,Y]=k.useState([]),[W,$]=k.useState([]),I=k.useMemo(()=>r?at(be,"users",r):null,[r]);k.useEffect(()=>{if(!r){h("No surrogate id provided."),c(!1);return}if(!I){s(null),h("Surrogate profile not found."),c(!1);return}const G=En(I,xe=>{xe.exists()?(s({id:xe.id,...xe.data()}),h(null)):(s(null),h("Surrogate profile not found.")),c(!1)},xe=>{console.error("Failed to load surrogate profile",xe),h("Unable to load surrogate profile. Please try again later."),s(null),c(!1)});return(async()=>{try{const[xe,Te,Se]=await Promise.all([Mn.getRecordsBySurrogateId(r),Mn.getMedicationsBySurrogateId(r),tu.getPaymentsBySurrogateId(r)]);E(xe),Y(Te),$(Se)}catch(xe){console.error("Failed to load clinical/financial data",xe)}})(),()=>G()},[r,I]);const L=G=>{if(!G)return"";if(typeof G=="string"||typeof G=="number"){const ce=new Date(G);return Number.isNaN(ce.getTime())?String(G):ce.toLocaleString()}return typeof G=="object"&&G!==null&&"toDate"in G&&typeof G.toDate=="function"?G.toDate().toLocaleString():String(G)},j=k.useMemo(()=>{if(!t)return"Surrogate Profile";const G=t.formData?.firstName,ce=t.formData?.lastName,xe=[G,ce].filter(Boolean).join(" ");if(xe.length>0)return xe;const Te=t.firstName??"",Se=t.lastName??"",He=[Te,Se].filter(Boolean).join(" ");return He.length>0?He:t.email??"Surrogate Profile"},[t]),A=k.useMemo(()=>j&&j.split(" ").filter(Boolean).map(G=>G[0]?.toUpperCase()??"").join("").slice(0,2)||"FM",[j]),P=k.useMemo(()=>{if(!t)return null;const G=t.formData,ce=G?.city?.trim(),xe=G?.state?.trim(),Te=[ce,xe].filter(Boolean).join(", ");return Te.length>0?Te:null},[t]),M=k.useMemo(()=>{if(!t)return null;const ce=t.form2?.availability??t.form2Data?.availability;return ce?String(ce):null},[t]),z=k.useMemo(()=>{if(!t)return null;const G=t.form2??{},ce=G?.pregnancyHistory?.total,xe=G?.surrogacyChildren??t.form2Data?.surrogacyChildren;return ce?`${ce} pregnancies`:xe?`${xe} surrogacy journey${xe==="1"?"":"s"}`:null},[t]),me=k.useMemo(()=>L(t?.createdAt),[t]),Oe=k.useMemo(()=>L(t?.updatedAt),[t]),H=k.useMemo(()=>[t?.email&&{icon:"ri-mail-line",label:"Email",value:t.email},P&&{icon:"ri-map-pin-line",label:"Location",value:P},M&&{icon:"ri-calendar-check-line",label:"Availability",value:M}].filter(Boolean),[M,P,t?.email]),U=k.useMemo(()=>[{label:"Profile Status",value:t?.profileCompleted?"Ready":"In Progress",icon:t?.profileCompleted?"ri-heart-3-line":"ri-time-line",className:t?.profileCompleted?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"bg-amber-500/10 text-amber-400 border border-amber-500/20"},{label:"Form 2",value:t?.form2Completed?"Complete":"Pending",icon:t?.form2Completed?"ri-clipboard-check-line":"ri-clipboard-line",className:t?.form2Completed?"bg-fuchsia-500/10 text-fuchsia-400 border border-fuchsia-500/20":"bg-blue-500/10 text-blue-400 border border-blue-500/20"},{label:"Experience",value:z??"",icon:"ri-user-heart-line",className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200"},{label:"Last Updated",value:Oe,icon:"ri-refresh-line",className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200"}],[z,t?.form2Completed,t?.profileCompleted,Oe]),re=k.useMemo(()=>t?kN.reduce((G,ce)=>(ce in t&&t[ce]!==void 0&&(G[ce]=t[ce]),G),{}):null,[t]),le=k.useCallback(async(G,ce)=>{I&&await Vt(I,{[G]:ce})},[I]),pe=k.useCallback(async G=>{if(!I)return;const ce=Object.keys(G).reduce((xe,Te)=>(kN.includes(Te)&&(xe[Te]=G[Te]),xe),{});Object.keys(ce).length!==0&&await Vt(I,ce)},[I]),D=async G=>{if(I){p(!0);try{await Vt(I,{status:G}),v({message:"Status updated successfully",type:"success"})}catch(ce){console.error("Failed to update status",ce),v({message:"Failed to update status",type:"error"})}finally{p(!1)}}},Q=k.useMemo(()=>{if(!t)return null;const G=t.about??{},ce=t.formData??{},xe=ce.form2??{},Te=(...Pr)=>Pr.find(hn=>hn!=null&&hn!==""),Se=Te(G.age,t.age,ce.age,xe.age);let He="";if(!Se&&ce.dateOfBirth)try{const Pr=new Date(ce.dateOfBirth);if(!isNaN(Pr.getTime())){const hn=Date.now()-Pr.getTime(),Uo=new Date(hn);He=String(Math.abs(Uo.getUTCFullYear()-1970))}}catch(Pr){console.error("Error calculating age",Pr)}const Ge=Te(G.height,t.height,ce.height,xe.height),ye=Te(G.education,t.education,ce.educationLevel,xe.educationLevel,ce["Education Level"]),Ve=Te(G.occupation,t.occupation,ce.occupation,xe.occupation,ce.Occupation),Ae=Te(G.bioMotherHeritage,t.bioMotherHeritage,ce.ethnicity,xe.ethnicity,ce.Ethnicity),yt=Te(G.bioFatherHeritage,t.bioFatherHeritage),Yt=Te(G.relationshipPreference,t.relationshipPreference,ce.relationshipStatus,xe.relationshipStatus,ce["Relationship Status"]),fs=Te(G.amhStatus,t.amhStatus),ra=Te(G.opennessToSecondCycle,t.opennessToSecondCycle),na=Te(G.bio,t.bio,ce.messageToParents,xe.messageToParents,ce["Message To Parents"],ce.surrogacyReasons,xe.surrogacyReasons,ce["Surrogacy Reasons"]);return{..._N,...G,age:Se?String(Se):He,height:Ge?String(Ge):"",education:ye||"",occupation:Ve||"",bioMotherHeritage:Ae||"",bioFatherHeritage:yt||"",relationshipPreference:Yt||"",amhStatus:fs||"",opennessToSecondCycle:ra||"",bio:na||""}},[t]),ae=async G=>{const ce=G.target.files?.[0];if(!(!ce||!I)){if(!ce.type.startsWith("image/")){v({message:"Please upload an image file",type:"error"});return}if(ce.size>5*1024*1024){v({message:"File size must be less than 5MB",type:"error"});return}try{S(!0);const xe=ul(dl,`users/${r}/profile/avatar_${Date.now()}_${ce.name}`),Te=Sx(xe,ce);await new Promise((Se,He)=>{Te.on("state_changed",null,Ge=>He(Ge),async()=>{try{const Ge=await Ku(Te.snapshot.ref);await Vt(I,{profileImageUrl:Ge}),v({message:"Profile picture updated successfully",type:"success"}),Se()}catch(Ge){He(Ge)}})})}catch(xe){console.error("Error uploading image:",xe),v({message:"Failed to upload profile picture",type:"error"})}finally{S(!1),T.current&&(T.current.value="")}}},ge=G=>{switch(G){case"Paid":return"green";case"Pending":return"yellow";case"Overdue":return"red";default:return"gray"}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),y&&i.jsx(Ax,{message:y.message,type:y.type,onClose:()=>v(null)}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs(fe,{variant:"outline",onClick:()=>e("/surrogates"),children:[i.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to list"]})}),l?i.jsx("div",{className:"grid gap-6",children:i.jsx(we,{className:"animate-pulse h-48",children:i.jsx("div",{className:"h-full w-full rounded-xl bg-gray-100 dark:bg-gray-800"})})}):d?i.jsx(we,{className:"p-6 text-red-600 dark:text-red-400",children:d}):t?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-rose-500 via-fuchsia-500 to-indigo-500 p-8 text-white shadow-2xl",children:[i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.3),_transparent_65%)] opacity-80"}),i.jsxs("div",{className:"relative flex flex-col gap-8 lg:flex-row lg:items-center lg:justify-between",children:[i.jsxs("div",{className:"flex items-start gap-6",children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-2xl border border-white/40 bg-white/10 text-3xl font-semibold backdrop-blur-xl overflow-hidden",children:t.profileImageUrl?i.jsx("img",{src:t.profileImageUrl,alt:j,className:"h-full w-full object-cover"}):A}),i.jsx("button",{onClick:()=>T.current?.click(),disabled:w,className:"absolute inset-0 flex items-center justify-center bg-black/40 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer disabled:cursor-not-allowed",title:"Change profile picture",children:w?i.jsx("i",{className:"ri-loader-4-line animate-spin text-white text-xl"}):i.jsx("i",{className:"ri-camera-line text-white text-xl"})}),i.jsx("input",{type:"file",ref:T,onChange:ae,accept:"image/*",className:"hidden"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-semibold leading-tight",children:j}),i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white/80",children:[i.jsx("i",{className:"ri-user-heart-line text-sm"}),"Surrogate"]})]}),i.jsx("p",{className:"mt-3 text-sm text-white/80",children:"Compassionate partner ready to support intended parents throughout the journey."}),i.jsx("div",{className:"mt-4 flex flex-wrap gap-3 text-sm font-medium text-white/90",children:H.map(G=>i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur-md",children:[i.jsx("i",{className:`${G.icon} text-base text-white/90`}),i.jsx("span",{children:G.value})]},G.label))})]})]}),i.jsxs("div",{className:"flex flex-col gap-3 text-sm text-white/80",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur",children:[i.jsx("i",{className:"ri-donut-chart-line text-base text-white/90"}),i.jsx("span",{className:"font-medium mr-1",children:"Status:"}),i.jsx("select",{value:t.status||"Available",onChange:G=>D(G.target.value),disabled:g,className:"bg-transparent border-none text-white focus:ring-0 cursor-pointer py-0 pl-0 pr-8 font-semibold [&>option]:text-gray-900 [&>option]:bg-white",children:PP.map(G=>i.jsx("option",{value:G,children:G},G))})]}),i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur",children:[i.jsx("i",{className:"ri-hashtag text-base text-white/90"}),"ID: ",t.id]}),i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur",children:[i.jsx("i",{className:"ri-time-line text-base text-white/90"}),"Joined: ",me]})]})]})]}),i.jsx("div",{className:"flex overflow-x-auto border-b border-gray-200 dark:border-gray-700 no-scrollbar",children:LP.map(G=>i.jsxs("button",{onClick:()=>F(G.id),className:`
                            flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap
                            ${C===G.id?"border-primary-500 text-primary-600 dark:border-primary-400 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
                        `,children:[i.jsx("i",{className:G.icon}),G.label]},G.id))}),i.jsxs("div",{className:"space-y-6",children:[C==="overview"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:U.map(G=>i.jsx(we,{padding:"sm",className:`${G.className} border-none shadow-sm backdrop-blur`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide opacity-70",children:G.label}),i.jsx("p",{className:"mt-2 text-lg font-semibold",children:G.value})]}),i.jsx("span",{className:"text-xl opacity-70",children:i.jsx("i",{className:G.icon})})]})},G.label))}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[i.jsx(we,{className:"xl:col-span-2",children:i.jsx(ir,{title:"Core Profile",description:"Update the surrogates headline details such as role and completion flags.",data:re,emptyMessage:"No core profile data available.",templateData:RS,onSave:pe})}),i.jsx(we,{className:"xl:col-span-2",children:i.jsx(ir,{title:"Additional Profile Data",description:"Capture any supplementary information stored alongside the surrogate profile.",data:t.form2Data??null,emptyMessage:"No additional data provided.",templateData:EP,onSave:G=>le("form2Data",G)})})]})]}),C==="about"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-12",children:[i.jsx("div",{className:"xl:col-span-5 space-y-4",children:i.jsxs("div",{className:"columns-1 gap-4 sm:columns-2 space-y-4",children:[t.profileImageUrl&&i.jsx("div",{className:"break-inside-avoid overflow-hidden rounded-2xl bg-gray-100 dark:bg-gray-800 shadow-md",children:i.jsx("img",{src:t.profileImageUrl,alt:j,className:"h-full w-full object-cover"})}),t.documents?.filter(G=>{const ce=G.type?.startsWith("image/"),xe=/\.(jpg|jpeg|png|gif|webp)$/i.test(G.name),Te=!G.type;return ce||xe||Te&&xe}).map((G,ce)=>i.jsxs("div",{className:"break-inside-avoid overflow-hidden rounded-2xl bg-gray-100 dark:bg-gray-800 shadow-md group relative",children:[i.jsx("img",{src:G.url,alt:G.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}),i.jsx("div",{className:"absolute inset-0 bg-black/0 transition-colors group-hover:bg-black/10"})]},`${G.url}-${ce}`)),!t.profileImageUrl&&(!t.documents||!t.documents.some(G=>G.type?.startsWith("image/")||/\.(jpg|jpeg|png|gif|webp)$/i.test(G.name)))&&i.jsx("div",{className:"break-inside-avoid flex aspect-[3/4] w-full items-center justify-center rounded-2xl bg-gray-100 dark:bg-gray-800 text-4xl text-gray-300 dark:text-gray-600",children:i.jsx("i",{className:"ri-image-line"})})]})}),i.jsx("div",{className:"xl:col-span-7 space-y-6",children:i.jsx(we,{children:i.jsx(AS,{title:`About ${t.firstName||"Surrogate"}`,data:Q,type:"surrogate",templateData:_N,onSave:G=>le("about",G)})})})]}),C==="personal"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[i.jsx(we,{children:i.jsx(ir,{title:"Form 1 Responses",description:"Update the initial intake form shared by the surrogate.",data:t.formData??null,emptyMessage:"No form data available.",templateData:IS,onSave:G=>le("formData",G)})}),i.jsx(we,{children:i.jsx(ir,{title:"Form 2 Responses",description:"Modify detailed screening information.",data:t.form2??null,emptyMessage:"Form 2 has not been completed.",templateData:kP,onSave:G=>le("form2",G)})})]}),C==="medical_intake"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[i.jsx(we,{className:"xl:col-span-2",children:i.jsx(ir,{title:"Comprehensive Medical Fitness Certificate",description:"Gynecological exam, obstetric history, BMI, BP, and general health clearance.",data:t.form2?.medicalFitness??null,emptyMessage:"No medical fitness report available.",templateData:DP,onSave:G=>le("form2.medicalFitness",G)})}),i.jsx(we,{children:i.jsx(ir,{title:"Infectious Disease Screening Report",description:"Screening results for HIV, HBsAg, HCV, VDRL, TORCH.",data:t.form2?.infectiousDisease??null,emptyMessage:"No screening report available.",templateData:OP,onSave:G=>le("form2.infectiousDisease",G)})}),i.jsx(we,{children:i.jsx(ir,{title:"Psychological / Mental Health Clearance",description:"Upload evaluation by certified psychologist/psychiatrist.",data:t.form2?.psychClearance??null,emptyMessage:"No psychological clearance available.",templateData:MP,onSave:G=>le("form2.psychClearance",G)})})]}),C==="clinical"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[i.jsxs(we,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Active Medications"}),i.jsx(fe,{size:"sm",onClick:()=>e("/medical"),children:"Manage Meds"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 rounded-l-lg",children:"Name"}),i.jsx("th",{className:"px-4 py-3",children:"Dosage"}),i.jsx("th",{className:"px-4 py-3",children:"Frequency"}),i.jsx("th",{className:"px-4 py-3",children:"Start Date"}),i.jsx("th",{className:"px-4 py-3 rounded-r-lg",children:"Status"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:B.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No medications found."})}):B.map(G=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white",children:G.name}),i.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:G.dosage}),i.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:G.frequency}),i.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:G.startDate}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:G.status})})]},G.id))})]})})]}),i.jsxs(we,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Medical Records"}),i.jsx(fe,{size:"sm",onClick:()=>e("/medical"),children:"View All Records"})]}),i.jsx("div",{className:"space-y-4",children:V.length===0?i.jsx("div",{className:"text-center text-gray-500 py-8",children:"No medical records found."}):V.map(G=>i.jsxs("div",{className:"flex items-start justify-between p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-100 dark:border-gray-700",children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"mt-1",children:i.jsx("i",{className:"ri-file-list-3-line text-xl text-blue-500"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:G.title}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[G.date,"  ",G.type]}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:G.summary})]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i.jsx(_e,{color:G.status==="Verified"?"green":"yellow",children:G.status}),G.sharedWithParents&&i.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[i.jsx("i",{className:"ri-eye-line"})," Shared"]})]})]},G.id))})]})]}),C==="compensation"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(we,{className:"bg-gradient-to-br from-green-500 to-emerald-600 text-white border-none",children:[i.jsx("div",{className:"text-green-100 mb-1",children:"Total Paid"}),i.jsxs("div",{className:"text-2xl font-bold",children:["$",W.filter(G=>G.status==="Paid").reduce((G,ce)=>G+Number(ce.amount),0).toLocaleString()]})]}),i.jsxs(we,{className:"bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-1",children:"Pending Approval"}),i.jsxs("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-500",children:["$",W.filter(G=>G.status==="Pending").reduce((G,ce)=>G+Number(ce.amount),0).toLocaleString()]})]}),i.jsxs(we,{className:"bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-1",children:"Next Payment"}),i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-500",children:W.filter(G=>G.status==="Scheduled").sort((G,ce)=>G.dueDate.localeCompare(ce.dueDate))[0]?.dueDate||""})]})]}),i.jsxs(we,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Payment History"}),i.jsx(fe,{size:"sm",onClick:()=>e("/payments"),children:"Manage Payments"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm text-left",children:[i.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-300",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 rounded-l-lg",children:"Type"}),i.jsx("th",{className:"px-4 py-3",children:"Amount"}),i.jsx("th",{className:"px-4 py-3",children:"Due Date"}),i.jsx("th",{className:"px-4 py-3",children:"Status"}),i.jsx("th",{className:"px-4 py-3 rounded-r-lg",children:"Notes"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:W.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No payments found."})}):W.map(G=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white",children:G.type}),i.jsxs("td",{className:"px-4 py-3 font-mono font-medium",children:["$",Number(G.amount).toLocaleString()]}),i.jsx("td",{className:"px-4 py-3 dark:text-gray-300",children:G.dueDate}),i.jsx("td",{className:"px-4 py-3",children:i.jsx(_e,{color:ge(G.status),children:G.status})}),i.jsx("td",{className:"px-4 py-3 text-gray-500 truncate max-w-xs",children:G.notes})]},G.id))})]})})]})]}),C==="documents"&&i.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.jsx(we,{children:i.jsx(CS,{title:"Documents & Media",description:"Upload legal contracts, receipts, medical reports, and other documents.",userId:t.id,files:t.documents??[],onFilesChange:G=>le("documents",G)})})})]})]}):i.jsx(we,{className:"p-6 text-gray-600 dark:text-gray-300",children:"Surrogate profile not found."})]})]})]})},Ip=[{id:"all",label:"All",filter:r=>!0},{id:"to_be_matched",label:"To be Matched",filter:r=>r.status==="To be Matched"||!r.form2Completed&&!r.profileCompleted},{id:"matched",label:"Matched",filter:r=>r.status==="Matched"},{id:"rematch",label:"Rematch",filter:r=>r.status==="Rematch"}],VP=()=>{const[r,e]=k.useState("all"),[t,s]=k.useState(null),[l,c]=k.useState([]),[d,h]=k.useState(!0),[g,p]=k.useState(null),y=dn();k.useEffect(()=>{const E=Xe(Ie(be,"users"),ur("role","==","Intended Parent")),B=En(E,Y=>{const W=Y.docs.map($=>({id:$.id,...$.data()}));c(W),h(!1),p(null)},Y=>{console.error("Failed to load intended parents",Y),p("Unable to load intended parent records. Please try again later."),h(!1)});return()=>B()},[]);const v=k.useMemo(()=>Ip.reduce((E,B)=>(E[B.id]=l.filter(Y=>B.filter(Y)).length,E),{}),[l]),w=k.useMemo(()=>{const E=Ip.find(B=>B.id===r);return E?l.filter(B=>E.filter(B)):l},[r,l]),S=E=>{switch(E.status){case"To be Matched":return i.jsx(_e,{color:"yellow",children:"To be Matched"});case"Matched":return i.jsx(_e,{color:"green",children:"Matched"});case"Rematch":return i.jsx(_e,{color:"red",children:"Rematch"});default:return E.form2Completed?i.jsx(_e,{color:"green",children:"Form 2 Complete"}):E.profileCompleted?i.jsx(_e,{color:"blue",children:"Profile Complete"}):i.jsx(_e,{color:"gray",children:"Unknown"})}},C=E=>{const B=E.parent1?.name;if(B&&B.trim().length>0)return B;const Y=E.formData?.firstName,W=E.formData?.lastName,$=[Y,W].filter(Boolean).join(" ");if($.length>0)return $;const I=E.firstName??"",L=E.lastName??"",j=[I,L].filter(Boolean).join(" ");return j.length>0?j:E.email??"Intended Parent"},F=E=>{const B=E.formData,Y=B?.city??"",W=B?.state??"";return[Y,W].filter(Boolean).join(", ")||"Not specified"},T=E=>E.formData?.whenToStart??"No timeline set",V=E=>E.form2Data?.budget??"Not provided";return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Intended Parents"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage all intended parents and their journey progress."})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:Ip.map(E=>i.jsxs("button",{onClick:()=>e(E.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${r===E.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[E.label," (",v[E.id]??0,")"]},E.id))})}),g&&i.jsx("div",{className:"mb-6 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-900 dark:bg-red-950/60 dark:text-red-300",children:g}),d?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:Array.from({length:6}).map((E,B)=>i.jsx(we,{className:"animate-pulse",children:i.jsx("div",{className:"h-48 w-full rounded-lg bg-gray-100 dark:bg-gray-800"})},B))}):i.jsx(i.Fragment,{children:w.length===0?i.jsx(we,{className:"p-6 text-center text-gray-600 dark:text-gray-300",children:"No intended parents found for this filter."}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:w.map(E=>i.jsxs(we,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(E),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-parent-line text-purple-600 dark:text-purple-400 text-lg"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:C(E)}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 break-all",children:["ID: ",E.id]})]})]}),S(E)]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Email:"}),i.jsx("span",{className:"text-gray-900 dark:text-white break-words text-right",children:E.email??""})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right",children:F(E)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Timeline:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right",children:T(E)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Budget:"}),i.jsx("span",{className:"text-gray-900 dark:text-white text-right",children:V(E)})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(fe,{size:"sm",className:"flex-1",onClick:B=>{B.stopPropagation(),y(`/parents/${E.id}`)},children:[i.jsx("i",{className:"ri-eye-line mr-1"}),"View Profile"]}),i.jsx(fe,{size:"sm",color:"blue",children:i.jsx("i",{className:"ri-message-line"})})]})]},E.id))})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Intended Parents Profile"}),i.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-parent-line text-purple-600 dark:text-purple-400 text-2xl"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:C(t)}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400 break-all",children:["Parent ID: ",t.id]}),S(t)]})]}),i.jsx(Ut,{title:"Profile Overview",data:{Email:t.email,Role:t.role,"Profile Completed":t.profileCompleted,"Form 2 Completed":t.form2Completed,"Created At":t.createdAt,"Updated At":t.updatedAt}}),i.jsx(Ut,{title:"Form 1 Responses",data:t.formData??null,emptyMessage:"No form data available."}),i.jsx(Ut,{title:"Form 2 Responses",data:t.form2Data??null,emptyMessage:"Form 2 has not been completed."}),i.jsx(Ut,{title:"Fertility Information",data:t.form2Data?.fertility??null,emptyMessage:"No fertility information provided."}),i.jsx(Ut,{title:"Parent 1",data:t.parent1??null,emptyMessage:"Parent 1 details not provided."}),i.jsx(Ut,{title:"Parent 2",data:t.parent2??null,emptyMessage:"Parent 2 details not provided."}),i.jsx(Ut,{title:"Surrogate Preferences",data:t.surrogateRelated??null,emptyMessage:"No surrogate preferences captured."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(fe,{color:"blue",className:"flex-1",children:[i.jsx("i",{className:"ri-links-line mr-2"}),"Find Match"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",children:[i.jsx("i",{className:"ri-message-line mr-2"}),"Send Message"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit Profile"]})]})]})]})})})]})]})]})},EN=["firstName","lastName","role","profileCompleted","form2Completed","profileCompletedAt","form2CompletedAt"],zP=["To be Matched","Matched","Rematch"],FP=[{id:"overview",label:"Overview",icon:"ri-dashboard-line"},{id:"about",label:"About",icon:"ri-information-line"},{id:"personal",label:"Personal",icon:"ri-user-line"},{id:"medical",label:"Medical & Fertility",icon:"ri-stethoscope-line"},{id:"intake",label:"Intake & Preferences",icon:"ri-file-list-3-line"},{id:"documents",label:"Documents",icon:"ri-folder-open-line"}],BP=()=>{const{id:r}=QN(),e=dn(),[t,s]=k.useState(null),[l,c]=k.useState(!0),[d,h]=k.useState(null),[g,p]=k.useState(!1),[y,v]=k.useState(null),[w,S]=k.useState(!1),[C,F]=k.useState("overview"),T=Hh.useRef(null),V=k.useMemo(()=>r?at(be,"users",r):null,[r]);k.useEffect(()=>{if(!r){h("No parent id provided."),c(!1);return}if(!V){s(null),h("Parent profile not found."),c(!1);return}const U=En(V,re=>{re.exists()?(s({id:re.id,...re.data()}),h(null)):(s(null),h("Parent profile not found.")),c(!1)},re=>{console.error("Failed to load parent profile",re),h("Unable to load parent profile. Please try again later."),s(null),c(!1)});return()=>U()},[r,V]);const E=U=>{if(!U)return"";if(typeof U=="string"||typeof U=="number"){const re=new Date(U);return Number.isNaN(re.getTime())?String(U):re.toLocaleString()}return typeof U=="object"&&U!==null&&"toDate"in U&&typeof U.toDate=="function"?U.toDate().toLocaleString():String(U)},B=k.useMemo(()=>{if(!t)return"Parent Profile";const U=t.parent1?.name;if(U&&U.trim().length>0)return U;const re=t.formData?.firstName,le=t.formData?.lastName,pe=[re,le].filter(Boolean).join(" ");if(pe.length>0)return pe;const D=t.firstName??"",Q=t.lastName??"",ae=[D,Q].filter(Boolean).join(" ");return ae.length>0?ae:t.email??"Parent Profile"},[t]),Y=k.useMemo(()=>B&&B.split(" ").filter(Boolean).map(U=>U[0]?.toUpperCase()??"").join("").slice(0,2)||"FM",[B]),W=k.useMemo(()=>{if(!t)return null;const U=t.formData,re=U?.city?.trim(),le=U?.state?.trim(),pe=[re,le].filter(Boolean).join(", ");return pe.length>0?pe:null},[t]),$=k.useMemo(()=>t?t.formData?.whenToStart??null:null,[t]),I=k.useMemo(()=>E(t?.createdAt),[t]),L=k.useMemo(()=>E(t?.updatedAt),[t]),j=k.useMemo(()=>[t?.email&&{icon:"ri-mail-line",label:"Email",value:t.email},W&&{icon:"ri-map-pin-line",label:"Location",value:W},$&&{icon:"ri-timer-line",label:"Intended Timeline",value:$}].filter(Boolean),[W,t?.email,$]),A=k.useMemo(()=>[{label:"Profile Status",value:t?.profileCompleted?"Complete":"In Progress",icon:t?.profileCompleted?"ri-shield-check-line":"ri-time-line",className:t?.profileCompleted?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"bg-amber-500/10 text-amber-400 border border-amber-500/20"},{label:"Form 2",value:t?.form2Completed?"Submitted":"Pending",icon:t?.form2Completed?"ri-file-check-line":"ri-draft-line",className:t?.form2Completed?"bg-indigo-500/10 text-indigo-400 border border-indigo-500/20":"bg-blue-500/10 text-blue-400 border border-blue-500/20"},{label:"Created",value:I,icon:"ri-calendar-line",className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200"},{label:"Last Updated",value:L,icon:"ri-refresh-line",className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-200"}],[I,t?.form2Completed,t?.profileCompleted,L]),P=k.useMemo(()=>t?EN.reduce((U,re)=>(re in t&&t[re]!==void 0&&(U[re]=t[re]),U),{}):null,[t]),M=k.useCallback(async(U,re)=>{V&&await Vt(V,{[U]:re})},[V]),z=k.useCallback(async U=>{if(!V)return;const re=Object.keys(U).reduce((le,pe)=>(EN.includes(pe)&&(le[pe]=U[pe]),le),{});Object.keys(re).length!==0&&await Vt(V,re)},[V]),me=async U=>{if(V){p(!0);try{await Vt(V,{status:U}),v({message:"Status updated successfully",type:"success"})}catch(re){console.error("Failed to update status",re),v({message:"Failed to update status",type:"error"})}finally{p(!1)}}},Oe=async U=>{const re=U.target.files?.[0];if(!(!re||!V)){if(!re.type.startsWith("image/")){v({message:"Please upload an image file",type:"error"});return}if(re.size>5*1024*1024){v({message:"File size must be less than 5MB",type:"error"});return}try{S(!0);const le=ul(dl,`users/${r}/profile/avatar_${Date.now()}_${re.name}`),pe=Sx(le,re);await new Promise((D,Q)=>{pe.on("state_changed",null,ae=>Q(ae),async()=>{try{const ae=await Ku(pe.snapshot.ref);await Vt(V,{profileImageUrl:ae}),v({message:"Profile picture updated successfully",type:"success"}),D()}catch(ae){Q(ae)}})})}catch(le){console.error("Error uploading image:",le),v({message:"Failed to upload profile picture",type:"error"})}finally{S(!1),T.current&&(T.current.value="")}}},H=k.useMemo(()=>{if(!t)return null;const U=t.about??{},re=t.formData??{},le=t.form2Data??{},pe=t.parent1??{},D=t.parent2??{},Q=(...yt)=>yt.find(Yt=>Yt!=null&&Yt!==""),ae=Q(U.bio,t.bio,[le?.parent1?.aboutYourself,le?.parent2?.aboutYourself].filter(Boolean).join(`

`),pe?.aboutYourself),ge=Q(U.aboutUs,re.message,re.whySurrogate,le?.surrogateRelated?.additionalInfoForSurrogate,re.messageToSurrogate,le.familyDescription),G=Q(U.relationshipPreference,t.relationshipPreference,le?.surrogateRelated?.pregnancyRelationship,re.relationshipType),ce=Q(U.occupation,t.occupation,[le?.parent1?.occupation,le?.parent2?.occupation].filter(Boolean).join(" & "),[pe.occupation,D.occupation].filter(Boolean).join(" & ")),xe=Q(U.education,t.education,[le?.parent1?.education,le?.parent2?.education].filter(Boolean).join(" & "),[pe.education,D.education].filter(Boolean).join(" & ")),Te=Q(U.hobbies,[le?.parent1?.hobbiesInterests,le?.parent2?.hobbiesInterests].filter(Boolean).join(", ")),Se=Q(U.religion,[le?.parent1?.religion,le?.parent2?.religion].filter(Boolean).join(" & ")),He=Q(U.familyLifestyle,[le?.parent1?.personalityDescription,le?.parent2?.personalityDescription].filter(Boolean).join(`

`)),Ge=yt=>{if(!yt)return"";try{const Yt=new Date(yt);if(isNaN(Yt.getTime()))return"";const fs=Date.now()-Yt.getTime(),ra=new Date(fs);return Math.abs(ra.getUTCFullYear()-1970).toString()}catch{return""}},ye=pe?.age||Ge(pe?.dob)||Ge(le?.parent1?.dob),Ve=D?.age||Ge(D?.dob)||Ge(le?.parent2?.dob),Ae=Q(U.age,t.age,re?.age,[ye,Ve].filter(yt=>yt&&yt!=="0").join(" & "));return{...NN,...U,bio:ae||"",age:Ae||"",aboutUs:ge||"",relationshipPreference:G||"",occupation:ce||"",education:xe||"",hobbies:Te||"",religion:Se||"",familyLifestyle:He||""}},[t]);return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),y&&i.jsx(Ax,{message:y.message,type:y.type,onClose:()=>v(null)}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs(fe,{variant:"outline",onClick:()=>e("/parents"),children:[i.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to list"]})}),l?i.jsxs("div",{className:"grid gap-6",children:[i.jsx(we,{className:"animate-pulse h-48",children:i.jsx("div",{className:"h-full w-full rounded-xl bg-gray-100 dark:bg-gray-800"})}),i.jsx(we,{className:"animate-pulse h-48",children:i.jsx("div",{className:"h-full w-full rounded-xl bg-gray-100 dark:bg-gray-800"})})]}):d?i.jsx(we,{className:"p-6 text-red-600 dark:text-red-400",children:d}):t?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-600 p-8 text-white shadow-2xl",children:[i.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.28),_transparent_60%)] opacity-70"}),i.jsxs("div",{className:"relative flex flex-col gap-8 lg:flex-row lg:items-center lg:justify-between",children:[i.jsxs("div",{className:"flex items-start gap-6",children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-2xl border border-white/30 bg-white/10 text-3xl font-semibold backdrop-blur-xl overflow-hidden",children:t.profileImageUrl?i.jsx("img",{src:t.profileImageUrl,alt:B,className:"h-full w-full object-cover"}):Y}),i.jsx("button",{onClick:()=>T.current?.click(),disabled:w,className:"absolute inset-0 flex items-center justify-center bg-black/40 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer disabled:cursor-not-allowed",title:"Change profile picture",children:w?i.jsx("i",{className:"ri-loader-4-line animate-spin text-white text-xl"}):i.jsx("i",{className:"ri-camera-line text-white text-xl"})}),i.jsx("input",{type:"file",ref:T,onChange:Oe,accept:"image/*",className:"hidden"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-semibold leading-tight",children:B}),i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white/80",children:[i.jsx("i",{className:"ri-parent-line text-sm"}),"Intended Parent"]})]}),i.jsx("p",{className:"mt-3 text-sm text-white/80",children:"Building their family journey through the Family Matters program."}),i.jsx("div",{className:"mt-4 flex flex-wrap gap-3 text-sm font-medium text-white/90",children:j.map(U=>i.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur-md",children:[i.jsx("i",{className:`${U.icon} text-base text-white/90`}),i.jsx("span",{children:U.value})]},U.label))})]})]}),i.jsxs("div",{className:"flex flex-col gap-3 text-sm text-white/80",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur",children:[i.jsx("i",{className:"ri-donut-chart-line text-base text-white/90"}),i.jsx("span",{className:"font-medium mr-1",children:"Status:"}),i.jsx("select",{value:t.status||"To be Matched",onChange:U=>me(U.target.value),disabled:g,className:"bg-transparent border-none text-white focus:ring-0 cursor-pointer py-0 pl-0 pr-8 font-semibold [&>option]:text-gray-900 [&>option]:bg-white",children:zP.map(U=>i.jsx("option",{value:U,children:U},U))})]}),i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1 backdrop-blur",children:[i.jsx("i",{className:"ri-hashtag text-base text-white/90"}),"ID: ",t.id]})]})]})]}),i.jsx("div",{className:"flex overflow-x-auto border-b border-gray-200 dark:border-gray-700 no-scrollbar",children:FP.map(U=>i.jsxs("button",{onClick:()=>F(U.id),className:`
                            flex items-center gap-2 px-6 py-3 text-sm font-medium transition-colors border-b-2 whitespace-nowrap
                            ${C===U.id?"border-primary-500 text-primary-600 dark:border-primary-400 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
                        `,children:[i.jsx("i",{className:U.icon}),U.label]},U.id))}),i.jsxs("div",{className:"space-y-6",children:[C==="overview"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:A.map(U=>i.jsx(we,{padding:"sm",className:`${U.className} border-none shadow-sm backdrop-blur`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide opacity-70",children:U.label}),i.jsx("p",{className:"mt-2 text-lg font-semibold",children:U.value})]}),i.jsx("span",{className:"text-xl opacity-70",children:i.jsx("i",{className:U.icon})})]})},U.label))}),i.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.jsx(we,{className:"xl:col-span-2",children:i.jsx(ir,{title:"Core Profile",description:"Update top-level information such as role and completion status.",data:P,emptyMessage:"No core profile data available.",templateData:RS,onSave:z})})})]}),C==="about"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-12",children:[i.jsx("div",{className:"xl:col-span-5 space-y-4",children:i.jsxs("div",{className:"columns-1 gap-4 sm:columns-2 space-y-4",children:[t.profileImageUrl&&i.jsx("div",{className:"break-inside-avoid overflow-hidden rounded-2xl bg-gray-100 dark:bg-gray-800 shadow-md",children:i.jsx("img",{src:t.profileImageUrl,alt:B,className:"h-full w-full object-cover"})}),t.documents?.filter(U=>{const re=U.type?.startsWith("image/"),le=/\.(jpg|jpeg|png|gif|webp)$/i.test(U.name),pe=!U.type;return re||le||pe&&le}).map((U,re)=>i.jsxs("div",{className:"break-inside-avoid overflow-hidden rounded-2xl bg-gray-100 dark:bg-gray-800 shadow-md group relative",children:[i.jsx("img",{src:U.url,alt:U.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}),i.jsx("div",{className:"absolute inset-0 bg-black/0 transition-colors group-hover:bg-black/10"})]},`${U.url}-${re}`)),!t.profileImageUrl&&(!t.documents||!t.documents.some(U=>U.type?.startsWith("image/")||/\.(jpg|jpeg|png|gif|webp)$/i.test(U.name)))&&i.jsx("div",{className:"break-inside-avoid flex aspect-[3/4] w-full items-center justify-center rounded-2xl bg-gray-100 dark:bg-gray-800 text-4xl text-gray-300 dark:text-gray-600",children:i.jsx("i",{className:"ri-image-line"})})]})}),i.jsx("div",{className:"xl:col-span-7 space-y-6",children:i.jsx(we,{children:i.jsx(AS,{title:`About ${B}`,data:H,type:"parent",templateData:NN,onSave:U=>M("about",U)})})})]}),C==="personal"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[i.jsx(we,{children:i.jsx(ir,{title:"Parent 1",description:"Edit details for Parent 1.",data:t.parent1??null,emptyMessage:"Parent 1 details not provided.",templateData:jN,onSave:U=>M("parent1",U)})}),i.jsx(we,{children:i.jsx(ir,{title:"Parent 2",description:"Edit details for Parent 2.",data:t.parent2??null,emptyMessage:"Parent 2 details not provided.",templateData:jN,onSave:U=>M("parent2",U)})})]}),C==="medical"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[i.jsx(we,{className:"xl:col-span-2",children:i.jsx(ir,{title:"Fertility Information",description:"Capture fertility clinic, embryo and related details.",data:t.form2Data?.fertility??null,emptyMessage:"No fertility information provided.",templateData:TP,onSave:U=>M("form2Data.fertility",U)})}),i.jsx(we,{className:"xl:col-span-2",children:i.jsx(ir,{title:"Fertility & Reproductive Health Report",description:"IVF evaluation, ovarian reserve, and diagnosis.",data:t.form2Data?.fertilityReport??null,emptyMessage:"No fertility report available.",templateData:CP,onSave:U=>M("form2Data.fertilityReport",U)})}),i.jsx(we,{children:i.jsx(ir,{title:"Infectious Disease Screening Report",description:"Screening results for HIV, HBsAg, HCV, VDRL, CMV.",data:t.form2Data?.infectiousDisease??null,emptyMessage:"No screening report available.",templateData:RP,onSave:U=>M("form2Data.infectiousDisease",U)})}),i.jsx(we,{children:i.jsx(ir,{title:"Embryo / Gamete Medical Records",description:"Embryo freezing and donor screening reports.",data:t.form2Data?.embryoRecords??null,emptyMessage:"No embryo records available.",templateData:IP,onSave:U=>M("form2Data.embryoRecords",U)})})]}),C==="intake"&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 xl:grid-cols-2",children:[i.jsx(we,{children:i.jsx(ir,{title:"Form 1 Responses",description:"Update the intake details shared by the intended parents.",data:t.formData??null,emptyMessage:"No form data available.",templateData:IS,onSave:U=>M("formData",U)})}),i.jsx(we,{children:i.jsx(ir,{title:"Form 2 Responses",description:"Modify the extended questionnaire answers for this family.",data:t.form2Data??null,emptyMessage:"Form 2 has not been completed.",templateData:SP,onSave:U=>M("form2Data",U)})}),i.jsx(we,{className:"xl:col-span-2",children:i.jsx(ir,{title:"Surrogate Preferences",description:"Fine-tune the family's preferences for potential surrogates.",data:t.surrogateRelated??null,emptyMessage:"No surrogate preferences captured.",templateData:AP,onSave:U=>M("surrogateRelated",U)})})]}),C==="documents"&&i.jsx("div",{className:"grid grid-cols-1 gap-6",children:i.jsx(we,{children:i.jsx(CS,{title:"Documents & Media",description:"Upload legal contracts, receipts, medical reports, and other documents.",userId:t.id,files:t.documents??[],onFilesChange:U=>M("documents",U)})})})]})]}):i.jsx(we,{className:"p-6 text-gray-600 dark:text-gray-300",children:"Parent profile not found."})]})]})]})},qP=()=>{const[r,e]=k.useState("all"),[t,s]=k.useState(null),[l,c]=k.useState([]),[d,h]=k.useState(!0);k.useEffect(()=>{g()},[]);const g=async()=>{h(!0);try{const S=(await rt(Ie(be,"cases"))).docs.map(C=>({id:C.id,surrogateId:C.data().surrogateId||"",surrogateName:C.data().surrogateName||"Unknown",parentId:C.data().parentId||"",parentName:C.data().parentName||"Unknown",status:C.data().currentStage||"Matching",createdAt:C.data().createdAt?.toDate()||new Date,currentStage:C.data().currentStage||"Matching"}));c(S)}catch(w){console.error("Error fetching matches:",w),c([])}finally{h(!1)}},p=r==="all"?l:l.filter(w=>w.status.toLowerCase()===r),y=w=>{switch(w.toLowerCase()){case"matching":return i.jsx(_e,{color:"yellow",children:"Matching"});case"screening":case"medical":case"legal":return i.jsx(_e,{color:"blue",children:w});case"pregnancy":return i.jsx(_e,{color:"green",children:"Pregnancy"});case"completed":return i.jsx(_e,{color:"green",children:"Completed"});default:return i.jsx(_e,{children:w})}},v=[{id:"all",label:"All Matches",count:l.length},{id:"matching",label:"Matching",count:l.filter(w=>w.status.toLowerCase()==="matching").length},{id:"screening",label:"Screening",count:l.filter(w=>w.status.toLowerCase()==="screening").length},{id:"pregnancy",label:"Pregnancy",count:l.filter(w=>w.status.toLowerCase()==="pregnancy").length},{id:"completed",label:"Completed",count:l.filter(w=>w.status.toLowerCase()==="completed").length}];return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Matches Management"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track all surrogate-parent matches and their journey progress."})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit flex-wrap",children:v.map(w=>i.jsxs("button",{onClick:()=>e(w.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${r===w.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[w.label," (",w.count,")"]},w.id))})}),d?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):p.length===0?i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("i",{className:"ri-links-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No matches found."})]}):i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:p.map(w=>i.jsxs(we,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(w),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-links-line text-green-600 dark:text-green-400 text-lg"})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white",children:["Match #",w.id.slice(0,8)]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Created ",w.createdAt.toLocaleDateString()]})]})]}),y(w.status)]}),i.jsxs("div",{className:"space-y-4 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[i.jsx("div",{className:"w-8 h-8 bg-pink-100 dark:bg-pink-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-user-heart-line text-pink-600 dark:text-pink-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:w.surrogateName}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Surrogate"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[i.jsx("div",{className:"w-8 h-8 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-parent-line text-purple-600 dark:text-purple-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:w.parentName}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Intended Parents"})]})]})]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs(fe,{size:"sm",className:"flex-1",children:[i.jsx("i",{className:"ri-eye-line mr-1"}),"View Details"]})})]},w.id))}),t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Match Details"}),i.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"ri-links-line text-green-600 dark:text-green-400 text-2xl"})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Match #",t.id.slice(0,8)]}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Created on ",t.createdAt.toLocaleDateString()]}),y(t.status)]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{className:"p-4 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:[i.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"ri-user-heart-line text-pink-600 dark:text-pink-400"}),"Surrogate Information"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:t.surrogateName}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",t.surrogateId.slice(0,8)]})]})]}),i.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[i.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"ri-parent-line text-purple-600 dark:text-purple-400"}),"Intended Parents"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:t.parentName}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ID: ",t.parentId.slice(0,8)]})]})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsx(fe,{color:"blue",className:"flex-1",onClick:()=>s(null),children:"Close"})})]})]})})})]})]})]})},$c="appointments",ri={getAllAppointments:async()=>{try{const r=Xe(Ie(be,$c),Et("date","desc"),Et("time","asc"));return(await rt(r)).docs.map(t=>({id:t.id,...t.data()}))}catch(r){throw console.error("Error fetching appointments:",r),r}},createAppointment:async r=>{try{return(await Tn(Ie(be,$c),{...r,createdAt:De.now(),updatedAt:De.now()})).id}catch(e){throw console.error("Error creating appointment:",e),e}},updateAppointment:async(r,e)=>{try{const t=at(be,$c,r);await Vt(t,{...e,updatedAt:De.now()})}catch(t){throw console.error("Error updating appointment:",t),t}},deleteAppointment:async r=>{try{await sl(at(be,$c,r))}catch(e){throw console.error("Error deleting appointment:",e),e}},getAppointmentsByType:async r=>{try{const e=Xe(Ie(be,$c),ur("type","==",r),Et("date","desc"));return(await rt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("Error fetching appointments by type:",e),e}}},xf=({options:r,value:e,onChange:t,placeholder:s="Select an option...",label:l,className:c="",required:d=!1})=>{const[h,g]=k.useState(!1),[p,y]=k.useState(""),v=k.useRef(null),w=k.useRef(null),S=r.find(T=>T.id===e),C=r.filter(T=>T.name.toLowerCase().includes(p.toLowerCase()));k.useEffect(()=>{const T=V=>{v.current&&!v.current.contains(V.target)&&g(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]),k.useEffect(()=>{h&&w.current&&w.current.focus(),h||y("")},[h]);const F=T=>{t(T),g(!1)};return i.jsxs("div",{className:`relative ${c}`,ref:v,children:[l&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l}),i.jsxs("div",{onClick:()=>g(!h),className:`w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none cursor-pointer flex justify-between items-center ${h?"ring-2 ring-blue-500 border-transparent":""}`,children:[i.jsx("span",{className:S?"":"text-gray-500 dark:text-gray-400",children:S?S.name:s}),i.jsx("i",{className:`ri-arrow-down-s-line transition-transform ${h?"rotate-180":""}`})]}),h&&i.jsxs("div",{className:"absolute z-[60] mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[i.jsx("div",{className:"p-2 border-b border-gray-100 dark:border-gray-700",children:i.jsxs("div",{className:"relative",children:[i.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),i.jsx("input",{ref:w,type:"text",className:"w-full pl-9 pr-4 py-2 text-sm bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white",placeholder:"Search...",value:p,onChange:T=>y(T.target.value),autoFocus:!0})]})}),i.jsx("div",{className:"max-h-60 overflow-y-auto",children:C.length>0?C.map(T=>i.jsxs("div",{onClick:()=>F(T.id),className:`px-4 py-2 text-sm cursor-pointer transition-colors flex items-center justify-between ${T.id===e?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[i.jsx("span",{children:T.name}),T.id===e&&i.jsx("i",{className:"ri-check-line"})]},T.id)):i.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center italic",children:"No results found"})})]}),d&&!e&&i.jsx("input",{tabIndex:-1,autoComplete:"off",style:{opacity:0,height:0,width:0,position:"absolute"},required:!0,value:"",onChange:()=>{}})]})},ku=({value:r,onChange:e,onSelect:t,role:s,label:l="Select User",placeholder:c="Search surrogate or parent...",required:d=!1})=>{const[h,g]=k.useState([]),[p,y]=k.useState(!0);return k.useEffect(()=>{(async()=>{try{const w=Ie(be,"users"),C=Xe(w,ur("role","in",s?[s]:["Surrogate","Intended Parent"])),T=(await rt(C)).docs.map(V=>{const E=V.data();let B="";return E.formData&&(B=[E.formData.firstName,E.formData.lastName].filter(Boolean).join(" ")),!B&&E.parent1?.name&&(B=E.parent1.name),B||(B=[E.firstName,E.lastName].filter(Boolean).join(" ")),B||(B=E.email||"Unknown User"),{id:V.id,name:`${B} (${E.role})`,role:E.role}});g(T.sort((V,E)=>V.name.localeCompare(E.name)))}catch(w){console.error("Error fetching users for selector:",w)}finally{y(!1)}})()},[]),p?i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-2"}),i.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded-lg w-full"})]}):i.jsx(xf,{label:l,placeholder:c,options:h,value:r,onChange:v=>{if(e(v),t){const w=h.find(S=>S.id===v);w&&t(w)}},required:d})},HP=({options:r,value:e,onChange:t,placeholder:s="Select options...",label:l,className:c="",required:d=!1})=>{const[h,g]=k.useState(!1),[p,y]=k.useState(""),v=k.useRef(null),w=k.useRef(null),S=r.filter(V=>e.includes(V.id)),C=r.filter(V=>V.name.toLowerCase().includes(p.toLowerCase()));k.useEffect(()=>{const V=E=>{v.current&&!v.current.contains(E.target)&&g(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]),k.useEffect(()=>{h&&w.current&&w.current.focus()},[h]);const F=V=>{const E=e.includes(V)?e.filter(B=>B!==V):[...e,V];t(E)},T=(V,E)=>{E.stopPropagation(),t(e.filter(B=>B!==V))};return i.jsxs("div",{className:`relative ${c}`,ref:v,children:[l&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l}),i.jsxs("div",{onClick:()=>g(!h),className:`w-full min-h-[42px] px-3 py-1.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus-within:ring-2 focus-within:ring-blue-500 outline-none cursor-pointer flex flex-wrap gap-2 items-center ${h?"ring-2 ring-blue-500 border-transparent":""}`,children:[S.length>0?S.map(V=>i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 rounded-md text-sm border border-blue-200 dark:border-blue-800",children:[V.name,i.jsx("button",{type:"button",onClick:E=>T(V.id,E),className:"hover:text-blue-900 dark:hover:text-blue-100",children:i.jsx("i",{className:"ri-close-line"})})]},V.id)):i.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm ml-1",children:s}),i.jsx("div",{className:"flex-1 min-w-[50px]",children:h&&i.jsx("input",{ref:w,type:"text",className:"w-full bg-transparent border-none outline-none text-sm p-0 focus:ring-0",placeholder:"Search...",value:p,onChange:V=>y(V.target.value),onClick:V=>V.stopPropagation()})}),i.jsx("i",{className:`ri-arrow-down-s-line ml-auto text-gray-400 transition-transform ${h?"rotate-180":""}`})]}),h&&i.jsx("div",{className:"absolute z-[60] mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl overflow-hidden animate-in fade-in zoom-in duration-200",children:i.jsx("div",{className:"max-h-60 overflow-y-auto",children:C.length>0?C.map(V=>{const E=e.includes(V.id);return i.jsxs("div",{onClick:()=>F(V.id),className:`px-4 py-2.5 text-sm cursor-pointer transition-colors flex items-center justify-between ${E?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 font-medium":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[i.jsx("span",{children:V.name}),E&&i.jsx("i",{className:"ri-check-line"})]},V.id)}):i.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center italic",children:"No results found"})})}),d&&e.length===0&&i.jsx("input",{tabIndex:-1,autoComplete:"off",style:{opacity:0,height:0,width:0,position:"absolute"},required:!0,value:"",onChange:()=>{}})]})},DS=({value:r,onChange:e,role:t,label:s="Select Participants",placeholder:l="Search participants...",required:c=!1})=>{const[d,h]=k.useState([]),[g,p]=k.useState(!0);return k.useEffect(()=>{(async()=>{try{const v=Ie(be,"users"),S=Xe(v,ur("role","in",t?[t]:["Surrogate","Intended Parent"])),F=(await rt(S)).docs.map(T=>{const V=T.data();let E="";return V.formData&&(E=[V.formData.firstName,V.formData.lastName].filter(Boolean).join(" ")),!E&&V.parent1?.name&&(E=V.parent1.name),E||(E=[V.firstName,V.lastName].filter(Boolean).join(" ")),E||(E=V.email||"Unknown User"),{id:T.id,name:`${E} (${V.role})`,role:V.role}});h(F.sort((T,V)=>T.name.localeCompare(V.name)))}catch(v){console.error("Error fetching users for multi-selector:",v)}finally{p(!1)}})()},[t]),g?i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-2"}),i.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded-lg w-full"})]}):i.jsx(HP,{label:s,placeholder:l,options:d,value:r,onChange:e,required:c})},em=({isOpen:r,onClose:e,onSuccess:t,initialData:s={},userId:l})=>{const[c,d]=k.useState(!1),[h,g]=k.useState(!1),[p,y]=k.useState({title:"",type:"Screening",date:new Date().toISOString().split("T")[0],doctor:"",facility:"",summary:"",status:"Pending",sharedWithParents:!1,...s}),[v,w]=k.useState({name:"",dosage:"",frequency:"",startDate:new Date().toISOString().split("T")[0],status:"Active"}),S=async C=>{C.preventDefault(),d(!0);try{let F=p.id;const T={...p,userId:l};if(F)await Mn.updateRecord(F,T);else{const V=await Mn.createRecord(T)}if(h&&v.name){const V={...v,userId:l};await Mn.addMedication(V)}t&&t(),e()}catch(F){console.error("Error saving medical information:",F)}finally{d(!1)}};return r?i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[100] backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl animate-in fade-in zoom-in duration-200",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:p.id?"Edit Medical Record":"New Medical Record"}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer transition-colors",children:i.jsx("i",{className:"ri-close-line text-2xl text-gray-500"})})]}),i.jsxs("form",{onSubmit:S,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400 border-b border-blue-100 dark:border-blue-900 pb-2 flex items-center gap-2",children:[i.jsx("i",{className:"ri-file-list-3-line"})," Record Details"]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),i.jsx("input",{type:"text",placeholder:"e.g. Initial Screening",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:p.title||"",onChange:C=>y({...p,title:C.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),i.jsxs("select",{className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:p.type,onChange:C=>y({...p,type:C.target.value}),children:[i.jsx("option",{children:"Screening"}),i.jsx("option",{children:"Lab Result"}),i.jsx("option",{children:"Ultrasound"}),i.jsx("option",{children:"Vaccination"}),i.jsx("option",{children:"Examination"}),i.jsx("option",{children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date"}),i.jsx("input",{type:"date",required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:p.date||"",onChange:C=>y({...p,date:C.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Doctor"}),i.jsx("input",{type:"text",placeholder:"Enter physician name",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:p.doctor||"",onChange:C=>y({...p,doctor:C.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Facility"}),i.jsx("input",{type:"text",placeholder:"Medical center/Clinic",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:p.facility||"",onChange:C=>y({...p,facility:C.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Summary / Notes"}),i.jsx("textarea",{placeholder:"Additional details about the visit or findings...",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none",rows:3,value:p.summary||"",onChange:C=>y({...p,summary:C.target.value})})]}),i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[i.jsx("input",{type:"checkbox",id:"share-parents",className:"w-5 h-5 rounded text-blue-600 focus:ring-blue-500 cursor-pointer",checked:p.sharedWithParents,onChange:C=>y({...p,sharedWithParents:C.target.checked})}),i.jsxs("label",{htmlFor:"share-parents",className:"text-sm text-gray-700 dark:text-gray-300 cursor-pointer flex items-center gap-2",children:[i.jsx("i",{className:"ri-eye-line text-green-500"}),"Automatically share this record with parents"]})]})]}),i.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-gray-700",children:[i.jsxs("button",{type:"button",onClick:()=>g(!h),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors font-semibold ${h?"text-red-600 bg-red-50 dark:bg-red-900/20":"text-purple-600 bg-purple-50 dark:bg-purple-900/20"}`,children:[i.jsx("i",{className:h?"ri-subtract-line":"ri-add-line"}),h?"Remove Medication Block":"Add Medication to this Record"]}),h&&i.jsxs("div",{className:"mt-4 p-4 bg-purple-50/50 dark:bg-purple-900/10 border border-purple-100 dark:border-purple-900/30 rounded-xl space-y-4 animate-in slide-in-from-top-2 duration-300",children:[i.jsxs("h3",{className:"text-purple-700 dark:text-purple-400 font-bold flex items-center gap-2",children:[i.jsx("i",{className:"ri-capsule-line"})," New Medication"]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Medication Name"}),i.jsx("input",{type:"text",placeholder:"e.g. Prenatal Vitamins",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none",value:v.name||"",onChange:C=>w({...v,name:C.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Dosage"}),i.jsx("input",{type:"text",placeholder:"e.g. 500mg",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none",value:v.dosage||"",onChange:C=>w({...v,dosage:C.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Frequency"}),i.jsx("input",{type:"text",placeholder:"e.g. Once daily",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none",value:v.frequency||"",onChange:C=>w({...v,frequency:C.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-purple-500 outline-none",value:v.startDate||"",onChange:C=>w({...v,startDate:C.target.value})})]})]})]}),i.jsxs("div",{className:"flex gap-4 pt-4",children:[i.jsx(fe,{type:"button",variant:"outline",className:"flex-1 py-3 text-lg",onClick:e,children:"Cancel"}),i.jsx(fe,{type:"submit",color:"blue",className:"flex-1 py-3 text-lg shadow-lg shadow-blue-500/30",disabled:c,children:c?i.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[i.jsx("i",{className:"ri-loader-4-line animate-spin"})," Saving..."]}):"Save Records"})]})]})]})})}):null},SN=[{id:"all",label:"All Appointments"},{id:"consultation",label:"Consultations"},{id:"medical",label:"Medical"},{id:"legal",label:"Legal"},{id:"psychological",label:"Psychological"}],$P=()=>{const[r,e]=k.useState("all"),[t,s]=k.useState(null),[l,c]=k.useState("list"),[d,h]=k.useState([]),[g,p]=k.useState(!0),[y,v]=k.useState(null),[w,S]=k.useState(new Date),[C,F]=k.useState(!1),[T,V]=k.useState(!1),[E,B]=k.useState(!1),[Y,W]=k.useState({title:"",type:"consultation",date:"",time:"",duration:"",participants:[],location:"",status:"scheduled",notes:"",userId:""}),[$,I]=k.useState({}),L=async()=>{p(!0);try{const D=await ri.getAllAppointments();h(Array.isArray(D)?D:[]),v(null)}catch(D){console.error(D),v("Failed to load appointments"),h([])}finally{p(!1)}};k.useEffect(()=>{L()},[]);const j=async D=>{const Q={};for(const ae of D)if(!$[ae])try{const ge=await oi(at(be,"users",ae));if(ge.exists()){const G=ge.data();let ce="";G.formData&&(ce=[G.formData.firstName,G.formData.lastName].filter(Boolean).join(" ")),!ce&&G.parent1?.name&&(ce=G.parent1.name),ce||(ce=[G.firstName,G.lastName].filter(Boolean).join(" ")),ce||(ce=G.email||"Unknown User"),Q[ae]=`${ce} (${G.role||"User"})`}else Q[ae]="Unknown User"}catch(ge){console.error("Error fetching participant name:",ge)}I(ae=>({...ae,...Q}))};k.useEffect(()=>{t?.participants&&j(t.participants)},[t]);const A=k.useMemo(()=>Array.isArray(d)?r==="all"?d:d.filter(D=>D.type===r):[],[d,r]),P=D=>{switch(D?D.toLowerCase():"unknown"){case"confirmed":return i.jsx(_e,{color:"green",children:"Confirmed"});case"pending":return i.jsx(_e,{color:"yellow",children:"Pending"});case"scheduled":return i.jsx(_e,{color:"blue",children:"Scheduled"});case"completed":return i.jsx(_e,{color:"gray",children:"Completed"});case"cancelled":return i.jsx(_e,{color:"red",children:"Cancelled"});default:return i.jsx(_e,{children:D||"Unknown"})}},M=D=>{switch(D?D.toLowerCase():"other"){case"consultation":return"ri-discuss-line";case"medical":return"ri-health-book-line";case"legal":return"ri-file-text-line";case"psychological":return"ri-mind-map";default:return"ri-calendar-line"}},z=D=>{switch(D?D.toLowerCase():"other"){case"consultation":return"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400";case"medical":return"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400";case"legal":return"bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-400";case"psychological":return"bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}},me=D=>{S(Q=>{const ae=new Date(Q);return D==="prev"?ae.setMonth(Q.getMonth()-1):ae.setMonth(Q.getMonth()+1),ae})},Oe=D=>{const Q=D.getFullYear(),ae=D.getMonth(),ge=new Date(Q,ae,1),ce=new Date(Q,ae+1,0).getDate(),xe=ge.getDay(),Te=[];for(let Se=0;Se<xe;Se++)Te.push(null);for(let Se=1;Se<=ce;Se++)Te.push(Se);return Te},H=()=>{B(!1),W({title:"",type:"consultation",date:new Date().toISOString().split("T")[0],time:"09:00",duration:"60 min",participants:[],location:"",status:"scheduled",notes:"",userId:""}),F(!0)},U=D=>{B(!0),W(D),F(!0),s(null)},re=async D=>{D.preventDefault(),p(!0);try{const Q=Y;E&&Q.id?await ri.updateAppointment(Q.id,Q):await ri.createAppointment(Q),await L(),F(!1)}catch(Q){console.error(Q),v("Failed to save appointment")}finally{p(!1)}},le=async D=>{if(window.confirm("Are you sure you want to delete this appointment?")){p(!0);try{await ri.deleteAppointment(D),await L(),s(null)}catch{v("Failed to delete appointment")}finally{p(!1)}}},pe=D=>Array.isArray(D.participants)?D.participants.length:0;return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Appointments"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage all appointments and scheduling."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[i.jsxs("button",{onClick:()=>c("list"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors cursor-pointer ${l==="list"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400"}`,children:[i.jsx("i",{className:"ri-list-unordered mr-1"}),"List"]}),i.jsxs("button",{onClick:()=>c("calendar"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors cursor-pointer ${l==="calendar"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400"}`,children:[i.jsx("i",{className:"ri-calendar-line mr-1"}),"Calendar"]})]}),i.jsxs(fe,{color:"blue",onClick:H,children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Appointment"]})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:SN.map(D=>i.jsxs("button",{onClick:()=>e(D.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${r===D.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[D.label," (",D.id==="all"?d.length:d.filter(Q=>Q.type===D.id).length,")"]},D.id))})}),y&&i.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:y}),g&&!C?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):l==="list"?i.jsx("div",{className:"space-y-4",children:A.length===0?i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("i",{className:"ri-calendar-event-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No appointments found."})]}):A.map(D=>i.jsx(we,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(D),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${z(D.type)}`,children:i.jsx("i",{className:`${M(D.type)} text-lg`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:D.title}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[D.date," at ",D.time,"  ",D.duration]}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:D.location})]})]}),i.jsxs("div",{className:"text-right",children:[P(D.status),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[pe(D)," participants"]})]})]})},D.id))}):i.jsx(we,{children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize",children:[w.toLocaleString("default",{month:"long"})," ",w.getFullYear()]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",onClick:()=>me("prev"),children:i.jsx("i",{className:"ri-arrow-left-line text-gray-600 dark:text-gray-400"})}),i.jsx("button",{onClick:()=>S(new Date),className:"px-3 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900 rounded-lg cursor-pointer",children:"Today"}),i.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",onClick:()=>me("next"),children:i.jsx("i",{className:"ri-arrow-right-line text-gray-600 dark:text-gray-400"})})]})]}),i.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(D=>i.jsx("div",{className:"p-4 text-center font-semibold text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0",children:D},D))}),i.jsx("div",{className:"grid grid-cols-7",children:Oe(w).map((Q,ae)=>{if(!Q)return i.jsx("div",{className:"min-h-[120px] p-2 border-r border-b border-gray-200 dark:border-gray-700 last:border-r-0 bg-gray-50/50 dark:bg-gray-800/50"},`empty-${ae}`);const ge=String(w.getMonth()+1).padStart(2,"0"),G=String(Q).padStart(2,"0"),ce=`${w.getFullYear()}-${ge}-${G}`,xe=d.filter(Se=>Se.date===ce),Te=Q===new Date().getDate()&&w.getMonth()===new Date().getMonth()&&w.getFullYear()===new Date().getFullYear();return i.jsxs("div",{className:"min-h-[120px] p-2 border-r border-b border-gray-200 dark:border-gray-700 last:border-r-0 relative hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[i.jsx("div",{className:`font-semibold mb-2 w-7 h-7 flex items-center justify-center rounded-full ${Te?"bg-blue-600 text-white":"text-gray-900 dark:text-white"}`,children:Q}),i.jsx("div",{className:"space-y-1",children:xe.map(Se=>{let He="bg-gray-500";const Ge=Se.type?Se.type.toLowerCase():"";return Ge==="consultation"?He="bg-blue-500":Ge==="medical"?He="bg-green-500":Ge==="legal"?He="bg-purple-500":Ge==="psychological"&&(He="bg-orange-500"),i.jsxs("div",{onClick:()=>s(Se),className:`text-xs p-1 rounded cursor-pointer text-white truncate ${He} hover:opacity-80 shadow-sm`,title:`${Se.time} - ${Se.title}`,children:[i.jsx("span",{className:"font-bold mr-1",children:Se.time}),Se.title]},Se.id)})})]},Q)})})]})}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Appointment Details"}),i.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-16 h-16 rounded-xl flex items-center justify-center ${z(t.type)}`,children:i.jsx("i",{className:`${M(t.type)} text-3xl`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t.title}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono mt-1",children:["ID: ",t.id]}),i.jsx("div",{className:"mt-2",children:P(t.status)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-gray-50 dark:bg-gray-700/50 p-6 rounded-xl",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"ri-time-line text-blue-500"})," Schedule"]}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Date:"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.date})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Time:"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.time})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Duration:"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.duration})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Location:"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.location})]})]})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx("i",{className:"ri-group-line text-purple-500"})," Participants"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:t.participants&&Array.isArray(t.participants)&&t.participants.length>0?t.participants.map((D,Q)=>i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full border border-blue-100 dark:border-blue-800 shadow-sm",children:[i.jsx("i",{className:"ri-user-line text-xs"}),i.jsx("span",{className:"text-sm font-medium",children:$[D]||"Loading..."})]},Q)):i.jsx("span",{className:"text-gray-500 text-sm italic",children:"No participants listed"})})]})]}),t.notes&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Notes"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-100 dark:border-yellow-900/30 p-4 rounded-xl text-sm leading-relaxed",children:t.notes})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsxs(fe,{color:"blue",className:"flex-1",onClick:()=>U(t),children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",children:[i.jsx("i",{className:"ri-calendar-line mr-2"}),"Reschedule"]}),i.jsxs(fe,{color:"red",variant:"outline",className:"flex-1",onClick:()=>t.id&&le(t.id),children:[i.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Delete"]})]})]})]})})}),C&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:i.jsxs("form",{onSubmit:re,className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:E?"Edit Appointment":"New Appointment"}),i.jsx("button",{type:"button",onClick:()=>F(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),i.jsx("input",{type:"text",required:!0,value:Y.title,onChange:D=>W({...Y,title:D.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Initial Consultation"})]}),i.jsx(ku,{value:Y.userId||"",onChange:D=>W({...Y,userId:D}),label:"Associated User (Surrogate/Parent)"}),i.jsx("div",{className:"pt-1",children:i.jsxs("button",{type:"button",onClick:()=>V(!0),className:"w-full py-2 px-4 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600 text-gray-500 hover:border-blue-500 hover:text-blue-500 transition-all flex items-center justify-center gap-2",children:[i.jsx("i",{className:"ri-health-book-line"}),"New Medical Record"]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date"}),i.jsx("input",{type:"date",required:!0,value:Y.date,onChange:D=>W({...Y,date:D.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time"}),i.jsx("input",{type:"time",required:!0,value:Y.time,onChange:D=>W({...Y,time:D.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Duration"}),i.jsx("input",{type:"text",value:Y.duration,onChange:D=>W({...Y,duration:D.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. 60 min"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type"}),i.jsx("select",{value:Y.type,onChange:D=>W({...Y,type:D.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:SN.filter(D=>D.id!=="all").map(D=>i.jsx("option",{value:D.id,children:D.label},D.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),i.jsx("input",{type:"text",value:Y.location,onChange:D=>W({...Y,location:D.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Clinic Room 1"})]}),i.jsx("div",{children:i.jsx(DS,{value:Y.participants||[],onChange:D=>W({...Y,participants:D}),label:"Participants",placeholder:"Search and add participants..."})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),i.jsxs("select",{value:Y.status||"",onChange:D=>W({...Y,status:D.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:[i.jsx("option",{value:"scheduled",children:"Scheduled"}),i.jsx("option",{value:"confirmed",children:"Confirmed"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),i.jsx("textarea",{value:Y.notes||"",onChange:D=>W({...Y,notes:D.target.value}),rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Add any detailed notes..."})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx(fe,{type:"button",variant:"outline",className:"flex-1",onClick:()=>F(!1),children:"Cancel"}),i.jsx(fe,{type:"submit",color:"blue",className:"flex-1",disabled:g,children:g?"Saving...":"Save Appointment"})]})]})})}),i.jsx(em,{isOpen:T,onClose:()=>V(!1)})]})]})]})},GP=()=>{const[r,e]=k.useState("6months"),[t,s]=k.useState("overview"),[l,c]=k.useState({totalMatches:0,activeJourneys:0,successfulBirths:0,totalRevenue:0}),[d,h]=k.useState(!0),g=[{id:"overview",label:"Overview",icon:"ri-dashboard-line"},{id:"financial",label:"Financial",icon:"ri-money-dollar-circle-line"},{id:"medical",label:"Medical",icon:"ri-health-book-line"},{id:"performance",label:"Performance",icon:"ri-bar-chart-line"}],p=[{id:"1month",label:"Last Month"},{id:"3months",label:"Last 3 Months"},{id:"6months",label:"Last 6 Months"},{id:"1year",label:"Last Year"}];k.useEffect(()=>{y()},[]);const y=async()=>{h(!0);try{const[w,S]=await Promise.all([rt(Ie(be,"cases")),rt(Ie(be,"invoices"))]),C=w.size,F=w.docs.filter(E=>E.data().currentStage!=="Completed").length,T=w.docs.filter(E=>E.data().currentStage==="Completed").length,V=S.docs.reduce((E,B)=>E+(B.data().amount||0),0);c({totalMatches:C,activeJourneys:F,successfulBirths:T,totalRevenue:V})}catch(w){console.error("Error fetching stats:",w)}finally{h(!1)}},v=[{id:"total-matches",title:"Total Matches",value:l.totalMatches.toString(),icon:"ri-links-line",color:"blue"},{id:"active-journeys",title:"Active Journeys",value:l.activeJourneys.toString(),icon:"ri-road-map-line",color:"green"},{id:"successful-births",title:"Successful Births",value:l.successfulBirths.toString(),icon:"ri-heart-3-line",color:"pink"},{id:"total-revenue",title:"Total Revenue",value:`$${(l.totalRevenue/1e3).toFixed(1)}K`,icon:"ri-money-dollar-circle-line",color:"purple"}];return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Reports & Analytics"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Comprehensive insights into your surrogacy program performance."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("select",{value:r,onChange:w=>e(w.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white pr-8",children:p.map(w=>i.jsx("option",{value:w.id,children:w.label},w.id))}),i.jsxs(fe,{color:"blue",children:[i.jsx("i",{className:"ri-download-line mr-2"}),"Export Report"]})]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:g.map(w=>i.jsxs("button",{onClick:()=>s(w.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer flex items-center gap-2 ${t===w.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[i.jsx("i",{className:w.icon}),w.label]},w.id))})}),t==="overview"&&i.jsx("div",{className:"space-y-6",children:d?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:v.map(w=>i.jsx(we,{className:"hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:w.title}),i.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:w.value})]}),i.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${w.color==="blue"?"bg-blue-100 dark:bg-blue-900":w.color==="green"?"bg-green-100 dark:bg-green-900":w.color==="pink"?"bg-pink-100 dark:bg-pink-900":"bg-purple-100 dark:bg-purple-900"}`,children:i.jsx("i",{className:`${w.icon} text-xl ${w.color==="blue"?"text-blue-600 dark:text-blue-400":w.color==="green"?"text-green-600 dark:text-green-400":w.color==="pink"?"text-pink-600 dark:text-pink-400":"text-purple-600 dark:text-purple-400"}`})})]})},w.id))})}),t==="financial"&&i.jsx(we,{children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"ri-money-dollar-circle-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Financial Reports"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Detailed financial analytics including revenue, expenses, and profit margins."}),i.jsxs(fe,{color:"blue",children:[i.jsx("i",{className:"ri-file-chart-line mr-2"}),"Generate Financial Report"]})]})})}),t==="medical"&&i.jsx(we,{children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"ri-health-book-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Medical Reports"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Medical outcomes, success rates, and health statistics."}),i.jsxs(fe,{color:"blue",children:[i.jsx("i",{className:"ri-file-chart-line mr-2"}),"Generate Medical Report"]})]})})}),t==="performance"&&i.jsx(we,{children:i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"ri-bar-chart-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Performance Reports"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Team performance metrics, efficiency ratings, and productivity analysis."}),i.jsxs(fe,{color:"blue",children:[i.jsx("i",{className:"ri-file-chart-line mr-2"}),"Generate Performance Report"]})]})})})]})]})]})},KP=()=>{const{user:r,profile:e,profileLoading:t}=Zf(),[s,l]=k.useState("general"),[c,d]=k.useState(null),[h,g]=k.useState({siteName:"Family Matters",adminEmail:"admin@familymatters.com",timezone:"UTC-5",language:"English",notifications:{email:!0,sms:!0,push:!0,newRequests:!0,appointments:!0,payments:!1},security:{twoFactor:!1,sessionTimeout:"30",passwordExpiry:"90"},matching:{autoMatch:!1,requireApproval:!0,maxMatches:"3"}});k.useEffect(()=>{e&&typeof e=="object"&&e.email&&g(W=>W.adminEmail===e.email?W:{...W,adminEmail:e.email})},[e]);const p=k.useMemo(()=>{if(r?.displayName&&r.displayName.trim().length>0)return r.displayName;if(r?.email){const[W]=r.email.split("@");return W.charAt(0).toUpperCase()+W.slice(1)}return"Administrator"},[r]),y=(e&&typeof e=="object"&&e.email)??r?.email??h.adminEmail,v=k.useMemo(()=>{const $=(p||y||"FM").split(" ").filter(Boolean).map(I=>I[0]?.toUpperCase()??"").join("").slice(0,2);return $.length>0?$:"FM"},[p,y]),w=k.useMemo(()=>r?.metadata?.creationTime?new Date(r.metadata.creationTime).toLocaleDateString():null,[r]),S=k.useMemo(()=>r?.metadata?.lastSignInTime?new Date(r.metadata.lastSignInTime).toLocaleString():null,[r]),C=k.useMemo(()=>r?.providerData?.length?r.providerData.map(W=>{switch(W.providerId){case"password":return"Email & Password";case"google.com":return"Google";case"facebook.com":return"Facebook";case"apple.com":return"Apple";default:return W.providerId}}).join(", "):"Email & Password",[r]),F=[{id:"general",label:"General",icon:"ri-settings-3-line"},{id:"notifications",label:"Notifications",icon:"ri-notification-3-line"},{id:"security",label:"Security",icon:"ri-shield-check-line"},{id:"matching",label:"Matching Rules",icon:"ri-links-line"},{id:"billing",label:"Billing",icon:"ri-money-dollar-circle-line"},{id:"integrations",label:"Integrations",icon:"ri-plug-line"}],T=(W,$,I)=>{g(L=>({...L,[W]:{...L[W],[$]:I}}))},V=()=>i.jsxs("div",{className:"space-y-8",children:[t?i.jsxs("div",{className:"animate-pulse space-y-4",children:[i.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),i.jsx("div",{className:"h-48 bg-gray-100 dark:bg-gray-800 rounded"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsx(Ut,{title:"Profile Overview",data:{Name:p,Email:y,Role:e?.role??"","Profile Completed":e?.profileCompleted,"Form 2 Completed":e?.form2Completed,"Created At":e?.createdAt,"Updated At":e?.updatedAt}}),i.jsx(Ut,{title:"Form 1 Responses",data:e?.formData??null,emptyMessage:"No form data available."}),i.jsx(Ut,{title:"Form 2 Responses",data:e?.form2Data??null,emptyMessage:"Form 2 has not been completed yet."}),i.jsx(Ut,{title:"Fertility Information",data:e?.form2Data?.fertility??null,emptyMessage:"No fertility information provided."}),i.jsx(Ut,{title:"Parent 1",data:e?.parent1??null,emptyMessage:"Parent 1 details not provided."}),i.jsx(Ut,{title:"Parent 2",data:e?.parent2??null,emptyMessage:"Parent 2 details not provided."}),i.jsx(Ut,{title:"Surrogate Related Preferences",data:e?.surrogateRelated??null,emptyMessage:"No surrogate preferences provided."})]}),i.jsxs("div",{className:"space-y-6 border-t border-gray-200 dark:border-gray-700 pt-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Site Name"}),i.jsx("input",{type:"text",value:h.siteName,onChange:W=>g($=>({...$,siteName:W.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Email"}),i.jsx("input",{type:"email",value:h.adminEmail,onChange:W=>g($=>({...$,adminEmail:W.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Timezone"}),i.jsxs("select",{value:h.timezone,onChange:W=>g($=>({...$,timezone:W.target.value})),className:"w-full px-3 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"UTC-5",children:"Eastern Time (UTC-5)"}),i.jsx("option",{value:"UTC-6",children:"Central Time (UTC-6)"}),i.jsx("option",{value:"UTC-7",children:"Mountain Time (UTC-7)"}),i.jsx("option",{value:"UTC-8",children:"Pacific Time (UTC-8)"})]})]})]})]}),E=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Notification Channels"}),i.jsx("div",{className:"space-y-4",children:Object.entries(h.notifications).slice(0,3).map(([W,$])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-gray-700 dark:text-gray-300 capitalize",children:[W," Notifications"]}),i.jsx("button",{onClick:()=>T("notifications",W,!$),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${$?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${$?"translate-x-6":"translate-x-1"}`})})]},W))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Event Notifications"}),i.jsx("div",{className:"space-y-4",children:Object.entries(h.notifications).slice(3).map(([W,$])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700 dark:text-gray-300 capitalize",children:W.replace(/([A-Z])/g," $1")}),i.jsx("button",{onClick:()=>T("notifications",W,!$),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${$?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${$?"translate-x-6":"translate-x-1"}`})})]},W))})]})]}),B=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Two-Factor Authentication"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add an extra layer of security to your account"})]}),i.jsx("button",{onClick:()=>T("security","twoFactor",!h.security.twoFactor),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${h.security.twoFactor?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${h.security.twoFactor?"translate-x-6":"translate-x-1"}`})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Session Timeout (minutes)"}),i.jsxs("select",{value:h.security.sessionTimeout,onChange:W=>T("security","sessionTimeout",W.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"15",children:"15 minutes"}),i.jsx("option",{value:"30",children:"30 minutes"}),i.jsx("option",{value:"60",children:"1 hour"}),i.jsx("option",{value:"120",children:"2 hours"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password Expiry (days)"}),i.jsxs("select",{value:h.security.passwordExpiry,onChange:W=>T("security","passwordExpiry",W.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"30",children:"30 days"}),i.jsx("option",{value:"60",children:"60 days"}),i.jsx("option",{value:"90",children:"90 days"}),i.jsx("option",{value:"never",children:"Never"})]})]})]}),Y=()=>{switch(s){case"general":return V();case"notifications":return E();case"security":return B();case"matching":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Auto-Matching"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Automatically suggest matches based on criteria"})]}),i.jsx("button",{onClick:()=>T("matching","autoMatch",!h.matching.autoMatch),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${h.matching.autoMatch?"bg-blue-600":"bg-gray-200 dark:bg-gray-600"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${h.matching.autoMatch?"translate-x-6":"translate-x-1"}`})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Maximum Active Matches per Surrogate"}),i.jsxs("select",{value:h.matching.maxMatches,onChange:W=>T("matching","maxMatches",W.target.value),className:"w-full px-3 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[i.jsx("option",{value:"1",children:"1 Match"}),i.jsx("option",{value:"2",children:"2 Matches"}),i.jsx("option",{value:"3",children:"3 Matches"}),i.jsx("option",{value:"5",children:"5 Matches"})]})]})]});case"billing":return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"ri-money-dollar-circle-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Billing Settings"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Configure payment methods and billing preferences"}),i.jsxs(fe,{color:"blue",children:[i.jsx("i",{className:"ri-add-line mr-2"}),"Add Payment Method"]})]})});case"integrations":return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(we,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:i.jsx("i",{className:"ri-mail-line text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Email Service"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"SMTP configuration"})]})]}),i.jsx(fe,{variant:"outline",children:"Configure"})]})}),i.jsx(we,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center",children:i.jsx("i",{className:"ri-phone-line text-green-600 dark:text-green-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"SMS Service"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Twilio integration"})]})]}),i.jsx(fe,{variant:"outline",children:"Configure"})]})})]})});default:return null}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),c&&i.jsx(Ax,{message:c.message,type:c.type,onClose:()=>d(null)}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Settings"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your application preferences and configurations."})]}),i.jsx(we,{className:"mb-8",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-14 h-14 rounded-full bg-blue-600 text-white flex items-center justify-center text-xl font-semibold",children:v}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t?"Loading...":p}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t?"Loading account...":y})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full md:w-auto",children:[w&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 tracking-wide",children:"Member Since"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:w})]}),S&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 tracking-wide",children:"Last Sign-in"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:S})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs uppercase text-gray-500 dark:text-gray-400 tracking-wide",children:"Auth Provider"}),i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C})]})]})]})}),i.jsxs("div",{className:"flex gap-6",children:[i.jsx("div",{className:"w-64 flex-shrink-0",children:i.jsx(we,{children:i.jsx("nav",{className:"space-y-1",children:F.map(W=>i.jsxs("button",{onClick:()=>l(W.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors cursor-pointer ${s===W.id?"bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[i.jsx("i",{className:`${W.icon} text-lg`}),i.jsx("span",{className:"font-medium",children:W.label})]},W.id))})})}),i.jsx("div",{className:"flex-1",children:i.jsxs(we,{children:[i.jsx("div",{className:"mb-6",children:i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:F.find(W=>W.id===s)?.label})}),Y(),i.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(fe,{color:"blue",children:[i.jsx("i",{className:"ri-save-line mr-2"}),"Save Changes"]}),i.jsxs(fe,{variant:"outline",children:[i.jsx("i",{className:"ri-refresh-line mr-2"}),"Reset to Default"]})]})})]})})]})]})]})]})},YP=()=>{const[r,e]=k.useState(new Date),[t,s]=k.useState("month"),[l,c]=k.useState(null),[d,h]=k.useState(!1),[g,p]=k.useState([]),[y,v]=k.useState(!0),[w,S]=k.useState(!1),[C,F]=k.useState({}),[T,V]=k.useState({title:"",type:"consultation",date:new Date().toISOString().split("T")[0],time:"09:00",duration:"60 min",participants:[],location:"Clinic",status:"scheduled",notes:"",userId:""}),E=async()=>{v(!0);try{const H=await ri.getAllAppointments();p(Array.isArray(H)?H:[])}catch(H){console.error("Failed to load events",H),p([])}finally{v(!1)}};k.useEffect(()=>{E()},[]);const B=["January","February","March","April","May","June","July","August","September","October","November","December"],Y=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],W=H=>{const U=H.getFullYear(),re=H.getMonth(),le=new Date(U,re,1),D=new Date(U,re+1,0).getDate(),Q=le.getDay(),ae=[];for(let ge=0;ge<Q;ge++)ae.push(null);for(let ge=1;ge<=D;ge++)ae.push(ge);return ae},$=H=>{const U=r.getFullYear(),re=String(r.getMonth()+1).padStart(2,"0"),le=String(H).padStart(2,"0"),pe=`${U}-${re}-${le}`;return g.filter(D=>D.date===pe)},I=H=>{switch(H){case"consultation":return"bg-blue-500";case"medical":return"bg-green-500";case"legal":return"bg-purple-500";case"psychological":return"bg-orange-500";default:return"bg-gray-500"}},L=H=>{switch(H){case"confirmed":return i.jsx(_e,{color:"green",children:"Confirmed"});case"pending":return i.jsx(_e,{color:"yellow",children:"Pending"});case"scheduled":return i.jsx(_e,{color:"blue",children:"Scheduled"});case"completed":return i.jsx(_e,{color:"gray",children:"Completed"});default:return i.jsx(_e,{children:H})}},j=H=>{e(U=>{const re=new Date(U);return H==="prev"?re.setMonth(U.getMonth()-1):re.setMonth(U.getMonth()+1),re})},A=async()=>{try{T.id?await ri.updateAppointment(T.id,T):await ri.createAppointment(T),await E(),h(!1),V({title:"",type:"consultation",date:new Date().toISOString().split("T")[0],time:"09:00",duration:"60 min",participants:[],location:"Clinic",status:"scheduled",notes:"",userId:""})}catch(H){console.error("Failed to save event",H)}},P=()=>{l&&(V({...l,date:l.date,time:l.time}),h(!0),c(null))},M=async H=>{if(confirm("Are you sure you want to delete this event?"))try{await ri.deleteAppointment(H),await E(),c(null)}catch(U){console.error("Failed to delete event",U)}},z=async H=>{const U={};for(const re of H){if(C[re]){U[re]=C[re];continue}try{const le=await oi(at(be,"users",re));if(le.exists()){const pe=le.data();let D="";pe.formData&&(D=[pe.formData.firstName,pe.formData.lastName].filter(Boolean).join(" ")),!D&&pe.parent1?.name&&(D=pe.parent1.name),D||(D=[pe.firstName,pe.lastName].filter(Boolean).join(" ")),D||(D=pe.email||"Unknown User"),U[re]=`${D} (${pe.role||"User"})`}else U[re]=re}catch(le){console.error("Error fetching user name:",le),U[re]=re}}F(re=>({...re,...U}))};k.useEffect(()=>{l?.participants&&Array.isArray(l.participants)&&z(l.participants)},[l]);const me=()=>{const H=W(r);return i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700",children:Y.map(U=>i.jsx("div",{className:"p-4 text-center font-semibold text-gray-700 dark:text-gray-300 border-r border-gray-200 dark:border-gray-700 last:border-r-0",children:U},U))}),i.jsx("div",{className:"grid grid-cols-7",children:H.map((U,re)=>i.jsx("div",{className:"min-h-[120px] p-2 border-r border-b border-gray-200 dark:border-gray-700 last:border-r-0 relative hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:U&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`font-semibold mb-2 ${U===new Date().getDate()&&r.getMonth()===new Date().getMonth()&&r.getFullYear()===new Date().getFullYear()?"bg-blue-600 text-white w-7 h-7 rounded-full flex items-center justify-center":"text-gray-900 dark:text-white"}`,children:U}),i.jsx("div",{className:"space-y-1",children:$(U).map(le=>i.jsxs("div",{onClick:()=>c(le),className:`text-xs p-1 rounded cursor-pointer text-white ${I(le.type)} hover:opacity-80 shadow-sm truncate`,children:[i.jsx("span",{className:"font-bold mr-1",children:le.time}),le.title]},le.id))})]})},re))})]})},Oe=()=>i.jsxs(we,{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Upcoming Events"}),i.jsxs("div",{className:"space-y-3",children:[g.slice(0,5).map(H=>i.jsxs("div",{onClick:()=>c(H),className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${I(H.type)}`}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-gray-900 dark:text-white line-clamp-1",children:H.title}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[H.date," at ",H.time]})]}),L(H.status)]},H.id)),g.length===0&&i.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming events"})]})]});return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Calendar"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage appointments and schedule events."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:["month","week","day"].map(H=>i.jsx("button",{onClick:()=>s(H),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors cursor-pointer capitalize ${t===H?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400"}`,children:H},H))}),i.jsxs(fe,{color:"blue",onClick:()=>{V({title:"",type:"consultation",date:new Date().toISOString().split("T")[0],time:"09:00",duration:"60 min",participants:[],location:"Clinic",status:"scheduled",notes:"",userId:""}),h(!0)},children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Event"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"lg:col-span-3",children:i.jsxs(we,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[B[r.getMonth()]," ",r.getFullYear()]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>j("prev"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-arrow-left-line text-gray-600 dark:text-gray-400"})}),i.jsx("button",{onClick:()=>e(new Date),className:"px-3 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900 rounded-lg cursor-pointer",children:"Today"}),i.jsx("button",{onClick:()=>j("next"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-arrow-right-line text-gray-600 dark:text-gray-400"})})]})]}),t==="month"&&me(),t==="week"&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"ri-calendar-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Week View"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Week view coming soon"})]}),t==="day"&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"ri-calendar-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Day View"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Day view coming soon"})]})]})}),i.jsxs("div",{className:"space-y-6",children:[Oe(),i.jsxs(we,{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Event Types"}),i.jsx("div",{className:"space-y-2",children:[{type:"consultation",label:"Consultations",color:"bg-blue-500"},{type:"medical",label:"Medical",color:"bg-green-500"},{type:"legal",label:"Legal",color:"bg-purple-500"},{type:"psychological",label:"Psychological",color:"bg-orange-500"}].map(H=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${H.color}`}),i.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:H.label})]},H.type))})]})]})]}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-lg w-full shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Event Details"}),i.jsx("button",{onClick:()=>c(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:l.title}),i.jsx("div",{className:"mt-2",children:L(l.status)})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Date:"}),i.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.date})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Time:"}),i.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.time})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Duration:"}),i.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.duration})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),i.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.location})]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Participants:"}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-sm",children:l.participants&&Array.isArray(l.participants)&&l.participants.length>0?l.participants.map((H,U)=>i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full border border-blue-100 dark:border-blue-800 shadow-sm",children:[i.jsx("i",{className:"ri-user-line text-xs"}),i.jsx("span",{className:"font-medium",children:C[H]||"Loading..."})]},U)):i.jsx("span",{className:"text-gray-500 italic text-sm",children:"No participants"})})]}),l.notes&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Notes:"}),i.jsx("div",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg border border-gray-100 dark:border-gray-600",children:l.notes})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsxs(fe,{color:"blue",className:"flex-1",onClick:P,children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit"]}),i.jsxs(fe,{variant:"outline",className:"flex-1",color:"red",onClick:()=>l.id&&M(l.id),children:[i.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Delete"]})]})]})]})})}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-lg w-full shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:T.id?"Edit Event":"New Event"}),i.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event Title"}),i.jsx("input",{type:"text",value:T.title||"",onChange:H=>V({...T,title:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white outline-none",placeholder:"Enter event title"})]}),i.jsx(ku,{value:T.userId||"",onChange:H=>V({...T,userId:H}),onSelect:H=>{V(U=>({...U,userId:H.id,participants:[H.id]}))},label:"Associated User (Surrogate/Parent)"}),i.jsx("div",{className:"pt-2",children:i.jsxs(fe,{type:"button",variant:"outline",className:"w-full border-dashed border-2 hover:border-blue-500 hover:text-blue-500 transition-all py-3 flex items-center justify-center gap-2",onClick:()=>S(!0),children:[i.jsx("i",{className:"ri-health-book-line"}),"Add New Medical Record for this Event"]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date"}),i.jsx("input",{type:"date",value:T.date,onChange:H=>V({...T,date:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time"}),i.jsx("input",{type:"time",value:T.time,onChange:H=>V({...T,time:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white outline-none"})]})]}),i.jsx("div",{children:i.jsx(DS,{value:T.participants||[],onChange:H=>V({...T,participants:H}),label:"Participants",placeholder:"Search and add participants..."})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event Type"}),i.jsxs("select",{value:T.type,onChange:H=>V({...T,type:H.target.value}),className:"w-full px-3 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white outline-none",children:[i.jsx("option",{value:"consultation",children:"Consultation"}),i.jsx("option",{value:"medical",children:"Medical"}),i.jsx("option",{value:"legal",children:"Legal"}),i.jsx("option",{value:"psychological",children:"Psychological"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes"}),i.jsx("textarea",{value:T.notes||"",onChange:H=>V({...T,notes:H.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white outline-none resize-none",placeholder:"Add any additional notes here...",rows:3})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsxs(fe,{color:"blue",className:"flex-1",onClick:A,children:[i.jsx("i",{className:"ri-save-line mr-2"}),T.id?"Update Event":"Create Event"]}),i.jsx(fe,{variant:"outline",className:"flex-1",onClick:()=>h(!1),children:"Cancel"})]})]})]})})}),i.jsx(em,{isOpen:w,onClose:()=>S(!1),userId:T.userId})]})]})]})},QP=()=>{const[r,e]=k.useState("all"),[t,s]=k.useState(null),[l,c]=k.useState(!1),[d,h]=k.useState([]),[g,p]=k.useState(!0),[y,v]=k.useState(!1),w={surrogateId:"",surrogateName:"",parentId:"",parentName:"",amount:0,type:"Base Compensation",category:"Withdrawn",status:"Scheduled",dueDate:new Date().toISOString().split("T")[0],description:"",notes:""},[S,C]=k.useState(w),F=async()=>{p(!0);try{const $=await tu.getAllPayments();h($)}catch($){console.error("Error fetching payments:",$)}finally{p(!1)}};k.useEffect(()=>{F()},[]);const T={totalPaid:d.filter($=>$.status==="Paid").reduce(($,I)=>$+Number(I.amount),0),pending:d.filter($=>$.status==="Pending").reduce(($,I)=>$+Number(I.amount),0),upcoming:d.filter($=>$.status==="Scheduled").reduce(($,I)=>$+Number(I.amount),0),overdue:d.filter($=>$.status==="Overdue").reduce(($,I)=>$+Number(I.amount),0)},V={Paid:"green",Pending:"yellow",Scheduled:"blue",Overdue:"red",Cancelled:"gray",Rejected:"red"},E=async $=>{$.preventDefault();try{S.id?await tu.updatePayment(S.id,S):await tu.createPayment(S),await F(),c(!1),C(w)}catch(I){console.error(I)}},B=async $=>{confirm("Delete this payment record?")&&(await tu.deletePayment($),await F(),s(null))},Y=$=>{C($),s(null),c(!0)},W=r==="all"?d:d.filter($=>$.status.toLowerCase()===r);return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Compensation"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track surrogate compensation and expenses."})]}),i.jsxs(fe,{color:"blue",onClick:()=>{C(w),c(!0)},children:[i.jsx("i",{className:"ri-add-line mr-2"})," Record Payment"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsxs(we,{className:"bg-gradient-to-br from-green-500 to-emerald-600 text-white border-none",children:[i.jsx("div",{className:"text-green-100 mb-1",children:"Total Paid"}),i.jsxs("div",{className:"text-3xl font-bold",children:["$",T.totalPaid.toLocaleString()]})]}),i.jsxs(we,{className:"bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-1",children:"Pending Approval"}),i.jsxs("div",{className:"text-3xl font-bold text-yellow-600 dark:text-yellow-500",children:["$",T.pending.toLocaleString()]})]}),i.jsxs(we,{className:"bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-1",children:"Upcomming (Scheduled)"}),i.jsxs("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-500",children:["$",T.upcoming.toLocaleString()]})]}),i.jsxs(we,{className:"bg-white dark:bg-gray-800",children:[i.jsx("div",{className:"text-red-500 mb-1",children:"Overdue"}),i.jsxs("div",{className:"text-3xl font-bold text-red-600",children:["$",T.overdue.toLocaleString()]})]})]}),i.jsx("div",{className:"mb-6 flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit",children:["all","paid","pending","scheduled","overdue"].map($=>i.jsx("button",{onClick:()=>e($),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors capitalize ${r===$?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:$},$))}),i.jsx("div",{className:"space-y-4",children:g?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx("i",{className:"ri-loader-4-line text-3xl animate-spin text-blue-600"})}):W.length===0?i.jsx("div",{className:"text-center py-12 text-gray-500 bg-white dark:bg-gray-800 rounded-lg",children:"No payments found."}):W.map($=>i.jsx(we,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>s($),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${$.category==="Received"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:i.jsx("i",{className:$.category==="Received"?"ri-arrow-left-down-line text-xl":"ri-arrow-right-up-line text-xl"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:$.surrogateName||$.parentName||"Unknown Recipient"}),i.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-medium ${$.category==="Received"?"bg-blue-50 text-blue-600 dark:bg-blue-900/30":"bg-orange-50 text-orange-600 dark:bg-orange-900/30"}`,children:$.category||"Withdrawn"})]}),i.jsxs("p",{className:"text-sm text-gray-500",children:[$.type,"  ",$.dueDate,i.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-400 capitalize whitespace-nowrap",children:["(",$.surrogateId?"Surrogate":$.parentId?"Parent":"N/A",")"]})]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:["$",Number($.amount).toLocaleString()]}),i.jsx(_e,{color:V[$.status]||"gray",children:$.status})]})]})},$.id))}),t&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 shadow-xl",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:"Payment Details"}),i.jsx("button",{onClick:()=>s(null),children:i.jsx("i",{className:"ri-close-line text-2xl text-gray-500"})})]}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{className:"flex justify-between border-b dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Recipient"}),i.jsxs("span",{className:"font-medium dark:text-white",children:[t.surrogateName||t.parentName,i.jsxs("span",{className:"ml-2 text-xs text-gray-400",children:["(",t.surrogateId?"Surrogate":"Parent",")"]})]})]}),i.jsxs("div",{className:"flex justify-between border-b dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount"}),i.jsxs("span",{className:"font-bold text-xl text-green-600",children:["$",Number(t.amount).toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between border-b dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type"}),i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsx("span",{className:"font-medium dark:text-white",children:t.type}),i.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full mt-1 ${t.category==="Received"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}`,children:t.category||"Withdrawn"})]})]}),i.jsxs("div",{className:"flex justify-between border-b dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status"}),i.jsx(_e,{color:V[t.status],children:t.status})]}),i.jsxs("div",{className:"flex justify-between border-b dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Due Date"}),i.jsx("span",{className:"font-medium dark:text-white",children:t.dueDate})]}),t.paidDate&&i.jsxs("div",{className:"flex justify-between border-b dark:border-gray-700 pb-2",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Paid Date"}),i.jsx("span",{className:"font-medium dark:text-white",children:t.paidDate})]}),t.notes&&i.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg text-sm text-gray-600 dark:text-gray-300",children:t.notes})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(fe,{className:"flex-1",onClick:()=>Y(t),children:"Edit"}),i.jsx(fe,{variant:"outline",color:"red",className:"flex-1",onClick:()=>t.id&&B(t.id),children:"Delete"})]})]})}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 shadow-xl",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:S.id?"Edit Payment":"New Payment"}),i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[i.jsx(ku,{value:S.surrogateId||S.parentId||"",onChange:()=>{},onSelect:$=>{const I=$.name.split(" (")[0];$.role==="Surrogate"?C({...S,surrogateId:$.id,surrogateName:I,parentId:"",parentName:""}):C({...S,parentId:$.id,parentName:I,surrogateId:"",surrogateName:""})},label:"Recipient (Surrogate or Parent)",required:!0}),i.jsx("div",{className:"pt-1",children:i.jsxs("button",{type:"button",onClick:()=>v(!0),className:"w-full py-2 px-4 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600 text-gray-500 hover:border-blue-500 hover:text-blue-500 transition-all flex items-center justify-center gap-2",children:[i.jsx("i",{className:"ri-health-book-line"}),"Associated Medical Record"]})}),i.jsxs("div",{className:"flex p-1 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[i.jsxs("button",{type:"button",onClick:()=>C({...S,category:"Withdrawn"}),className:`flex-1 py-1.5 text-sm font-medium rounded-md transition-all ${S.category==="Withdrawn"?"bg-white dark:bg-gray-600 text-orange-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[i.jsx("i",{className:"ri-arrow-right-up-line mr-1"})," Withdrawn"]}),i.jsxs("button",{type:"button",onClick:()=>C({...S,category:"Received"}),className:`flex-1 py-1.5 text-sm font-medium rounded-md transition-all ${S.category==="Received"?"bg-white dark:bg-gray-600 text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[i.jsx("i",{className:"ri-arrow-left-down-line mr-1"})," Received"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{type:"number",placeholder:"Amount",required:!0,className:"p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:S.amount||"",onChange:$=>C({...S,amount:Number($.target.value)})}),i.jsxs("select",{className:"p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:S.type,onChange:$=>C({...S,type:$.target.value}),children:[i.jsx("option",{children:"Base Compensation"}),i.jsx("option",{children:"Allowance"}),i.jsx("option",{children:"Medical"}),i.jsx("option",{children:"Travel"}),i.jsx("option",{children:"Clothing"}),i.jsx("option",{children:"Legal"}),i.jsx("option",{children:"Other"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Due Date"}),i.jsx("input",{type:"date",required:!0,className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:S.dueDate,onChange:$=>C({...S,dueDate:$.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Status"}),i.jsxs("select",{className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:S.status,onChange:$=>C({...S,status:$.target.value}),children:[i.jsx("option",{children:"Scheduled"}),i.jsx("option",{children:"Pending"}),i.jsx("option",{children:"Paid"}),i.jsx("option",{children:"Overdue"}),i.jsx("option",{children:"Cancelled"})]})]})]}),S.status==="Paid"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Paid Date"}),i.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:S.paidDate||"",onChange:$=>C({...S,paidDate:$.target.value})})]}),i.jsx("textarea",{placeholder:"Description / Notes",className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:3,value:S.notes||"",onChange:$=>C({...S,notes:$.target.value})}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(fe,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),i.jsx(fe,{type:"submit",color:"blue",children:"Save Record"})]})]})]})}),i.jsx(em,{isOpen:y,onClose:()=>v(!1)})]})]})]})},XP=()=>{const[r,e]=k.useState("records"),[t,s]=k.useState(!0),[l,c]=k.useState([]),[d,h]=k.useState(null),[g,p]=k.useState(!1),[y,v]=k.useState({title:"",type:"Screening",date:"",doctor:"",facility:"",summary:"",status:"Pending",sharedWithParents:!1}),[w,S]=k.useState([]),[C,F]=k.useState(!1),[T,V]=k.useState({name:"",dosage:"",frequency:"",startDate:"",status:"Active"}),E=async()=>{s(!0);try{const[I,L]=await Promise.all([Mn.getAllRecords(),Mn.getAllMedications()]);c(I),S(L)}catch(I){console.error("Error loading medical data",I)}finally{s(!1)}};k.useEffect(()=>{E()},[]);const B=async I=>{confirm("Delete this record?")&&(await Mn.deleteRecord(I),await E(),h(null))},Y=async I=>{I.preventDefault();try{T.id?await Mn.updateMedication(T.id,T):await Mn.addMedication(T),await E(),F(!1),V({name:"",dosage:"",frequency:"",startDate:"",status:"Active"})}catch(L){console.error(L)}},W=async I=>{confirm("Delete this medication?")&&(await Mn.deleteMedication(I),await E())},$=I=>{switch(I){case"Verified":return i.jsx(_e,{color:"green",children:"Verified"});case"Review Required":return i.jsx(_e,{color:"yellow",children:"Review Required"});case"Active":return i.jsx(_e,{color:"green",children:"Active"});case"Completed":return i.jsx(_e,{color:"gray",children:"Completed"});case"Discontinued":return i.jsx(_e,{color:"red",children:"Discontinued"});default:return i.jsx(_e,{color:"gray",children:I})}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Medical"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage health records and medications."})]}),i.jsxs("div",{className:"flex gap-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>e("records"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${r==="records"?"bg-white dark:bg-gray-700 shadow-sm text-blue-600":"text-gray-600"}`,children:"Records"}),i.jsx("button",{onClick:()=>e("medications"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${r==="medications"?"bg-white dark:bg-gray-700 shadow-sm text-blue-600":"text-gray-600"}`,children:"Medications"})]})]}),!t&&r==="records"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex justify-end mb-4",children:i.jsxs(fe,{color:"blue",onClick:()=>{v({}),p(!0)},children:[i.jsx("i",{className:"ri-add-line mr-2"})," New Record"]})}),i.jsxs("div",{className:"space-y-4",children:[l.map(I=>i.jsx(we,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>h(I),children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900 flex items-center justify-center text-blue-600 dark:text-blue-400",children:i.jsx("i",{className:"ri-file-list-3-line text-xl"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:I.title}),i.jsxs("p",{className:"text-sm text-gray-500",children:[I.type,"  ",I.date]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Dr. ",I.doctor," @ ",I.facility]})]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[$(I.status),I.sharedWithParents&&i.jsxs("span",{className:"text-xs flex items-center gap-1 text-green-600 bg-green-50 px-2 py-1 rounded-full",children:[i.jsx("i",{className:"ri-eye-line"})," Shared"]})]})]})},I.id)),l.length===0&&i.jsx("p",{className:"text-center text-gray-500 py-8",children:"No medical records found."})]})]}),!t&&r==="medications"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex justify-end mb-4",children:i.jsxs(fe,{color:"blue",onClick:()=>{V({}),F(!0)},children:[i.jsx("i",{className:"ri-add-line mr-2"})," Add Medication"]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[w.map(I=>i.jsxs(we,{children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center text-purple-600",children:i.jsx("i",{className:"ri-capsule-line text-lg"})}),$(I.status)]}),i.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white mb-1",children:I.name}),i.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[I.dosage,"  ",I.frequency]}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 p-3 rounded-lg mb-4",children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{children:"Start:"}),i.jsx("span",{className:"font-medium",children:I.startDate})]}),I.endDate&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"End:"}),i.jsx("span",{className:"font-medium",children:I.endDate})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>{V(I),F(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:i.jsx("i",{className:"ri-edit-line"})}),i.jsx("button",{onClick:()=>I.id&&W(I.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:i.jsx("i",{className:"ri-delete-bin-line"})})]})]},I.id)),w.length===0&&i.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"No medications assigned."})]})]}),i.jsx(em,{isOpen:g,onClose:()=>p(!1),onSuccess:E,initialData:y}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 shadow-xl",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:d.title}),i.jsx("p",{className:"text-gray-500",children:d.date})]}),i.jsx("button",{onClick:()=>h(null),className:"text-gray-500 hover:text-gray-700",children:i.jsx("i",{className:"ri-close-line text-2xl"})})]}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-2 dark:text-white",children:"Details"}),i.jsxs("p",{className:"dark:text-gray-300",children:[i.jsx("span",{className:"font-medium",children:"Type:"})," ",d.type]}),i.jsxs("p",{className:"dark:text-gray-300",children:[i.jsx("span",{className:"font-medium",children:"Doctor:"})," ",d.doctor]}),i.jsxs("p",{className:"dark:text-gray-300",children:[i.jsx("span",{className:"font-medium",children:"Facility:"})," ",d.facility]}),i.jsxs("p",{className:"dark:text-gray-300",children:[i.jsx("span",{className:"font-medium",children:"Status:"})," ",d.status]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold mb-2 dark:text-white",children:"Summary"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:d.summary})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(fe,{className:"flex-1",onClick:()=>{v(d),h(null),p(!0)},children:"Edit"}),i.jsx(fe,{variant:"outline",color:"red",className:"flex-1",onClick:()=>d.id&&B(d.id),children:"Delete"})]})]})}),C&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full p-6 shadow-xl",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:T.id?"Edit Medication":"Add Medication"}),i.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[i.jsx("input",{type:"text",placeholder:"Medication Name",required:!0,className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:T.name,onChange:I=>V({...T,name:I.target.value})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("input",{type:"text",placeholder:"Dosage (e.g. 10mg)",required:!0,className:"p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:T.dosage,onChange:I=>V({...T,dosage:I.target.value})}),i.jsx("input",{type:"text",placeholder:"Frequency (e.g. Daily)",required:!0,className:"p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:T.frequency,onChange:I=>V({...T,frequency:I.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Start Date"}),i.jsx("input",{type:"date",required:!0,className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:T.startDate,onChange:I=>V({...T,startDate:I.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"End Date (Optional)"}),i.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:T.endDate||"",onChange:I=>V({...T,endDate:I.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500",children:"Status"}),i.jsxs("select",{className:"w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:T.status,onChange:I=>V({...T,status:I.target.value}),children:[i.jsx("option",{children:"Active"}),i.jsx("option",{children:"Completed"}),i.jsx("option",{children:"Discontinued"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(fe,{type:"button",variant:"outline",onClick:()=>F(!1),children:"Cancel"}),i.jsx(fe,{type:"submit",color:"blue",children:"Save"})]})]})]})})]})]})]})},WP=()=>{const[r,e]=k.useState("all"),[t,s]=k.useState(null),[l,c]=k.useState(!1),[d,h]=k.useState([]),[g,p]=k.useState(!0);k.useEffect(()=>{y()},[]);const y=async()=>{p(!0);try{const B=(await rt(Ie(be,"contracts"))).docs.map(Y=>({id:Y.id,title:Y.data().title||"Untitled Contract",type:Y.data().type||"general",surrogateName:Y.data().surrogateName||"Unknown",parentName:Y.data().parentName||"Unknown",status:Y.data().status||"draft",createdAt:Y.data().createdAt?.toDate()||new Date,value:Y.data().value||0}));h(B)}catch(E){console.error("Error fetching contracts:",E),h([])}finally{p(!1)}},v=r==="all"?d:d.filter(E=>E.type===r),w=[{id:"all",label:"All Contracts",count:d.length},{id:"surrogacy_agreement",label:"Surrogacy Agreements",count:d.filter(E=>E.type==="surrogacy_agreement").length},{id:"medical_authorization",label:"Medical Authorization",count:d.filter(E=>E.type==="medical_authorization").length},{id:"compensation_agreement",label:"Compensation",count:d.filter(E=>E.type==="compensation_agreement").length},{id:"confidentiality_agreement",label:"Confidentiality",count:d.filter(E=>E.type==="confidentiality_agreement").length}],S=E=>{switch(E){case"active":return i.jsx(_e,{color:"green",children:"Active"});case"pending_signature":return i.jsx(_e,{color:"yellow",children:"Pending Signature"});case"under_review":return i.jsx(_e,{color:"blue",children:"Under Review"});case"draft":return i.jsx(_e,{children:"Draft"});case"expired":return i.jsx(_e,{color:"red",children:"Expired"});default:return i.jsx(_e,{children:E})}},C=E=>{switch(E){case"surrogacy_agreement":return"ri-file-text-line";case"medical_authorization":return"ri-health-book-line";case"compensation_agreement":return"ri-money-dollar-circle-line";case"confidentiality_agreement":return"ri-shield-check-line";default:return"ri-file-line"}},F=E=>{switch(E){case"surrogacy_agreement":return"bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400";case"medical_authorization":return"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400";case"compensation_agreement":return"bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-400";case"confidentiality_agreement":return"bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400";default:return"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}},T=E=>E===0?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(E),V=E=>E.split("_").map(B=>B.charAt(0).toUpperCase()+B.slice(1)).join(" ");return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Contracts"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage legal agreements and documentation."})]}),i.jsx("div",{className:"flex gap-3",children:i.jsxs(fe,{color:"blue",onClick:()=>c(!0),children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Contract"]})})]})}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg w-fit flex-wrap",children:w.map(E=>i.jsxs("button",{onClick:()=>e(E.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${r===E.id?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[E.label," (",E.count,")"]},E.id))})}),g?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):v.length===0?i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("i",{className:"ri-file-text-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No contracts found."})]}):i.jsx("div",{className:"space-y-4",children:v.map(E=>i.jsx(we,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(E),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${F(E.type)}`,children:i.jsx("i",{className:`${C(E.type)} text-lg`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:E.title}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[E.surrogateName,"  ",E.parentName]}),i.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Created: ",E.createdAt.toLocaleDateString()]})]})]}),i.jsxs("div",{className:"text-right",children:[S(E.status),i.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:T(E.value)})]})]})},E.id))}),t&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Contract Details"}),i.jsx("button",{onClick:()=>s(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-16 h-16 rounded-lg flex items-center justify-center ${F(t.type)}`,children:i.jsx("i",{className:`${C(t.type)} text-2xl`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.title}),i.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Contract ID: ",t.id.slice(0,8)]}),S(t.status)]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Contract Information"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:V(t.type)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Value:"}),i.jsx("span",{className:"text-gray-900 dark:text-white font-semibold",children:T(t.value)})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Timeline"}),i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Created:"}),i.jsx("span",{className:"text-gray-900 dark:text-white",children:t.createdAt.toLocaleDateString()})]})})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Parties Involved"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("i",{className:"ri-user-heart-line text-blue-600 dark:text-blue-400"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Surrogate"})]}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.surrogateName})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("i",{className:"ri-parent-line text-green-600 dark:text-green-400"}),i.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:"Intended Parents"})]}),i.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:t.parentName})]})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsx(fe,{color:"blue",className:"flex-1",onClick:()=>s(null),children:"Close"})})]})]})})}),l&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-lg w-full",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"New Contract"}),i.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:i.jsx("i",{className:"ri-close-line text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"text-center py-8",children:[i.jsx("i",{className:"ri-file-add-line text-4xl text-gray-400 mb-4"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Contract creation form will be implemented here."}),i.jsx(fe,{variant:"outline",onClick:()=>c(!1),children:"Close"})]})]})})})]})]})]})},JP=()=>{const r=dn(),{login:e,initializing:t}=Zf(),[s,l]=k.useState({email:"",password:"",rememberMe:!1}),[c,d]=k.useState(!1),[h,g]=k.useState(null),p=v=>{const{name:w,value:S,type:C,checked:F}=v.target;l(T=>({...T,[w]:C==="checkbox"?F:S}))},y=async v=>{if(v.preventDefault(),g(null),!t){d(!0);try{await e({email:s.email.trim(),password:s.password,rememberMe:s.rememberMe}),r("/")}catch(w){if(w instanceof Qr)switch(w.code){case"auth/invalid-credential":case"auth/invalid-email":case"auth/user-not-found":case"auth/wrong-password":g("Invalid email or password. Please try again.");break;case"auth/user-disabled":g("This account has been disabled. Contact your administrator.");break;case"auth/too-many-requests":g("Too many failed attempts. Please wait a moment before trying again.");break;default:g("Unable to sign in. Please try again later.")}else g("Unable to sign in. Please try again later.")}finally{d(!1)}}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-16 h-16 bg-blue-600 dark:bg-blue-500 rounded-xl flex items-center justify-center",children:i.jsx("i",{className:"ri-heart-pulse-line text-2xl text-white"})})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Sign in to Family Matters"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Access your surrogacy admin portal"})]}),i.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow-xl rounded-xl sm:px-10 border border-gray-200 dark:border-gray-700",children:i.jsxs("form",{className:"space-y-6",onSubmit:y,children:[h&&i.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700 dark:border-red-900 dark:bg-red-950/60 dark:text-red-400",children:h}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email address"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s.email,onChange:p,className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"Enter your email"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("i",{className:"ri-mail-line text-gray-400 dark:text-gray-500 text-sm"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s.password,onChange:p,className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"Enter your password"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("i",{className:"ri-lock-line text-gray-400 dark:text-gray-500 text-sm"})})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"remember-me",name:"rememberMe",type:"checkbox",checked:s.rememberMe,onChange:p,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"}),i.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Remember me"})]}),i.jsx("div",{className:"text-sm",children:i.jsx(Zi,{to:"/auth/forgot-password",className:"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300",children:"Forgot your password?"})})]}),i.jsx("div",{children:i.jsx(fe,{type:"submit",disabled:c||t,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed dark:focus:ring-offset-gray-800",children:c?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Signing in..."]}):t?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-time-line mr-2"}),"Initializing..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-login-box-line mr-2"}),"Sign in"]})})}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"New to Family Matters?"})})]}),i.jsx("div",{className:"mt-6",children:i.jsxs(Zi,{to:"/auth/signup",className:"w-full flex justify-center py-2.5 px-4 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm bg-white dark:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",children:[i.jsx("i",{className:"ri-user-add-line mr-2"}),"Create new account"]})})]})]})})}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" 2024 Family Matters. All rights reserved."})})]})},ZP=()=>{const r=dn(),{signup:e}=Zf(),[t,s]=k.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:"admin",agreeToTerms:!1}),[l,c]=k.useState(!1),[d,h]=k.useState({}),[g,p]=k.useState(null),y=S=>{const{name:C,value:F,type:T}=S.target,V=T==="checkbox"?S.target.checked:!1;s(E=>({...E,[C]:T==="checkbox"?V:F})),d[C]&&h(E=>({...E,[C]:""}))},v=()=>{const S={};return t.firstName.trim()||(S.firstName="First name is required"),t.lastName.trim()||(S.lastName="Last name is required"),t.email.trim()||(S.email="Email is required"),t.password||(S.password="Password is required"),t.password.length<8&&(S.password="Password must be at least 8 characters"),t.password!==t.confirmPassword&&(S.confirmPassword="Passwords do not match"),t.agreeToTerms||(S.agreeToTerms="You must agree to the terms"),h(S),Object.keys(S).length===0},w=async S=>{if(S.preventDefault(),!!v()){c(!0),p(null);try{const C=await e({email:t.email.trim(),password:t.password}),F=`${t.firstName} ${t.lastName}`.trim();F&&await f6(C.user,{displayName:F}),r("/")}catch(C){if(C instanceof Qr)switch(C.code){case"auth/email-already-in-use":p("An account with this email already exists. Try signing in instead.");break;case"auth/invalid-email":p("The email address appears to be invalid.");break;case"auth/weak-password":p("Your password is too weak. Please choose a stronger password.");break;default:p("Unable to create your account right now. Please try again later.")}else p("Unable to create your account right now. Please try again later.")}finally{c(!1)}}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"w-16 h-16 bg-blue-600 dark:bg-blue-500 rounded-xl flex items-center justify-center",children:i.jsx("i",{className:"ri-heart-pulse-line text-2xl text-white"})})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Create your account"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:"Join the Family Matters admin portal"})]}),i.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow-xl rounded-xl sm:px-10 border border-gray-200 dark:border-gray-700",children:i.jsxs("form",{className:"space-y-6",onSubmit:w,children:[g&&i.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700 dark:border-red-900 dark:bg-red-950/60 dark:text-red-400",children:g}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"First name"}),i.jsxs("div",{className:"mt-1",children:[i.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:t.firstName,onChange:y,className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"First name"}),d.firstName&&i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:d.firstName})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Last name"}),i.jsxs("div",{className:"mt-1",children:[i.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:t.lastName,onChange:y,className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"Last name"}),d.lastName&&i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:d.lastName})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email address"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t.email,onChange:y,className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"Enter your email"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("i",{className:"ri-mail-line text-gray-400 dark:text-gray-500 text-sm"})}),d.email&&i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:d.email})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Role"}),i.jsx("div",{className:"mt-1",children:i.jsxs("select",{id:"role",name:"role",value:t.role,onChange:y,className:"appearance-none block w-full px-3 py-2 pr-8 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[i.jsx("option",{value:"admin",children:"Administrator"}),i.jsx("option",{value:"coordinator",children:"Program Coordinator"}),i.jsx("option",{value:"medical",children:"Medical Staff"}),i.jsx("option",{value:"legal",children:"Legal Advisor"})]})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:t.password,onChange:y,className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"Create a password"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("i",{className:"ri-lock-line text-gray-400 dark:text-gray-500 text-sm"})}),d.password&&i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:d.password})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirm password"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:t.confirmPassword,onChange:y,className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white text-sm",placeholder:"Confirm your password"}),i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("i",{className:"ri-lock-line text-gray-400 dark:text-gray-500 text-sm"})}),d.confirmPassword&&i.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:d.confirmPassword})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"agreeToTerms",name:"agreeToTerms",type:"checkbox",checked:t.agreeToTerms,onChange:y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700"}),i.jsxs("label",{htmlFor:"agreeToTerms",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:["I agree to the"," ",i.jsx(Zi,{to:"/terms",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300",children:"Terms of Service"})," ","and"," ",i.jsx(Zi,{to:"/privacy",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300",children:"Privacy Policy"})]})]}),d.agreeToTerms&&i.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:d.agreeToTerms}),i.jsx("div",{children:i.jsx(fe,{type:"submit",disabled:l,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed dark:focus:ring-offset-gray-800",children:l?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"Creating account..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-user-add-line mr-2"}),"Create account"]})})}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Already have an account?"})})]}),i.jsx("div",{className:"mt-6",children:i.jsxs(Zi,{to:"/auth/login",className:"w-full flex justify-center py-2.5 px-4 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm bg-white dark:bg-gray-700 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800",children:[i.jsx("i",{className:"ri-login-box-line mr-2"}),"Sign in instead"]})})]})]})})}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" 2024 Family Matters. All rights reserved."})})]})};function e5(){return i.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center px-4",children:[i.jsx("h1",{className:"text-5xl md:text-5xl font-semibold text-gray-100",children:"404"}),i.jsx("h1",{className:"text-2xl md:text-3xl font-semibold mt-6",children:"This page has not been generated"}),i.jsx("p",{className:"mt-4 text-xl md:text-2xl text-gray-500",children:"Tell me what you would like on this page"})]})}const Ka="tasks",Gc={getAllTasks:async()=>{try{const r=Xe(Ie(be,Ka),Et("dueDate","asc"));return(await rt(r)).docs.map(t=>({id:t.id,...t.data()}))}catch(r){throw console.error("Error fetching tasks:",r),r}},createTask:async r=>{try{console.log("Creating new task:",{title:r.title,assignee:r.assignee,assigneeName:r.assigneeName,dueDate:r.dueDate,isCompleted:r.isCompleted});const e=await Tn(Ie(be,Ka),{...r,createdAt:De.now(),updatedAt:De.now()});return console.log("Task created successfully with ID:",e.id),e.id}catch(e){throw console.error("Error creating task:",e),e}},updateTask:async(r,e)=>{try{const t=at(be,Ka,r);await Vt(t,{...e,updatedAt:De.now()})}catch(t){throw console.error("Error updating task:",t),t}},deleteTask:async r=>{try{await sl(at(be,Ka,r))}catch(e){throw console.error("Error deleting task:",e),e}},getTasksByUserId:async r=>{try{const e=Xe(Ie(be,Ka),ur("assignee","==",r),Et("dueDate","asc"));return(await rt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.warn("Error fetching tasks by user (possibly missing index), trying simple fetch",e);try{const t=Xe(Ie(be,Ka));return(await rt(t)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.assignee===r).sort((l,c)=>l.dueDate.localeCompare(c.dueDate))}catch(t){return console.error("Fallback fetch also failed",t),[]}}},getTasksByStatus:async r=>{try{const e=Xe(Ie(be,Ka),ur("isCompleted","==",r),Et("dueDate","asc"));return(await rt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.warn("Error fetching tasks by status (possibly missing index), trying simple fetch",e);try{const t=Xe(Ie(be,Ka));return(await rt(t)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.isCompleted===r).sort((l,c)=>l.dueDate.localeCompare(c.dueDate))}catch(t){return console.error("Fallback fetch also failed",t),[]}}}},t5=()=>{const[r,e]=k.useState("all"),[t,s]=k.useState([]),[l,c]=k.useState([]),[d,h]=k.useState("all"),[g,p]=k.useState(null),[y,v]=k.useState(!1),[w,S]=k.useState(!0),[C,F]=k.useState(null),[T,V]=k.useState({title:"",description:"",assignee:"",assigneeName:"",dueDate:"",isCompleted:!1}),E=async()=>{S(!0);try{const P=await Gc.getAllTasks();s(Array.isArray(P)?P:[]),F(null)}catch(P){console.error(P),F("Failed to load tasks"),s([])}finally{S(!1)}},B=async()=>{try{const M=(await rt(Ie(be,"users"))).docs.map(z=>({id:z.id,name:z.data().firstName||z.data().email||"Unknown User"}));c(M)}catch(P){console.error("Error fetching users:",P)}};k.useEffect(()=>{E(),B()},[]);const Y=k.useMemo(()=>{if(!Array.isArray(t))return[];let P=t;return r==="pending"?P=P.filter(M=>!M.isCompleted):r==="completed"&&(P=P.filter(M=>M.isCompleted)),d!=="all"&&(P=P.filter(M=>M.assignee===d)),P},[t,r,d]),W=()=>{V({title:"",description:"",assignee:"",assigneeName:"",dueDate:new Date().toISOString().split("T")[0],isCompleted:!1}),v(!0)},$=P=>{V(P),v(!0),p(null)},I=async P=>{P.preventDefault(),S(!0);try{const M=l.find(me=>me.id===T.assignee),z={...T,assigneeName:M?.name||T.assigneeName||""};T.id?await Gc.updateTask(T.id,z):await Gc.createTask(z),await E(),v(!1)}catch(M){console.error(M),F("Failed to save task")}finally{S(!1)}},L=async P=>{if(window.confirm("Are you sure you want to delete this task?")){S(!0);try{await Gc.deleteTask(P),await E(),p(null)}catch{F("Failed to delete task")}finally{S(!1)}}},j=async P=>{try{await Gc.updateTask(P.id,{isCompleted:!P.isCompleted}),await E()}catch(M){console.error("Error toggling task completion:",M)}},A=(P,M)=>{if(M)return!1;const z=new Date().toISOString().split("T")[0];return P<z};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Tasks"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and track tasks for users."})]}),i.jsxs(fe,{color:"blue",onClick:W,children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Task"]})]})}),i.jsxs("div",{className:"mb-6 flex flex-wrap gap-4 items-center",children:[i.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:["all","pending","completed"].map(P=>i.jsxs("button",{onClick:()=>e(P),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors capitalize ${r===P?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[P," (",P==="all"?t.length:P==="pending"?t.filter(M=>!M.isCompleted).length:t.filter(M=>M.isCompleted).length,")"]},P))}),i.jsx(xf,{options:[{id:"all",name:"All Users"},...l],value:d,onChange:P=>h(P),placeholder:"Filter by user...",className:"w-64"})]}),C&&i.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:C}),w&&!y?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):i.jsx("div",{className:"space-y-4",children:Y.length===0?i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("i",{className:"ri-task-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No tasks found."})]}):Y.map(P=>i.jsx(we,{className:`hover:shadow-lg transition-shadow cursor-pointer ${A(P.dueDate,P.isCompleted)?"border-l-4 border-red-500":""}`,onClick:()=>p(P),children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[i.jsx("button",{onClick:M=>{M.stopPropagation(),j(P)},className:`w-6 h-6 rounded border-2 flex items-center justify-center transition-colors ${P.isCompleted?"bg-green-500 border-green-500":"border-gray-300 dark:border-gray-600 hover:border-green-500"}`,children:P.isCompleted&&i.jsx("i",{className:"ri-check-line text-white text-sm"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:`font-semibold text-gray-900 dark:text-white ${P.isCompleted?"line-through opacity-60":""}`,children:P.title}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:P.description}),i.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-500 dark:text-gray-400",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"ri-user-line"}),P.assigneeName||"Unassigned"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"ri-calendar-line"}),P.dueDate]}),A(P.dueDate,P.isCompleted)&&i.jsx(_e,{color:"red",children:"Overdue"})]})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:P.isCompleted?i.jsx(_e,{color:"green",children:"Completed"}):i.jsx(_e,{color:"yellow",children:"Pending"})})]})},P.id))}),g&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Task Details"}),i.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:g.title}),g.isCompleted?i.jsx(_e,{color:"green",className:"mt-2",children:"Completed"}):i.jsx(_e,{color:"yellow",className:"mt-2",children:"Pending"})]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-6 rounded-xl space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Description"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:g.description})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Assigned To"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:g.assigneeName||"Unassigned"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Due Date"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:g.dueDate})]})]}),A(g.dueDate,g.isCompleted)&&i.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 p-3 rounded-lg",children:i.jsxs("p",{className:"text-red-600 dark:text-red-400 font-medium",children:[i.jsx("i",{className:"ri-error-warning-line mr-2"}),"This task is overdue"]})})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsxs(fe,{color:"blue",className:"flex-1",onClick:()=>$(g),children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit"]}),i.jsxs(fe,{color:g.isCompleted?"blue":"green",variant:"outline",className:"flex-1",onClick:()=>{j(g),p(null)},children:[i.jsx("i",{className:`${g.isCompleted?"ri-close-circle-line":"ri-check-line"} mr-2`}),g.isCompleted?"Mark Incomplete":"Mark Complete"]}),i.jsxs(fe,{color:"red",variant:"outline",className:"flex-1",onClick:()=>g.id&&L(g.id),children:[i.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Delete"]})]})]})]})})}),y&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:i.jsxs("form",{onSubmit:I,className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:T.id?"Edit Task":"New Task"}),i.jsx("button",{type:"button",onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title"}),i.jsx("input",{type:"text",required:!0,value:T.title,onChange:P=>V({...T,title:P.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Upload Medical Records"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),i.jsx("textarea",{required:!0,value:T.description,onChange:P=>V({...T,description:P.target.value}),rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Please upload your vaccination records..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{children:i.jsx(xf,{label:"Assign To",options:l,value:T.assignee||"",onChange:P=>V({...T,assignee:P}),placeholder:"Select User",required:!0})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date"}),i.jsx("input",{type:"date",required:!0,value:T.dueDate,onChange:P=>V({...T,dueDate:P.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),T.id&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"completed",checked:T.isCompleted,onChange:P=>V({...T,isCompleted:P.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"completed",className:"text-sm text-gray-700 dark:text-gray-300",children:"Mark as completed"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx(fe,{type:"button",variant:"outline",className:"flex-1",onClick:()=>v(!1),children:"Cancel"}),i.jsx(fe,{type:"submit",color:"blue",className:"flex-1",disabled:w,children:w?"Saving...":"Save Task"})]})]})})})]})]})]})},uo="baby_watch",yo={getAllUpdates:async()=>{try{const r=Xe(Ie(be,uo),Et("date","desc"));return(await rt(r)).docs.map(t=>({id:t.id,...t.data()}))}catch(r){throw console.error("Error fetching baby watch updates:",r),r}},uploadImage:async(r,e)=>{try{const t=Date.now(),s=`${e}_${t}_${r.name}`,l=ul(dl,`baby_watch/${s}`);return await NS(l,r),{url:await Ku(l),path:`baby_watch/${s}`}}catch(t){throw console.error("Error uploading image:",t),t}},createUpdate:async(r,e)=>{try{let t=r.imageUrl,s=r.imagePath;if(e){const{url:c,path:d}=await yo.uploadImage(e,r.caseId);t=c,s=d}return(await Tn(Ie(be,uo),{...r,imageUrl:t,imagePath:s,createdAt:De.now(),updatedAt:De.now()})).id}catch(t){throw console.error("Error creating baby watch update:",t),t}},updateUpdate:async(r,e,t)=>{try{const s=at(be,uo,r);let l={...e,updatedAt:De.now()};if(t&&e.caseId){const{url:c,path:d}=await yo.uploadImage(t,e.caseId);l.imageUrl=c,l.imagePath=d}await Vt(s,l)}catch(s){throw console.error("Error updating baby watch update:",s),s}},deleteUpdate:async(r,e)=>{try{if(e)try{const t=ul(dl,e);await jS(t)}catch(t){console.warn("Error deleting image from storage:",t)}await sl(at(be,uo,r))}catch(t){throw console.error("Error deleting baby watch update:",t),t}},getUpdatesByCaseId:async r=>{try{const e=Xe(Ie(be,uo),ur("caseId","==",r),Et("date","desc"));return(await rt(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){console.warn("Error fetching updates by case (possibly missing index), trying simple fetch",e);try{const t=Xe(Ie(be,uo));return(await rt(t)).docs.map(l=>({id:l.id,...l.data()})).filter(l=>l.caseId===r).sort((l,c)=>c.date.localeCompare(l.date))}catch(t){return console.error("Fallback fetch also failed",t),[]}}}},r5=()=>{const[r,e]=k.useState([]),[t,s]=k.useState([]),[l,c]=k.useState("all"),[d,h]=k.useState(null),[g,p]=k.useState(!1),[y,v]=k.useState(!0),[w,S]=k.useState(null),[C,F]=k.useState(null),[T,V]=k.useState(null),[E,B]=k.useState({caseId:"",parentId:"",parentName:"",surrogateId:"",surrogateName:"",date:new Date().toISOString().split("T")[0],gestationalAge:"",weight:"",heartRate:"",medicalNotes:"",sharedWithParents:!0}),Y=async()=>{v(!0);try{const M=await yo.getAllUpdates();e(Array.isArray(M)?M:[]),S(null)}catch(M){console.error(M),S("Failed to load updates"),e([])}finally{v(!1)}},W=async()=>{try{const z=(await rt(Ie(be,"cases"))).docs.map(me=>({id:me.id,...me.data(),displayName:`${me.data().surrogateName} & ${me.data().parentName}`}));s(z)}catch(M){console.error("Error fetching cases:",M)}};k.useEffect(()=>{Y(),W()},[]);const $=l==="all"?r:r.filter(M=>M.caseId===l),I=()=>{B({caseId:"",parentId:"",parentName:"",surrogateId:"",surrogateName:"",date:new Date().toISOString().split("T")[0],gestationalAge:"",weight:"",heartRate:"",medicalNotes:"",sharedWithParents:!0}),F(null),V(null),p(!0)},L=M=>{B(M),V(M.imageUrl||null),F(null),p(!0),h(null)},j=M=>{const z=M.target.files?.[0];if(z){F(z);const me=new FileReader;me.onloadend=()=>{V(me.result)},me.readAsDataURL(z)}},A=async M=>{M.preventDefault(),v(!0);try{E.id?await yo.updateUpdate(E.id,E,C||void 0):await yo.createUpdate(E,C||void 0),await Y(),p(!1)}catch(z){console.error(z),S("Failed to save update")}finally{v(!1)}},P=async(M,z)=>{if(window.confirm("Are you sure you want to delete this update?")){v(!0);try{await yo.deleteUpdate(M,z),await Y(),h(null)}catch{S("Failed to delete update")}finally{v(!1)}}};return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Baby Watch"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Medical updates and ultrasound tracking."})]}),i.jsxs(fe,{color:"blue",onClick:I,children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Update"]})]})}),i.jsx("div",{className:"mb-6",children:i.jsxs("select",{value:l,onChange:M=>c(M.target.value),className:"px-4 py-2 rounded-xl border border-gray-200/50 dark:border-gray-700/50 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all shadow-sm hover:shadow-md",children:[i.jsxs("option",{value:"all",children:["All Cases (",r.length,")"]}),t.map(M=>i.jsxs("option",{value:M.id,children:[M.displayName," (",r.filter(z=>z.caseId===M.id).length,")"]},M.id))]})}),w&&i.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:w}),y&&!g?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$.length===0?i.jsxs("div",{className:"col-span-full text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("i",{className:"ri-heart-pulse-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No updates found."})]}):$.map(M=>i.jsxs(we,{padding:"none",className:"group hover:shadow-2xl transition-all duration-300 cursor-pointer overflow-hidden border-0 bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl ring-1 ring-black/5 dark:ring-white/10 hover:-translate-y-1 flex flex-col",onClick:()=>h(M),children:[M.imageUrl&&i.jsxs("div",{className:"w-full h-56 bg-gray-100 dark:bg-gray-900 overflow-hidden relative",children:[i.jsx("img",{src:M.imageUrl,alt:"Ultrasound",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),i.jsxs("div",{className:"p-6 space-y-4 flex-1 flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:M.gestationalAge}),M.sharedWithParents&&i.jsx(_e,{color:"green",children:"Shared"})]}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:i.jsx("i",{className:"ri-calendar-line"})}),i.jsx("span",{children:M.date})]}),M.weight&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-pink-100 dark:bg-pink-900/30 flex items-center justify-center text-pink-600 dark:text-pink-400",children:i.jsx("i",{className:"ri-scales-line"})}),i.jsx("span",{children:M.weight})]}),M.heartRate&&i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center text-red-600 dark:text-red-400",children:i.jsx("i",{className:"ri-heart-pulse-line"})}),i.jsx("span",{children:M.heartRate})]})]}),i.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2",children:M.medicalNotes})]})]},M.id))}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50 backdrop-blur-xl transition-all duration-300 animate-in fade-in",children:i.jsx("div",{className:"bg-white/90 dark:bg-gray-900/90 rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-white/20 dark:border-white/5 overflow-hidden animate-in zoom-in-95 duration-200",children:i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>h(null),className:"absolute top-4 right-4 z-10 p-3 bg-black/20 hover:bg-black/40 backdrop-blur-md text-white rounded-full transition-all",children:i.jsx("i",{className:"ri-close-line text-xl"})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[i.jsx("div",{className:"bg-gray-100 dark:bg-gray-800",children:d.imageUrl?i.jsx("img",{src:d.imageUrl,alt:"Ultrasound",className:"w-full h-full object-cover min-h-[400px]"}):i.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-12 text-gray-400",children:[i.jsx("i",{className:"ri-image-line text-6xl mb-4"}),i.jsx("p",{children:"No image available"})]})}),i.jsxs("div",{className:"p-8 space-y-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full text-xs font-bold uppercase tracking-wider",children:"Medical Update"}),d.sharedWithParents&&i.jsx(_e,{color:"green",children:"Shared with Parents"})]}),i.jsx("h2",{className:"text-4xl font-black text-gray-900 dark:text-white leading-tight",children:d.gestationalAge})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{className:"p-4 rounded-2xl bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5",children:[i.jsxs("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-widest mb-1 items-center flex gap-2",children:[i.jsx("i",{className:"ri-calendar-line text-blue-500"})," Date"]}),i.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:d.date})]}),i.jsxs("div",{className:"p-4 rounded-2xl bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5",children:[i.jsxs("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-widest mb-1 items-center flex gap-2",children:[i.jsx("i",{className:"ri-scales-line text-pink-500"})," Weight"]}),i.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:d.weight||"N/A"})]}),i.jsxs("div",{className:"p-4 rounded-2xl bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5",children:[i.jsxs("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-widest mb-1 items-center flex gap-2",children:[i.jsx("i",{className:"ri-heart-pulse-line text-red-500"})," Heart Rate"]}),i.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:d.heartRate||"N/A"})]}),i.jsxs("div",{className:"p-4 rounded-2xl bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5",children:[i.jsxs("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-widest mb-1 items-center flex gap-2",children:[i.jsx("i",{className:"ri-user-line text-purple-500"})," Surrogate"]}),i.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:d.surrogateName||"N/A"})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-widest mb-3",children:"Medical Notes"}),i.jsx("div",{className:"p-4 rounded-2xl bg-blue-50/50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-900/20",children:i.jsxs("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed italic",children:['"',d.medicalNotes,'"']})})]}),i.jsxs("div",{className:"flex gap-4 pt-4",children:[i.jsxs(fe,{color:"blue",className:"flex-1 py-4 text-lg rounded-2xl shadow-lg shadow-blue-500/20",onClick:()=>L(d),children:[i.jsx("i",{className:"ri-edit-line mr-2"}),"Edit"]}),i.jsxs(fe,{color:"red",variant:"outline",className:"flex-1 py-4 text-lg rounded-2xl hover:bg-red-50 dark:hover:bg-red-900/10",onClick:()=>d.id&&P(d.id,d.imagePath),children:[i.jsx("i",{className:"ri-delete-bin-line mr-2"}),"Delete"]})]})]})]})]})})}),g&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50 backdrop-blur-xl animate-in fade-in transition-all",children:i.jsx("div",{className:"bg-white/95 dark:bg-gray-900/95 rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-white/20 dark:border-white/5 animate-in zoom-in-95 duration-200",children:i.jsxs("form",{onSubmit:A,className:"p-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:E.id?"Edit Update":"New Update"}),i.jsx("button",{type:"button",onClick:()=>p(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ultrasound Image"}),i.jsx("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:T?i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:T,alt:"Preview",className:"max-h-64 mx-auto rounded-lg"}),i.jsx("button",{type:"button",onClick:()=>{F(null),V(null)},className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:i.jsx("i",{className:"ri-delete-bin-line"})})]}):i.jsxs("div",{children:[i.jsx("i",{className:"ri-image-add-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Click to upload or drag and drop"}),i.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"hidden",id:"image-upload"}),i.jsx("label",{htmlFor:"image-upload",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg cursor-pointer hover:bg-blue-700",children:"Choose File"})]})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Case"}),i.jsxs("select",{required:!0,value:E.caseId,onChange:M=>{const z=M.target.value,me=t.find(Oe=>Oe.id===z);B({...E,caseId:z,parentId:me?.parentId||"",parentName:me?.parentName||"",surrogateId:me?.surrogateId||"",surrogateName:me?.surrogateName||""})},className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",children:[i.jsx("option",{value:"",children:"Select Case"}),t.map(M=>i.jsx("option",{value:M.id,children:M.displayName},M.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date"}),i.jsx("input",{type:"date",required:!0,value:E.date,onChange:M=>B({...E,date:M.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Gestational Age"}),i.jsx("input",{type:"text",required:!0,value:E.gestationalAge,onChange:M=>B({...E,gestationalAge:M.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. 12 Weeks"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Weight"}),i.jsx("input",{type:"text",value:E.weight,onChange:M=>B({...E,weight:M.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. 50g"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Heart Rate"}),i.jsx("input",{type:"text",value:E.heartRate,onChange:M=>B({...E,heartRate:M.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. 150 bpm"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Medical Notes"}),i.jsx("textarea",{required:!0,value:E.medicalNotes,onChange:M=>B({...E,medicalNotes:M.target.value}),rows:4,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Everything looks great! Baby is developing well..."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"shared",checked:E.sharedWithParents,onChange:M=>B({...E,sharedWithParents:M.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),i.jsx("label",{htmlFor:"shared",className:"text-sm text-gray-700 dark:text-gray-300",children:"Share with parents"})]})]}),i.jsxs("div",{className:"flex gap-4 mt-8",children:[i.jsx(fe,{type:"button",variant:"outline",className:"flex-1 py-4 text-lg rounded-2xl",onClick:()=>p(!1),children:"Cancel"}),i.jsx(fe,{type:"submit",color:"blue",className:"flex-1 py-4 text-lg rounded-2xl shadow-lg shadow-blue-500/20",disabled:y,children:y?i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Saving..."]}):"Save Update"})]})]})})})]})]})]})},n5="modulepreload",s5=function(r){return"/"+r},TN={},Dp=function(e,t,s){let l=Promise.resolve();if(t&&t.length>0){let p=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};var d=p;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=h?.nonce||h?.getAttribute("nonce");l=p(t.map(y=>{if(y=s5(y),y in TN)return;TN[y]=!0;const v=y.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":n5,v||(S.as="script"),S.crossOrigin="",S.href=y,g&&S.setAttribute("nonce",g),document.head.appendChild(S),v)return new Promise((C,F)=>{S.addEventListener("load",C),S.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${y}`)))})}))}function c(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return l.then(h=>{for(const g of h||[])g.status==="rejected"&&c(g.reason);return e().catch(c)})},Dr="conversations",Qi="messages",Ya={getConversations:async r=>{try{const e=Xe(Ie(be,Dr),ur("participants","array-contains",r),Et("lastMessageTime","desc"));return(await rt(e)).docs.map(s=>({id:s.id,...s.data(),lastMessageTime:s.data().lastMessageTime?.toDate?.()||new Date(s.data().lastMessageTime)}))}catch(e){throw console.error("Error fetching conversations:",e),e}},getConversationById:async r=>{try{const e=await oi(at(be,Dr,r));if(!e.exists())throw new Error("Conversation not found");const t={id:e.id,...e.data(),lastMessageTime:e.data().lastMessageTime?.toDate?.()||new Date(e.data().lastMessageTime)},s=Xe(Ie(be,Dr,r,Qi),Et("timestamp","asc")),c=(await rt(s)).docs.map(d=>({id:d.id,...d.data(),timestamp:d.data().timestamp?.toDate?.()||new Date(d.data().timestamp)}));return{conversation:t,messages:c}}catch(e){throw console.error("Error fetching conversation:",e),e}},createConversation:async(r,e,t,s)=>{try{const l=Xe(Ie(be,Dr),ur("participants","array-contains",r)),d=(await rt(l)).docs.find(g=>{const p=g.data().participants;return p.includes(t)&&p.length===2});return d?d.id:(await Tn(Ie(be,Dr),{participants:[r,t],participantNames:{[r]:e,[t]:s},lastMessage:"",lastMessageTime:De.now(),unreadCount:{[r]:0,[t]:0},createdAt:De.now()})).id}catch(l){throw console.error("Error creating conversation:",l),l}},sendMessage:async(r,e,t,s,l,c)=>{try{await Tn(Ie(be,Dr,r,Qi),{senderId:e,senderName:t,text:s,mediaUrl:l?.url||null,mediaType:l?.type||null,replyTo:c||null,timestamp:De.now(),read:!1});const d=at(be,Dr,r),h=await oi(d);if(h.exists()){const g=h.data().participants,y={...h.data().unreadCount};g.forEach(v=>{v!==e&&(y[v]=(y[v]||0)+1)}),await Vt(d,{lastMessage:l?`Sent a ${l.type}`:s.substring(0,100),lastMessageTime:De.now(),unreadCount:y})}}catch(d){throw console.error("Error sending message:",d),d}},markAsRead:async(r,e)=>{try{const t=at(be,Dr,r),s=await oi(t);if(s.exists()){const c={...s.data().unreadCount,[e]:0};await Vt(t,{unreadCount:c})}}catch(t){throw console.error("Error marking as read:",t),t}},deleteMessage:async(r,e)=>{try{const{deleteDoc:t}=await Dp(async()=>{const{deleteDoc:s}=await Promise.resolve().then(()=>_p);return{deleteDoc:s}},[]);await t(at(be,Dr,r,Qi,e))}catch(t){throw console.error("Error deleting message:",t),t}},clearChat:async r=>{try{const e=Xe(Ie(be,Dr,r,Qi)),t=await rt(e),{deleteDoc:s}=await Dp(async()=>{const{deleteDoc:d}=await Promise.resolve().then(()=>_p);return{deleteDoc:d}},void 0),l=t.docs.map(d=>s(at(be,Dr,r,Qi,d.id)));await Promise.all(l);const c=at(be,Dr,r);await Vt(c,{lastMessage:"Chat cleared",lastMessageTime:De.now()})}catch(e){throw console.error("Error clearing chat:",e),e}},deleteConversation:async r=>{try{const e=Xe(Ie(be,Dr,r,Qi)),t=await rt(e),{deleteDoc:s}=await Dp(async()=>{const{deleteDoc:c}=await Promise.resolve().then(()=>_p);return{deleteDoc:c}},void 0),l=t.docs.map(c=>s(at(be,Dr,r,Qi,c.id)));await Promise.all(l),await s(at(be,Dr,r))}catch(e){throw console.error("Error deleting conversation:",e),e}}};const a5=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OS=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();var i5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l5=k.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...h},g)=>k.createElement("svg",{ref:g,...i5,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:OS("lucide",l),...h},[...d.map(([p,y])=>k.createElement(p,y)),...Array.isArray(c)?c:[c]]));const ta=(r,e)=>{const t=k.forwardRef(({className:s,...l},c)=>k.createElement(l5,{ref:c,iconNode:e,className:OS(`lucide-${a5(r)}`,s),...l}));return t.displayName=`${r}`,t};const o5=ta("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const AN=ta("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const c5=ta("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const u5=ta("Paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);const CN=ta("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);const d5=ta("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const h5=ta("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);const f5=ta("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const RN=ta("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),IN=r=>r.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),DN=r=>{const e=["bg-blue-500","bg-purple-500","bg-indigo-500","bg-pink-500","bg-teal-500","bg-orange-500"];let t=0;for(let s=0;s<r.length;s++)t=r.charCodeAt(s)+((t<<5)-t);return e[Math.abs(t)%e.length]},m5=()=>{const[r,e]=k.useState([]),[t,s]=k.useState(null),[l,c]=k.useState([]),[d,h]=k.useState([]),[g,p]=k.useState(!1),[y,v]=k.useState(""),[w,S]=k.useState(""),[C,F]=k.useState(!0),[T,V]=k.useState(null),[E,B]=k.useState(!1),[Y,W]=k.useState(!1),[$,I]=k.useState(null),[L,j]=k.useState(null),[A,P]=k.useState(!1),[M,z]=k.useState(null),me=k.useRef(null),Oe=k.useRef(null),H=k.useRef(null),U="admin123",re="Admin",le=async()=>{F(!0);try{const ye=await Ya.getConversations(U);e(Array.isArray(ye)?ye:[]),V(null)}catch(ye){console.error(ye),V("Failed to load conversations"),e([])}finally{F(!1)}},pe=async()=>{try{const Ve=(await rt(Ie(be,"users"))).docs.map(Ae=>({id:Ae.id,name:Ae.data().firstName||Ae.data().email||"Unknown User"}));h(Ve)}catch(ye){console.error("Error fetching users:",ye)}},D=async ye=>{try{const{messages:Ve}=await Ya.getConversationById(ye.id);if(c(Ve),s(ye),await Ya.markAsRead(ye.id,U),await le(),Oe.current){const Ae=Oe.current;setTimeout(()=>{Ae.scrollTo({top:Ae.scrollHeight,behavior:"smooth"})},100)}}catch(Ve){console.error("Error loading conversation:",Ve)}},Q=async ye=>{if(ye.preventDefault(),!(!w.trim()&&!$||!t))try{let Ve;if($){B(!0);const Ae=ul(dl,`messages/${t.id}/${Date.now()}_${$.file.name}`);await NS(Ae,$.file),Ve={url:await Ku(Ae),type:$.type}}await Ya.sendMessage(t.id,U,re,w.trim(),Ve,M?.id),S(""),I(null),z(null),W(!1),await D(t),await le()}catch(Ve){console.error("Error sending message:",Ve),V("Failed to send message")}finally{B(!1)}},ae=ye=>{const Ve=ye.target.files?.[0];if(Ve){const Ae=Ve.type.startsWith("image/")?"image":"file";I({file:Ve,type:Ae})}},ge=async ye=>{if(t)try{await Ya.deleteMessage(t.id,ye),await D(t),j(null)}catch(Ve){console.error("Error deleting message:",Ve),V("Failed to delete message")}},G=ye=>{S(Ve=>Ve+ye)},ce=["","","","","","","","","","","","","",""],xe=async()=>{if(y)try{const ye=d.find(yt=>yt.id===y);if(!ye)return;const Ve=await Ya.createConversation(U,re,y,ye.name);await le(),p(!1),v("");const Ae=r.find(yt=>yt.id===Ve);Ae&&await D(Ae)}catch(ye){console.error("Error creating conversation:",ye),V("Failed to create conversation")}},Te=async()=>{if(t&&window.confirm("Are you sure you want to clear all messages? This cannot be undone."))try{await Ya.clearChat(t.id),await D(t),P(!1)}catch(ye){console.error("Error clearing chat:",ye),V("Failed to clear chat")}},Se=async()=>{if(t&&window.confirm("Delete this entire conversation? All messages will be lost."))try{await Ya.deleteConversation(t.id),s(null),await le(),P(!1)}catch(ye){console.error("Error deleting conversation:",ye),V("Failed to delete conversation")}};k.useEffect(()=>{le(),pe();const ye=Ve=>{const Ae=Ve.target;!Ae.closest(".emoji-trigger")&&!Ae.closest(".emoji-picker")&&W(!1),!Ae.closest(".message-options-trigger")&&!Ae.closest(".message-options-menu")&&j(null),!Ae.closest(".header-menu-trigger")&&!Ae.closest(".header-menu")&&P(!1)};return document.addEventListener("mousedown",ye),()=>document.removeEventListener("mousedown",ye)},[]);const He=ye=>{const Ve=ye.participants.find(Ae=>Ae!==U);return Ve?ye.participantNames[Ve]:"Unknown"},Ge=ye=>{const Ae=new Date().getTime()-new Date(ye).getTime(),yt=Math.floor(Ae/(1e3*60*60));return yt<24?new Date(ye).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):yt<48?"Yesterday":new Date(ye).toLocaleDateString("en-US",{month:"short",day:"numeric"})};return i.jsxs("div",{className:"flex h-screen bg-[#f8fafc] dark:bg-[#0f172a] overflow-hidden relative",children:[i.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-400/10 dark:bg-blue-600/5 blur-[120px] rounded-full pointer-events-none"}),i.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-indigo-400/10 dark:bg-indigo-600/5 blur-[120px] rounded-full pointer-events-none"}),i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative z-10",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-hidden p-4 md:p-6 lg:p-8",children:[i.jsxs("div",{className:"h-full flex flex-col max-w-7xl mx-auto w-full",children:[i.jsxs("div",{className:"mb-8 flex items-end justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-4xl font-extrabold text-slate-900 dark:text-white tracking-tight mb-2",children:"Messages"}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),i.jsx("p",{className:"text-sm font-medium",children:"Secure Communication Hub"})]})]}),i.jsxs(fe,{color:"blue",onClick:()=>p(!0),className:"shadow-lg shadow-blue-500/20 hover:shadow-blue-500/40 transition-all duration-300 scale-105 active:scale-95",children:[i.jsx("i",{className:"ri-add-line mr-2 text-lg"}),i.jsx("span",{className:"font-semibold",children:"Start Chat"})]})]}),T&&i.jsxs("div",{className:"mb-6 p-4 bg-red-50/80 dark:bg-red-900/20 backdrop-blur-md border border-red-100 dark:border-red-900/30 text-red-600 dark:text-red-400 rounded-2xl flex items-center gap-3 animate-in slide-in-from-top duration-300",children:[i.jsx("i",{className:"ri-error-warning-line text-xl"}),i.jsx("span",{className:"font-medium",children:T})]}),i.jsxs("div",{className:"flex-1 flex gap-6 overflow-hidden",children:[i.jsxs("div",{className:"w-80 lg:w-96 flex-shrink-0 bg-white/70 dark:bg-slate-800/50 backdrop-blur-xl rounded-[2rem] border border-white/20 dark:border-slate-700/50 shadow-2xl flex flex-col overflow-hidden transition-all duration-500 hover:shadow-blue-500/5",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700/50 flex items-center justify-between",children:[i.jsxs("h2",{className:"font-bold text-slate-900 dark:text-white text-lg flex items-center gap-2",children:[i.jsx("i",{className:"ri-chat-history-line text-blue-500"}),"Conversations"]}),i.jsx("span",{className:"text-xs font-bold px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded-full text-slate-500",children:r.length})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-2",children:C?i.jsxs("div",{className:"flex flex-col items-center justify-center h-48 gap-3",children:[i.jsx("div",{className:"w-8 h-8 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"}),i.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-widest",children:"Loading Chats"})]}):r.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center bg-slate-50/50 dark:bg-slate-900/20 rounded-3xl border border-dashed border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-2xl flex items-center justify-center mb-4",children:i.jsx("i",{className:"ri-chat-smile-2-line text-3xl text-slate-300"})}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"No active connections"}),i.jsx("button",{onClick:()=>p(!0),className:"mt-4 text-blue-500 text-sm font-bold hover:underline",children:"Start your first chat"})]}):r.map(ye=>{const Ve=He(ye),Ae=t?.id===ye.id;return i.jsxs("button",{onClick:()=>D(ye),className:`w-full p-4 rounded-2xl transition-all duration-300 text-left group relative overflow-hidden ${Ae?"bg-blue-500 dark:bg-blue-600 shadow-lg shadow-blue-500/20":"hover:bg-white dark:hover:bg-slate-700/50"}`,children:[Ae&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent"}),i.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex-shrink-0 flex items-center justify-center font-bold text-white shadow-md ${Ae?"bg-white/20":DN(Ve)}`,children:IN(Ve)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[i.jsx("span",{className:`font-bold truncate ${Ae?"text-white":"text-slate-900 dark:text-white"}`,children:Ve}),i.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tighter ${Ae?"text-blue-100":"text-slate-400"}`,children:Ge(ye.lastMessageTime)})]}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("p",{className:`text-xs truncate ${Ae?"text-blue-50":"text-slate-500 dark:text-slate-400"}`,children:ye.lastMessage||"Sent a secure message"}),ye.unreadCount[U]>0&&i.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-[10px] font-bold ring-2 ring-white dark:ring-slate-800 animate-bounce",children:ye.unreadCount[U]})]})]})]})]},ye.id)})})]}),i.jsx("div",{className:"flex-1 bg-white/70 dark:bg-slate-800/50 backdrop-blur-xl rounded-[2rem] border border-white/20 dark:border-slate-700/50 shadow-2xl flex flex-col overflow-hidden relative",children:t?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 dark:border-slate-700/50 flex items-center justify-between bg-white/30 dark:bg-slate-800/30",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-white ${DN(He(t))}`,children:IN(He(t))}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-slate-900 dark:text-white leading-tight",children:He(t)}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Active Member"})]})]})]}),i.jsxs("div",{className:"flex gap-2 relative",children:[i.jsx("button",{className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors text-slate-400",children:i.jsx("i",{className:"ri-phone-line text-lg"})}),i.jsx("button",{onClick:()=>P(!A),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors text-slate-400 header-menu-trigger",children:i.jsx("i",{className:"ri-more-2-fill text-lg"})}),A&&i.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-2xl p-2 z-30 animate-in zoom-in-95 duration-200 header-menu",children:[i.jsxs("button",{onClick:()=>{},className:"w-full text-left px-4 py-2.5 text-sm font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-xl flex items-center gap-3 transition-colors",children:[i.jsx("i",{className:"ri-user-settings-line text-lg text-blue-500"})," View Profile"]}),i.jsxs("button",{onClick:Te,className:"w-full text-left px-4 py-2.5 text-sm font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-xl flex items-center gap-3 transition-colors",children:[i.jsx("i",{className:"ri-delete-bin-line text-lg text-orange-500"})," Clear Chat"]}),i.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-700 my-1 mx-2"}),i.jsxs("button",{onClick:Se,className:"w-full text-left px-4 py-2.5 text-sm font-bold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl flex items-center gap-3 transition-colors",children:[i.jsx("i",{className:"ri-chat-delete-line text-lg"})," Delete Chat"]})]})]})]}),i.jsxs("div",{ref:Oe,className:"flex-1 overflow-y-auto p-8 space-y-6 custom-scrollbar bg-slate-50/30 dark:bg-slate-900/10",children:[l.map((ye,Ve)=>{const Ae=ye.senderId===U,yt=Ve===0||new Date(ye.timestamp).getTime()-new Date(l[Ve-1].timestamp).getTime()>3e5,Yt=ye.replyTo?l.find(fs=>fs.id===ye.replyTo):null;return i.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-bottom-2 duration-300 group",children:[yt&&i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest bg-slate-100 dark:bg-slate-800/80 px-3 py-1 rounded-full backdrop-blur-sm",children:Ge(ye.timestamp)})}),i.jsx("div",{className:`flex ${Ae?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`group relative max-w-[80%] md:max-w-[70%] ${Ae?"items-end":"items-start"}`,children:[Yt&&i.jsxs("div",{className:"mb-1 px-3 py-1.5 rounded-xl text-[11px] border-l-4 border-blue-500 bg-slate-100 dark:bg-slate-800 text-slate-500 max-w-full truncate",children:[i.jsx("span",{className:"font-bold block text-blue-500 mb-0.5",children:Yt.senderName}),Yt.text||"Media attachment"]}),i.jsxs("div",{className:`rounded-2xl shadow-sm transition-all duration-300 relative ${Ae?"bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-tr-none shadow-blue-500/10 hover:shadow-blue-500/20":"bg-white dark:bg-slate-700 text-slate-900 dark:text-white rounded-tl-none border border-white/50 dark:border-slate-600/50 hover:border-blue-200 dark:hover:border-blue-900"}`,children:[ye.mediaUrl&&i.jsx("div",{className:"mb-2 overflow-hidden rounded-xl",children:ye.mediaType==="image"?i.jsx("img",{src:ye.mediaUrl,alt:"attachment",className:"max-w-full rounded-lg hover:scale-[1.02] transition-transform cursor-pointer",onClick:()=>window.open(ye.mediaUrl,"_blank")}):i.jsxs("a",{href:ye.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[i.jsx(AN,{size:20}),i.jsx("span",{className:"text-sm font-medium",children:"Download Attachment"})]})}),ye.text&&i.jsx("p",{className:"text-[15px] leading-relaxed font-medium px-5 py-3",children:ye.text}),i.jsxs("div",{className:`absolute top-0 ${Ae?"right-full mr-2":"left-full ml-2"} opacity-0 group-hover:opacity-100 transition-opacity flex items-center`,children:[i.jsx("button",{onClick:()=>j(L===ye.id?null:ye.id),className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg text-slate-400 message-options-trigger",children:i.jsx(o5,{size:16})}),L===ye.id&&i.jsxs("div",{className:`absolute top-full z-20 mt-1 w-32 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-xl p-1 overflow-hidden animate-in zoom-in-95 duration-200 message-options-menu ${Ae?"right-0":"left-0"}`,children:[i.jsxs("button",{onClick:()=>{z(ye),j(null)},className:"w-full text-left px-3 py-2 text-xs font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-lg flex items-center gap-2",children:[i.jsx(CN,{size:14})," Reply"]}),Ae&&i.jsxs("button",{onClick:()=>ge(ye.id),className:"w-full text-left px-3 py-2 text-xs font-bold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg flex items-center gap-2",children:[i.jsx(f5,{size:14})," Delete"]})]})]})]}),i.jsx("div",{className:`flex items-center gap-2 mt-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ${Ae?"flex-row-reverse":"flex-row"}`,children:i.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-tighter",children:Ae?"Delivered":He(t)})})]})})]},Ve)}),i.jsx("div",{ref:me})]}),i.jsxs("div",{className:"p-6 bg-white/30 dark:bg-slate-800/30 backdrop-blur-md border-t border-slate-100 dark:border-slate-700/50",children:[i.jsxs("div",{className:"max-w-4xl mx-auto mb-3 space-y-2",children:[M&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800 animate-in slide-in-from-bottom-2 duration-200",children:[i.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[i.jsx(CN,{size:16,className:"text-blue-500 flex-shrink-0"}),i.jsxs("div",{className:"min-w-0",children:[i.jsxs("span",{className:"text-[10px] font-bold text-blue-500 uppercase block",children:["Replying to ",M.senderName]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 truncate",children:M.text||"Media"})]})]}),i.jsx("button",{onClick:()=>z(null),className:"text-slate-400 hover:text-red-500 p-1",children:i.jsx(RN,{size:16})})]}),$&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-teal-50 dark:bg-teal-900/20 rounded-xl border border-teal-200 dark:border-teal-800 animate-in slide-in-from-bottom-2 duration-200",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[$.type==="image"?i.jsx(c5,{size:20,className:"text-teal-500"}):i.jsx(AN,{size:20,className:"text-teal-500"}),i.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:$.file.name})]}),i.jsx("button",{onClick:()=>I(null),className:"text-slate-400 hover:text-red-500 p-1",children:i.jsx(RN,{size:16})})]})]}),i.jsxs("form",{onSubmit:Q,className:"relative max-w-4xl mx-auto flex items-center gap-3",children:[i.jsxs("div",{className:"flex-1 relative group",children:[i.jsx("input",{type:"text",value:w,onChange:ye=>S(ye.target.value),placeholder:E?"Uploading media...":"Type a message...",disabled:E,className:"w-full pl-6 pr-14 py-4 rounded-[1.5rem] bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all duration-300 shadow-inner"}),i.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2 text-slate-400",children:[i.jsx("button",{type:"button",onClick:()=>H.current?.click(),className:"hover:text-blue-500 transition-colors p-1",children:i.jsx(u5,{size:20})}),i.jsx("input",{type:"file",ref:H,className:"hidden",onChange:ae}),i.jsx("button",{type:"button",onClick:()=>W(!Y),className:`hover:text-blue-500 transition-colors p-1 emoji-trigger ${Y?"text-blue-500":""}`,children:i.jsx(h5,{size:20})})]}),Y&&i.jsx("div",{className:"absolute bottom-full right-0 mb-4 p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-2xl z-20 grid grid-cols-7 gap-2 animate-in zoom-in-95 duration-200 emoji-picker",children:ce.map(ye=>i.jsx("button",{type:"button",onClick:()=>G(ye),className:"text-xl hover:scale-125 transition-transform p-1",children:ye},ye))})]}),i.jsx("button",{type:"submit",disabled:!w.trim()&&!$||E,className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-all duration-300 ${(w.trim()||$)&&!E?"bg-blue-500 text-white shadow-lg shadow-blue-500/30 scale-100 border-none":"bg-slate-100 dark:bg-slate-800 text-slate-400 scale-95 border border-slate-200 dark:border-slate-700 cursor-not-allowed"}`,children:E?i.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-slate-500 rounded-full animate-spin"}):i.jsx(d5,{size:24,className:`transition-transform ${w.trim()||$?"translate-x-0.5 -translate-y-0.5":""}`})})]})]})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-50/30 dark:bg-slate-900/10",children:i.jsxs("div",{className:"max-w-xs text-center animate-in fade-in zoom-in duration-700",children:[i.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 shadow-2xl shadow-blue-500/20 rotate-12",children:i.jsx("i",{className:"ri-message-3-fill text-5xl text-white -rotate-12"})}),i.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white mb-2 tracking-tight",children:"Select Chat"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium leading-relaxed",children:"Stay connected with your community. Select a conversation to start messaging."}),i.jsx("button",{onClick:()=>p(!0),className:"mt-8 px-6 py-3 bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 text-sm font-bold text-blue-500 hover:shadow-md transition-all active:scale-95",children:"Start New Journey"})]})})})]})]}),g&&i.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-in fade-in duration-300",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-[2.5rem] max-w-md w-full shadow-2xl border border-white/20 overflow-hidden animate-in zoom-in-95 duration-300",children:i.jsxs("div",{className:"p-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:"New Chat"}),i.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Connect with a community member"})]}),i.jsx("button",{onClick:()=>p(!1),className:"w-10 h-10 flex items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-xl hover:bg-slate-200 transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-slate-600 dark:text-gray-300"})})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 rounded-3xl border border-slate-100 dark:border-slate-700",children:i.jsx(xf,{label:"Select Resident",options:d,value:y,onChange:ye=>v(ye),placeholder:"Search by name...",className:"searchable-dropdown-custom"})}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(fe,{variant:"outline",className:"flex-1 h-14 rounded-2xl font-bold border-2 hover:bg-slate-50",onClick:()=>p(!1),children:"Maybe Later"}),i.jsx(fe,{color:"blue",className:"flex-1 h-14 rounded-2xl font-bold shadow-lg shadow-blue-500/20",onClick:xe,disabled:!y,children:"Connect Now"})]})]})]})})})]})]})]})},Kc="cases",Yc=["Matching","Screening","Medical","Legal","Pregnancy","Completed"],zs={getAllCases:async()=>{try{const r=Xe(Ie(be,Kc),Et("updatedAt","desc"));return(await rt(r)).docs.map(t=>{const s=t.data();return{id:t.id,...s,createdAt:s.createdAt?.toDate?.()||new Date(s.createdAt),updatedAt:s.updatedAt?.toDate?.()||new Date(s.updatedAt),stageHistory:(s.stageHistory||[]).map(l=>({...l,completedAt:l.completedAt?.toDate?.()||new Date(l.completedAt)}))}})}catch(r){throw console.error("Error fetching cases:",r),r}},getCaseById:async r=>{try{const e=at(be,Kc,r),t=await oi(e);if(!t.exists())return null;const s=t.data();return{id:t.id,...s,createdAt:s.createdAt?.toDate?.()||new Date(s.createdAt),updatedAt:s.updatedAt?.toDate?.()||new Date(s.updatedAt),stageHistory:(s.stageHistory||[]).map(l=>({...l,completedAt:l.completedAt?.toDate?.()||new Date(l.completedAt)}))}}catch(e){throw console.error("Error fetching case:",e),e}},createCase:async r=>{try{return(await Tn(Ie(be,Kc),{...r,stageHistory:[],createdAt:De.now(),updatedAt:De.now()})).id}catch(e){throw console.error("Error creating case:",e),e}},updateCaseStage:async(r,e,t,s)=>{try{const l=await zs.getCaseById(r);if(!l)throw new Error("Case not found");const c=Yc.indexOf(l.currentStage);if(Yc.indexOf(e)<=c&&e!=="Completed")throw new Error("Cannot move to a previous stage");const h={stage:l.currentStage,completedAt:new Date,completedBy:t,notes:s},g=[...l.stageHistory,h],p=at(be,Kc,r);await Vt(p,{currentStage:e,stageHistory:g.map(y=>({...y,completedAt:De.fromDate(y.completedAt)})),updatedAt:De.now()})}catch(l){throw console.error("Error updating case stage:",l),l}},getCasesByStage:async r=>{try{const e=Xe(Ie(be,Kc),ur("currentStage","==",r),Et("updatedAt","desc"));return(await rt(e)).docs.map(s=>{const l=s.data();return{id:s.id,...l,createdAt:l.createdAt?.toDate?.()||new Date(l.createdAt),updatedAt:l.updatedAt?.toDate?.()||new Date(l.updatedAt),stageHistory:(l.stageHistory||[]).map(c=>({...c,completedAt:c.completedAt?.toDate?.()||new Date(c.completedAt)}))}})}catch(e){console.warn("Error fetching cases by stage (possibly missing index), trying simple fetch",e);try{return(await zs.getAllCases()).filter(s=>s.currentStage===r)}catch(t){return console.error("Fallback fetch also failed",t),[]}}},getNextStage:r=>{const e=Yc.indexOf(r);return e===-1||e===Yc.length-1?null:Yc[e+1]}},g5=()=>{const[r,e]=k.useState([]),[t,s]=k.useState("all"),[l,c]=k.useState(null),[d,h]=k.useState(!1),[g,p]=k.useState(!1),[y,v]=k.useState(""),[w,S]=k.useState(!0),[C,F]=k.useState(null),[T,V]=k.useState({surrogateId:"",surrogateName:"",parentId:"",parentName:"",notes:""}),[E,B]=k.useState(null),[Y,W]=k.useState(null),$="admin123",I=["Matching","Screening","Medical","Legal","Pregnancy","Completed"],L=async()=>{S(!0);try{const U=await zs.getAllCases();e(Array.isArray(U)?U:[]),F(null)}catch(U){console.error(U),F("Failed to load cases"),e([])}finally{S(!1)}};k.useEffect(()=>{L()},[]);const j=(U,re,le)=>{const pe=le.formData,D=pe?.firstName||le.firstName||"",Q=pe?.lastName||le.lastName||"",ae=[D,Q].filter(Boolean).join(" ")||(le.email??"Unknown user"),ge=pe?.city||"",G=pe?.state||"",ce=[ge,G].filter(Boolean).join(", "),xe=le.status||void 0,Te=!!le.profileCompleted,Se=!!le.form2Completed;let He="",Ge="gray";return re==="Surrogate"?xe==="Pregnant"?(He="Not eligible: pregnant",Ge="red"):!Te||!Se?(He="Needs screening",Ge="yellow"):(He="Ready for matching",Ge="green"):!Te||!Se?(He="Complete intake first",Ge="yellow"):xe==="Matched"?(He="Already matched",Ge="red"):(He="Ready for matching",Ge="green"),{id:U,name:ae,email:le.email||"",role:re,status:xe,profileCompleted:Te,form2Completed:Se,location:ce,readinessLabel:He,readinessColor:Ge}},A=async(U,re)=>{if(U)try{const le=at(be,"users",U),pe=await oi(le);if(!pe.exists())return;const D=pe.data(),Q=j(pe.id,re,D);re==="Surrogate"?B(Q):W(Q)}catch(le){console.error("Failed to load user preview",le)}},P=async()=>{if(!T.surrogateId||!T.parentId){F("Please select both surrogate and parent");return}try{await zs.createCase({surrogateId:T.surrogateId,surrogateName:T.surrogateName,parentId:T.parentId,parentName:T.parentName,currentStage:"Matching",notes:T.notes}),await L(),p(!1),V({surrogateId:"",surrogateName:"",parentId:"",parentName:"",notes:""}),B(null),W(null),F(null)}catch(U){console.error(U),F("Failed to create case")}},M=t==="all"?r:r.filter(U=>U.currentStage===t),z=U=>{switch(U){case"Matching":case"Screening":return"blue";case"Medical":case"Legal":case"Pregnancy":return"green";case"Completed":return"green";default:return"blue"}},me=U=>(I.indexOf(U)+1)/I.length*100,Oe=async()=>{if(l)try{const U=zs.getNextStage(l.currentStage);if(!U){F("Case is already at the final stage");return}await zs.updateCaseStage(l.id,U,$,y),await L(),h(!1),c(null),v("")}catch(U){console.error(U),F("Failed to progress case")}},H=U=>new Date(U).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return i.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[i.jsx(Zt,{}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsx(er,{}),i.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Milestones"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Journey stage management and tracking."})]}),i.jsxs(fe,{color:"blue",onClick:()=>p(!0),children:[i.jsx("i",{className:"ri-add-line mr-2"}),"New Case"]})]})}),i.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:()=>s("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t==="all"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:["All (",r.length,")"]}),I.map(U=>i.jsxs("button",{onClick:()=>s(U),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===U?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[U," (",r.filter(re=>re.currentStage===U).length,")"]},U))]}),C&&i.jsx("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:C}),w?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-blue-600"})}):i.jsx("div",{className:"space-y-4",children:M.length===0?i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-700",children:[i.jsx("i",{className:"ri-roadmap-line text-4xl text-gray-400 mb-2"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No cases found."})]}):M.map(U=>i.jsx(we,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>c(U),children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[U.surrogateName," & ",U.parentName]}),i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Started ",H(U.createdAt)]})]}),i.jsx(_e,{color:z(U.currentStage),children:U.currentStage})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Journey Progress"}),i.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Math.round(me(U.currentStage)),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:`${me(U.currentStage)}%`}})})]}),i.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:I.map((re,le)=>{const pe=I.indexOf(U.currentStage),D=le<pe,Q=le===pe;return i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-xs font-medium ${D?"bg-green-500 text-white":Q?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:D?i.jsx("i",{className:"ri-check-line"}):le+1}),le<I.length-1&&i.jsx("div",{className:`w-8 h-0.5 ${D?"bg-green-500":"bg-gray-200 dark:bg-gray-700"}`})]},re)})}),U.notes&&i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:["Note: ",U.notes]})]})},U.id))}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Case Details"}),i.jsx("button",{onClick:()=>c(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-6 rounded-xl space-y-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Surrogate"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:l.surrogateName})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Parent"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:l.parentName})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Current Stage"}),i.jsx(_e,{color:z(l.currentStage),children:l.currentStage})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Started"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:H(l.createdAt)})]})]})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Stage History"}),l.stageHistory.length===0?i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No completed stages yet"}):i.jsx("div",{className:"space-y-3",children:l.stageHistory.map((U,re)=>i.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0",children:i.jsx("i",{className:"ri-check-line text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:U.stage}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:H(U.completedAt)})]}),U.notes&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:U.notes})]})]},re))})]}),i.jsx("div",{className:"flex gap-3 pt-2",children:zs.getNextStage(l.currentStage)?i.jsxs(fe,{color:"blue",className:"flex-1",onClick:()=>{h(!0)},children:[i.jsx("i",{className:"ri-arrow-right-line mr-2"}),"Progress to"," ",zs.getNextStage(l.currentStage)]}):i.jsxs("div",{className:"flex-1 p-3 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg text-center font-medium",children:[i.jsx("i",{className:"ri-check-double-line mr-2"}),"Journey Completed"]})})]})]})})}),d&&l&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60] backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-md w-full shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Progress Stage"}),i.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:i.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Progress case from"," ",i.jsx("span",{className:"font-semibold",children:l.currentStage})," ","to"," ",i.jsx("span",{className:"font-semibold",children:zs.getNextStage(l.currentStage)}),"?"]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Completion Notes (Optional)"}),i.jsx("textarea",{value:y,onChange:U=>v(U.target.value),rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Add any notes about this stage completion..."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(fe,{variant:"outline",className:"flex-1",onClick:()=>h(!1),children:"Cancel"}),i.jsx(fe,{color:"blue",className:"flex-1",onClick:Oe,children:"Confirm Progress"})]})]})]})})}),g&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 backdrop-blur-sm",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-md w-full shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Create New Case"}),i.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx("i",{className:"ri-close-line text-xl text-gray-600 dark:text-gray-400"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50/60 dark:bg-gray-900/40 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-pink-100 dark:bg-pink-900 flex items-center justify-center",children:i.jsx("i",{className:"ri-user-heart-line text-pink-600 dark:text-pink-300"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Surrogate"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Gestational carrier profile"})]})]}),E&&i.jsx(_e,{color:E.readinessColor,size:"sm",children:E.readinessLabel})]}),i.jsx(ku,{value:T.surrogateId,onChange:U=>{V({...T,surrogateId:U}),U||B(null)},onSelect:U=>{V({...T,surrogateId:U.id,surrogateName:U.name.split(" (")[0]}),A(U.id,"Surrogate")},role:"Surrogate",label:"Select Surrogate",placeholder:"Choose a surrogate...",required:!0}),E&&i.jsxs("div",{className:"mt-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900/80 p-3 space-y-1",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:E.name}),E.location&&i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:E.location}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-300",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"ri-verified-badge-line text-blue-500"}),i.jsxs("span",{children:["Profile"," ",E.profileCompleted?"complete":"incomplete"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"ri-stethoscope-line text-emerald-500"}),i.jsxs("span",{children:["Screening"," ",E.form2Completed?"complete":"pending"]})]}),E.status&&i.jsxs("div",{className:"flex items-center gap-1 col-span-2",children:[i.jsx("i",{className:"ri-pulse-line text-purple-500"}),i.jsxs("span",{children:["Status: ",E.status]})]})]})]})]}),i.jsxs("div",{className:"rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50/60 dark:bg-gray-900/40 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:i.jsx("i",{className:"ri-parent-line text-blue-600 dark:text-blue-300"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Intended Parent"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"IP profile"})]})]}),Y&&i.jsx(_e,{color:Y.readinessColor,size:"sm",children:Y.readinessLabel})]}),i.jsx(ku,{value:T.parentId,onChange:U=>{V({...T,parentId:U}),U||W(null)},onSelect:U=>{V({...T,parentId:U.id,parentName:U.name.split(" (")[0]}),A(U.id,"Intended Parent")},role:"Intended Parent",label:"Select Parent",placeholder:"Choose a parent...",required:!0}),Y&&i.jsxs("div",{className:"mt-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900/80 p-3 space-y-1",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:Y.name}),Y.location&&i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:Y.location}),i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-300",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"ri-verified-badge-line text-blue-500"}),i.jsxs("span",{children:["Profile"," ",Y.profileCompleted?"complete":"incomplete"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("i",{className:"ri-file-list-3-line text-emerald-500"}),i.jsxs("span",{children:["Intake"," ",Y.form2Completed?"complete":"pending"]})]}),Y.status&&i.jsxs("div",{className:"flex items-center gap-1 col-span-2",children:[i.jsx("i",{className:"ri-pulse-line text-purple-500"}),i.jsxs("span",{children:["Status: ",Y.status]})]})]})]})]})]}),T.surrogateName&&T.parentName&&i.jsxs("div",{className:"rounded-xl border border-blue-100 dark:border-blue-900/40 bg-blue-50 dark:bg-blue-900/20 p-4 flex items-center gap-3",children:[i.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-600 flex items-center justify-center text-white flex-shrink-0",children:i.jsx("i",{className:"ri-link-line"})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[T.surrogateName," "," ",T.parentName]}),i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:"This journey will start at Matching and track Medical, Legal, and Pregnancy milestones."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Initial Notes (Optional)"}),i.jsx("textarea",{value:T.notes,onChange:U=>V({...T,notes:U.target.value}),rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Add any initial notes about this case..."})]}),i.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:i.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[i.jsx("i",{className:"ri-information-line mr-1"}),"Ensure both profiles are fully screened and accepted before creating a journey. The case will start at the"," ",i.jsx("span",{className:"font-semibold",children:"Matching"})," stage."]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(fe,{variant:"outline",className:"flex-1",onClick:()=>p(!1),children:"Cancel"}),i.jsx(fe,{color:"blue",className:"flex-1",onClick:P,disabled:!T.surrogateId||!T.parentId,children:"Create Case"})]})]})]})})})]})]})]})},p5=()=>{const r=dn();return i.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 overflow-x-hidden",children:[i.jsx("nav",{className:"fixed w-full z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-100 dark:border-gray-800",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between h-16 items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:i.jsx("i",{className:"ri-heart-line text-white text-xl"})}),i.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Family Matters"})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>r("/auth/login"),className:"text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Log In"}),i.jsx("button",{onClick:()=>r("/"),className:"px-4 py-2 rounded-full bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition-colors shadow-lg shadow-blue-600/20",children:"Dashboard"})]})]})})}),i.jsxs("section",{className:"relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("div",{className:"absolute top-0 right-0 w-[800px] h-[800px] bg-purple-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-[600px] h-[600px] bg-blue-500/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/4"})]}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center",children:[i.jsx("span",{className:"inline-block px-4 py-1.5 rounded-full bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm font-medium mb-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:"Reimagining Surrogacy Management"}),i.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold text-gray-900 dark:text-white mb-6 tracking-tight animate-in fade-in slide-in-from-bottom-8 duration-700 delay-100",children:["Making Family",i.jsx("br",{}),i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:"Actually Matters"})]}),i.jsx("p",{className:"max-w-2xl mx-auto text-xl text-gray-600 dark:text-gray-300 mb-10 animate-in fade-in slide-in-from-bottom-8 duration-700 delay-200",children:"A comprehensive, modern platform designed to streamline the journey for agencies, surrogates, and intended parents."}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 animate-in fade-in slide-in-from-bottom-8 duration-700 delay-300",children:[i.jsx("button",{onClick:()=>r("/"),className:"w-full sm:w-auto px-8 py-4 rounded-full bg-blue-600 hover:bg-blue-700 text-white font-semibold text-lg transition-transform hover:scale-105 shadow-xl shadow-blue-600/20",children:"Enter Dashboard"}),i.jsx("button",{className:"w-full sm:w-auto px-8 py-4 rounded-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Learn More"})]})]})]}),i.jsx("section",{className:"py-20 bg-gray-50 dark:bg-gray-800/50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:[{label:"Families Created",value:"500+"},{label:"Active Surrogates",value:"1,200+"},{label:"Success Rate",value:"98%"},{label:"Global Reach",value:"30+ Countries"}].map((e,t)=>i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:e.value}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e.label})]},t))})})}),i.jsx("section",{className:"py-24 relative overflow-hidden",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Everything you need"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Powerful tools built specifically for the nuances of surrogacy program management."})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[{icon:"ri-dashboard-3-line",title:"Centralized Dashboard",desc:"Get a bird's eye view of all active cases, pending applications, and critical alerts in one place."},{icon:"ri-user-heart-line",title:"Smart Matching",desc:"AI-assisted matching tools to help find the perfect connection between surrogates and intended parents."},{icon:"ri-secure-payment-line",title:"Secure & Compliant",desc:"Enterprise-grade security ensuring all sensitive medical and personal data remains protected."},{icon:"ri-chat-smile-3-line",title:"Real-time Communication",desc:"Integrated messaging system keeping agencies, parents, and surrogates connected effortlessly."},{icon:"ri-calendar-event-line",title:"Journey Tracking",desc:"Detailed milestone tracking from initial application through to post-birth legalities."},{icon:"ri-file-text-line",title:"Doc Management",desc:"Streamlined document collection, verification, and storage workflows."}].map((e,t)=>i.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl border border-gray-100 dark:border-gray-700 hover:shadow-xl transition-shadow group",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:i.jsx("i",{className:`${e.icon} text-2xl text-blue-600 dark:text-blue-400`})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:e.title}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:e.desc})]},t))})]})}),i.jsxs("section",{className:"py-24 bg-blue-600 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1549420042-2d109bb333e2?q=80&w=2670&auto=format&fit=crop')] bg-cover bg-center opacity-10 mix-blend-overlay"}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 text-center relative z-10",children:[i.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-8",children:"Ready to modernize your agency?"}),i.jsx("button",{onClick:()=>r("/auth/register"),className:"px-8 py-4 bg-white text-blue-600 rounded-full font-bold text-lg hover:bg-gray-100 transition-colors shadow-xl",children:"Get Started Now"})]})]}),i.jsx("footer",{className:"bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 py-12",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center gap-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded-lg flex items-center justify-center",children:i.jsx("i",{className:"ri-heart-line text-white text-xs"})}),i.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Family Matters"})]}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:" 2026 Family Matters. All rights reserved."}),i.jsxs("div",{className:"flex gap-6",children:[i.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx("i",{className:"ri-twitter-line text-xl"})}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx("i",{className:"ri-linkedin-fill text-xl"})}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i.jsx("i",{className:"ri-instagram-line text-xl"})})]})]})})]})},x5=[{path:"/landing",element:i.jsx(p5,{})},{path:"/",element:i.jsx(bP,{})},{path:"/auth/login",element:i.jsx(JP,{})},{path:"/auth/signup",element:i.jsx(ZP,{})},{path:"/requests",element:i.jsx(vP,{})},{path:"/inquiries",element:i.jsx(wP,{})},{path:"/surrogates",element:i.jsx(_P,{})},{path:"/surrogates/:id",element:i.jsx(UP,{})},{path:"/parents",element:i.jsx(VP,{})},{path:"/parents/:id",element:i.jsx(BP,{})},{path:"/matches",element:i.jsx(qP,{})},{path:"/appointments",element:i.jsx($P,{})},{path:"/calendar",element:i.jsx(YP,{})},{path:"/payments",element:i.jsx(QP,{})},{path:"/medical",element:i.jsx(XP,{})},{path:"/contracts",element:i.jsx(WP,{})},{path:"/reports",element:i.jsx(GP,{})},{path:"/settings",element:i.jsx(KP,{})},{path:"/tasks",element:i.jsx(t5,{})},{path:"/baby-watch",element:i.jsx(r5,{})},{path:"/messages",element:i.jsx(m5,{})},{path:"/milestones",element:i.jsx(g5,{})},{path:"*",element:i.jsx(e5,{})}];function y5(){return LA(x5)}function b5(){return i.jsx(fP,{children:i.jsx(hP,{children:i.jsx(bC,{basename:"/",children:i.jsx(y5,{})})})})}iA.createRoot(document.getElementById("root")).render(i.jsx(k.StrictMode,{children:i.jsx(b5,{})}));
//# sourceMappingURL=index-DtNqDb7A.js.map
